
> cps-store-backend@1.0.0 dev
> nodemon --watch src --watch .env --ext ts,json --ignore src/**/*.test.ts --ignore node_modules --ignore dist --exec "ts-node src/index.ts"

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): src/**/* .env[39m
[33m[nodemon] watching extensions: ts,json[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
âœ… Environment variables validated successfully

========================================
ğŸ”§ Environment Variables Check
========================================
ğŸŒ NODE_ENV: development
ğŸšª PORT: 5001
ğŸ”— MONGODB_URI present: âœ… Yes
ğŸ”‘ JWT_SECRET present: âœ… Yes
ğŸ”‘ JWT_REFRESH_SECRET present: âœ… Yes
â˜ï¸ CLOUDINARY_CLOUD_NAME present: âœ… Yes
ğŸ“§ MOCK_OTP: true
[ENV][SMS] FAST2SMS key loaded: true
========================================

Google OAuth credentials: { clientId: 'Present', clientSecret: 'Present' }
ğŸ”‘ Razorpay configured with key: Live Key
App.ts loaded successfully
Payment routes registered successfully
Razorpay routes registered successfully
OTP routes registered successfully
Notification routes registered successfully
Upload routes registered successfully

ğŸ”— Connecting to MongoDB Atlas...
ğŸ“ MongoDB URI: mongodb+srv://charan:***@csstore.2mobf49.mongodb.net/cps-store?retryWrites=true&w=majority&appName=csstore
ğŸŒ Environment: development
ğŸ”— Mongoose connected to MongoDB Atlas
âœ… MongoDB Atlas connected successfully
ğŸ—„ï¸  Database: cps-store
ğŸ  Host: ac-vjrq9op-shard-00-00.2mobf49.mongodb.net

ğŸ”§ Bootstrapping dev admin user...
âœ… Dev admin user updated successfully
ğŸ“§ Email: gcs.charan@gmail.com
ğŸ“± Phone: 9391795162
ğŸ”‘ Password: Gcs@2004
ğŸ‘¤ Role: admin
ğŸ” isAdmin: true
ğŸ¯ Dev admin bootstrap completed
ğŸšš Initializing delivery partner load tracking...
ğŸšš Delivery partner load service initialized (MongoDB-only mode)
ğŸ”„ Found existing processes on port 5001, closing them gracefully...
ğŸ“¤ Sent SIGTERM to process 18061
âœ… Port 5001 is now available
ğŸš€ Server running on port 5001
ğŸ¥ Health check: http://localhost:5001/health
ğŸ” [GetProducts] Request received: {
  limit: '100',
  page: 1,
  category: undefined,
  minPrice: undefined,
  maxPrice: undefined,
  sortBy: undefined,
  sortOrder: undefined,
  search: undefined,
  tags: undefined
}
ğŸ“Š [GetProducts] Query built: { filter: {}, sort: { createdAt: -1 } }
ğŸ–¼ï¸ [Normalize] Input images: [
  {
    "variants": {
      "micro": "httnode:events:485
      throw er; // Unhandled 'error' event
      ^

Error: read EIO
    at TTY.onStreamRead (node:internal/stream_base_commons:216:20)
Emitted 'error' event on ReadStream instance at:
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  errno: -5,
  code: 'EIO',
  syscall: 'read'
}

Node.js v23.7.0
: "http://res.cloudinary.com/dytgofbgw/image/upload/c_fill,h_1200,w_1200/v1/products/fvxbuzbodkrupm3pi60c",
      "original": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/fvxbuzbodkrupm3pi60c"
    },
    "formats": {
      "avif": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/fvxbuzbodkrupm3pi60c.avif",
      "webp": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/fvxbuzbodkrupm3pi60c.webp",
      "jpg": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/fvxbuzbodkrupm3pi60c.jpg"
    },
    "metadata": {
      "width": 899,
      "height": 1599,
      "aspectRatio": 0.5622263914946842
    },
    "publicId": "products/fvxbuzbodkrupm3pi60c",
    "_id": "692c2946975ac0b5bdef33ee"
  }
]
ğŸ–¼ï¸ [Normalize] Already new schema, returning as-is
ğŸ–¼ï¸ [Normalize] Input images: [
  {
    "variants": {
      "micro": "http://res.cloudinary.com/dytgofbgw/image/upload/c_fill,h_16,w_16/v1/products/chttlvm7e5ojbw2xfr7x",
      "thumb": "http://res.cloudinary.com/dytgofbgw/image/upload/c_fill,h_150,w_150/v1/products/chttlvm7e5ojbw2xfr7x",
      "small": "http://res.cloudinary.com/dytgofbgw/image/upload/c_fill,h_300,w_300/v1/products/chttlvm7e5ojbw2xfr7x",
      "medium": "http://res.cloudinary.com/dytgofbgw/image/upload/c_fill,h_600,w_600/v1/products/chttlvm7e5ojbw2xfr7x",
      "large": "http://res.cloudinary.com/dytgofbgw/image/upload/c_fill,h_1200,w_1200/v1/products/chttlvm7e5ojbw2xfr7x",
      "original": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/chttlvm7e5ojbw2xfr7x"
    },
    "formats": {
      "avif": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/chttlvm7e5ojbw2xfr7x.avif",
      "webp": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/chttlvm7e5ojbw2xfr7x.webp",
      "jpg": "http://res.cloudinary.com/dytgofbgw/image/upload/v1/products/chttlvm7e5ojbw2xfr7x.jpg"
    },
    "metadata": {
      "width": 800,
      "height": 800,
      "aspectRatio": 1
    },
    "publicId": "products/chttlvm7e5ojbw2xfr7x",
    "_id": "692c25af1cc41d72785728b7"
  }
]
ğŸ–¼ï¸ [Normalize] Already new schema, returning as-is

ğŸ›‘ SIGTERM received, closing MongoDB connection...
SIGTERM received, shutting down gracefully
Server closed
[32m[nodemon] clean exit - waiting for changes before restart[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
âœ… Environment variables validated successfully

========================================
ğŸ”§ Environment Variables Check
========================================
ğŸŒ NODE_ENV: development
ğŸšª PORT: 5001
ğŸ”— MONGODB_URI present: âœ… Yes
ğŸ”‘ JWT_SECRET present: âœ… Yes
ğŸ”‘ JWT_REFRESH_SECRET present: âœ… Yes
â˜ï¸ CLOUDINARY_CLOUD_NAME present: âœ… Yes
ğŸ“§ MOCK_OTP: true
[ENV][SMS] FAST2SMS key loaded: true
========================================

Google OAuth credentials: { clientId: 'Present', clientSecret: 'Present' }
ğŸ”‘ Razorpay configured with key: Live Key
App.ts loaded successfully
Payment routes registered successfully
Razorpay routes registered successfully
OTP routes registered successfully
Notification routes registered successfully
Upload routes registered successfully

ğŸ”— Connecting to MongoDB Atlas...
ğŸ“ MongoDB URI: mongodb+srv://charan:***@csstore.2mobf49.mongodb.net/cps-store?retryWrites=true&w=majority&appName=csstore
ğŸŒ Environment: development
ğŸ”— Mongoose connected to MongoDB Atlas
âœ… MongoDB Atlas connected successfully
ğŸ—„ï¸  Database: cps-store
ğŸ  Host: ac-vjrq9op-shard-00-00.2mobf49.mongodb.net

ğŸ”§ Bootstrapping dev admin user...
âœ… Dev admin user updated successfully
ğŸ“§ Email: gcs.charan@gmail.com
ğŸ“± Phone: 9391795162
ğŸ”‘ Password: Gcs@2004
ğŸ‘¤ Role: admin
ğŸ” isAdmin: true
ğŸ¯ Dev admin bootstrap completed
ğŸšš Initializing delivery partner load tracking...
ğŸšš Delivery partner load service initialized (MongoDB-only mode)
âœ… Port 5001 is available
ğŸš€ Server running on port 5001
ğŸ¥ Health check: http://localhost:5001/health

ğŸ›‘ SIGTERM received, closing MongoDB connection...
SIGTERM received, shutting down gracefully
Server closed
[32m[nodemon] clean exit - waiting for changes before restart[39m
node:events:485
      throw er; // Unhandled 'error' event
      ^

Error: read EIO
    at TTY.onStreamRead (node:internal/stream_base_commons:216:20)
Emitted 'error' event on ReadStream instance at:
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  errno: -5,
  code: 'EIO',
  syscall: 'read'
}

Node.js v23.7.0
