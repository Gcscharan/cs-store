(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function B1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fy={exports:{}},zc={},By={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),U1=Symbol.for("react.portal"),z1=Symbol.for("react.fragment"),V1=Symbol.for("react.strict_mode"),q1=Symbol.for("react.profiler"),H1=Symbol.for("react.provider"),W1=Symbol.for("react.context"),Q1=Symbol.for("react.forward_ref"),K1=Symbol.for("react.suspense"),G1=Symbol.for("react.memo"),Y1=Symbol.for("react.lazy"),Hp=Symbol.iterator;function J1(e){return e===null||typeof e!="object"?null:(e=Hp&&e[Hp]||e["@@iterator"],typeof e=="function"?e:null)}var Uy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zy=Object.assign,Vy={};function Va(e,t,r){this.props=e,this.context=t,this.refs=Vy,this.updater=r||Uy}Va.prototype.isReactComponent={};Va.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Va.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qy(){}qy.prototype=Va.prototype;function Uh(e,t,r){this.props=e,this.context=t,this.refs=Vy,this.updater=r||Uy}var zh=Uh.prototype=new qy;zh.constructor=Uh;zy(zh,Va.prototype);zh.isPureReactComponent=!0;var Wp=Array.isArray,Hy=Object.prototype.hasOwnProperty,Vh={current:null},Wy={key:!0,ref:!0,__self:!0,__source:!0};function Qy(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Hy.call(t,n)&&!Wy.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];a.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:yo,type:e,key:i,ref:o,props:a,_owner:Vh.current}}function X1(e,t){return{$$typeof:yo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qh(e){return typeof e=="object"&&e!==null&&e.$$typeof===yo}function Z1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qp=/\/+/g;function Xd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Z1(""+e.key):t.toString(36)}function xl(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yo:case U1:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Xd(o,0):n,Wp(a)?(r="",e!=null&&(r=e.replace(Qp,"$&/")+"/"),xl(a,t,r,"",function(c){return c})):a!=null&&(qh(a)&&(a=X1(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Qp,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Wp(e))for(var l=0;l<e.length;l++){i=e[l];var d=n+Xd(i,l);o+=xl(i,t,r,d,a)}else if(d=J1(e),typeof d=="function")for(e=d.call(e),l=0;!(i=e.next()).done;)i=i.value,d=n+Xd(i,l++),o+=xl(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Io(e,t,r){if(e==null)return e;var n=[],a=0;return xl(e,n,"","",function(i){return t.call(r,i,a++)}),n}function e2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bt={current:null},gl={transition:null},t2={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:gl,ReactCurrentOwner:Vh};function Ky(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Io,forEach:function(e,t,r){Io(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Io(e,function(){t++}),t},toArray:function(e){return Io(e,function(t){return t})||[]},only:function(e){if(!qh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Va;je.Fragment=z1;je.Profiler=q1;je.PureComponent=Uh;je.StrictMode=V1;je.Suspense=K1;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t2;je.act=Ky;je.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=zy({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Vh.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)Hy.call(t,d)&&!Wy.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){l=Array(d);for(var c=0;c<d;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:yo,type:e.type,key:a,ref:i,props:n,_owner:o}};je.createContext=function(e){return e={$$typeof:W1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:H1,_context:e},e.Consumer=e};je.createElement=Qy;je.createFactory=function(e){var t=Qy.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:Q1,render:e}};je.isValidElement=qh;je.lazy=function(e){return{$$typeof:Y1,_payload:{_status:-1,_result:e},_init:e2}};je.memo=function(e,t){return{$$typeof:G1,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=gl.transition;gl.transition={};try{e()}finally{gl.transition=t}};je.unstable_act=Ky;je.useCallback=function(e,t){return Bt.current.useCallback(e,t)};je.useContext=function(e){return Bt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return Bt.current.useDeferredValue(e)};je.useEffect=function(e,t){return Bt.current.useEffect(e,t)};je.useId=function(){return Bt.current.useId()};je.useImperativeHandle=function(e,t,r){return Bt.current.useImperativeHandle(e,t,r)};je.useInsertionEffect=function(e,t){return Bt.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Bt.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Bt.current.useMemo(e,t)};je.useReducer=function(e,t,r){return Bt.current.useReducer(e,t,r)};je.useRef=function(e){return Bt.current.useRef(e)};je.useState=function(e){return Bt.current.useState(e)};je.useSyncExternalStore=function(e,t,r){return Bt.current.useSyncExternalStore(e,t,r)};je.useTransition=function(){return Bt.current.useTransition()};je.version="18.3.1";By.exports=je;var w=By.exports;const Ae=B1(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2=w,r2=Symbol.for("react.element"),n2=Symbol.for("react.fragment"),a2=Object.prototype.hasOwnProperty,i2=s2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o2={key:!0,ref:!0,__self:!0,__source:!0};function Gy(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)a2.call(t,n)&&!o2.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:r2,type:e,key:i,ref:o,props:a,_owner:i2.current}}zc.Fragment=n2;zc.jsx=Gy;zc.jsxs=Gy;Fy.exports=zc;var s=Fy.exports,sm={},Yy={exports:{}},ls={},Jy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,_){var I=D.length;D.push(_);e:for(;0<I;){var q=I-1>>>1,W=D[q];if(0<a(W,_))D[q]=_,D[I]=W,I=q;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var _=D[0],I=D.pop();if(I!==_){D[0]=I;e:for(var q=0,W=D.length,ie=W>>>1;q<ie;){var se=2*(q+1)-1,$=D[se],H=se+1,J=D[H];if(0>a($,I))H<W&&0>a(J,$)?(D[q]=J,D[H]=I,q=H):(D[q]=$,D[se]=I,q=se);else if(H<W&&0>a(J,I))D[q]=J,D[H]=I,q=H;else break e}}return _}function a(D,_){var I=D.sortIndex-_.sortIndex;return I!==0?I:D.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],c=[],u=1,m=null,h=3,f=!1,p=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var _=r(c);_!==null;){if(_.callback===null)n(c);else if(_.startTime<=D)n(c),_.sortIndex=_.expirationTime,t(d,_);else break;_=r(c)}}function x(D){if(y=!1,b(D),!p)if(r(d)!==null)p=!0,L(g);else{var _=r(c);_!==null&&U(x,_.startTime-D)}}function g(D,_){p=!1,y&&(y=!1,N(S),S=-1),f=!0;var I=h;try{for(b(_),m=r(d);m!==null&&(!(m.expirationTime>_)||D&&!T());){var q=m.callback;if(typeof q=="function"){m.callback=null,h=m.priorityLevel;var W=q(m.expirationTime<=_);_=e.unstable_now(),typeof W=="function"?m.callback=W:m===r(d)&&n(d),b(_)}else n(d);m=r(d)}if(m!==null)var ie=!0;else{var se=r(c);se!==null&&U(x,se.startTime-_),ie=!1}return ie}finally{m=null,h=I,f=!1}}var k=!1,C=null,S=-1,A=5,E=-1;function T(){return!(e.unstable_now()-E<A)}function M(){if(C!==null){var D=e.unstable_now();E=D;var _=!0;try{_=C(!0,D)}finally{_?P():(k=!1,C=null)}}else k=!1}var P;if(typeof v=="function")P=function(){v(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,R=O.port2;O.port1.onmessage=M,P=function(){R.postMessage(null)}}else P=function(){j(M,0)};function L(D){C=D,k||(k=!0,P())}function U(D,_){S=j(function(){D(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,L(g))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var _=3;break;default:_=h}var I=h;h=_;try{return D()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,_){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var I=h;h=D;try{return _()}finally{h=I}},e.unstable_scheduleCallback=function(D,_,I){var q=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?q+I:q):I=q,D){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=I+W,D={id:u++,callback:_,priorityLevel:D,startTime:I,expirationTime:W,sortIndex:-1},I>q?(D.sortIndex=I,t(c,D),r(d)===null&&D===r(c)&&(y?(N(S),S=-1):y=!0,U(x,I-q))):(D.sortIndex=W,t(d,D),p||f||(p=!0,L(g))),D},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(D){var _=h;return function(){var I=h;h=_;try{return D.apply(this,arguments)}finally{h=I}}}})(Xy);Jy.exports=Xy;var l2=Jy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2=w,as=l2;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zy=new Set,Fi={};function Fn(e,t){Pa(e,t),Pa(e+"Capture",t)}function Pa(e,t){for(Fi[e]=t,e=0;e<t.length;e++)Zy.add(t[e])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,d2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kp={},Gp={};function u2(e){return rm.call(Gp,e)?!0:rm.call(Kp,e)?!1:d2.test(e)?Gp[e]=!0:(Kp[e]=!0,!1)}function m2(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function h2(e,t,r,n){if(t===null||typeof t>"u"||m2(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ut(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wt[e]=new Ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wt[t]=new Ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wt[e]=new Ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wt[e]=new Ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wt[e]=new Ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wt[e]=new Ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wt[e]=new Ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wt[e]=new Ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wt[e]=new Ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hh=/[\-:]([a-z])/g;function Wh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hh,Wh);wt[t]=new Ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hh,Wh);wt[t]=new Ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hh,Wh);wt[t]=new Ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wt[e]=new Ut(e,1,!1,e.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wt[e]=new Ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qh(e,t,r,n){var a=wt.hasOwnProperty(t)?wt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(h2(t,r,a,n)&&(r=null),n||a===null?u2(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var br=c2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),Zn=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),Kh=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),ev=Symbol.for("react.provider"),tv=Symbol.for("react.context"),Gh=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),im=Symbol.for("react.suspense_list"),Yh=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),sv=Symbol.for("react.offscreen"),Yp=Symbol.iterator;function ei(e){return e===null||typeof e!="object"?null:(e=Yp&&e[Yp]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,Zd;function pi(e){if(Zd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Zd=t&&t[1]||""}return`
`+Zd+e}var eu=!1;function tu(e,t){if(!e||eu)return"";eu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=l);break}}}finally{eu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?pi(e):""}function f2(e){switch(e.tag){case 5:return pi(e.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return e=tu(e.type,!1),e;case 11:return e=tu(e.type.render,!1),e;case 1:return e=tu(e.type,!0),e;default:return""}}function om(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ea:return"Fragment";case Zn:return"Portal";case nm:return"Profiler";case Kh:return"StrictMode";case am:return"Suspense";case im:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tv:return(e.displayName||"Context")+".Consumer";case ev:return(e._context.displayName||"Context")+".Provider";case Gh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yh:return t=e.displayName||null,t!==null?t:om(e.type)||"Memo";case Sr:t=e._payload,e=e._init;try{return om(e(t))}catch{}}return null}function p2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return om(t);case 8:return t===Kh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function x2(e){var t=rv(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fo(e){e._valueTracker||(e._valueTracker=x2(e))}function nv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=rv(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lm(e,t){var r=t.checked;return Ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jp(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Kr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function av(e,t){t=t.checked,t!=null&&Qh(e,"checked",t,!1)}function cm(e,t){av(e,t);var r=Kr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dm(e,t.type,r):t.hasOwnProperty("defaultValue")&&dm(e,t.type,Kr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function dm(e,t,r){(t!=="number"||zl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var xi=Array.isArray;function ga(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Kr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function um(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Q(92));if(xi(r)){if(1<r.length)throw Error(Q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Kr(r)}}function iv(e,t){var r=Kr(t.value),n=Kr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function e0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ov(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ov(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bo,lv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bo=Bo||document.createElement("div"),Bo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g2=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(e){g2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ni[t]=Ni[e]})});function cv(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ni.hasOwnProperty(e)&&Ni[e]?(""+t).trim():t+"px"}function dv(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=cv(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var y2=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hm(e,t){if(t){if(y2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function fm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pm=null;function Jh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xm=null,ya=null,va=null;function t0(e){if(e=jo(e)){if(typeof xm!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=Qc(t),xm(e.stateNode,e.type,t))}}function uv(e){ya?va?va.push(e):va=[e]:ya=e}function mv(){if(ya){var e=ya,t=va;if(va=ya=null,t0(e),t)for(e=0;e<t.length;e++)t0(t[e])}}function hv(e,t){return e(t)}function fv(){}var su=!1;function pv(e,t,r){if(su)return e(t,r);su=!0;try{return hv(e,t,r)}finally{su=!1,(ya!==null||va!==null)&&(fv(),mv())}}function Ui(e,t){var r=e.stateNode;if(r===null)return null;var n=Qc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Q(231,t,typeof r));return r}var gm=!1;if(hr)try{var ti={};Object.defineProperty(ti,"passive",{get:function(){gm=!0}}),window.addEventListener("test",ti,ti),window.removeEventListener("test",ti,ti)}catch{gm=!1}function v2(e,t,r,n,a,i,o,l,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Si=!1,Vl=null,ql=!1,ym=null,b2={onError:function(e){Si=!0,Vl=e}};function j2(e,t,r,n,a,i,o,l,d){Si=!1,Vl=null,v2.apply(b2,arguments)}function w2(e,t,r,n,a,i,o,l,d){if(j2.apply(this,arguments),Si){if(Si){var c=Vl;Si=!1,Vl=null}else throw Error(Q(198));ql||(ql=!0,ym=c)}}function Bn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function xv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function s0(e){if(Bn(e)!==e)throw Error(Q(188))}function N2(e){var t=e.alternate;if(!t){if(t=Bn(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return s0(a),e;if(i===n)return s0(a),t;i=i.sibling}throw Error(Q(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?e:t}function gv(e){return e=N2(e),e!==null?yv(e):null}function yv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yv(e);if(t!==null)return t;e=e.sibling}return null}var vv=as.unstable_scheduleCallback,r0=as.unstable_cancelCallback,S2=as.unstable_shouldYield,k2=as.unstable_requestPaint,st=as.unstable_now,C2=as.unstable_getCurrentPriorityLevel,Xh=as.unstable_ImmediatePriority,bv=as.unstable_UserBlockingPriority,Hl=as.unstable_NormalPriority,P2=as.unstable_LowPriority,jv=as.unstable_IdlePriority,Vc=null,qs=null;function A2(e){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(Vc,e,void 0,(e.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:O2,E2=Math.log,T2=Math.LN2;function O2(e){return e>>>=0,e===0?32:31-(E2(e)/T2|0)|0}var Uo=64,zo=4194304;function gi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wl(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=gi(l):(i&=o,i!==0&&(n=gi(i)))}else o=r&~a,o!==0?n=gi(o):i!==0&&(n=gi(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ts(t),a=1<<r,n|=e[r],t&=~a;return n}function R2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M2(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ts(i),l=1<<o,d=a[o];d===-1?(!(l&r)||l&n)&&(a[o]=R2(l,t)):d<=t&&(e.expiredLanes|=l),i&=~l}}function vm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wv(){var e=Uo;return Uo<<=1,!(Uo&4194240)&&(Uo=64),e}function ru(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ts(t),e[t]=r}function L2(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ts(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Zh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ts(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Te=0;function Nv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sv,ef,kv,Cv,Pv,bm=!1,Vo=[],_r=null,Dr=null,Ir=null,zi=new Map,Vi=new Map,Pr=[],_2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(e,t){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":zi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(t.pointerId)}}function si(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=jo(t),t!==null&&ef(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function D2(e,t,r,n,a){switch(t){case"focusin":return _r=si(_r,e,t,r,n,a),!0;case"dragenter":return Dr=si(Dr,e,t,r,n,a),!0;case"mouseover":return Ir=si(Ir,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return zi.set(i,si(zi.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Vi.set(i,si(Vi.get(i)||null,e,t,r,n,a)),!0}return!1}function Av(e){var t=bn(e.target);if(t!==null){var r=Bn(t);if(r!==null){if(t=r.tag,t===13){if(t=xv(r),t!==null){e.blockedOn=t,Pv(e.priority,function(){kv(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=jm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);pm=n,r.target.dispatchEvent(n),pm=null}else return t=jo(r),t!==null&&ef(t),e.blockedOn=r,!1;t.shift()}return!0}function a0(e,t,r){yl(e)&&r.delete(t)}function I2(){bm=!1,_r!==null&&yl(_r)&&(_r=null),Dr!==null&&yl(Dr)&&(Dr=null),Ir!==null&&yl(Ir)&&(Ir=null),zi.forEach(a0),Vi.forEach(a0)}function ri(e,t){e.blockedOn===t&&(e.blockedOn=null,bm||(bm=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,I2)))}function qi(e){function t(a){return ri(a,e)}if(0<Vo.length){ri(Vo[0],e);for(var r=1;r<Vo.length;r++){var n=Vo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(_r!==null&&ri(_r,e),Dr!==null&&ri(Dr,e),Ir!==null&&ri(Ir,e),zi.forEach(t),Vi.forEach(t),r=0;r<Pr.length;r++)n=Pr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Pr.length&&(r=Pr[0],r.blockedOn===null);)Av(r),r.blockedOn===null&&Pr.shift()}var ba=br.ReactCurrentBatchConfig,Ql=!0;function $2(e,t,r,n){var a=Te,i=ba.transition;ba.transition=null;try{Te=1,tf(e,t,r,n)}finally{Te=a,ba.transition=i}}function F2(e,t,r,n){var a=Te,i=ba.transition;ba.transition=null;try{Te=4,tf(e,t,r,n)}finally{Te=a,ba.transition=i}}function tf(e,t,r,n){if(Ql){var a=jm(e,t,r,n);if(a===null)hu(e,t,n,Kl,r),n0(e,n);else if(D2(a,e,t,r,n))n.stopPropagation();else if(n0(e,n),t&4&&-1<_2.indexOf(e)){for(;a!==null;){var i=jo(a);if(i!==null&&Sv(i),i=jm(e,t,r,n),i===null&&hu(e,t,n,Kl,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else hu(e,t,n,null,r)}}var Kl=null;function jm(e,t,r,n){if(Kl=null,e=Jh(n),e=bn(e),e!==null)if(t=Bn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=xv(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kl=e,null}function Ev(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C2()){case Xh:return 1;case bv:return 4;case Hl:case P2:return 16;case jv:return 536870912;default:return 16}default:return 16}}var Or=null,sf=null,vl=null;function Tv(){if(vl)return vl;var e,t=sf,r=t.length,n,a="value"in Or?Or.value:Or.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return vl=a.slice(e,1<n?1-n:void 0)}function bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qo(){return!0}function i0(){return!1}function cs(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qo:i0,this.isPropagationStopped=i0,this}return Ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),t}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=cs(qa),bo=Ye({},qa,{view:0,detail:0}),B2=cs(bo),nu,au,ni,qc=Ye({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ni&&(ni&&e.type==="mousemove"?(nu=e.screenX-ni.screenX,au=e.screenY-ni.screenY):au=nu=0,ni=e),nu)},movementY:function(e){return"movementY"in e?e.movementY:au}}),o0=cs(qc),U2=Ye({},qc,{dataTransfer:0}),z2=cs(U2),V2=Ye({},bo,{relatedTarget:0}),iu=cs(V2),q2=Ye({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),H2=cs(q2),W2=Ye({},qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q2=cs(W2),K2=Ye({},qa,{data:0}),l0=cs(K2),G2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=J2[e])?!!t[e]:!1}function nf(){return X2}var Z2=Ye({},bo,{key:function(e){if(e.key){var t=G2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Y2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nf,charCode:function(e){return e.type==="keypress"?bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),eS=cs(Z2),tS=Ye({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c0=cs(tS),sS=Ye({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nf}),rS=cs(sS),nS=Ye({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),aS=cs(nS),iS=Ye({},qc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oS=cs(iS),lS=[9,13,27,32],af=hr&&"CompositionEvent"in window,ki=null;hr&&"documentMode"in document&&(ki=document.documentMode);var cS=hr&&"TextEvent"in window&&!ki,Ov=hr&&(!af||ki&&8<ki&&11>=ki),d0=" ",u0=!1;function Rv(e,t){switch(e){case"keyup":return lS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ta=!1;function dS(e,t){switch(e){case"compositionend":return Mv(t);case"keypress":return t.which!==32?null:(u0=!0,d0);case"textInput":return e=t.data,e===d0&&u0?null:e;default:return null}}function uS(e,t){if(ta)return e==="compositionend"||!af&&Rv(e,t)?(e=Tv(),vl=sf=Or=null,ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ov&&t.locale!=="ko"?null:t.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mS[e.type]:t==="textarea"}function Lv(e,t,r,n){uv(n),t=Gl(t,"onChange"),0<t.length&&(r=new rf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ci=null,Hi=null;function hS(e){Hv(e,0)}function Hc(e){var t=na(e);if(nv(t))return e}function fS(e,t){if(e==="change")return t}var _v=!1;if(hr){var ou;if(hr){var lu="oninput"in document;if(!lu){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),lu=typeof h0.oninput=="function"}ou=lu}else ou=!1;_v=ou&&(!document.documentMode||9<document.documentMode)}function f0(){Ci&&(Ci.detachEvent("onpropertychange",Dv),Hi=Ci=null)}function Dv(e){if(e.propertyName==="value"&&Hc(Hi)){var t=[];Lv(t,Hi,e,Jh(e)),pv(hS,t)}}function pS(e,t,r){e==="focusin"?(f0(),Ci=t,Hi=r,Ci.attachEvent("onpropertychange",Dv)):e==="focusout"&&f0()}function xS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hc(Hi)}function gS(e,t){if(e==="click")return Hc(t)}function yS(e,t){if(e==="input"||e==="change")return Hc(t)}function vS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rs=typeof Object.is=="function"?Object.is:vS;function Wi(e,t){if(Rs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!rm.call(t,a)||!Rs(e[a],t[a]))return!1}return!0}function p0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function x0(e,t){var r=p0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=p0(r)}}function Iv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Iv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $v(){for(var e=window,t=zl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=zl(e.document)}return t}function of(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bS(e){var t=$v(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Iv(r.ownerDocument.documentElement,r)){if(n!==null&&of(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=x0(r,i);var o=x0(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jS=hr&&"documentMode"in document&&11>=document.documentMode,sa=null,wm=null,Pi=null,Nm=!1;function g0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Nm||sa==null||sa!==zl(n)||(n=sa,"selectionStart"in n&&of(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pi&&Wi(Pi,n)||(Pi=n,n=Gl(wm,"onSelect"),0<n.length&&(t=new rf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=sa)))}function Ho(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ra={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionend:Ho("Transition","TransitionEnd")},cu={},Fv={};hr&&(Fv=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Wc(e){if(cu[e])return cu[e];if(!ra[e])return e;var t=ra[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fv)return cu[e]=t[r];return e}var Bv=Wc("animationend"),Uv=Wc("animationiteration"),zv=Wc("animationstart"),Vv=Wc("transitionend"),qv=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(e,t){qv.set(e,t),Fn(t,[e])}for(var du=0;du<y0.length;du++){var uu=y0[du],wS=uu.toLowerCase(),NS=uu[0].toUpperCase()+uu.slice(1);on(wS,"on"+NS)}on(Bv,"onAnimationEnd");on(Uv,"onAnimationIteration");on(zv,"onAnimationStart");on("dblclick","onDoubleClick");on("focusin","onFocus");on("focusout","onBlur");on(Vv,"onTransitionEnd");Pa("onMouseEnter",["mouseout","mouseover"]);Pa("onMouseLeave",["mouseout","mouseover"]);Pa("onPointerEnter",["pointerout","pointerover"]);Pa("onPointerLeave",["pointerout","pointerover"]);Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SS=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function v0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,w2(n,t,void 0,e),e.currentTarget=null}function Hv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],d=l.instance,c=l.currentTarget;if(l=l.listener,d!==i&&a.isPropagationStopped())break e;v0(a,l,c),i=d}else for(o=0;o<n.length;o++){if(l=n[o],d=l.instance,c=l.currentTarget,l=l.listener,d!==i&&a.isPropagationStopped())break e;v0(a,l,c),i=d}}}if(ql)throw e=ym,ql=!1,ym=null,e}function Fe(e,t){var r=t[Am];r===void 0&&(r=t[Am]=new Set);var n=e+"__bubble";r.has(n)||(Wv(t,e,2,!1),r.add(n))}function mu(e,t,r){var n=0;t&&(n|=4),Wv(r,e,n,t)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function Qi(e){if(!e[Wo]){e[Wo]=!0,Zy.forEach(function(r){r!=="selectionchange"&&(SS.has(r)||mu(r,!1,e),mu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wo]||(t[Wo]=!0,mu("selectionchange",!1,t))}}function Wv(e,t,r,n){switch(Ev(t)){case 1:var a=$2;break;case 4:a=F2;break;default:a=tf}r=a.bind(null,t,r,e),a=void 0,!gm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function hu(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;l!==null;){if(o=bn(l),o===null)return;if(d=o.tag,d===5||d===6){n=i=o;continue e}l=l.parentNode}}n=n.return}pv(function(){var c=i,u=Jh(r),m=[];e:{var h=qv.get(e);if(h!==void 0){var f=rf,p=e;switch(e){case"keypress":if(bl(r)===0)break e;case"keydown":case"keyup":f=eS;break;case"focusin":p="focus",f=iu;break;case"focusout":p="blur",f=iu;break;case"beforeblur":case"afterblur":f=iu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=o0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=z2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=rS;break;case Bv:case Uv:case zv:f=H2;break;case Vv:f=aS;break;case"scroll":f=B2;break;case"wheel":f=oS;break;case"copy":case"cut":case"paste":f=Q2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=c0}var y=(t&4)!==0,j=!y&&e==="scroll",N=y?h!==null?h+"Capture":null:h;y=[];for(var v=c,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,N!==null&&(x=Ui(v,N),x!=null&&y.push(Ki(v,x,b)))),j)break;v=v.return}0<y.length&&(h=new f(h,p,null,r,u),m.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&r!==pm&&(p=r.relatedTarget||r.fromElement)&&(bn(p)||p[fr]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=r.relatedTarget||r.toElement,f=c,p=p?bn(p):null,p!==null&&(j=Bn(p),p!==j||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(y=o0,x="onMouseLeave",N="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=c0,x="onPointerLeave",N="onPointerEnter",v="pointer"),j=f==null?h:na(f),b=p==null?h:na(p),h=new y(x,v+"leave",f,r,u),h.target=j,h.relatedTarget=b,x=null,bn(u)===c&&(y=new y(N,v+"enter",p,r,u),y.target=b,y.relatedTarget=j,x=y),j=x,f&&p)t:{for(y=f,N=p,v=0,b=y;b;b=Gn(b))v++;for(b=0,x=N;x;x=Gn(x))b++;for(;0<v-b;)y=Gn(y),v--;for(;0<b-v;)N=Gn(N),b--;for(;v--;){if(y===N||N!==null&&y===N.alternate)break t;y=Gn(y),N=Gn(N)}y=null}else y=null;f!==null&&b0(m,h,f,y,!1),p!==null&&j!==null&&b0(m,j,p,y,!0)}}e:{if(h=c?na(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var g=fS;else if(m0(h))if(_v)g=yS;else{g=xS;var k=pS}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(g=gS);if(g&&(g=g(e,c))){Lv(m,g,r,u);break e}k&&k(e,h,c),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&dm(h,"number",h.value)}switch(k=c?na(c):window,e){case"focusin":(m0(k)||k.contentEditable==="true")&&(sa=k,wm=c,Pi=null);break;case"focusout":Pi=wm=sa=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,g0(m,r,u);break;case"selectionchange":if(jS)break;case"keydown":case"keyup":g0(m,r,u)}var C;if(af)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ta?Rv(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(Ov&&r.locale!=="ko"&&(ta||S!=="onCompositionStart"?S==="onCompositionEnd"&&ta&&(C=Tv()):(Or=u,sf="value"in Or?Or.value:Or.textContent,ta=!0)),k=Gl(c,S),0<k.length&&(S=new l0(S,e,null,r,u),m.push({event:S,listeners:k}),C?S.data=C:(C=Mv(r),C!==null&&(S.data=C)))),(C=cS?dS(e,r):uS(e,r))&&(c=Gl(c,"onBeforeInput"),0<c.length&&(u=new l0("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:c}),u.data=C))}Hv(m,t)})}function Ki(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gl(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ui(e,r),i!=null&&n.unshift(Ki(e,i,a)),i=Ui(e,t),i!=null&&n.push(Ki(e,i,a))),e=e.return}return n}function Gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function b0(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,d=l.alternate,c=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&c!==null&&(l=c,a?(d=Ui(r,i),d!=null&&o.unshift(Ki(r,d,l))):a||(d=Ui(r,i),d!=null&&o.push(Ki(r,d,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var kS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function j0(e){return(typeof e=="string"?e:""+e).replace(kS,`
`).replace(CS,"")}function Qo(e,t,r){if(t=j0(t),j0(e)!==t&&r)throw Error(Q(425))}function Yl(){}var Sm=null,km=null;function Cm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,PS=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,AS=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(e){return w0.resolve(null).then(e).catch(ES)}:Pm;function ES(e){setTimeout(function(){throw e})}function fu(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),qi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);qi(t)}function $r(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function N0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),zs="__reactFiber$"+Ha,Gi="__reactProps$"+Ha,fr="__reactContainer$"+Ha,Am="__reactEvents$"+Ha,TS="__reactListeners$"+Ha,OS="__reactHandles$"+Ha;function bn(e){var t=e[zs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fr]||r[zs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=N0(e);e!==null;){if(r=e[zs])return r;e=N0(e)}return t}e=r,r=e.parentNode}return null}function jo(e){return e=e[zs]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function na(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function Qc(e){return e[Gi]||null}var Em=[],aa=-1;function ln(e){return{current:e}}function Ue(e){0>aa||(e.current=Em[aa],Em[aa]=null,aa--)}function Le(e,t){aa++,Em[aa]=e.current,e.current=t}var Gr={},Et=ln(Gr),Ht=ln(!1),On=Gr;function Aa(e,t){var r=e.type.contextTypes;if(!r)return Gr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Wt(e){return e=e.childContextTypes,e!=null}function Jl(){Ue(Ht),Ue(Et)}function S0(e,t,r){if(Et.current!==Gr)throw Error(Q(168));Le(Et,t),Le(Ht,r)}function Qv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Q(108,p2(e)||"Unknown",a));return Ye({},r,n)}function Xl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gr,On=Et.current,Le(Et,e),Le(Ht,Ht.current),!0}function k0(e,t,r){var n=e.stateNode;if(!n)throw Error(Q(169));r?(e=Qv(e,t,On),n.__reactInternalMemoizedMergedChildContext=e,Ue(Ht),Ue(Et),Le(Et,e)):Ue(Ht),Le(Ht,r)}var tr=null,Kc=!1,pu=!1;function Kv(e){tr===null?tr=[e]:tr.push(e)}function RS(e){Kc=!0,Kv(e)}function cn(){if(!pu&&tr!==null){pu=!0;var e=0,t=Te;try{var r=tr;for(Te=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}tr=null,Kc=!1}catch(a){throw tr!==null&&(tr=tr.slice(e+1)),vv(Xh,cn),a}finally{Te=t,pu=!1}}return null}var ia=[],oa=0,Zl=null,ec=0,hs=[],fs=0,Rn=null,nr=1,ar="";function fn(e,t){ia[oa++]=ec,ia[oa++]=Zl,Zl=e,ec=t}function Gv(e,t,r){hs[fs++]=nr,hs[fs++]=ar,hs[fs++]=Rn,Rn=e;var n=nr;e=ar;var a=32-Ts(n)-1;n&=~(1<<a),r+=1;var i=32-Ts(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,nr=1<<32-Ts(t)+a|r<<a|n,ar=i+e}else nr=1<<i|r<<a|n,ar=e}function lf(e){e.return!==null&&(fn(e,1),Gv(e,1,0))}function cf(e){for(;e===Zl;)Zl=ia[--oa],ia[oa]=null,ec=ia[--oa],ia[oa]=null;for(;e===Rn;)Rn=hs[--fs],hs[fs]=null,ar=hs[--fs],hs[fs]=null,nr=hs[--fs],hs[fs]=null}var rs=null,ss=null,qe=!1,As=null;function Yv(e,t){var r=xs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function C0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rs=e,ss=$r(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rs=e,ss=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Rn!==null?{id:nr,overflow:ar}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rs=e,ss=null,!0):!1;default:return!1}}function Tm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Om(e){if(qe){var t=ss;if(t){var r=t;if(!C0(e,t)){if(Tm(e))throw Error(Q(418));t=$r(r.nextSibling);var n=rs;t&&C0(e,t)?Yv(n,r):(e.flags=e.flags&-4097|2,qe=!1,rs=e)}}else{if(Tm(e))throw Error(Q(418));e.flags=e.flags&-4097|2,qe=!1,rs=e}}}function P0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rs=e}function Ko(e){if(e!==rs)return!1;if(!qe)return P0(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cm(e.type,e.memoizedProps)),t&&(t=ss)){if(Tm(e))throw Jv(),Error(Q(418));for(;t;)Yv(e,t),t=$r(t.nextSibling)}if(P0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ss=$r(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ss=null}}else ss=rs?$r(e.stateNode.nextSibling):null;return!0}function Jv(){for(var e=ss;e;)e=$r(e.nextSibling)}function Ea(){ss=rs=null,qe=!1}function df(e){As===null?As=[e]:As.push(e)}var MS=br.ReactCurrentBatchConfig;function ai(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,e))}return e}function Go(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function A0(e){var t=e._init;return t(e._payload)}function Xv(e){function t(N,v){if(e){var b=N.deletions;b===null?(N.deletions=[v],N.flags|=16):b.push(v)}}function r(N,v){if(!e)return null;for(;v!==null;)t(N,v),v=v.sibling;return null}function n(N,v){for(N=new Map;v!==null;)v.key!==null?N.set(v.key,v):N.set(v.index,v),v=v.sibling;return N}function a(N,v){return N=zr(N,v),N.index=0,N.sibling=null,N}function i(N,v,b){return N.index=b,e?(b=N.alternate,b!==null?(b=b.index,b<v?(N.flags|=2,v):b):(N.flags|=2,v)):(N.flags|=1048576,v)}function o(N){return e&&N.alternate===null&&(N.flags|=2),N}function l(N,v,b,x){return v===null||v.tag!==6?(v=wu(b,N.mode,x),v.return=N,v):(v=a(v,b),v.return=N,v)}function d(N,v,b,x){var g=b.type;return g===ea?u(N,v,b.props.children,x,b.key):v!==null&&(v.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Sr&&A0(g)===v.type)?(x=a(v,b.props),x.ref=ai(N,v,b),x.return=N,x):(x=Pl(b.type,b.key,b.props,null,N.mode,x),x.ref=ai(N,v,b),x.return=N,x)}function c(N,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Nu(b,N.mode,x),v.return=N,v):(v=a(v,b.children||[]),v.return=N,v)}function u(N,v,b,x,g){return v===null||v.tag!==7?(v=Pn(b,N.mode,x,g),v.return=N,v):(v=a(v,b),v.return=N,v)}function m(N,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wu(""+v,N.mode,b),v.return=N,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $o:return b=Pl(v.type,v.key,v.props,null,N.mode,b),b.ref=ai(N,null,v),b.return=N,b;case Zn:return v=Nu(v,N.mode,b),v.return=N,v;case Sr:var x=v._init;return m(N,x(v._payload),b)}if(xi(v)||ei(v))return v=Pn(v,N.mode,b,null),v.return=N,v;Go(N,v)}return null}function h(N,v,b,x){var g=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return g!==null?null:l(N,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $o:return b.key===g?d(N,v,b,x):null;case Zn:return b.key===g?c(N,v,b,x):null;case Sr:return g=b._init,h(N,v,g(b._payload),x)}if(xi(b)||ei(b))return g!==null?null:u(N,v,b,x,null);Go(N,b)}return null}function f(N,v,b,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return N=N.get(b)||null,l(v,N,""+x,g);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $o:return N=N.get(x.key===null?b:x.key)||null,d(v,N,x,g);case Zn:return N=N.get(x.key===null?b:x.key)||null,c(v,N,x,g);case Sr:var k=x._init;return f(N,v,b,k(x._payload),g)}if(xi(x)||ei(x))return N=N.get(b)||null,u(v,N,x,g,null);Go(v,x)}return null}function p(N,v,b,x){for(var g=null,k=null,C=v,S=v=0,A=null;C!==null&&S<b.length;S++){C.index>S?(A=C,C=null):A=C.sibling;var E=h(N,C,b[S],x);if(E===null){C===null&&(C=A);break}e&&C&&E.alternate===null&&t(N,C),v=i(E,v,S),k===null?g=E:k.sibling=E,k=E,C=A}if(S===b.length)return r(N,C),qe&&fn(N,S),g;if(C===null){for(;S<b.length;S++)C=m(N,b[S],x),C!==null&&(v=i(C,v,S),k===null?g=C:k.sibling=C,k=C);return qe&&fn(N,S),g}for(C=n(N,C);S<b.length;S++)A=f(C,N,S,b[S],x),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?S:A.key),v=i(A,v,S),k===null?g=A:k.sibling=A,k=A);return e&&C.forEach(function(T){return t(N,T)}),qe&&fn(N,S),g}function y(N,v,b,x){var g=ei(b);if(typeof g!="function")throw Error(Q(150));if(b=g.call(b),b==null)throw Error(Q(151));for(var k=g=null,C=v,S=v=0,A=null,E=b.next();C!==null&&!E.done;S++,E=b.next()){C.index>S?(A=C,C=null):A=C.sibling;var T=h(N,C,E.value,x);if(T===null){C===null&&(C=A);break}e&&C&&T.alternate===null&&t(N,C),v=i(T,v,S),k===null?g=T:k.sibling=T,k=T,C=A}if(E.done)return r(N,C),qe&&fn(N,S),g;if(C===null){for(;!E.done;S++,E=b.next())E=m(N,E.value,x),E!==null&&(v=i(E,v,S),k===null?g=E:k.sibling=E,k=E);return qe&&fn(N,S),g}for(C=n(N,C);!E.done;S++,E=b.next())E=f(C,N,S,E.value,x),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?S:E.key),v=i(E,v,S),k===null?g=E:k.sibling=E,k=E);return e&&C.forEach(function(M){return t(N,M)}),qe&&fn(N,S),g}function j(N,v,b,x){if(typeof b=="object"&&b!==null&&b.type===ea&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $o:e:{for(var g=b.key,k=v;k!==null;){if(k.key===g){if(g=b.type,g===ea){if(k.tag===7){r(N,k.sibling),v=a(k,b.props.children),v.return=N,N=v;break e}}else if(k.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Sr&&A0(g)===k.type){r(N,k.sibling),v=a(k,b.props),v.ref=ai(N,k,b),v.return=N,N=v;break e}r(N,k);break}else t(N,k);k=k.sibling}b.type===ea?(v=Pn(b.props.children,N.mode,x,b.key),v.return=N,N=v):(x=Pl(b.type,b.key,b.props,null,N.mode,x),x.ref=ai(N,v,b),x.return=N,N=x)}return o(N);case Zn:e:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(N,v.sibling),v=a(v,b.children||[]),v.return=N,N=v;break e}else{r(N,v);break}else t(N,v);v=v.sibling}v=Nu(b,N.mode,x),v.return=N,N=v}return o(N);case Sr:return k=b._init,j(N,v,k(b._payload),x)}if(xi(b))return p(N,v,b,x);if(ei(b))return y(N,v,b,x);Go(N,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(N,v.sibling),v=a(v,b),v.return=N,N=v):(r(N,v),v=wu(b,N.mode,x),v.return=N,N=v),o(N)):r(N,v)}return j}var Ta=Xv(!0),Zv=Xv(!1),tc=ln(null),sc=null,la=null,uf=null;function mf(){uf=la=sc=null}function hf(e){var t=tc.current;Ue(tc),e._currentValue=t}function Rm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ja(e,t){sc=e,uf=la=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qt=!0),e.firstContext=null)}function vs(e){var t=e._currentValue;if(uf!==e)if(e={context:e,memoizedValue:t,next:null},la===null){if(sc===null)throw Error(Q(308));la=e,sc.dependencies={lanes:0,firstContext:e}}else la=la.next=e;return t}var jn=null;function ff(e){jn===null?jn=[e]:jn.push(e)}function eb(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,ff(t)):(r.next=a.next,a.next=r),t.interleaved=r,pr(e,n)}function pr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var kr=!1;function pf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Se&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,pr(e,r)}return a=n.interleaved,a===null?(t.next=t,ff(n)):(t.next=a.next,a.next=t),n.interleaved=t,pr(e,r)}function jl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zh(e,r)}}function E0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rc(e,t,r,n){var a=e.updateQueue;kr=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var d=l,c=d.next;d.next=null,o===null?i=c:o.next=c,o=d;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=d))}if(i!==null){var m=a.baseState;o=0,u=c=d=null,l=i;do{var h=l.lane,f=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(h=t,f=r,y.tag){case 1:if(p=y.payload,typeof p=="function"){m=p.call(f,m,h);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(f,m,h):p,h==null)break e;m=Ye({},m,h);break e;case 2:kr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=f,d=m):u=u.next=f,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(d=m),a.baseState=d,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ln|=o,e.lanes=o,e.memoizedState=m}}function T0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Q(191,a));a.call(n)}}}var wo={},Hs=ln(wo),Yi=ln(wo),Ji=ln(wo);function wn(e){if(e===wo)throw Error(Q(174));return e}function xf(e,t){switch(Le(Ji,t),Le(Yi,e),Le(Hs,wo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mm(t,e)}Ue(Hs),Le(Hs,t)}function Oa(){Ue(Hs),Ue(Yi),Ue(Ji)}function sb(e){wn(Ji.current);var t=wn(Hs.current),r=mm(t,e.type);t!==r&&(Le(Yi,e),Le(Hs,r))}function gf(e){Yi.current===e&&(Ue(Hs),Ue(Yi))}var Qe=ln(0);function nc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xu=[];function yf(){for(var e=0;e<xu.length;e++)xu[e]._workInProgressVersionPrimary=null;xu.length=0}var wl=br.ReactCurrentDispatcher,gu=br.ReactCurrentBatchConfig,Mn=0,Ge=null,lt=null,ft=null,ac=!1,Ai=!1,Xi=0,LS=0;function Nt(){throw Error(Q(321))}function vf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Rs(e[r],t[r]))return!1;return!0}function bf(e,t,r,n,a,i){if(Mn=i,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wl.current=e===null||e.memoizedState===null?$S:FS,e=r(n,a),Ai){i=0;do{if(Ai=!1,Xi=0,25<=i)throw Error(Q(301));i+=1,ft=lt=null,t.updateQueue=null,wl.current=BS,e=r(n,a)}while(Ai)}if(wl.current=ic,t=lt!==null&&lt.next!==null,Mn=0,ft=lt=Ge=null,ac=!1,t)throw Error(Q(300));return e}function jf(){var e=Xi!==0;return Xi=0,e}function Bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ge.memoizedState=ft=e:ft=ft.next=e,ft}function bs(){if(lt===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ft===null?Ge.memoizedState:ft.next;if(t!==null)ft=t,lt=e;else{if(e===null)throw Error(Q(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ft===null?Ge.memoizedState=ft=e:ft=ft.next=e}return ft}function Zi(e,t){return typeof t=="function"?t(e):t}function yu(e){var t=bs(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=lt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,d=null,c=i;do{var u=c.lane;if((Mn&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var m={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(l=d=m,o=n):d=d.next=m,Ge.lanes|=u,Ln|=u}c=c.next}while(c!==null&&c!==i);d===null?o=n:d.next=l,Rs(n,t.memoizedState)||(qt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ge.lanes|=i,Ln|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function vu(e){var t=bs(),r=t.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Rs(i,t.memoizedState)||(qt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function rb(){}function nb(e,t){var r=Ge,n=bs(),a=t(),i=!Rs(n.memoizedState,a);if(i&&(n.memoizedState=a,qt=!0),n=n.queue,wf(ob.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ft!==null&&ft.memoizedState.tag&1){if(r.flags|=2048,eo(9,ib.bind(null,r,n,a,t),void 0,null),xt===null)throw Error(Q(349));Mn&30||ab(r,t,a)}return a}function ab(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ib(e,t,r,n){t.value=r,t.getSnapshot=n,lb(t)&&cb(e)}function ob(e,t,r){return r(function(){lb(t)&&cb(e)})}function lb(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Rs(e,r)}catch{return!0}}function cb(e){var t=pr(e,1);t!==null&&Os(t,e,1,-1)}function O0(e){var t=Bs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:e},t.queue=e,e=e.dispatch=IS.bind(null,Ge,e),[t.memoizedState,e]}function eo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function db(){return bs().memoizedState}function Nl(e,t,r,n){var a=Bs();Ge.flags|=e,a.memoizedState=eo(1|t,r,void 0,n===void 0?null:n)}function Gc(e,t,r,n){var a=bs();n=n===void 0?null:n;var i=void 0;if(lt!==null){var o=lt.memoizedState;if(i=o.destroy,n!==null&&vf(n,o.deps)){a.memoizedState=eo(t,r,i,n);return}}Ge.flags|=e,a.memoizedState=eo(1|t,r,i,n)}function R0(e,t){return Nl(8390656,8,e,t)}function wf(e,t){return Gc(2048,8,e,t)}function ub(e,t){return Gc(4,2,e,t)}function mb(e,t){return Gc(4,4,e,t)}function hb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fb(e,t,r){return r=r!=null?r.concat([e]):null,Gc(4,4,hb.bind(null,t,e),r)}function Nf(){}function pb(e,t){var r=bs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function xb(e,t){var r=bs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function gb(e,t,r){return Mn&21?(Rs(r,t)||(r=wv(),Ge.lanes|=r,Ln|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qt=!0),e.memoizedState=r)}function _S(e,t){var r=Te;Te=r!==0&&4>r?r:4,e(!0);var n=gu.transition;gu.transition={};try{e(!1),t()}finally{Te=r,gu.transition=n}}function yb(){return bs().memoizedState}function DS(e,t,r){var n=Ur(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},vb(e))bb(t,r);else if(r=eb(e,t,r,n),r!==null){var a=It();Os(r,e,n,a),jb(r,t,n)}}function IS(e,t,r){var n=Ur(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(vb(e))bb(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Rs(l,o)){var d=t.interleaved;d===null?(a.next=a,ff(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=eb(e,t,a,n),r!==null&&(a=It(),Os(r,e,n,a),jb(r,t,n))}}function vb(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function bb(e,t){Ai=ac=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function jb(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Zh(e,r)}}var ic={readContext:vs,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},$S={readContext:vs,useCallback:function(e,t){return Bs().memoizedState=[e,t===void 0?null:t],e},useContext:vs,useEffect:R0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Nl(4194308,4,hb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Nl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nl(4,2,e,t)},useMemo:function(e,t){var r=Bs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Bs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=DS.bind(null,Ge,e),[n.memoizedState,e]},useRef:function(e){var t=Bs();return e={current:e},t.memoizedState=e},useState:O0,useDebugValue:Nf,useDeferredValue:function(e){return Bs().memoizedState=e},useTransition:function(){var e=O0(!1),t=e[0];return e=_S.bind(null,e[1]),Bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ge,a=Bs();if(qe){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=t(),xt===null)throw Error(Q(349));Mn&30||ab(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,R0(ob.bind(null,n,i,e),[e]),n.flags|=2048,eo(9,ib.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Bs(),t=xt.identifierPrefix;if(qe){var r=ar,n=nr;r=(n&~(1<<32-Ts(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=LS++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},FS={readContext:vs,useCallback:pb,useContext:vs,useEffect:wf,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:mb,useMemo:xb,useReducer:yu,useRef:db,useState:function(){return yu(Zi)},useDebugValue:Nf,useDeferredValue:function(e){var t=bs();return gb(t,lt.memoizedState,e)},useTransition:function(){var e=yu(Zi)[0],t=bs().memoizedState;return[e,t]},useMutableSource:rb,useSyncExternalStore:nb,useId:yb,unstable_isNewReconciler:!1},BS={readContext:vs,useCallback:pb,useContext:vs,useEffect:wf,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:mb,useMemo:xb,useReducer:vu,useRef:db,useState:function(){return vu(Zi)},useDebugValue:Nf,useDeferredValue:function(e){var t=bs();return lt===null?t.memoizedState=e:gb(t,lt.memoizedState,e)},useTransition:function(){var e=vu(Zi)[0],t=bs().memoizedState;return[e,t]},useMutableSource:rb,useSyncExternalStore:nb,useId:yb,unstable_isNewReconciler:!1};function ks(e,t){if(e&&e.defaultProps){t=Ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Mm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yc={isMounted:function(e){return(e=e._reactInternals)?Bn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=It(),a=Ur(e),i=cr(n,a);i.payload=t,r!=null&&(i.callback=r),t=Fr(e,i,a),t!==null&&(Os(t,e,a,n),jl(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=It(),a=Ur(e),i=cr(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Fr(e,i,a),t!==null&&(Os(t,e,a,n),jl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=It(),n=Ur(e),a=cr(r,n);a.tag=2,t!=null&&(a.callback=t),t=Fr(e,a,n),t!==null&&(Os(t,e,n,r),jl(t,e,n))}};function M0(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Wi(r,n)||!Wi(a,i):!0}function wb(e,t,r){var n=!1,a=Gr,i=t.contextType;return typeof i=="object"&&i!==null?i=vs(i):(a=Wt(t)?On:Et.current,n=t.contextTypes,i=(n=n!=null)?Aa(e,a):Gr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function L0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Yc.enqueueReplaceState(t,t.state,null)}function Lm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},pf(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=vs(i):(i=Wt(t)?On:Et.current,a.context=Aa(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Mm(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Yc.enqueueReplaceState(a,a.state,null),rc(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ra(e,t){try{var r="",n=t;do r+=f2(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function bu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _m(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var US=typeof WeakMap=="function"?WeakMap:Map;function Nb(e,t,r){r=cr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){lc||(lc=!0,Hm=n),_m(e,t)},r}function Sb(e,t,r){r=cr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){_m(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){_m(e,t),typeof n!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function _0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new US;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=t4.bind(null,e,t,r),t.then(e,e))}function D0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I0(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=cr(-1,1),t.tag=2,Fr(r,t,1))),r.lanes|=1),e)}var zS=br.ReactCurrentOwner,qt=!1;function Lt(e,t,r,n){t.child=e===null?Zv(t,null,r,n):Ta(t,e.child,r,n)}function $0(e,t,r,n,a){r=r.render;var i=t.ref;return ja(t,a),n=bf(e,t,r,n,i,a),r=jf(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xr(e,t,a)):(qe&&r&&lf(t),t.flags|=1,Lt(e,t,n,a),t.child)}function F0(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Of(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,kb(e,t,i,n,a)):(e=Pl(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Wi,r(o,n)&&e.ref===t.ref)return xr(e,t,a)}return t.flags|=1,e=zr(i,n),e.ref=t.ref,e.return=t,t.child=e}function kb(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Wi(i,n)&&e.ref===t.ref)if(qt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(qt=!0);else return t.lanes=e.lanes,xr(e,t,a)}return Dm(e,t,r,n,a)}function Cb(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(da,es),es|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(da,es),es|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Le(da,es),es|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Le(da,es),es|=n;return Lt(e,t,a,r),t.child}function Pb(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Dm(e,t,r,n,a){var i=Wt(r)?On:Et.current;return i=Aa(t,i),ja(t,a),r=bf(e,t,r,n,i,a),n=jf(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xr(e,t,a)):(qe&&n&&lf(t),t.flags|=1,Lt(e,t,r,a),t.child)}function B0(e,t,r,n,a){if(Wt(r)){var i=!0;Xl(t)}else i=!1;if(ja(t,a),t.stateNode===null)Sl(e,t),wb(t,r,n),Lm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var d=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=vs(c):(c=Wt(r)?On:Et.current,c=Aa(t,c));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||d!==c)&&L0(t,o,n,c),kr=!1;var h=t.memoizedState;o.state=h,rc(t,n,o,a),d=t.memoizedState,l!==n||h!==d||Ht.current||kr?(typeof u=="function"&&(Mm(t,r,u,n),d=t.memoizedState),(l=kr||M0(t,r,l,n,h,d,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,tb(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:ks(t.type,l),o.props=c,m=t.pendingProps,h=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=vs(d):(d=Wt(r)?On:Et.current,d=Aa(t,d));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==d)&&L0(t,o,n,d),kr=!1,h=t.memoizedState,o.state=h,rc(t,n,o,a);var p=t.memoizedState;l!==m||h!==p||Ht.current||kr?(typeof f=="function"&&(Mm(t,r,f,n),p=t.memoizedState),(c=kr||M0(t,r,c,n,h,p,d)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=d,n=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Im(e,t,r,n,i,a)}function Im(e,t,r,n,a,i){Pb(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&k0(t,r,!1),xr(e,t,i);n=t.stateNode,zS.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ta(t,e.child,null,i),t.child=Ta(t,null,l,i)):Lt(e,t,l,i),t.memoizedState=n.state,a&&k0(t,r,!0),t.child}function Ab(e){var t=e.stateNode;t.pendingContext?S0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&S0(e,t.context,!1),xf(e,t.containerInfo)}function U0(e,t,r,n,a){return Ea(),df(a),t.flags|=256,Lt(e,t,r,n),t.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function Fm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Eb(e,t,r){var n=t.pendingProps,a=Qe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Le(Qe,a&1),e===null)return Om(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zc(o,n,0,null),e=Pn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Fm(r),t.memoizedState=$m,e):Sf(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return VS(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=zr(a,d),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=zr(l,i):(i=Pn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Fm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=$m,n}return i=e.child,e=i.sibling,n=zr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Sf(e,t){return t=Zc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yo(e,t,r,n){return n!==null&&df(n),Ta(t,e.child,null,r),e=Sf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function VS(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=bu(Error(Q(422))),Yo(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Zc({mode:"visible",children:n.children},a,0,null),i=Pn(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ta(t,e.child,null,o),t.child.memoizedState=Fm(o),t.memoizedState=$m,i);if(!(t.mode&1))return Yo(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Q(419)),n=bu(i,n,void 0),Yo(e,t,o,n)}if(l=(o&e.childLanes)!==0,qt||l){if(n=xt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,pr(e,a),Os(n,e,a,-1))}return Tf(),n=bu(Error(Q(421))),Yo(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=s4.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ss=$r(a.nextSibling),rs=t,qe=!0,As=null,e!==null&&(hs[fs++]=nr,hs[fs++]=ar,hs[fs++]=Rn,nr=e.id,ar=e.overflow,Rn=t),t=Sf(t,n.children),t.flags|=4096,t)}function z0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Rm(e.return,t,r)}function ju(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Tb(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Lt(e,t,n.children,r),n=Qe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&z0(e,r,t);else if(e.tag===19)z0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Le(Qe,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&nc(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ju(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&nc(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ju(t,!0,r,null,i);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ln|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,r=zr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qS(e,t,r){switch(t.tag){case 3:Ab(t),Ea();break;case 5:sb(t);break;case 1:Wt(t.type)&&Xl(t);break;case 4:xf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Le(tc,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Le(Qe,Qe.current&1),t.flags|=128,null):r&t.child.childLanes?Eb(e,t,r):(Le(Qe,Qe.current&1),e=xr(e,t,r),e!==null?e.sibling:null);Le(Qe,Qe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Tb(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Le(Qe,Qe.current),n)break;return null;case 22:case 23:return t.lanes=0,Cb(e,t,r)}return xr(e,t,r)}var Ob,Bm,Rb,Mb;Ob=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bm=function(){};Rb=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,wn(Hs.current);var i=null;switch(r){case"input":a=lm(e,a),n=lm(e,n),i=[];break;case"select":a=Ye({},a,{value:void 0}),n=Ye({},n,{value:void 0}),i=[];break;case"textarea":a=um(e,a),n=um(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Yl)}hm(r,n);var o;r=null;for(c in a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var l=a[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var d=n[c];if(l=a!=null?a[c]:void 0,n.hasOwnProperty(c)&&d!==l&&(d!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(i||(i=[]),i.push(c,r)),r=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fi.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&Fe("scroll",e),i||l===d||(i=[])):(i=i||[]).push(c,d))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Mb=function(e,t,r,n){r!==n&&(t.flags|=4)};function ii(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function HS(e,t,r){var n=t.pendingProps;switch(cf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Wt(t.type)&&Jl(),St(t),null;case 3:return n=t.stateNode,Oa(),Ue(Ht),Ue(Et),yf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ko(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,As!==null&&(Km(As),As=null))),Bm(e,t),St(t),null;case 5:gf(t);var a=wn(Ji.current);if(r=t.type,e!==null&&t.stateNode!=null)Rb(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Q(166));return St(t),null}if(e=wn(Hs.current),Ko(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[zs]=t,n[Gi]=i,e=(t.mode&1)!==0,r){case"dialog":Fe("cancel",n),Fe("close",n);break;case"iframe":case"object":case"embed":Fe("load",n);break;case"video":case"audio":for(a=0;a<yi.length;a++)Fe(yi[a],n);break;case"source":Fe("error",n);break;case"img":case"image":case"link":Fe("error",n),Fe("load",n);break;case"details":Fe("toggle",n);break;case"input":Jp(n,i),Fe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",n);break;case"textarea":Zp(n,i),Fe("invalid",n)}hm(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Qo(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Qo(n.textContent,l,e),a=["children",""+l]):Fi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fe("scroll",n)}switch(r){case"input":Fo(n),Xp(n,i,!0);break;case"textarea":Fo(n),e0(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Yl)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ov(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[zs]=t,e[Gi]=n,Ob(e,t,!1,!1),t.stateNode=e;e:{switch(o=fm(r,n),r){case"dialog":Fe("cancel",e),Fe("close",e),a=n;break;case"iframe":case"object":case"embed":Fe("load",e),a=n;break;case"video":case"audio":for(a=0;a<yi.length;a++)Fe(yi[a],e);a=n;break;case"source":Fe("error",e),a=n;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),a=n;break;case"details":Fe("toggle",e),a=n;break;case"input":Jp(e,n),a=lm(e,n),Fe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ye({},n,{value:void 0}),Fe("invalid",e);break;case"textarea":Zp(e,n),a=um(e,n),Fe("invalid",e);break;default:a=n}hm(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="style"?dv(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&lv(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Bi(e,d):typeof d=="number"&&Bi(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fi.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Fe("scroll",e):d!=null&&Qh(e,i,d,o))}switch(r){case"input":Fo(e),Xp(e,n,!1);break;case"textarea":Fo(e),e0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Kr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ga(e,!!n.multiple,i,!1):n.defaultValue!=null&&ga(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Yl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Mb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Q(166));if(r=wn(Ji.current),wn(Hs.current),Ko(t)){if(n=t.stateNode,r=t.memoizedProps,n[zs]=t,(i=n.nodeValue!==r)&&(e=rs,e!==null))switch(e.tag){case 3:Qo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qo(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[zs]=t,t.stateNode=n}return St(t),null;case 13:if(Ue(Qe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&ss!==null&&t.mode&1&&!(t.flags&128))Jv(),Ea(),t.flags|=98560,i=!1;else if(i=Ko(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[zs]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),i=!1}else As!==null&&(Km(As),As=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?dt===0&&(dt=3):Tf())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return Oa(),Bm(e,t),e===null&&Qi(t.stateNode.containerInfo),St(t),null;case 10:return hf(t.type._context),St(t),null;case 17:return Wt(t.type)&&Jl(),St(t),null;case 19:if(Ue(Qe),i=t.memoizedState,i===null)return St(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ii(i,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=nc(e),o!==null){for(t.flags|=128,ii(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Le(Qe,Qe.current&1|2),t.child}e=e.sibling}i.tail!==null&&st()>Ma&&(t.flags|=128,n=!0,ii(i,!1),t.lanes=4194304)}else{if(!n)if(e=nc(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ii(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return St(t),null}else 2*st()-i.renderingStartTime>Ma&&r!==1073741824&&(t.flags|=128,n=!0,ii(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=st(),t.sibling=null,r=Qe.current,Le(Qe,n?r&1|2:r&1),t):(St(t),null);case 22:case 23:return Ef(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?es&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function WS(e,t){switch(cf(t),t.tag){case 1:return Wt(t.type)&&Jl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(),Ue(Ht),Ue(Et),yf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gf(t),null;case 13:if(Ue(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Qe),null;case 4:return Oa(),null;case 10:return hf(t.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var Jo=!1,Pt=!1,QS=typeof WeakSet=="function"?WeakSet:Set,re=null;function ca(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Xe(e,t,n)}else r.current=null}function Um(e,t,r){try{r()}catch(n){Xe(e,t,n)}}var V0=!1;function KS(e,t){if(Sm=Ql,e=$v(),of(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,d=-1,c=0,u=0,m=e,h=null;t:for(;;){for(var f;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(d=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(f=m.firstChild)!==null;)h=m,m=f;for(;;){if(m===e)break t;if(h===r&&++c===a&&(l=o),h===i&&++u===n&&(d=o),(f=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=f}r=l===-1||d===-1?null:{start:l,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(km={focusedElem:e,selectionRange:r},Ql=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,j=p.memoizedState,N=t.stateNode,v=N.getSnapshotBeforeUpdate(t.elementType===t.type?y:ks(t.type,y),j);N.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(x){Xe(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return p=V0,V0=!1,p}function Ei(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Um(t,r,i)}a=a.next}while(a!==n)}}function Jc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function zm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Lb(e){var t=e.alternate;t!==null&&(e.alternate=null,Lb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zs],delete t[Gi],delete t[Am],delete t[TS],delete t[OS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _b(e){return e.tag===5||e.tag===3||e.tag===4}function q0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_b(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Yl));else if(n!==4&&(e=e.child,e!==null))for(Vm(e,t,r),e=e.sibling;e!==null;)Vm(e,t,r),e=e.sibling}function qm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(qm(e,t,r),e=e.sibling;e!==null;)qm(e,t,r),e=e.sibling}var vt=null,Cs=!1;function jr(e,t,r){for(r=r.child;r!==null;)Db(e,t,r),r=r.sibling}function Db(e,t,r){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(Vc,r)}catch{}switch(r.tag){case 5:Pt||ca(r,t);case 6:var n=vt,a=Cs;vt=null,jr(e,t,r),vt=n,Cs=a,vt!==null&&(Cs?(e=vt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):vt.removeChild(r.stateNode));break;case 18:vt!==null&&(Cs?(e=vt,r=r.stateNode,e.nodeType===8?fu(e.parentNode,r):e.nodeType===1&&fu(e,r),qi(e)):fu(vt,r.stateNode));break;case 4:n=vt,a=Cs,vt=r.stateNode.containerInfo,Cs=!0,jr(e,t,r),vt=n,Cs=a;break;case 0:case 11:case 14:case 15:if(!Pt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Um(r,t,o),a=a.next}while(a!==n)}jr(e,t,r);break;case 1:if(!Pt&&(ca(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Xe(r,t,l)}jr(e,t,r);break;case 21:jr(e,t,r);break;case 22:r.mode&1?(Pt=(n=Pt)||r.memoizedState!==null,jr(e,t,r),Pt=n):jr(e,t,r);break;default:jr(e,t,r)}}function H0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new QS),t.forEach(function(n){var a=r4.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ss(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:vt=l.stateNode,Cs=!1;break e;case 3:vt=l.stateNode.containerInfo,Cs=!0;break e;case 4:vt=l.stateNode.containerInfo,Cs=!0;break e}l=l.return}if(vt===null)throw Error(Q(160));Db(i,o,a),vt=null,Cs=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(c){Xe(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ib(t,e),t=t.sibling}function Ib(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ss(t,e),Is(e),n&4){try{Ei(3,e,e.return),Jc(3,e)}catch(y){Xe(e,e.return,y)}try{Ei(5,e,e.return)}catch(y){Xe(e,e.return,y)}}break;case 1:Ss(t,e),Is(e),n&512&&r!==null&&ca(r,r.return);break;case 5:if(Ss(t,e),Is(e),n&512&&r!==null&&ca(r,r.return),e.flags&32){var a=e.stateNode;try{Bi(a,"")}catch(y){Xe(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&av(a,i),fm(l,o);var c=fm(l,i);for(o=0;o<d.length;o+=2){var u=d[o],m=d[o+1];u==="style"?dv(a,m):u==="dangerouslySetInnerHTML"?lv(a,m):u==="children"?Bi(a,m):Qh(a,u,m,c)}switch(l){case"input":cm(a,i);break;case"textarea":iv(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ga(a,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?ga(a,!!i.multiple,i.defaultValue,!0):ga(a,!!i.multiple,i.multiple?[]:"",!1))}a[Gi]=i}catch(y){Xe(e,e.return,y)}}break;case 6:if(Ss(t,e),Is(e),n&4){if(e.stateNode===null)throw Error(Q(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){Xe(e,e.return,y)}}break;case 3:if(Ss(t,e),Is(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{qi(t.containerInfo)}catch(y){Xe(e,e.return,y)}break;case 4:Ss(t,e),Is(e);break;case 13:Ss(t,e),Is(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Pf=st())),n&4&&H0(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Pt=(c=Pt)||u,Ss(t,e),Pt=c):Ss(t,e),Is(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(re=e,u=e.child;u!==null;){for(m=re=u;re!==null;){switch(h=re,f=h.child,h.tag){case 0:case 11:case 14:case 15:Ei(4,h,h.return);break;case 1:ca(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Xe(n,r,y)}}break;case 5:ca(h,h.return);break;case 22:if(h.memoizedState!==null){Q0(m);continue}}f!==null?(f.return=h,re=f):Q0(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=cv("display",o))}catch(y){Xe(e,e.return,y)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(y){Xe(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ss(t,e),Is(e),n&4&&H0(e);break;case 21:break;default:Ss(t,e),Is(e)}}function Is(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(_b(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Bi(a,""),n.flags&=-33);var i=q0(e);qm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=q0(e);Vm(e,l,o);break;default:throw Error(Q(161))}}catch(d){Xe(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GS(e,t,r){re=e,$b(e)}function $b(e,t,r){for(var n=(e.mode&1)!==0;re!==null;){var a=re,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Jo;if(!o){var l=a.alternate,d=l!==null&&l.memoizedState!==null||Pt;l=Jo;var c=Pt;if(Jo=o,(Pt=d)&&!c)for(re=a;re!==null;)o=re,d=o.child,o.tag===22&&o.memoizedState!==null?K0(a):d!==null?(d.return=o,re=d):K0(a);for(;i!==null;)re=i,$b(i),i=i.sibling;re=a,Jo=l,Pt=c}W0(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,re=i):W0(e)}}function W0(e){for(;re!==null;){var t=re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pt||Jc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Pt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ks(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&T0(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}T0(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&qi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Pt||t.flags&512&&zm(t)}catch(h){Xe(t,t.return,h)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function Q0(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function K0(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jc(4,t)}catch(d){Xe(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){Xe(t,a,d)}}var i=t.return;try{zm(t)}catch(d){Xe(t,i,d)}break;case 5:var o=t.return;try{zm(t)}catch(d){Xe(t,o,d)}}}catch(d){Xe(t,t.return,d)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var YS=Math.ceil,oc=br.ReactCurrentDispatcher,kf=br.ReactCurrentOwner,gs=br.ReactCurrentBatchConfig,Se=0,xt=null,at=null,jt=0,es=0,da=ln(0),dt=0,to=null,Ln=0,Xc=0,Cf=0,Ti=null,Vt=null,Pf=0,Ma=1/0,er=null,lc=!1,Hm=null,Br=null,Xo=!1,Rr=null,cc=0,Oi=0,Wm=null,kl=-1,Cl=0;function It(){return Se&6?st():kl!==-1?kl:kl=st()}function Ur(e){return e.mode&1?Se&2&&jt!==0?jt&-jt:MS.transition!==null?(Cl===0&&(Cl=wv()),Cl):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Ev(e.type)),e):1}function Os(e,t,r,n){if(50<Oi)throw Oi=0,Wm=null,Error(Q(185));vo(e,r,n),(!(Se&2)||e!==xt)&&(e===xt&&(!(Se&2)&&(Xc|=r),dt===4&&Ar(e,jt)),Qt(e,n),r===1&&Se===0&&!(t.mode&1)&&(Ma=st()+500,Kc&&cn()))}function Qt(e,t){var r=e.callbackNode;M2(e,t);var n=Wl(e,e===xt?jt:0);if(n===0)r!==null&&r0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&r0(r),t===1)e.tag===0?RS(G0.bind(null,e)):Kv(G0.bind(null,e)),AS(function(){!(Se&6)&&cn()}),r=null;else{switch(Nv(n)){case 1:r=Xh;break;case 4:r=bv;break;case 16:r=Hl;break;case 536870912:r=jv;break;default:r=Hl}r=Wb(r,Fb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fb(e,t){if(kl=-1,Cl=0,Se&6)throw Error(Q(327));var r=e.callbackNode;if(wa()&&e.callbackNode!==r)return null;var n=Wl(e,e===xt?jt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=dc(e,n);else{t=n;var a=Se;Se|=2;var i=Ub();(xt!==e||jt!==t)&&(er=null,Ma=st()+500,Cn(e,t));do try{ZS();break}catch(l){Bb(e,l)}while(!0);mf(),oc.current=i,Se=a,at!==null?t=0:(xt=null,jt=0,t=dt)}if(t!==0){if(t===2&&(a=vm(e),a!==0&&(n=a,t=Qm(e,a))),t===1)throw r=to,Cn(e,0),Ar(e,n),Qt(e,st()),r;if(t===6)Ar(e,n);else{if(a=e.current.alternate,!(n&30)&&!JS(a)&&(t=dc(e,n),t===2&&(i=vm(e),i!==0&&(n=i,t=Qm(e,i))),t===1))throw r=to,Cn(e,0),Ar(e,n),Qt(e,st()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Q(345));case 2:pn(e,Vt,er);break;case 3:if(Ar(e,n),(n&130023424)===n&&(t=Pf+500-st(),10<t)){if(Wl(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){It(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Pm(pn.bind(null,e,Vt,er),t);break}pn(e,Vt,er);break;case 4:if(Ar(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ts(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=st()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*YS(n/1960))-n,10<n){e.timeoutHandle=Pm(pn.bind(null,e,Vt,er),n);break}pn(e,Vt,er);break;case 5:pn(e,Vt,er);break;default:throw Error(Q(329))}}}return Qt(e,st()),e.callbackNode===r?Fb.bind(null,e):null}function Qm(e,t){var r=Ti;return e.current.memoizedState.isDehydrated&&(Cn(e,t).flags|=256),e=dc(e,t),e!==2&&(t=Vt,Vt=r,t!==null&&Km(t)),e}function Km(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function JS(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Rs(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ar(e,t){for(t&=~Cf,t&=~Xc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ts(t),n=1<<r;e[r]=-1,t&=~n}}function G0(e){if(Se&6)throw Error(Q(327));wa();var t=Wl(e,0);if(!(t&1))return Qt(e,st()),null;var r=dc(e,t);if(e.tag!==0&&r===2){var n=vm(e);n!==0&&(t=n,r=Qm(e,n))}if(r===1)throw r=to,Cn(e,0),Ar(e,t),Qt(e,st()),r;if(r===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pn(e,Vt,er),Qt(e,st()),null}function Af(e,t){var r=Se;Se|=1;try{return e(t)}finally{Se=r,Se===0&&(Ma=st()+500,Kc&&cn())}}function _n(e){Rr!==null&&Rr.tag===0&&!(Se&6)&&wa();var t=Se;Se|=1;var r=gs.transition,n=Te;try{if(gs.transition=null,Te=1,e)return e()}finally{Te=n,gs.transition=r,Se=t,!(Se&6)&&cn()}}function Ef(){es=da.current,Ue(da)}function Cn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PS(r)),at!==null)for(r=at.return;r!==null;){var n=r;switch(cf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Jl();break;case 3:Oa(),Ue(Ht),Ue(Et),yf();break;case 5:gf(n);break;case 4:Oa();break;case 13:Ue(Qe);break;case 19:Ue(Qe);break;case 10:hf(n.type._context);break;case 22:case 23:Ef()}r=r.return}if(xt=e,at=e=zr(e.current,null),jt=es=t,dt=0,to=null,Cf=Xc=Ln=0,Vt=Ti=null,jn!==null){for(t=0;t<jn.length;t++)if(r=jn[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}jn=null}return e}function Bb(e,t){do{var r=at;try{if(mf(),wl.current=ic,ac){for(var n=Ge.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ac=!1}if(Mn=0,ft=lt=Ge=null,Ai=!1,Xi=0,kf.current=null,r===null||r.return===null){dt=1,to=t,at=null;break}e:{var i=e,o=r.return,l=r,d=t;if(t=jt,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=D0(o);if(f!==null){f.flags&=-257,I0(f,o,l,i,t),f.mode&1&&_0(i,c,t),t=f,d=c;var p=t.updateQueue;if(p===null){var y=new Set;y.add(d),t.updateQueue=y}else p.add(d);break e}else{if(!(t&1)){_0(i,c,t),Tf();break e}d=Error(Q(426))}}else if(qe&&l.mode&1){var j=D0(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),I0(j,o,l,i,t),df(Ra(d,l));break e}}i=d=Ra(d,l),dt!==4&&(dt=2),Ti===null?Ti=[i]:Ti.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var N=Nb(i,d,t);E0(i,N);break e;case 1:l=d;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Br===null||!Br.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=Sb(i,l,t);E0(i,x);break e}}i=i.return}while(i!==null)}Vb(r)}catch(g){t=g,at===r&&r!==null&&(at=r=r.return);continue}break}while(!0)}function Ub(){var e=oc.current;return oc.current=ic,e===null?ic:e}function Tf(){(dt===0||dt===3||dt===2)&&(dt=4),xt===null||!(Ln&268435455)&&!(Xc&268435455)||Ar(xt,jt)}function dc(e,t){var r=Se;Se|=2;var n=Ub();(xt!==e||jt!==t)&&(er=null,Cn(e,t));do try{XS();break}catch(a){Bb(e,a)}while(!0);if(mf(),Se=r,oc.current=n,at!==null)throw Error(Q(261));return xt=null,jt=0,dt}function XS(){for(;at!==null;)zb(at)}function ZS(){for(;at!==null&&!S2();)zb(at)}function zb(e){var t=Hb(e.alternate,e,es);e.memoizedProps=e.pendingProps,t===null?Vb(e):at=t,kf.current=null}function Vb(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=WS(r,t),r!==null){r.flags&=32767,at=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,at=null;return}}else if(r=HS(r,t,es),r!==null){at=r;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);dt===0&&(dt=5)}function pn(e,t,r){var n=Te,a=gs.transition;try{gs.transition=null,Te=1,e4(e,t,r,n)}finally{gs.transition=a,Te=n}return null}function e4(e,t,r,n){do wa();while(Rr!==null);if(Se&6)throw Error(Q(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(L2(e,i),e===xt&&(at=xt=null,jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xo||(Xo=!0,Wb(Hl,function(){return wa(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=gs.transition,gs.transition=null;var o=Te;Te=1;var l=Se;Se|=4,kf.current=null,KS(e,r),Ib(r,e),bS(km),Ql=!!Sm,km=Sm=null,e.current=r,GS(r),k2(),Se=l,Te=o,gs.transition=i}else e.current=r;if(Xo&&(Xo=!1,Rr=e,cc=a),i=e.pendingLanes,i===0&&(Br=null),A2(r.stateNode),Qt(e,st()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(lc)throw lc=!1,e=Hm,Hm=null,e;return cc&1&&e.tag!==0&&wa(),i=e.pendingLanes,i&1?e===Wm?Oi++:(Oi=0,Wm=e):Oi=0,cn(),null}function wa(){if(Rr!==null){var e=Nv(cc),t=gs.transition,r=Te;try{if(gs.transition=null,Te=16>e?16:e,Rr===null)var n=!1;else{if(e=Rr,Rr=null,cc=0,Se&6)throw Error(Q(331));var a=Se;for(Se|=4,re=e.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var d=0;d<l.length;d++){var c=l[d];for(re=c;re!==null;){var u=re;switch(u.tag){case 0:case 11:case 15:Ei(8,u,i)}var m=u.child;if(m!==null)m.return=u,re=m;else for(;re!==null;){u=re;var h=u.sibling,f=u.return;if(Lb(u),u===c){re=null;break}if(h!==null){h.return=f,re=h;break}re=f}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ei(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,re=N;break e}re=i.return}}var v=e.current;for(re=v;re!==null;){o=re;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,re=b;else e:for(o=v;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jc(9,l)}}catch(g){Xe(l,l.return,g)}if(l===o){re=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,re=x;break e}re=l.return}}if(Se=a,cn(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(Vc,e)}catch{}n=!0}return n}finally{Te=r,gs.transition=t}}return!1}function Y0(e,t,r){t=Ra(r,t),t=Nb(e,t,1),e=Fr(e,t,1),t=It(),e!==null&&(vo(e,1,t),Qt(e,t))}function Xe(e,t,r){if(e.tag===3)Y0(e,e,r);else for(;t!==null;){if(t.tag===3){Y0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Br===null||!Br.has(n))){e=Ra(r,e),e=Sb(t,e,1),t=Fr(t,e,1),e=It(),t!==null&&(vo(t,1,e),Qt(t,e));break}}t=t.return}}function t4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&r,xt===e&&(jt&r)===r&&(dt===4||dt===3&&(jt&130023424)===jt&&500>st()-Pf?Cn(e,0):Cf|=r),Qt(e,t)}function qb(e,t){t===0&&(e.mode&1?(t=zo,zo<<=1,!(zo&130023424)&&(zo=4194304)):t=1);var r=It();e=pr(e,t),e!==null&&(vo(e,t,r),Qt(e,r))}function s4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qb(e,r)}function r4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(t),qb(e,r)}var Hb;Hb=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)qt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qt=!1,qS(e,t,r);qt=!!(e.flags&131072)}else qt=!1,qe&&t.flags&1048576&&Gv(t,ec,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Sl(e,t),e=t.pendingProps;var a=Aa(t,Et.current);ja(t,r),a=bf(null,t,n,e,a,r);var i=jf();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wt(n)?(i=!0,Xl(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,pf(t),a.updater=Yc,t.stateNode=a,a._reactInternals=t,Lm(t,n,e,r),t=Im(null,t,n,!0,i,r)):(t.tag=0,qe&&i&&lf(t),Lt(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Sl(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=a4(n),e=ks(n,e),a){case 0:t=Dm(null,t,n,e,r);break e;case 1:t=B0(null,t,n,e,r);break e;case 11:t=$0(null,t,n,e,r);break e;case 14:t=F0(null,t,n,ks(n.type,e),r);break e}throw Error(Q(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ks(n,a),Dm(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ks(n,a),B0(e,t,n,a,r);case 3:e:{if(Ab(t),e===null)throw Error(Q(387));n=t.pendingProps,i=t.memoizedState,a=i.element,tb(e,t),rc(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ra(Error(Q(423)),t),t=U0(e,t,n,r,a);break e}else if(n!==a){a=Ra(Error(Q(424)),t),t=U0(e,t,n,r,a);break e}else for(ss=$r(t.stateNode.containerInfo.firstChild),rs=t,qe=!0,As=null,r=Zv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ea(),n===a){t=xr(e,t,r);break e}Lt(e,t,n,r)}t=t.child}return t;case 5:return sb(t),e===null&&Om(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Cm(n,a)?o=null:i!==null&&Cm(n,i)&&(t.flags|=32),Pb(e,t),Lt(e,t,o,r),t.child;case 6:return e===null&&Om(t),null;case 13:return Eb(e,t,r);case 4:return xf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ta(t,null,n,r):Lt(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ks(n,a),$0(e,t,n,a,r);case 7:return Lt(e,t,t.pendingProps,r),t.child;case 8:return Lt(e,t,t.pendingProps.children,r),t.child;case 12:return Lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Le(tc,n._currentValue),n._currentValue=o,i!==null)if(Rs(i.value,o)){if(i.children===a.children&&!Ht.current){t=xr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=cr(-1,r&-r),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Rm(i.return,r,t),l.lanes|=r;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Rm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Lt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ja(t,r),a=vs(a),n=n(a),t.flags|=1,Lt(e,t,n,r),t.child;case 14:return n=t.type,a=ks(n,t.pendingProps),a=ks(n.type,a),F0(e,t,n,a,r);case 15:return kb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ks(n,a),Sl(e,t),t.tag=1,Wt(n)?(e=!0,Xl(t)):e=!1,ja(t,r),wb(t,n,a),Lm(t,n,a,r),Im(null,t,n,!0,e,r);case 19:return Tb(e,t,r);case 22:return Cb(e,t,r)}throw Error(Q(156,t.tag))};function Wb(e,t){return vv(e,t)}function n4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(e,t,r,n){return new n4(e,t,r,n)}function Of(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a4(e){if(typeof e=="function")return Of(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gh)return 11;if(e===Yh)return 14}return 2}function zr(e,t){var r=e.alternate;return r===null?(r=xs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pl(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Of(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ea:return Pn(r.children,a,i,t);case Kh:o=8,a|=8;break;case nm:return e=xs(12,r,t,a|2),e.elementType=nm,e.lanes=i,e;case am:return e=xs(13,r,t,a),e.elementType=am,e.lanes=i,e;case im:return e=xs(19,r,t,a),e.elementType=im,e.lanes=i,e;case sv:return Zc(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ev:o=10;break e;case tv:o=9;break e;case Gh:o=11;break e;case Yh:o=14;break e;case Sr:o=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=xs(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Pn(e,t,r,n){return e=xs(7,e,n,t),e.lanes=r,e}function Zc(e,t,r,n){return e=xs(22,e,n,t),e.elementType=sv,e.lanes=r,e.stateNode={isHidden:!1},e}function wu(e,t,r){return e=xs(6,e,null,t),e.lanes=r,e}function Nu(e,t,r){return t=xs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function i4(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ru(0),this.expirationTimes=ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ru(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Rf(e,t,r,n,a,i,o,l,d){return e=new i4(e,t,r,l,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pf(i),e}function o4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Qb(e){if(!e)return Gr;e=e._reactInternals;e:{if(Bn(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var r=e.type;if(Wt(r))return Qv(e,r,t)}return t}function Kb(e,t,r,n,a,i,o,l,d){return e=Rf(r,n,!0,e,a,i,o,l,d),e.context=Qb(null),r=e.current,n=It(),a=Ur(r),i=cr(n,a),i.callback=t??null,Fr(r,i,a),e.current.lanes=a,vo(e,a,n),Qt(e,n),e}function ed(e,t,r,n){var a=t.current,i=It(),o=Ur(a);return r=Qb(r),t.context===null?t.context=r:t.pendingContext=r,t=cr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Fr(a,t,o),e!==null&&(Os(e,a,o,i),jl(e,a,o)),o}function uc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function J0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Mf(e,t){J0(e,t),(e=e.alternate)&&J0(e,t)}function l4(){return null}var Gb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lf(e){this._internalRoot=e}td.prototype.render=Lf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));ed(e,t,null,null)};td.prototype.unmount=Lf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_n(function(){ed(null,e,null,null)}),t[fr]=null}};function td(e){this._internalRoot=e}td.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cv();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pr.length&&t!==0&&t<Pr[r].priority;r++);Pr.splice(r,0,e),r===0&&Av(e)}};function _f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function X0(){}function c4(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var c=uc(o);i.call(c)}}var o=Kb(t,n,e,0,null,!1,!1,"",X0);return e._reactRootContainer=o,e[fr]=o.current,Qi(e.nodeType===8?e.parentNode:e),_n(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var c=uc(d);l.call(c)}}var d=Rf(e,0,!1,null,null,!1,!1,"",X0);return e._reactRootContainer=d,e[fr]=d.current,Qi(e.nodeType===8?e.parentNode:e),_n(function(){ed(t,d,r,n)}),d}function rd(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var d=uc(o);l.call(d)}}ed(t,o,e,a)}else o=c4(r,t,e,a,n);return uc(o)}Sv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gi(t.pendingLanes);r!==0&&(Zh(t,r|1),Qt(t,st()),!(Se&6)&&(Ma=st()+500,cn()))}break;case 13:_n(function(){var n=pr(e,1);if(n!==null){var a=It();Os(n,e,1,a)}}),Mf(e,1)}};ef=function(e){if(e.tag===13){var t=pr(e,134217728);if(t!==null){var r=It();Os(t,e,134217728,r)}Mf(e,134217728)}};kv=function(e){if(e.tag===13){var t=Ur(e),r=pr(e,t);if(r!==null){var n=It();Os(r,e,t,n)}Mf(e,t)}};Cv=function(){return Te};Pv=function(e,t){var r=Te;try{return Te=e,t()}finally{Te=r}};xm=function(e,t,r){switch(t){case"input":if(cm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Qc(n);if(!a)throw Error(Q(90));nv(n),cm(n,a)}}}break;case"textarea":iv(e,r);break;case"select":t=r.value,t!=null&&ga(e,!!r.multiple,t,!1)}};hv=Af;fv=_n;var d4={usingClientEntryPoint:!1,Events:[jo,na,Qc,uv,mv,Af]},oi={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u4={bundleType:oi.bundleType,version:oi.version,rendererPackageName:oi.rendererPackageName,rendererConfig:oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:br.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gv(e),e===null?null:e.stateNode},findFiberByHostInstance:oi.findFiberByHostInstance||l4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{Vc=Zo.inject(u4),qs=Zo}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d4;ls.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_f(t))throw Error(Q(200));return o4(e,t,null,r)};ls.createRoot=function(e,t){if(!_f(e))throw Error(Q(299));var r=!1,n="",a=Gb;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Rf(e,1,!1,null,null,r,!1,n,a),e[fr]=t.current,Qi(e.nodeType===8?e.parentNode:e),new Lf(t)};ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=gv(t),e=e===null?null:e.stateNode,e};ls.flushSync=function(e){return _n(e)};ls.hydrate=function(e,t,r){if(!sd(t))throw Error(Q(200));return rd(null,e,t,!0,r)};ls.hydrateRoot=function(e,t,r){if(!_f(e))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Gb;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Kb(t,null,e,1,r??null,a,!1,i,o),e[fr]=t.current,Qi(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new td(t)};ls.render=function(e,t,r){if(!sd(t))throw Error(Q(200));return rd(null,e,t,!1,r)};ls.unmountComponentAtNode=function(e){if(!sd(e))throw Error(Q(40));return e._reactRootContainer?(_n(function(){rd(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1};ls.unstable_batchedUpdates=Af;ls.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!sd(r))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return rd(e,t,r,!1,n)};ls.version="18.3.1-next-f1338f8080-20240426";function Yb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yb)}catch(e){console.error(e)}}Yb(),Yy.exports=ls;var nd=Yy.exports,Z0=nd;sm.createRoot=Z0.createRoot,sm.hydrateRoot=Z0.hydrateRoot;var Jb={exports:{}},Xb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=w;function m4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var h4=typeof Object.is=="function"?Object.is:m4,f4=La.useState,p4=La.useEffect,x4=La.useLayoutEffect,g4=La.useDebugValue;function y4(e,t){var r=t(),n=f4({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return x4(function(){a.value=r,a.getSnapshot=t,Su(a)&&i({inst:a})},[e,r,t]),p4(function(){return Su(a)&&i({inst:a}),e(function(){Su(a)&&i({inst:a})})},[e]),g4(r),r}function Su(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!h4(e,r)}catch{return!0}}function v4(e,t){return t()}var b4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v4:y4;Xb.useSyncExternalStore=La.useSyncExternalStore!==void 0?La.useSyncExternalStore:b4;Jb.exports=Xb;var j4=Jb.exports,Zb={exports:{}},ej={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=w,w4=j4;function N4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var S4=typeof Object.is=="function"?Object.is:N4,k4=w4.useSyncExternalStore,C4=ad.useRef,P4=ad.useEffect,A4=ad.useMemo,E4=ad.useDebugValue;ej.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=C4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=A4(function(){function d(f){if(!c){if(c=!0,u=f,f=n(f),a!==void 0&&o.hasValue){var p=o.value;if(a(p,f))return m=p}return m=f}if(p=m,S4(u,f))return p;var y=n(f);return a!==void 0&&a(p,y)?(u=f,p):(u=f,m=y)}var c=!1,u,m,h=r===void 0?null:r;return[function(){return d(t())},h===null?void 0:function(){return d(h())}]},[t,r,n,a]);var l=k4(e,i[0],i[1]);return P4(function(){o.hasValue=!0,o.value=l},[l]),E4(l),l};Zb.exports=ej;var T4=Zb.exports;function O4(e){e()}let tj=O4;const R4=e=>tj=e,M4=()=>tj,ex=Symbol.for("react-redux-context"),tx=typeof globalThis<"u"?globalThis:{};function L4(){var e;if(!w.createContext)return{};const t=(e=tx[ex])!=null?e:tx[ex]=new Map;let r=t.get(w.createContext);return r||(r=w.createContext(null),t.set(w.createContext,r)),r}const Yr=L4();function Df(e=Yr){return function(){return w.useContext(e)}}const sj=Df(),_4=()=>{throw new Error("uSES not initialized!")};let rj=_4;const D4=e=>{rj=e},I4=(e,t)=>e===t;function $4(e=Yr){const t=e===Yr?sj:Df(e);return function(n,a={}){const{equalityFn:i=I4,stabilityCheck:o=void 0,noopCheck:l=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:d,subscription:c,getServerState:u,stabilityCheck:m,noopCheck:h}=t();w.useRef(!0);const f=w.useCallback({[n.name](y){return n(y)}}[n.name],[n,m,o]),p=rj(c.addNestedSub,d.getState,u||d.getState,f,i);return w.useDebugValue(p),p}}const de=$4();var nj={exports:{}},Oe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=typeof Symbol=="function"&&Symbol.for,If=gt?Symbol.for("react.element"):60103,$f=gt?Symbol.for("react.portal"):60106,id=gt?Symbol.for("react.fragment"):60107,od=gt?Symbol.for("react.strict_mode"):60108,ld=gt?Symbol.for("react.profiler"):60114,cd=gt?Symbol.for("react.provider"):60109,dd=gt?Symbol.for("react.context"):60110,Ff=gt?Symbol.for("react.async_mode"):60111,ud=gt?Symbol.for("react.concurrent_mode"):60111,md=gt?Symbol.for("react.forward_ref"):60112,hd=gt?Symbol.for("react.suspense"):60113,F4=gt?Symbol.for("react.suspense_list"):60120,fd=gt?Symbol.for("react.memo"):60115,pd=gt?Symbol.for("react.lazy"):60116,B4=gt?Symbol.for("react.block"):60121,U4=gt?Symbol.for("react.fundamental"):60117,z4=gt?Symbol.for("react.responder"):60118,V4=gt?Symbol.for("react.scope"):60119;function ds(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case If:switch(e=e.type,e){case Ff:case ud:case id:case ld:case od:case hd:return e;default:switch(e=e&&e.$$typeof,e){case dd:case md:case pd:case fd:case cd:return e;default:return t}}case $f:return t}}}function aj(e){return ds(e)===ud}Oe.AsyncMode=Ff;Oe.ConcurrentMode=ud;Oe.ContextConsumer=dd;Oe.ContextProvider=cd;Oe.Element=If;Oe.ForwardRef=md;Oe.Fragment=id;Oe.Lazy=pd;Oe.Memo=fd;Oe.Portal=$f;Oe.Profiler=ld;Oe.StrictMode=od;Oe.Suspense=hd;Oe.isAsyncMode=function(e){return aj(e)||ds(e)===Ff};Oe.isConcurrentMode=aj;Oe.isContextConsumer=function(e){return ds(e)===dd};Oe.isContextProvider=function(e){return ds(e)===cd};Oe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===If};Oe.isForwardRef=function(e){return ds(e)===md};Oe.isFragment=function(e){return ds(e)===id};Oe.isLazy=function(e){return ds(e)===pd};Oe.isMemo=function(e){return ds(e)===fd};Oe.isPortal=function(e){return ds(e)===$f};Oe.isProfiler=function(e){return ds(e)===ld};Oe.isStrictMode=function(e){return ds(e)===od};Oe.isSuspense=function(e){return ds(e)===hd};Oe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===id||e===ud||e===ld||e===od||e===hd||e===F4||typeof e=="object"&&e!==null&&(e.$$typeof===pd||e.$$typeof===fd||e.$$typeof===cd||e.$$typeof===dd||e.$$typeof===md||e.$$typeof===U4||e.$$typeof===z4||e.$$typeof===V4||e.$$typeof===B4)};Oe.typeOf=ds;nj.exports=Oe;var q4=nj.exports,ij=q4,H4={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},W4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oj={};oj[ij.ForwardRef]=H4;oj[ij.Memo]=W4;var Me={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=Symbol.for("react.element"),Uf=Symbol.for("react.portal"),xd=Symbol.for("react.fragment"),gd=Symbol.for("react.strict_mode"),yd=Symbol.for("react.profiler"),vd=Symbol.for("react.provider"),bd=Symbol.for("react.context"),Q4=Symbol.for("react.server_context"),jd=Symbol.for("react.forward_ref"),wd=Symbol.for("react.suspense"),Nd=Symbol.for("react.suspense_list"),Sd=Symbol.for("react.memo"),kd=Symbol.for("react.lazy"),K4=Symbol.for("react.offscreen"),lj;lj=Symbol.for("react.module.reference");function ws(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Bf:switch(e=e.type,e){case xd:case yd:case gd:case wd:case Nd:return e;default:switch(e=e&&e.$$typeof,e){case Q4:case bd:case jd:case kd:case Sd:case vd:return e;default:return t}}case Uf:return t}}}Me.ContextConsumer=bd;Me.ContextProvider=vd;Me.Element=Bf;Me.ForwardRef=jd;Me.Fragment=xd;Me.Lazy=kd;Me.Memo=Sd;Me.Portal=Uf;Me.Profiler=yd;Me.StrictMode=gd;Me.Suspense=wd;Me.SuspenseList=Nd;Me.isAsyncMode=function(){return!1};Me.isConcurrentMode=function(){return!1};Me.isContextConsumer=function(e){return ws(e)===bd};Me.isContextProvider=function(e){return ws(e)===vd};Me.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bf};Me.isForwardRef=function(e){return ws(e)===jd};Me.isFragment=function(e){return ws(e)===xd};Me.isLazy=function(e){return ws(e)===kd};Me.isMemo=function(e){return ws(e)===Sd};Me.isPortal=function(e){return ws(e)===Uf};Me.isProfiler=function(e){return ws(e)===yd};Me.isStrictMode=function(e){return ws(e)===gd};Me.isSuspense=function(e){return ws(e)===wd};Me.isSuspenseList=function(e){return ws(e)===Nd};Me.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===xd||e===yd||e===gd||e===wd||e===Nd||e===K4||typeof e=="object"&&e!==null&&(e.$$typeof===kd||e.$$typeof===Sd||e.$$typeof===vd||e.$$typeof===bd||e.$$typeof===jd||e.$$typeof===lj||e.getModuleId!==void 0)};Me.typeOf=ws;function G4(){const e=M4();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const sx={notify(){},get:()=>[]};function Y4(e,t){let r,n=sx,a=0,i=!1;function o(y){u();const j=n.subscribe(y);let N=!1;return()=>{N||(N=!0,j(),m())}}function l(){n.notify()}function d(){p.onStateChange&&p.onStateChange()}function c(){return i}function u(){a++,r||(r=e.subscribe(d),n=G4())}function m(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=sx)}function h(){i||(i=!0,u())}function f(){i&&(i=!1,m())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:d,isSubscribed:c,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>n};return p}const J4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X4=J4?w.useLayoutEffect:w.useEffect;function rx(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function mc(e,t){if(rx(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!rx(e[r[a]],t[r[a]]))return!1;return!0}function Z4({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const o=w.useMemo(()=>{const c=Y4(e);return{store:e,subscription:c,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),l=w.useMemo(()=>e.getState(),[e]);X4(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==e.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,l]);const d=t||Yr;return w.createElement(d.Provider,{value:o},r)}function cj(e=Yr){const t=e===Yr?sj:Df(e);return function(){const{store:n}=t();return n}}const dj=cj();function ek(e=Yr){const t=e===Yr?dj:cj(e);return function(){return t().dispatch}}const tt=ek();D4(T4.useSyncExternalStoreWithSelector);R4(nd.unstable_batchedUpdates);/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},so.apply(this,arguments)}var Mr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mr||(Mr={}));const nx="popstate";function tk(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Gm("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:hc(a)}return rk(t,r,null,e)}function ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sk(){return Math.random().toString(36).substr(2,8)}function ax(e,t){return{usr:e.state,key:e.key,idx:t}}function Gm(e,t,r,n){return r===void 0&&(r=null),so({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Wa(t):t,{state:r,key:t&&t.key||n||sk()})}function hc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Wa(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function rk(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Mr.Pop,d=null,c=u();c==null&&(c=0,o.replaceState(so({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=Mr.Pop;let j=u(),N=j==null?null:j-c;c=j,d&&d({action:l,location:y.location,delta:N})}function h(j,N){l=Mr.Push;let v=Gm(y.location,j,N);c=u()+1;let b=ax(v,c),x=y.createHref(v);try{o.pushState(b,"",x)}catch{a.location.assign(x)}i&&d&&d({action:l,location:y.location,delta:1})}function f(j,N){l=Mr.Replace;let v=Gm(y.location,j,N);c=u();let b=ax(v,c),x=y.createHref(v);o.replaceState(b,"",x),i&&d&&d({action:l,location:y.location,delta:0})}function p(j){let N=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof j=="string"?j:hc(j);return ot(N,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,N)}let y={get action(){return l},get location(){return e(a,o)},listen(j){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(nx,m),d=j,()=>{a.removeEventListener(nx,m),d=null}},createHref(j){return t(a,j)},createURL:p,encodeLocation(j){let N=p(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:h,replace:f,go(j){return o.go(j)}};return y}var ix;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ix||(ix={}));function nk(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?Wa(t):t,a=hj(n.pathname||"/",r);if(a==null)return null;let i=uj(e);ak(i);let o=null;for(let l=0;o==null&&l<i.length;++l)o=fk(i[l],gk(a));return o}function uj(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(ot(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let c=Vr([n,d.relativePath]),u=r.concat(d);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uj(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:mk(c,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let d of mj(i.path))a(i,o,d)}),t}function mj(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=mj(n.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function ak(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hk(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ik=/^:\w+$/,ok=3,lk=2,ck=1,dk=10,uk=-2,ox=e=>e==="*";function mk(e,t){let r=e.split("/"),n=r.length;return r.some(ox)&&(n+=uk),t&&(n+=lk),r.filter(a=>!ox(a)).reduce((a,i)=>a+(ik.test(i)?ok:i===""?ck:dk),n)}function hk(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function fk(e,t){let{routesMeta:r}=e,n={},a="/",i=[];for(let o=0;o<r.length;++o){let l=r[o],d=o===r.length-1,c=a==="/"?t:t.slice(a.length)||"/",u=pk({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},c);if(!u)return null;Object.assign(n,u.params);let m=l.route;i.push({params:n,pathname:Vr([a,u.pathname]),pathnameBase:jk(Vr([a,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(a=Vr([a,u.pathnameBase]))}return i}function pk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=xk(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((c,u,m)=>{if(u==="*"){let h=l[m]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}return c[u]=yk(l[m]||"",u),c},{}),pathname:i,pathnameBase:o,pattern:e}}function xk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),zf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,l)=>(n.push(l),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function gk(e){try{return decodeURI(e)}catch(t){return zf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yk(e,t){try{return decodeURIComponent(e)}catch(r){return zf(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function hj(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function zf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vk(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Wa(e):e;return{pathname:r?r.startsWith("/")?r:bk(r,t):t,search:wk(n),hash:Nk(a)}}function bk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ku(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fj(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function pj(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Wa(e):(a=so({},e),ot(!a.pathname||!a.pathname.includes("?"),ku("?","pathname","search",a)),ot(!a.pathname||!a.pathname.includes("#"),ku("#","pathname","hash",a)),ot(!a.search||!a.search.includes("#"),ku("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(n||o==null)l=r;else{let m=t.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let d=vk(a,l),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(c||u)&&(d.pathname+="/"),d}const Vr=e=>e.join("/").replace(/\/\/+/g,"/"),jk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Nk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Sk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xj=["post","put","patch","delete"];new Set(xj);const kk=["get",...xj];new Set(kk);/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(this,arguments)}const gj=w.createContext(null),Vf=w.createContext(null),Cd=w.createContext(null),Pd=w.createContext(null),Un=w.createContext({outlet:null,matches:[]}),yj=w.createContext(null);function Ck(e,t){let{relative:r}=t===void 0?{}:t;Qa()||ot(!1);let{basename:n,navigator:a}=w.useContext(Cd),{hash:i,pathname:o,search:l}=vj(e,{relative:r}),d=o;return n!=="/"&&(d=o==="/"?n:Vr([n,o])),a.createHref({pathname:d,search:l,hash:i})}function Qa(){return w.useContext(Pd)!=null}function Jt(){return Qa()||ot(!1),w.useContext(Pd).location}function ce(){Qa()||ot(!1);let{basename:e,navigator:t}=w.useContext(Cd),{matches:r}=w.useContext(Un),{pathname:n}=Jt(),a=JSON.stringify(fj(r).map(l=>l.pathnameBase)),i=w.useRef(!1);return w.useEffect(()=>{i.current=!0}),w.useCallback(function(l,d){if(d===void 0&&(d={}),!i.current)return;if(typeof l=="number"){t.go(l);return}let c=pj(l,JSON.parse(a),n,d.relative==="path");e!=="/"&&(c.pathname=c.pathname==="/"?e:Vr([e,c.pathname])),(d.replace?t.replace:t.push)(c,d.state,d)},[e,t,a,n])}function No(){let{matches:e}=w.useContext(Un),t=e[e.length-1];return t?t.params:{}}function vj(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=w.useContext(Un),{pathname:a}=Jt(),i=JSON.stringify(fj(n).map(o=>o.pathnameBase));return w.useMemo(()=>pj(e,JSON.parse(i),a,r==="path"),[e,i,a,r])}function Pk(e,t){Qa()||ot(!1);let{navigator:r}=w.useContext(Cd),n=w.useContext(Vf),{matches:a}=w.useContext(Un),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let d=Jt(),c;if(t){var u;let y=typeof t=="string"?Wa(t):t;l==="/"||(u=y.pathname)!=null&&u.startsWith(l)||ot(!1),c=y}else c=d;let m=c.pathname||"/",h=l==="/"?m:m.slice(l.length)||"/",f=nk(e,{pathname:h}),p=Ok(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Vr([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Vr([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n||void 0);return t&&p?w.createElement(Pd.Provider,{value:{location:Ym({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Mr.Pop}},p):p}function Ak(){let e=_k(),t=Sk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:a},r):null,null)}class Ek extends w.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location?{error:t.error,location:t.location}:{error:t.error||r.error,location:r.location}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?w.createElement(Un.Provider,{value:this.props.routeContext},w.createElement(yj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tk(e){let{routeContext:t,match:r,children:n}=e,a=w.useContext(gj);return a&&a.static&&a.staticContext&&r.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(Un.Provider,{value:t},n)}function Ok(e,t,r){if(t===void 0&&(t=[]),e==null)if(r!=null&&r.errors)e=r.matches;else return null;let n=e,a=r==null?void 0:r.errors;if(a!=null){let i=n.findIndex(o=>o.route.id&&(a==null?void 0:a[o.route.id]));i>=0||ot(!1),n=n.slice(0,Math.min(n.length,i+1))}return n.reduceRight((i,o,l)=>{let d=o.route.id?a==null?void 0:a[o.route.id]:null,c=r?o.route.errorElement||w.createElement(Ak,null):null,u=t.concat(n.slice(0,l+1)),m=()=>w.createElement(Tk,{match:o,routeContext:{outlet:i,matches:u}},d?c:o.route.element!==void 0?o.route.element:i);return r&&(o.route.errorElement||l===0)?w.createElement(Ek,{location:r.location,component:c,error:d,children:m(),routeContext:{outlet:null,matches:u}}):m()},null)}var lx;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(lx||(lx={}));var fc;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(fc||(fc={}));function Rk(e){let t=w.useContext(Vf);return t||ot(!1),t}function Mk(e){let t=w.useContext(Un);return t||ot(!1),t}function Lk(e){let t=Mk(),r=t.matches[t.matches.length-1];return r.route.id||ot(!1),r.route.id}function _k(){var e;let t=w.useContext(yj),r=Rk(fc.UseRouteError),n=Lk(fc.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function ir(e){let{to:t,replace:r,state:n,relative:a}=e;Qa()||ot(!1);let i=w.useContext(Vf),o=ce();return w.useEffect(()=>{i&&i.navigation.state!=="idle"||o(t,{replace:r,state:n,relative:a})}),null}function ne(e){ot(!1)}function Dk(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Mr.Pop,navigator:i,static:o=!1}=e;Qa()&&ot(!1);let l=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:l,navigator:i,static:o}),[l,i,o]);typeof n=="string"&&(n=Wa(n));let{pathname:c="/",search:u="",hash:m="",state:h=null,key:f="default"}=n,p=w.useMemo(()=>{let y=hj(c,l);return y==null?null:{pathname:y,search:u,hash:m,state:h,key:f}},[l,c,u,m,h,f]);return p==null?null:w.createElement(Cd.Provider,{value:d},w.createElement(Pd.Provider,{children:r,value:{location:p,navigationType:a}}))}function qf(e){let{children:t,location:r}=e,n=w.useContext(gj),a=n&&!t?n.router.routes:Jm(t);return Pk(a,r)}var cx;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(cx||(cx={}));new Promise(()=>{});function Jm(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,a)=>{if(!w.isValidElement(n))return;if(n.type===w.Fragment){r.push.apply(r,Jm(n.props.children,t));return}n.type!==ne&&ot(!1),!n.props.index||!n.props.children||ot(!1);let i=[...t,a],o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,hasErrorBoundary:n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle};n.props.children&&(o.children=Jm(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xm.apply(this,arguments)}function Ik(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function $k(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Fk(e,t){return e.button===0&&(!t||t==="_self")&&!$k(e)}const Bk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Uk(e){let{basename:t,children:r,window:n}=e,a=w.useRef();a.current==null&&(a.current=tk({window:n,v5Compat:!0}));let i=a.current,[o,l]=w.useState({action:i.action,location:i.location});return w.useLayoutEffect(()=>i.listen(l),[i]),w.createElement(Dk,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i})}const zk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fe=w.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:d,to:c,preventScrollReset:u}=t,m=Ik(t,Bk),h,f=!1;if(zk&&typeof c=="string"&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(c)){h=c;let N=new URL(window.location.href),v=c.startsWith("//")?new URL(N.protocol+c):new URL(c);v.origin===N.origin?c=v.pathname+v.search+v.hash:f=!0}let p=Ck(c,{relative:a}),y=Vk(c,{replace:o,state:l,target:d,preventScrollReset:u,relative:a});function j(N){n&&n(N),N.defaultPrevented||y(N)}return w.createElement("a",Xm({},m,{href:h||p,onClick:f||i?n:j,ref:r,target:d}))});var dx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(dx||(dx={}));var ux;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ux||(ux={}));function Vk(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o}=t===void 0?{}:t,l=ce(),d=Jt(),c=vj(e,{relative:o});return w.useCallback(u=>{if(Fk(u,r)){u.preventDefault();let m=n!==void 0?n:hc(d)===hc(c);l(e,{replace:m,state:a,preventScrollReset:i,relative:o})}},[d,l,c,n,a,r,e,i,o])}function bt(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ms(e){return!!e&&!!e[Be]}function Ls(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===Xk}(e)||Array.isArray(e)||!!e[Ri]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ri])||Ad(e)||Ed(e))}function qk(e){return Ms(e)||bt(23,e),e[Be].t}function Jr(e,t,r){r===void 0&&(r=!1),Xr(e)===0?(r?Object.keys:Na)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Xr(e){var t=e[Be];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ad(e)?2:Ed(e)?3:0}function qr(e,t){return Xr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Al(e,t){return Xr(e)===2?e.get(t):e[t]}function bj(e,t,r){var n=Xr(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function jj(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ad(e){return Yk&&e instanceof Map}function Ed(e){return Jk&&e instanceof Set}function xn(e){return e.o||e.t}function Hf(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Nj(e);delete t[Be];for(var r=Na(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Wf(e,t){return t===void 0&&(t=!1),Qf(e)||Ms(e)||!Ls(e)||(Xr(e)>1&&(e.set=e.add=e.clear=e.delete=Hk),Object.freeze(e),t&&Jr(e,function(r,n){return Wf(n,!0)},!0)),e}function Hk(){bt(2)}function Qf(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ws(e){var t=sh[e];return t||bt(18,e),t}function wj(e,t){sh[e]||(sh[e]=t)}function Zm(){return ro}function Cu(e,t){t&&(Ws("Patches"),e.u=[],e.s=[],e.v=t)}function pc(e){eh(e),e.p.forEach(Wk),e.p=null}function eh(e){e===ro&&(ro=e.l)}function mx(e){return ro={p:[],l:ro,h:e,m:!0,_:0}}function Wk(e){var t=e[Be];t.i===0||t.i===1?t.j():t.g=!0}function Pu(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||Ws("ES5").S(t,e,n),n?(r[Be].P&&(pc(t),bt(4)),Ls(e)&&(e=xc(t,e),t.l||gc(t,e)),t.u&&Ws("Patches").M(r[Be].t,e,t.u,t.s)):e=xc(t,r,[]),pc(t),t.u&&t.v(t.u,t.s),e!==Gf?e:void 0}function xc(e,t,r){if(Qf(t))return t;var n=t[Be];if(!n)return Jr(t,function(l,d){return hx(e,n,t,l,d,r)},!0),t;if(n.A!==e)return t;if(!n.P)return gc(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=Hf(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),Jr(i,function(l,d){return hx(e,n,a,l,d,r,o)}),gc(e,a,!1),r&&e.u&&Ws("Patches").N(n,r,e.u,e.s)}return n.o}function hx(e,t,r,n,a,i,o){if(Ms(a)){var l=xc(e,a,i&&t&&t.i!==3&&!qr(t.R,n)?i.concat(n):void 0);if(bj(r,n,l),!Ms(l))return;e.m=!1}else o&&r.add(a);if(Ls(a)&&!Qf(a)){if(!e.h.D&&e._<1)return;xc(e,a),t&&t.A.l||gc(e,a)}}function gc(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Wf(t,r)}function Au(e,t){var r=e[Be];return(r?xn(r):e)[t]}function fx(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Er(e){e.P||(e.P=!0,e.l&&Er(e.l))}function Eu(e){e.o||(e.o=Hf(e.t))}function th(e,t,r){var n=Ad(t)?Ws("MapSet").F(t,r):Ed(t)?Ws("MapSet").T(t,r):e.O?function(a,i){var o=Array.isArray(a),l={i:o?1:0,A:i?i.A:Zm(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},d=l,c=no;o&&(d=[l],c=vi);var u=Proxy.revocable(d,c),m=u.revoke,h=u.proxy;return l.k=h,l.j=m,h}(t,r):Ws("ES5").J(t,r);return(r?r.A:Zm()).p.push(n),n}function Qk(e){return Ms(e)||bt(22,e),function t(r){if(!Ls(r))return r;var n,a=r[Be],i=Xr(r);if(a){if(!a.P&&(a.i<4||!Ws("ES5").K(a)))return a.t;a.I=!0,n=px(r,i),a.I=!1}else n=px(r,i);return Jr(n,function(o,l){a&&Al(a.t,o)===l||bj(n,o,t(l))}),i===3?new Set(n):n}(e)}function px(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Hf(e)}function Kk(){function e(i,o){var l=a[i];return l?l.enumerable=o:a[i]=l={configurable:!0,enumerable:o,get:function(){var d=this[Be];return no.get(d,i)},set:function(d){var c=this[Be];no.set(c,i,d)}},l}function t(i){for(var o=i.length-1;o>=0;o--){var l=i[o][Be];if(!l.P)switch(l.i){case 5:n(l)&&Er(l);break;case 4:r(l)&&Er(l)}}}function r(i){for(var o=i.t,l=i.k,d=Na(l),c=d.length-1;c>=0;c--){var u=d[c];if(u!==Be){var m=o[u];if(m===void 0&&!qr(o,u))return!0;var h=l[u],f=h&&h[Be];if(f?f.t!==m:!jj(h,m))return!0}}var p=!!o[Be];return d.length!==Na(o).length+(p?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(o,o.length-1);if(l&&!l.get)return!0;for(var d=0;d<o.length;d++)if(!o.hasOwnProperty(d))return!0;return!1}var a={};wj("ES5",{J:function(i,o){var l=Array.isArray(i),d=function(u,m){if(u){for(var h=Array(m.length),f=0;f<m.length;f++)Object.defineProperty(h,""+f,e(f,!0));return h}var p=Nj(m);delete p[Be];for(var y=Na(p),j=0;j<y.length;j++){var N=y[j];p[N]=e(N,u||!!p[N].enumerable)}return Object.create(Object.getPrototypeOf(m),p)}(l,i),c={i:l?5:4,A:o?o.A:Zm(),P:!1,I:!1,R:{},l:o,t:i,k:d,o:null,g:!1,C:!1};return Object.defineProperty(d,Be,{value:c,writable:!0}),d},S:function(i,o,l){l?Ms(o)&&o[Be].A===i&&t(i.p):(i.u&&function d(c){if(c&&typeof c=="object"){var u=c[Be];if(u){var m=u.t,h=u.k,f=u.R,p=u.i;if(p===4)Jr(h,function(b){b!==Be&&(m[b]!==void 0||qr(m,b)?f[b]||d(h[b]):(f[b]=!0,Er(u)))}),Jr(m,function(b){h[b]!==void 0||qr(h,b)||(f[b]=!1,Er(u))});else if(p===5){if(n(u)&&(Er(u),f.length=!0),h.length<m.length)for(var y=h.length;y<m.length;y++)f[y]=!1;else for(var j=m.length;j<h.length;j++)f[j]=!0;for(var N=Math.min(h.length,m.length),v=0;v<N;v++)h.hasOwnProperty(v)||(f[v]=!0),f[v]===void 0&&d(h[v])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}function Gk(){function e(n){if(!Ls(n))return n;if(Array.isArray(n))return n.map(e);if(Ad(n))return new Map(Array.from(n.entries()).map(function(o){return[o[0],e(o[1])]}));if(Ed(n))return new Set(Array.from(n).map(e));var a=Object.create(Object.getPrototypeOf(n));for(var i in n)a[i]=e(n[i]);return qr(n,Ri)&&(a[Ri]=n[Ri]),a}function t(n){return Ms(n)?e(n):n}var r="add";wj("Patches",{$:function(n,a){return a.forEach(function(i){for(var o=i.path,l=i.op,d=n,c=0;c<o.length-1;c++){var u=Xr(d),m=o[c];typeof m!="string"&&typeof m!="number"&&(m=""+m),u!==0&&u!==1||m!=="__proto__"&&m!=="constructor"||bt(24),typeof d=="function"&&m==="prototype"&&bt(24),typeof(d=Al(d,m))!="object"&&bt(15,o.join("/"))}var h=Xr(d),f=e(i.value),p=o[o.length-1];switch(l){case"replace":switch(h){case 2:return d.set(p,f);case 3:bt(16);default:return d[p]=f}case r:switch(h){case 1:return p==="-"?d.push(f):d.splice(p,0,f);case 2:return d.set(p,f);case 3:return d.add(f);default:return d[p]=f}case"remove":switch(h){case 1:return d.splice(p,1);case 2:return d.delete(p);case 3:return d.delete(i.value);default:return delete d[p]}default:bt(17,l)}}),n},N:function(n,a,i,o){switch(n.i){case 0:case 4:case 2:return function(l,d,c,u){var m=l.t,h=l.o;Jr(l.R,function(f,p){var y=Al(m,f),j=Al(h,f),N=p?qr(m,f)?"replace":r:"remove";if(y!==j||N!=="replace"){var v=d.concat(f);c.push(N==="remove"?{op:N,path:v}:{op:N,path:v,value:j}),u.push(N===r?{op:"remove",path:v}:N==="remove"?{op:r,path:v,value:t(y)}:{op:"replace",path:v,value:t(y)})}})}(n,a,i,o);case 5:case 1:return function(l,d,c,u){var m=l.t,h=l.R,f=l.o;if(f.length<m.length){var p=[f,m];m=p[0],f=p[1];var y=[u,c];c=y[0],u=y[1]}for(var j=0;j<m.length;j++)if(h[j]&&f[j]!==m[j]){var N=d.concat([j]);c.push({op:"replace",path:N,value:t(f[j])}),u.push({op:"replace",path:N,value:t(m[j])})}for(var v=m.length;v<f.length;v++){var b=d.concat([v]);c.push({op:r,path:b,value:t(f[v])})}m.length<f.length&&u.push({op:"replace",path:d.concat(["length"]),value:m.length})}(n,a,i,o);case 3:return function(l,d,c,u){var m=l.t,h=l.o,f=0;m.forEach(function(p){if(!h.has(p)){var y=d.concat([f]);c.push({op:"remove",path:y,value:p}),u.unshift({op:r,path:y,value:p})}f++}),f=0,h.forEach(function(p){if(!m.has(p)){var y=d.concat([f]);c.push({op:r,path:y,value:p}),u.unshift({op:"remove",path:y,value:p})}f++})}(n,a,i,o)}},M:function(n,a,i,o){i.push({op:"replace",path:[],value:a===Gf?void 0:a}),o.push({op:"replace",path:[],value:n})}})}var xx,ro,Kf=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Yk=typeof Map<"u",Jk=typeof Set<"u",gx=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Gf=Kf?Symbol.for("immer-nothing"):((xx={})["immer-nothing"]=!0,xx),Ri=Kf?Symbol.for("immer-draftable"):"__$immer_draftable",Be=Kf?Symbol.for("immer-state"):"__$immer_state",Xk=""+Object.prototype.constructor,Na=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Nj=Object.getOwnPropertyDescriptors||function(e){var t={};return Na(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},sh={},no={get:function(e,t){if(t===Be)return e;var r=xn(e);if(!qr(r,t))return function(a,i,o){var l,d=fx(i,o);return d?"value"in d?d.value:(l=d.get)===null||l===void 0?void 0:l.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!Ls(n)?n:n===Au(e.t,t)?(Eu(e),e.o[t]=th(e.A.h,n,e)):n},has:function(e,t){return t in xn(e)},ownKeys:function(e){return Reflect.ownKeys(xn(e))},set:function(e,t,r){var n=fx(xn(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=Au(xn(e),t),i=a==null?void 0:a[Be];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(jj(r,a)&&(r!==void 0||qr(e.t,t)))return!0;Eu(e),Er(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Au(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Eu(e),Er(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=xn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){bt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bt(12)}},vi={};Jr(no,function(e,t){vi[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),vi.deleteProperty=function(e,t){return vi.set.call(this,e,t,void 0)},vi.set=function(e,t,r){return no.set.call(this,e[0],t,r,e[0])};var Zk=function(){function e(r){var n=this;this.O=gx,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var l=i;i=a;var d=n;return function(y){var j=this;y===void 0&&(y=l);for(var N=arguments.length,v=Array(N>1?N-1:0),b=1;b<N;b++)v[b-1]=arguments[b];return d.produce(y,function(x){var g;return(g=i).call.apply(g,[j,x].concat(v))})}}var c;if(typeof i!="function"&&bt(6),o!==void 0&&typeof o!="function"&&bt(7),Ls(a)){var u=mx(n),m=th(n,a,void 0),h=!0;try{c=i(m),h=!1}finally{h?pc(u):eh(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return Cu(u,o),Pu(y,u)},function(y){throw pc(u),y}):(Cu(u,o),Pu(c,u))}if(!a||typeof a!="object"){if((c=i(a))===void 0&&(c=a),c===Gf&&(c=void 0),n.D&&Wf(c,!0),o){var f=[],p=[];Ws("Patches").M(a,c,f,p),o(f,p)}return c}bt(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(c){for(var u=arguments.length,m=Array(u>1?u-1:0),h=1;h<u;h++)m[h-1]=arguments[h];return n.produceWithPatches(c,function(f){return a.apply(void 0,[f].concat(m))})};var o,l,d=n.produce(a,i,function(c,u){o=c,l=u});return typeof Promise<"u"&&d instanceof Promise?d.then(function(c){return[c,o,l]}):[d,o,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Ls(r)||bt(8),Ms(r)&&(r=Qk(r));var n=mx(this),a=th(this,r,void 0);return a[Be].C=!0,eh(n),a},t.finishDraft=function(r,n){var a=r&&r[Be],i=a.A;return Cu(i,n),Pu(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!gx&&bt(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=Ws("Patches").$;return Ms(r)?o(r,n):this.produce(r,function(l){return o(l,n)})},e}(),is=new Zk,So=is.produce,Sj=is.produceWithPatches.bind(is);is.setAutoFreeze.bind(is);is.setUseProxies.bind(is);var yx=is.applyPatches.bind(is);is.createDraft.bind(is);is.finishDraft.bind(is);function ao(e){"@babel/helpers - typeof";return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(e)}function eC(e,t){if(ao(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ao(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tC(e){var t=eC(e,"string");return ao(t)=="symbol"?t:t+""}function sC(e,t,r){return(t=tC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vx(Object(r),!0).forEach(function(n){sC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ct(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var jx=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Tu=function(){return Math.random().toString(36).substring(7).split("").join(".")},yc={INIT:"@@redux/INIT"+Tu(),REPLACE:"@@redux/REPLACE"+Tu(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Tu()}};function rC(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function kj(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ct(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ct(1));return r(kj)(e,t)}if(typeof e!="function")throw new Error(Ct(2));var a=e,i=t,o=[],l=o,d=!1;function c(){l===o&&(l=o.slice())}function u(){if(d)throw new Error(Ct(3));return i}function m(y){if(typeof y!="function")throw new Error(Ct(4));if(d)throw new Error(Ct(5));var j=!0;return c(),l.push(y),function(){if(j){if(d)throw new Error(Ct(6));j=!1,c();var v=l.indexOf(y);l.splice(v,1),o=null}}}function h(y){if(!rC(y))throw new Error(Ct(7));if(typeof y.type>"u")throw new Error(Ct(8));if(d)throw new Error(Ct(9));try{d=!0,i=a(i,y)}finally{d=!1}for(var j=o=l,N=0;N<j.length;N++){var v=j[N];v()}return y}function f(y){if(typeof y!="function")throw new Error(Ct(10));a=y,h({type:yc.REPLACE})}function p(){var y,j=m;return y={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Ct(11));function b(){v.next&&v.next(u())}b();var x=j(b);return{unsubscribe:x}}},y[jx]=function(){return this},y}return h({type:yc.INIT}),n={dispatch:h,subscribe:m,getState:u,replaceReducer:f},n[jx]=p,n}function nC(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:yc.INIT});if(typeof n>"u")throw new Error(Ct(12));if(typeof r(void 0,{type:yc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ct(13))})}function Yf(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),o;try{nC(r)}catch(l){o=l}return function(d,c){if(d===void 0&&(d={}),o)throw o;for(var u=!1,m={},h=0;h<i.length;h++){var f=i[h],p=r[f],y=d[f],j=p(y,c);if(typeof j>"u")throw c&&c.type,new Error(Ct(14));m[f]=j,u=u||j!==y}return u=u||i.length!==Object.keys(d).length,u?m:d}}function vc(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function aC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Ct(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(d){return d(o)});return i=vc.apply(void 0,l)(a.dispatch),bx(bx({},a),{},{dispatch:i})}}}var bc="NOT_FOUND";function iC(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:bc},put:function(n,a){t={key:n,value:a}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function oC(e,t){var r=[];function n(l){var d=r.findIndex(function(u){return t(l,u.key)});if(d>-1){var c=r[d];return d>0&&(r.splice(d,1),r.unshift(c)),c.value}return bc}function a(l,d){n(l)===bc&&(r.unshift({key:l,value:d}),r.length>e&&r.pop())}function i(){return r}function o(){r=[]}return{get:n,put:a,getEntries:i,clear:o}}var lC=function(t,r){return t===r};function cC(e){return function(r,n){if(r===null||n===null||r.length!==n.length)return!1;for(var a=r.length,i=0;i<a;i++)if(!e(r[i],n[i]))return!1;return!0}}function rh(e,t){var r=typeof t=="object"?t:{equalityCheck:t},n=r.equalityCheck,a=n===void 0?lC:n,i=r.maxSize,o=i===void 0?1:i,l=r.resultEqualityCheck,d=cC(a),c=o===1?iC(d):oC(o,d);function u(){var m=c.get(arguments);if(m===bc){if(m=e.apply(null,arguments),l){var h=c.getEntries(),f=h.find(function(p){return l(p.value,m)});f&&(m=f.value)}c.put(arguments,m)}return m}return u.clearCache=function(){return c.clear()},u}function dC(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(n){return typeof n=="function"})){var r=t.map(function(n){return typeof n=="function"?"function "+(n.name||"unnamed")+"()":typeof n}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function uC(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];var c=0,u,m={memoizeOptions:void 0},h=l.pop();if(typeof h=="object"&&(m=h,h=l.pop()),typeof h!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof h+"]");var f=m,p=f.memoizeOptions,y=p===void 0?r:p,j=Array.isArray(y)?y:[y],N=dC(l),v=e.apply(void 0,[function(){return c++,h.apply(null,arguments)}].concat(j)),b=e(function(){for(var g=[],k=N.length,C=0;C<k;C++)g.push(N[C].apply(null,arguments));return u=v.apply(null,g),u});return Object.assign(b,{resultFunc:h,memoizedResultFunc:v,dependencies:N,lastResult:function(){return u},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),b};return a}var Mi=uC(rh);function Cj(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(o){return function(l){return typeof l=="function"?l(a,i,e):o(l)}}};return t}var nh=Cj();nh.withExtraArgument=Cj;var Pj=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mC=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},_a=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},hC=Object.defineProperty,fC=Object.defineProperties,pC=Object.getOwnPropertyDescriptors,wx=Object.getOwnPropertySymbols,xC=Object.prototype.hasOwnProperty,gC=Object.prototype.propertyIsEnumerable,Nx=function(e,t,r){return t in e?hC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Hr=function(e,t){for(var r in t||(t={}))xC.call(t,r)&&Nx(e,r,t[r]);if(wx)for(var n=0,a=wx(t);n<a.length;n++){var r=a[n];gC.call(t,r)&&Nx(e,r,t[r])}return e},Ou=function(e,t){return fC(e,pC(t))},yC=function(e,t,r){return new Promise(function(n,a){var i=function(d){try{l(r.next(d))}catch(c){a(c)}},o=function(d){try{l(r.throw(d))}catch(c){a(c)}},l=function(d){return d.done?n(d.value):Promise.resolve(d.value).then(i,o)};l((r=r.apply(e,t)).next())})},vC=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vc:vc.apply(null,arguments)};function Zr(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var bC=function(e){return e&&typeof e.match=="function"};function $t(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Hr(Hr({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var jC=function(e){Pj(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,_a([void 0],r[0].concat(this)))):new(t.bind.apply(t,_a([void 0],r.concat(this))))},t}(Array),wC=function(e){Pj(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,_a([void 0],r[0].concat(this)))):new(t.bind.apply(t,_a([void 0],r.concat(this))))},t}(Array);function ah(e){return Ls(e)?So(e,function(){}):e}function NC(e){return typeof e=="boolean"}function SC(){return function(t){return kC(t)}}function kC(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new jC;return r&&(NC(r)?n.push(nh):n.push(nh.withExtraArgument(r.extraArgument))),n}function CC(e){var t=SC(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,l=r.devTools,d=l===void 0?!0:l,c=r.preloadedState,u=c===void 0?void 0:c,m=r.enhancers,h=m===void 0?void 0:m,f;if(typeof a=="function")f=a;else if(Zr(a))f=Yf(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var y=aC.apply(void 0,p),j=vc;d&&(j=vC(Hr({trace:!1},typeof d=="object"&&d)));var N=new wC(y),v=N;Array.isArray(h)?v=_a([y],h):typeof h=="function"&&(v=h(N));var b=j.apply(void 0,v);return kj(f,u,b)}function Aj(e){var t={},r=[],n,a={addCase:function(i,o){var l=typeof i=="string"?i:i.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[l]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function PC(e){return typeof e=="function"}function AC(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?Aj(t):[t,r,n],i=a[0],o=a[1],l=a[2],d;if(PC(e))d=function(){return ah(e())};else{var c=ah(e);d=function(){return c}}function u(m,h){m===void 0&&(m=d());var f=_a([i[h.type]],o.filter(function(p){var y=p.matcher;return y(h)}).map(function(p){var y=p.reducer;return y}));return f.filter(function(p){return!!p}).length===0&&(f=[l]),f.reduce(function(p,y){if(y)if(Ms(p)){var j=p,N=y(j,h);return N===void 0?p:N}else{if(Ls(p))return So(p,function(v){return y(v,h)});var N=y(p,h);if(N===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}return p},m)}return u.getInitialState=d,u}function EC(e,t){return e+"/"+t}function sr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:ah(e.initialState),n=e.reducers||{},a=Object.keys(n),i={},o={},l={};a.forEach(function(u){var m=n[u],h=EC(t,u),f,p;"reducer"in m?(f=m.reducer,p=m.prepare):f=m,i[u]=f,o[h]=f,l[u]=p?$t(h,p):$t(h)});function d(){var u=typeof e.extraReducers=="function"?Aj(e.extraReducers):[e.extraReducers],m=u[0],h=m===void 0?{}:m,f=u[1],p=f===void 0?[]:f,y=u[2],j=y===void 0?void 0:y,N=Hr(Hr({},h),o);return AC(r,function(v){for(var b in N)v.addCase(b,N[b]);for(var x=0,g=p;x<g.length;x++){var k=g[x];v.addMatcher(k.matcher,k.reducer)}j&&v.addDefaultCase(j)})}var c;return{name:t,reducer:function(u,m){return c||(c=d()),c(u,m)},actions:l,caseReducers:i,getInitialState:function(){return c||(c=d()),c.getInitialState()}}}var TC="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ej=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=TC[Math.random()*64|0];return t},OC=["name","message","stack","code"],Ru=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Sx=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),RC=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=OC;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}},kx=function(){function e(t,r,n){var a=$t(t+"/fulfilled",function(c,u,m,h){return{payload:c,meta:Ou(Hr({},h||{}),{arg:m,requestId:u,requestStatus:"fulfilled"})}}),i=$t(t+"/pending",function(c,u,m){return{payload:void 0,meta:Ou(Hr({},m||{}),{arg:u,requestId:c,requestStatus:"pending"})}}),o=$t(t+"/rejected",function(c,u,m,h,f){return{payload:h,error:(n&&n.serializeError||RC)(c||"Rejected"),meta:Ou(Hr({},f||{}),{arg:m,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function d(c){return function(u,m,h){var f=n!=null&&n.idGenerator?n.idGenerator(c):Ej(),p=new l,y;function j(v){y=v,p.abort()}var N=function(){return yC(this,null,function(){var v,b,x,g,k,C,S;return mC(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),g=(v=n==null?void 0:n.condition)==null?void 0:v.call(n,c,{getState:m,extra:h}),LC(g)?[4,g]:[3,2];case 1:g=A.sent(),A.label=2;case 2:if(g===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return k=new Promise(function(E,T){return p.signal.addEventListener("abort",function(){return T({name:"AbortError",message:y||"Aborted"})})}),u(i(f,c,(b=n==null?void 0:n.getPendingMeta)==null?void 0:b.call(n,{requestId:f,arg:c},{getState:m,extra:h}))),[4,Promise.race([k,Promise.resolve(r(c,{dispatch:u,getState:m,extra:h,requestId:f,signal:p.signal,abort:j,rejectWithValue:function(E,T){return new Ru(E,T)},fulfillWithValue:function(E,T){return new Sx(E,T)}})).then(function(E){if(E instanceof Ru)throw E;return E instanceof Sx?a(E.payload,f,c,E.meta):a(E,f,c)})])];case 3:return x=A.sent(),[3,5];case 4:return C=A.sent(),x=C instanceof Ru?o(null,f,c,C.payload,C.meta):o(C,f,c),[3,5];case 5:return S=n&&!n.dispatchConditionRejection&&o.match(x)&&x.meta.condition,S||u(x),[2,x]}})})}();return Object.assign(N,{abort:j,requestId:f,arg:c,unwrap:function(){return N.then(MC)}})}}return Object.assign(d,{pending:i,rejected:o,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e}();function MC(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function LC(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Tj=function(e,t){return bC(e)?e.match(t):e(t)};function Ka(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.some(function(n){return Tj(n,r)})}}function Li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return e.every(function(n){return Tj(n,r)})}}function Td(e,t){if(!e||!e.meta)return!1;var r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function ko(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Jf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Td(r,["pending"])}:ko(e)?function(r){var n=e.map(function(i){return i.pending}),a=Ka.apply(void 0,n);return a(r)}:Jf()(e[0])}function io(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Td(r,["rejected"])}:ko(e)?function(r){var n=e.map(function(i){return i.rejected}),a=Ka.apply(void 0,n);return a(r)}:io()(e[0])}function Od(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(n){return n&&n.meta&&n.meta.rejectedWithValue};return e.length===0?function(n){var a=Li(io.apply(void 0,e),r);return a(n)}:ko(e)?function(n){var a=Li(io.apply(void 0,e),r);return a(n)}:Od()(e[0])}function zn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Td(r,["fulfilled"])}:ko(e)?function(r){var n=e.map(function(i){return i.fulfilled}),a=Ka.apply(void 0,n);return a(r)}:zn()(e[0])}function ih(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(r){return Td(r,["pending","fulfilled","rejected"])}:ko(e)?function(r){for(var n=[],a=0,i=e;a<i.length;a++){var o=i[a];n.push(o.pending,o.rejected,o.fulfilled)}var l=Ka.apply(void 0,n);return l(r)}:ih()(e[0])}var Xf="listenerMiddleware";$t(Xf+"/add");$t(Xf+"/removeAll");$t(Xf+"/remove");var bi="RTK_autoBatch",li=function(){return function(e){var t;return{payload:e,meta:(t={},t[bi]=!0,t)}}},Cx;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Kk();function Zf(e){try{if(typeof window<"u")return localStorage.getItem(e)}catch{return null}}function Mu(e,t){try{typeof window<"u"&&localStorage.setItem(e,t)}catch{}}function Yn(e){try{typeof window<"u"&&localStorage.removeItem(e)}catch{}}const Px=Zf("accessToken"),Ax=Zf("refreshToken");function _C(){try{const e=Zf("authUser");return e?JSON.parse(e):null}catch{return null}}const DC={user:_C(),isAuthenticated:!!Px&&!!Ax,tokens:{accessToken:Px||null,refreshToken:Ax||null}},Oj=sr({name:"auth",initialState:DC,reducers:{setUser(e,t){e.user=t.payload,Mu("authUser",JSON.stringify(t.payload)),e.isAuthenticated=!0},setTokens(e,t){const{accessToken:r,refreshToken:n}=t.payload;e.tokens.accessToken=r,e.tokens.refreshToken=n,Mu("accessToken",r),Mu("refreshToken",n)},logout(e){e.user=null,e.tokens={accessToken:null,refreshToken:null},e.isAuthenticated=!1;try{Yn("authUser"),Yn("accessToken"),Yn("refreshToken"),Yn("auth"),Yn("user"),Yn("isLoggingOut")}catch(t){console.warn("authSlice.logout: localStorage cleanup failed",t)}}}}),{setUser:Ks,setTokens:Vn,logout:en}=Oj.actions,Rj=$t("app/RESET_STATE"),IC=Oj.reducer,$C={items:[],total:0,itemCount:0},Mj=sr({name:"cart",initialState:$C,reducers:{addToCart:(e,t)=>{const r=e.items.find(n=>n.id===t.payload.id);r?r.quantity+=t.payload.quantity:e.items.push(t.payload),e.total=e.items.reduce((n,a)=>n+a.price*a.quantity,0),e.itemCount=e.items.reduce((n,a)=>n+a.quantity,0)},removeFromCart:(e,t)=>{e.items=e.items.filter(r=>r.id!==t.payload),e.total=e.items.reduce((r,n)=>r+n.price*n.quantity,0),e.itemCount=e.items.reduce((r,n)=>r+n.quantity,0)},updateCartItem:(e,t)=>{const r=e.items.find(n=>n.id===t.payload.id);r&&(r.quantity=t.payload.quantity,e.total=e.items.reduce((n,a)=>n+a.price*a.quantity,0),e.itemCount=e.items.reduce((n,a)=>n+a.quantity,0))},clearCart:e=>{e.items=[],e.total=0,e.itemCount=0},setCart:(e,t)=>{console.log(" setCart action called with:",t.payload),e.items=t.payload.items,e.total=t.payload.total,e.itemCount=t.payload.itemCount},clearCartOnLogout:e=>{e.items=[],e.total=0,e.itemCount=0}}}),{addToCart:Rd,removeFromCart:FC,updateCartItem:Ex,clearCart:BC,setCart:Co,clearCartOnLogout:UC}=Mj.actions,zC=Mj.reducer,VC={sidebarOpen:!1,loading:!1,notifications:[],searchQuery:"",filters:{category:"",priceRange:[0,1e4],rating:0,sortBy:"relevance"}},Lj=sr({name:"ui",initialState:VC,reducers:{toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setSidebarOpen:(e,t)=>{e.sidebarOpen=t.payload},setLoading:(e,t)=>{e.loading=t.payload},addNotification:(e,t)=>{const r={...t.payload,id:Date.now().toString(),timestamp:Date.now()};e.notifications.push(r)},removeNotification:(e,t)=>{e.notifications=e.notifications.filter(r=>r.id!==t.payload)},clearNotifications:e=>{e.notifications=[]},setSearchQuery:(e,t)=>{e.searchQuery=t.payload},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={category:"",priceRange:[0,1e4],rating:0,sortBy:"relevance"}}}}),{toggleSidebar:A_,setSidebarOpen:E_,setLoading:T_,addNotification:O_,removeNotification:R_,clearNotifications:M_,setSearchQuery:L_,setFilters:__,clearFilters:D_}=Lj.actions,qC=Lj.reducer;var jc=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},wc=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},HC=Object.defineProperty,WC=Object.defineProperties,QC=Object.getOwnPropertyDescriptors,Nc=Object.getOwnPropertySymbols,_j=Object.prototype.hasOwnProperty,Dj=Object.prototype.propertyIsEnumerable,Tx=function(e,t,r){return t in e?HC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Ze=function(e,t){for(var r in t||(t={}))_j.call(t,r)&&Tx(e,r,t[r]);if(Nc)for(var n=0,a=Nc(t);n<a.length;n++){var r=a[n];Dj.call(t,r)&&Tx(e,r,t[r])}return e},Vs=function(e,t){return WC(e,QC(t))},Ox=function(e,t){var r={};for(var n in e)_j.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Nc)for(var a=0,i=Nc(e);a<i.length;a++){var n=i[a];t.indexOf(n)<0&&Dj.call(e,n)&&(r[n]=e[n])}return r},Sc=function(e,t,r){return new Promise(function(n,a){var i=function(d){try{l(r.next(d))}catch(c){a(c)}},o=function(d){try{l(r.throw(d))}catch(c){a(c)}},l=function(d){return d.done?n(d.value):Promise.resolve(d.value).then(i,o)};l((r=r.apply(e,t)).next())})},Ve;(function(e){e.uninitialized="uninitialized",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"})(Ve||(Ve={}));function KC(e){return{status:e,isUninitialized:e===Ve.uninitialized,isLoading:e===Ve.pending,isSuccess:e===Ve.fulfilled,isError:e===Ve.rejected}}function GC(e){return new RegExp("(^|:)//").test(e)}var YC=function(e){return e.replace(/\/$/,"")},JC=function(e){return e.replace(/^\//,"")};function XC(e,t){if(!e)return t;if(!t)return e;if(GC(t))return t;var r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=YC(e),t=JC(t),""+e+r+t}var Rx=function(e){return[].concat.apply([],e)};function ZC(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function e5(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var Mx=Zr;function Ij(e,t){if(e===t||!(Mx(e)&&Mx(t)||Array.isArray(e)&&Array.isArray(t)))return t;for(var r=Object.keys(t),n=Object.keys(e),a=r.length===n.length,i=Array.isArray(t)?[]:{},o=0,l=r;o<l.length;o++){var d=l[o];i[d]=Ij(e[d],t[d]),a&&(a=e[d]===i[d])}return a?e:i}var Lx=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fetch.apply(void 0,e)},t5=function(e){return e.status>=200&&e.status<=299},s5=function(e){return/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"")};function _x(e){if(!Zr(e))return e;for(var t=Ze({},e),r=0,n=Object.entries(t);r<n.length;r++){var a=n[r],i=a[0],o=a[1];o===void 0&&delete t[i]}return t}function r5(e){var t=this;e===void 0&&(e={});var r=e,n=r.baseUrl,a=r.prepareHeaders,i=a===void 0?function(b){return b}:a,o=r.fetchFn,l=o===void 0?Lx:o,d=r.paramsSerializer,c=r.isJsonContentType,u=c===void 0?s5:c,m=r.jsonContentType,h=m===void 0?"application/json":m,f=r.jsonReplacer,p=r.timeout,y=r.responseHandler,j=r.validateStatus,N=Ox(r,["baseUrl","prepareHeaders","fetchFn","paramsSerializer","isJsonContentType","jsonContentType","jsonReplacer","timeout","responseHandler","validateStatus"]);return typeof fetch>"u"&&l===Lx&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),function(b,x){return Sc(t,null,function(){var g,k,C,S,A,E,T,M,P,O,R,L,U,D,_,I,q,W,ie,se,$,H,J,oe,ee,ge,pe,Ne,We,Tt,Ot,F,X,le,xe,ke;return jc(this,function(Re){switch(Re.label){case 0:return g=x.signal,k=x.getState,C=x.extra,S=x.endpoint,A=x.forced,E=x.type,M=typeof b=="string"?{url:b}:b,P=M.url,O=M.headers,R=O===void 0?new Headers(N.headers):O,L=M.params,U=L===void 0?void 0:L,D=M.responseHandler,_=D===void 0?y??"json":D,I=M.validateStatus,q=I===void 0?j??t5:I,W=M.timeout,ie=W===void 0?p:W,se=Ox(M,["url","headers","params","responseHandler","validateStatus","timeout"]),$=Ze(Vs(Ze({},N),{signal:g}),se),R=new Headers(_x(R)),H=$,[4,i(R,{getState:k,extra:C,endpoint:S,forced:A,type:E})];case 1:H.headers=Re.sent()||R,J=function(Ie){return typeof Ie=="object"&&(Zr(Ie)||Array.isArray(Ie)||typeof Ie.toJSON=="function")},!$.headers.has("content-type")&&J($.body)&&$.headers.set("content-type",h),J($.body)&&u($.headers)&&($.body=JSON.stringify($.body,f)),U&&(oe=~P.indexOf("?")?"&":"?",ee=d?d(U):new URLSearchParams(_x(U)),P+=oe+ee),P=XC(n,P),ge=new Request(P,$),pe=new Request(P,$),T={request:pe},We=!1,Tt=ie&&setTimeout(function(){We=!0,x.abort()},ie),Re.label=2;case 2:return Re.trys.push([2,4,5,6]),[4,l(ge)];case 3:return Ne=Re.sent(),[3,6];case 4:return Ot=Re.sent(),[2,{error:{status:We?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Ot)},meta:T}];case 5:return Tt&&clearTimeout(Tt),[7];case 6:F=Ne.clone(),T.response=F,le="",Re.label=7;case 7:return Re.trys.push([7,9,,10]),[4,Promise.all([v(Ne,_).then(function(Ie){return X=Ie},function(Ie){return xe=Ie}),F.text().then(function(Ie){return le=Ie},function(){})])];case 8:if(Re.sent(),xe)throw xe;return[3,10];case 9:return ke=Re.sent(),[2,{error:{status:"PARSING_ERROR",originalStatus:Ne.status,data:le,error:String(ke)},meta:T}];case 10:return[2,q(Ne,X)?{data:X,meta:T}:{error:{status:Ne.status,data:X},meta:T}]}})})};function v(b,x){return Sc(this,null,function(){var g;return jc(this,function(k){switch(k.label){case 0:return typeof x=="function"?[2,x(b)]:(x==="content-type"&&(x=u(b.headers)?"json":"text"),x!=="json"?[3,2]:[4,b.text()]);case 1:return g=k.sent(),[2,g.length?JSON.parse(g):null];case 2:return[2,b.text()]}})})}}var Dx=function(){function e(t,r){r===void 0&&(r=void 0),this.value=t,this.meta=r}return e}(),ep=$t("__rtkq/focused"),$j=$t("__rtkq/unfocused"),tp=$t("__rtkq/online"),Fj=$t("__rtkq/offline"),Gs;(function(e){e.query="query",e.mutation="mutation"})(Gs||(Gs={}));function Bj(e){return e.type===Gs.query}function n5(e){return e.type===Gs.mutation}function sp(e,t,r,n,a,i){return a5(e)?e(t,r,n,a).map(oh).map(i):Array.isArray(e)?e.map(oh).map(i):[]}function a5(e){return typeof e=="function"}function oh(e){return typeof e=="string"?{type:e}:e}function Lu(e){return e!=null}var oo=Symbol("forceQueryFn"),lh=function(e){return typeof e[oo]=="function"};function i5(e){var t=e.serializeQueryArgs,r=e.queryThunk,n=e.mutationThunk,a=e.api,i=e.context,o=new Map,l=new Map,d=a.internalActions,c=d.unsubscribeQueryResult,u=d.removeMutationResult,m=d.updateSubscriptionOptions;return{buildInitiateQuery:v,buildInitiateMutation:b,getRunningQueryThunk:p,getRunningMutationThunk:y,getRunningQueriesThunk:j,getRunningMutationsThunk:N,getRunningOperationPromises:f,removalWarning:h};function h(){throw new Error(`This method had to be removed due to a conceptual bug in RTK.
       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.
       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.`)}function f(){{var x=function(g){return Array.from(g.values()).flatMap(function(k){return k?Object.values(k):[]})};return wc(wc([],x(o)),x(l)).filter(Lu)}}function p(x,g){return function(k){var C,S=i.endpointDefinitions[x],A=t({queryArgs:g,endpointDefinition:S,endpointName:x});return(C=o.get(k))==null?void 0:C[A]}}function y(x,g){return function(k){var C;return(C=l.get(k))==null?void 0:C[g]}}function j(){return function(x){return Object.values(o.get(x)||{}).filter(Lu)}}function N(){return function(x){return Object.values(l.get(x)||{}).filter(Lu)}}function v(x,g){var k=function(C,S){var A=S===void 0?{}:S,E=A.subscribe,T=E===void 0?!0:E,M=A.forceRefetch,P=A.subscriptionOptions,O=oo,R=A[O];return function(L,U){var D,_,I=t({queryArgs:C,endpointDefinition:g,endpointName:x}),q=r((D={type:"query",subscribe:T,forceRefetch:M,subscriptionOptions:P,endpointName:x,originalArgs:C,queryCacheKey:I},D[oo]=R,D)),W=a.endpoints[x].select(C),ie=L(q),se=W(U()),$=ie.requestId,H=ie.abort,J=se.requestId!==$,oe=(_=o.get(L))==null?void 0:_[I],ee=function(){return W(U())},ge=Object.assign(R?ie.then(ee):J&&!oe?Promise.resolve(se):Promise.all([oe,ie]).then(ee),{arg:C,requestId:$,subscriptionOptions:P,queryCacheKey:I,abort:H,unwrap:function(){return Sc(this,null,function(){var Ne;return jc(this,function(We){switch(We.label){case 0:return[4,ge];case 1:if(Ne=We.sent(),Ne.isError)throw Ne.error;return[2,Ne.data]}})})},refetch:function(){return L(k(C,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){T&&L(c({queryCacheKey:I,requestId:$}))},updateSubscriptionOptions:function(Ne){ge.subscriptionOptions=Ne,L(m({endpointName:x,requestId:$,queryCacheKey:I,options:Ne}))}});if(!oe&&!J&&!R){var pe=o.get(L)||{};pe[I]=ge,o.set(L,pe),ge.then(function(){delete pe[I],Object.keys(pe).length||o.delete(L)})}return ge}};return k}function b(x){return function(g,k){var C=k===void 0?{}:k,S=C.track,A=S===void 0?!0:S,E=C.fixedCacheKey;return function(T,M){var P=n({type:"mutation",endpointName:x,originalArgs:g,track:A,fixedCacheKey:E}),O=T(P),R=O.requestId,L=O.abort,U=O.unwrap,D=O.unwrap().then(function(W){return{data:W}}).catch(function(W){return{error:W}}),_=function(){T(u({requestId:R,fixedCacheKey:E}))},I=Object.assign(D,{arg:O.arg,requestId:R,abort:L,unwrap:U,unsubscribe:_,reset:_}),q=l.get(T)||{};return l.set(T,q),q[R]=I,I.then(function(){delete q[R],Object.keys(q).length||l.delete(T)}),E&&(q[E]=I,I.then(function(){q[E]===I&&(delete q[E],Object.keys(q).length||l.delete(T))})),I}}}}function Ix(e){return e}function o5(e){var t=this,r=e.reducerPath,n=e.baseQuery,a=e.context.endpointDefinitions,i=e.serializeQueryArgs,o=e.api,l=e.assertTagType,d=function(x,g,k,C){return function(S,A){var E=a[x],T=i({queryArgs:g,endpointDefinition:E,endpointName:x});if(S(o.internalActions.queryResultPatched({queryCacheKey:T,patches:k})),!!C){var M=o.endpoints[x].select(g)(A()),P=sp(E.providesTags,M.data,void 0,g,{},l);S(o.internalActions.updateProvidedBy({queryCacheKey:T,providedTags:P}))}}},c=function(x,g,k,C){return C===void 0&&(C=!0),function(S,A){var E,T,M=o.endpoints[x],P=M.select(g)(A()),O={patches:[],inversePatches:[],undo:function(){return S(o.util.patchQueryData(x,g,O.inversePatches,C))}};if(P.status===Ve.uninitialized)return O;var R;if("data"in P)if(Ls(P.data)){var L=Sj(P.data,k),U=L[0],D=L[1],_=L[2];(E=O.patches).push.apply(E,D),(T=O.inversePatches).push.apply(T,_),R=U}else R=k(P.data),O.patches.push({op:"replace",path:[],value:R}),O.inversePatches.push({op:"replace",path:[],value:P.data});return S(o.util.patchQueryData(x,g,O.patches,C)),O}},u=function(x,g,k){return function(C){var S;return C(o.endpoints[x].initiate(g,(S={subscribe:!1,forceRefetch:!0},S[oo]=function(){return{data:k}},S)))}},m=function(x,g){return Sc(t,[x,g],function(k,C){var S,A,E,T,M,P,O,R,L,U,D,_,I,q=C.signal,W=C.abort,ie=C.rejectWithValue,se=C.fulfillWithValue,$=C.dispatch,H=C.getState,J=C.extra;return jc(this,function(oe){switch(oe.label){case 0:S=a[k.endpointName],oe.label=1;case 1:return oe.trys.push([1,8,,13]),A=Ix,E=void 0,T={signal:q,abort:W,dispatch:$,getState:H,extra:J,endpoint:k.endpointName,type:k.type,forced:k.type==="query"?h(k,H()):void 0},M=k.type==="query"?k[oo]:void 0,M?(E=M(),[3,6]):[3,2];case 2:return S.query?[4,n(S.query(k.originalArgs),T,S.extraOptions)]:[3,4];case 3:return E=oe.sent(),S.transformResponse&&(A=S.transformResponse),[3,6];case 4:return[4,S.queryFn(k.originalArgs,T,S.extraOptions,function(ee){return n(ee,T,S.extraOptions)})];case 5:E=oe.sent(),oe.label=6;case 6:if(E.error)throw new Dx(E.error,E.meta);return P=se,[4,A(E.data,E.meta,k.originalArgs)];case 7:return[2,P.apply(void 0,[oe.sent(),(_={fulfilledTimeStamp:Date.now(),baseQueryMeta:E.meta},_[bi]=!0,_)])];case 8:if(O=oe.sent(),R=O,!(R instanceof Dx))return[3,12];L=Ix,S.query&&S.transformErrorResponse&&(L=S.transformErrorResponse),oe.label=9;case 9:return oe.trys.push([9,11,,12]),U=ie,[4,L(R.value,R.meta,k.originalArgs)];case 10:return[2,U.apply(void 0,[oe.sent(),(I={baseQueryMeta:R.meta},I[bi]=!0,I)])];case 11:return D=oe.sent(),R=D,[3,12];case 12:throw console.error(R),R;case 13:return[2]}})})};function h(x,g){var k,C,S,A,E=(C=(k=g[r])==null?void 0:k.queries)==null?void 0:C[x.queryCacheKey],T=(S=g[r])==null?void 0:S.config.refetchOnMountOrArgChange,M=E==null?void 0:E.fulfilledTimeStamp,P=(A=x.forceRefetch)!=null?A:x.subscribe&&T;return P?P===!0||(Number(new Date)-Number(M))/1e3>=P:!1}var f=kx(r+"/executeQuery",m,{getPendingMeta:function(){var x;return x={startedTimeStamp:Date.now()},x[bi]=!0,x},condition:function(x,g){var k=g.getState,C,S,A,E=k(),T=(S=(C=E[r])==null?void 0:C.queries)==null?void 0:S[x.queryCacheKey],M=T==null?void 0:T.fulfilledTimeStamp,P=x.originalArgs,O=T==null?void 0:T.originalArgs,R=a[x.endpointName];return lh(x)?!0:(T==null?void 0:T.status)==="pending"?!1:h(x,E)||Bj(R)&&((A=R==null?void 0:R.forceRefetch)!=null&&A.call(R,{currentArg:P,previousArg:O,endpointState:T,state:E}))?!0:!M},dispatchConditionRejection:!0}),p=kx(r+"/executeMutation",m,{getPendingMeta:function(){var x;return x={startedTimeStamp:Date.now()},x[bi]=!0,x}}),y=function(x){return"force"in x},j=function(x){return"ifOlderThan"in x},N=function(x,g,k){return function(C,S){var A=y(k)&&k.force,E=j(k)&&k.ifOlderThan,T=function(R){return R===void 0&&(R=!0),o.endpoints[x].initiate(g,{forceRefetch:R})},M=o.endpoints[x].select(g)(S());if(A)C(T());else if(E){var P=M==null?void 0:M.fulfilledTimeStamp;if(!P){C(T());return}var O=(Number(new Date)-Number(new Date(P)))/1e3>=E;O&&C(T())}else C(T(!1))}};function v(x){return function(g){var k,C;return((C=(k=g==null?void 0:g.meta)==null?void 0:k.arg)==null?void 0:C.endpointName)===x}}function b(x,g){return{matchPending:Li(Jf(x),v(g)),matchFulfilled:Li(zn(x),v(g)),matchRejected:Li(io(x),v(g))}}return{queryThunk:f,mutationThunk:p,prefetch:N,updateQueryData:c,upsertQueryData:u,patchQueryData:d,buildMatchThunkActions:b}}function Uj(e,t,r,n){return sp(r[e.meta.arg.endpointName][t],zn(e)?e.payload:void 0,Od(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function el(e,t,r){var n=e[t];n&&r(n)}function lo(e){var t;return(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)!=null?t:e.requestId}function $x(e,t,r){var n=e[lo(t)];n&&r(n)}var ci={};function l5(e){var t=e.reducerPath,r=e.queryThunk,n=e.mutationThunk,a=e.context,i=a.endpointDefinitions,o=a.apiUid,l=a.extractRehydrationInfo,d=a.hasRehydrationInfo,c=e.assertTagType,u=e.config,m=$t(t+"/resetApiState"),h=sr({name:t+"/queries",initialState:ci,reducers:{removeQueryResult:{reducer:function(g,k){var C=k.payload.queryCacheKey;delete g[C]},prepare:li()},queryResultPatched:{reducer:function(g,k){var C=k.payload,S=C.queryCacheKey,A=C.patches;el(g,S,function(E){E.data=yx(E.data,A.concat())})},prepare:li()}},extraReducers:function(g){g.addCase(r.pending,function(k,C){var S=C.meta,A=C.meta.arg,E,T,M=lh(A);(A.subscribe||M)&&((T=k[E=A.queryCacheKey])!=null||(k[E]={status:Ve.uninitialized,endpointName:A.endpointName})),el(k,A.queryCacheKey,function(P){P.status=Ve.pending,P.requestId=M&&P.requestId?P.requestId:S.requestId,A.originalArgs!==void 0&&(P.originalArgs=A.originalArgs),P.startedTimeStamp=S.startedTimeStamp})}).addCase(r.fulfilled,function(k,C){var S=C.meta,A=C.payload;el(k,S.arg.queryCacheKey,function(E){var T;if(!(E.requestId!==S.requestId&&!lh(S.arg))){var M=i[S.arg.endpointName].merge;if(E.status=Ve.fulfilled,M)if(E.data!==void 0){var P=S.fulfilledTimeStamp,O=S.arg,R=S.baseQueryMeta,L=S.requestId,U=So(E.data,function(D){return M(D,A,{arg:O.originalArgs,baseQueryMeta:R,fulfilledTimeStamp:P,requestId:L})});E.data=U}else E.data=A;else E.data=(T=i[S.arg.endpointName].structuralSharing)==null||T?Ij(Ms(E.data)?qk(E.data):E.data,A):A;delete E.error,E.fulfilledTimeStamp=S.fulfilledTimeStamp}})}).addCase(r.rejected,function(k,C){var S=C.meta,A=S.condition,E=S.arg,T=S.requestId,M=C.error,P=C.payload;el(k,E.queryCacheKey,function(O){if(!A){if(O.requestId!==T)return;O.status=Ve.rejected,O.error=P??M}})}).addMatcher(d,function(k,C){for(var S=l(C).queries,A=0,E=Object.entries(S);A<E.length;A++){var T=E[A],M=T[0],P=T[1];((P==null?void 0:P.status)===Ve.fulfilled||(P==null?void 0:P.status)===Ve.rejected)&&(k[M]=P)}})}}),f=sr({name:t+"/mutations",initialState:ci,reducers:{removeMutationResult:{reducer:function(g,k){var C=k.payload,S=lo(C);S in g&&delete g[S]},prepare:li()}},extraReducers:function(g){g.addCase(n.pending,function(k,C){var S=C.meta,A=C.meta,E=A.requestId,T=A.arg,M=A.startedTimeStamp;T.track&&(k[lo(S)]={requestId:E,status:Ve.pending,endpointName:T.endpointName,startedTimeStamp:M})}).addCase(n.fulfilled,function(k,C){var S=C.payload,A=C.meta;A.arg.track&&$x(k,A,function(E){E.requestId===A.requestId&&(E.status=Ve.fulfilled,E.data=S,E.fulfilledTimeStamp=A.fulfilledTimeStamp)})}).addCase(n.rejected,function(k,C){var S=C.payload,A=C.error,E=C.meta;E.arg.track&&$x(k,E,function(T){T.requestId===E.requestId&&(T.status=Ve.rejected,T.error=S??A)})}).addMatcher(d,function(k,C){for(var S=l(C).mutations,A=0,E=Object.entries(S);A<E.length;A++){var T=E[A],M=T[0],P=T[1];((P==null?void 0:P.status)===Ve.fulfilled||(P==null?void 0:P.status)===Ve.rejected)&&M!==(P==null?void 0:P.requestId)&&(k[M]=P)}})}}),p=sr({name:t+"/invalidation",initialState:ci,reducers:{updateProvidedBy:{reducer:function(g,k){for(var C,S,A,E,T=k.payload,M=T.queryCacheKey,P=T.providedTags,O=0,R=Object.values(g);O<R.length;O++)for(var L=R[O],U=0,D=Object.values(L);U<D.length;U++){var _=D[U],I=_.indexOf(M);I!==-1&&_.splice(I,1)}for(var q=0,W=P;q<W.length;q++){var ie=W[q],se=ie.type,$=ie.id,H=(E=(S=(C=g[se])!=null?C:g[se]={})[A=$||"__internal_without_id"])!=null?E:S[A]=[],J=H.includes(M);J||H.push(M)}},prepare:li()}},extraReducers:function(g){g.addCase(h.actions.removeQueryResult,function(k,C){for(var S=C.payload.queryCacheKey,A=0,E=Object.values(k);A<E.length;A++)for(var T=E[A],M=0,P=Object.values(T);M<P.length;M++){var O=P[M],R=O.indexOf(S);R!==-1&&O.splice(R,1)}}).addMatcher(d,function(k,C){for(var S,A,E,T,M=l(C).provided,P=0,O=Object.entries(M);P<O.length;P++)for(var R=O[P],L=R[0],U=R[1],D=0,_=Object.entries(U);D<_.length;D++)for(var I=_[D],q=I[0],W=I[1],ie=(T=(A=(S=k[L])!=null?S:k[L]={})[E=q||"__internal_without_id"])!=null?T:A[E]=[],se=0,$=W;se<$.length;se++){var H=$[se],J=ie.includes(H);J||ie.push(H)}}).addMatcher(Ka(zn(r),Od(r)),function(k,C){var S=Uj(C,"providesTags",i,c),A=C.meta.arg.queryCacheKey;p.caseReducers.updateProvidedBy(k,p.actions.updateProvidedBy({queryCacheKey:A,providedTags:S}))})}}),y=sr({name:t+"/subscriptions",initialState:ci,reducers:{updateSubscriptionOptions:function(g,k){},unsubscribeQueryResult:function(g,k){},internal_probeSubscription:function(g,k){}}}),j=sr({name:t+"/internalSubscriptions",initialState:ci,reducers:{subscriptionsUpdated:{reducer:function(g,k){return yx(g,k.payload)},prepare:li()}}}),N=sr({name:t+"/config",initialState:Ze({online:ZC(),focused:e5(),middlewareRegistered:!1},u),reducers:{middlewareRegistered:function(g,k){var C=k.payload;g.middlewareRegistered=g.middlewareRegistered==="conflict"||o!==C?"conflict":!0}},extraReducers:function(g){g.addCase(tp,function(k){k.online=!0}).addCase(Fj,function(k){k.online=!1}).addCase(ep,function(k){k.focused=!0}).addCase($j,function(k){k.focused=!1}).addMatcher(d,function(k){return Ze({},k)})}}),v=Yf({queries:h.reducer,mutations:f.reducer,provided:p.reducer,subscriptions:j.reducer,config:N.reducer}),b=function(g,k){return v(m.match(k)?void 0:g,k)},x=Vs(Ze(Ze(Ze(Ze(Ze(Ze({},N.actions),h.actions),y.actions),j.actions),f.actions),p.actions),{unsubscribeMutationResult:f.actions.removeMutationResult,resetApiState:m});return{reducer:b,actions:x}}var Nn=Symbol.for("RTKQ/skipToken"),zj={status:Ve.uninitialized},Fx=So(zj,function(){}),Bx=So(zj,function(){});function c5(e){var t=e.serializeQueryArgs,r=e.reducerPath,n=function(u){return Fx},a=function(u){return Bx};return{buildQuerySelector:l,buildMutationSelector:d,selectInvalidatedBy:c};function i(u){return Ze(Ze({},u),KC(u.status))}function o(u){var m=u[r];return m}function l(u,m){return function(h){var f=t({queryArgs:h,endpointDefinition:m,endpointName:u}),p=function(j){var N,v,b;return(b=(v=(N=o(j))==null?void 0:N.queries)==null?void 0:v[f])!=null?b:Fx},y=h===Nn?n:p;return Mi(y,i)}}function d(){return function(u){var m,h;typeof u=="object"?h=(m=lo(u))!=null?m:Nn:h=u;var f=function(y){var j,N,v;return(v=(N=(j=o(y))==null?void 0:j.mutations)==null?void 0:N[h])!=null?v:Bx},p=h===Nn?a:f;return Mi(p,i)}}function c(u,m){for(var h,f=u[r],p=new Set,y=0,j=m.map(oh);y<j.length;y++){var N=j[y],v=f.provided[N.type];if(v)for(var b=(h=N.id!==void 0?v[N.id]:Rx(Object.values(v)))!=null?h:[],x=0,g=b;x<g.length;x++){var k=g[x];p.add(k)}}return Rx(Array.from(p.values()).map(function(C){var S=f.queries[C];return S?[{queryCacheKey:C,endpointName:S.endpointName,originalArgs:S.originalArgs}]:[]}))}}var tl=WeakMap?new WeakMap:void 0,Ux=function(e){var t=e.endpointName,r=e.queryArgs,n="",a=tl==null?void 0:tl.get(r);if(typeof a=="string")n=a;else{var i=JSON.stringify(r,function(o,l){return Zr(l)?Object.keys(l).sort().reduce(function(d,c){return d[c]=l[c],d},{}):l});Zr(r)&&(tl==null||tl.set(r,i)),n=i}return t+"("+n+")"};function d5(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){var a=rh(function(u){var m,h;return(h=n.extractRehydrationInfo)==null?void 0:h.call(n,u,{reducerPath:(m=n.reducerPath)!=null?m:"api"})}),i=Vs(Ze({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},n),{extractRehydrationInfo:a,serializeQueryArgs:function(u){var m=Ux;if("serializeQueryArgs"in u.endpointDefinition){var h=u.endpointDefinition.serializeQueryArgs;m=function(f){var p=h(f);return typeof p=="string"?p:Ux(Vs(Ze({},f),{queryArgs:p}))}}else n.serializeQueryArgs&&(m=n.serializeQueryArgs);return m(u)},tagTypes:wc([],n.tagTypes||[])}),o={endpointDefinitions:{},batch:function(u){u()},apiUid:Ej(),extractRehydrationInfo:a,hasRehydrationInfo:rh(function(u){return a(u)!=null})},l={injectEndpoints:c,enhanceEndpoints:function(u){var m=u.addTagTypes,h=u.endpoints;if(m)for(var f=0,p=m;f<p.length;f++){var y=p[f];i.tagTypes.includes(y)||i.tagTypes.push(y)}if(h)for(var j=0,N=Object.entries(h);j<N.length;j++){var v=N[j],b=v[0],x=v[1];typeof x=="function"?x(o.endpointDefinitions[b]):Object.assign(o.endpointDefinitions[b]||{},x)}return l}},d=e.map(function(u){return u.init(l,i,o)});function c(u){for(var m=u.endpoints({query:function(x){return Vs(Ze({},x),{type:Gs.query})},mutation:function(x){return Vs(Ze({},x),{type:Gs.mutation})}}),h=0,f=Object.entries(m);h<f.length;h++){var p=f[h],y=p[0],j=p[1];if(!(!u.overrideExisting&&y in o.endpointDefinitions)){o.endpointDefinitions[y]=j;for(var N=0,v=d;N<v.length;N++){var b=v[N];b.injectEndpoint(y,j)}}}return l}return l.injectEndpoints({endpoints:n.endpoints})}}function u5(e){for(var t in e)return!1;return!0}var m5=2147483647/1e3-1,h5=function(e){var t=e.reducerPath,r=e.api,n=e.context,a=e.internalState,i=r.internalActions,o=i.removeQueryResult,l=i.unsubscribeQueryResult;function d(h){var f=a.currentSubscriptions[h];return!!f&&!u5(f)}var c={},u=function(h,f,p){var y;if(l.match(h)){var j=f.getState()[t],N=h.payload.queryCacheKey;m(N,(y=j.queries[N])==null?void 0:y.endpointName,f,j.config)}if(r.util.resetApiState.match(h))for(var v=0,b=Object.entries(c);v<b.length;v++){var x=b[v],g=x[0],k=x[1];k&&clearTimeout(k),delete c[g]}if(n.hasRehydrationInfo(h))for(var j=f.getState()[t],C=n.extractRehydrationInfo(h).queries,S=0,A=Object.entries(C);S<A.length;S++){var E=A[S],N=E[0],T=E[1];m(N,T==null?void 0:T.endpointName,f,j.config)}};function m(h,f,p,y){var j,N=n.endpointDefinitions[f],v=(j=N==null?void 0:N.keepUnusedDataFor)!=null?j:y.keepUnusedDataFor;if(v!==1/0){var b=Math.max(0,Math.min(v,m5));if(!d(h)){var x=c[h];x&&clearTimeout(x),c[h]=setTimeout(function(){d(h)||p.dispatch(o({queryCacheKey:h})),delete c[h]},b*1e3)}}}return u},f5=function(e){var t=e.reducerPath,r=e.context,n=e.context.endpointDefinitions,a=e.mutationThunk,i=e.api,o=e.assertTagType,l=e.refetchQuery,d=i.internalActions.removeQueryResult,c=Ka(zn(a),Od(a)),u=function(h,f){c(h)&&m(Uj(h,"invalidatesTags",n,o),f),i.util.invalidateTags.match(h)&&m(sp(h.payload,void 0,void 0,void 0,void 0,o),f)};function m(h,f){var p=f.getState(),y=p[t],j=i.util.selectInvalidatedBy(p,h);r.batch(function(){for(var N,v=Array.from(j.values()),b=0,x=v;b<x.length;b++){var g=x[b].queryCacheKey,k=y.queries[g],C=(N=y.subscriptions[g])!=null?N:{};k&&(Object.keys(C).length===0?f.dispatch(d({queryCacheKey:g})):k.status!==Ve.uninitialized&&f.dispatch(l(k,g)))}})}return u},p5=function(e){var t=e.reducerPath,r=e.queryThunk,n=e.api,a=e.refetchQuery,i=e.internalState,o={},l=function(f,p){(n.internalActions.updateSubscriptionOptions.match(f)||n.internalActions.unsubscribeQueryResult.match(f))&&c(f.payload,p),(r.pending.match(f)||r.rejected.match(f)&&f.meta.condition)&&c(f.meta.arg,p),(r.fulfilled.match(f)||r.rejected.match(f)&&!f.meta.condition)&&d(f.meta.arg,p),n.util.resetApiState.match(f)&&m()};function d(f,p){var y=f.queryCacheKey,j=p.getState()[t],N=j.queries[y],v=i.currentSubscriptions[y];if(!(!N||N.status===Ve.uninitialized)){var b=h(v);if(Number.isFinite(b)){var x=o[y];x!=null&&x.timeout&&(clearTimeout(x.timeout),x.timeout=void 0);var g=Date.now()+b,k=o[y]={nextPollTimestamp:g,pollingInterval:b,timeout:setTimeout(function(){k.timeout=void 0,p.dispatch(a(N,y))},b)}}}}function c(f,p){var y=f.queryCacheKey,j=p.getState()[t],N=j.queries[y],v=i.currentSubscriptions[y];if(!(!N||N.status===Ve.uninitialized)){var b=h(v);if(!Number.isFinite(b)){u(y);return}var x=o[y],g=Date.now()+b;(!x||g<x.nextPollTimestamp)&&d({queryCacheKey:y},p)}}function u(f){var p=o[f];p!=null&&p.timeout&&clearTimeout(p.timeout),delete o[f]}function m(){for(var f=0,p=Object.keys(o);f<p.length;f++){var y=p[f];u(y)}}function h(f){f===void 0&&(f={});var p=Number.POSITIVE_INFINITY;for(var y in f)f[y].pollingInterval&&(p=Math.min(f[y].pollingInterval,p));return p}return l},x5=function(e){var t=e.reducerPath,r=e.context,n=e.api,a=e.refetchQuery,i=e.internalState,o=n.internalActions.removeQueryResult,l=function(c,u){ep.match(c)&&d(u,"refetchOnFocus"),tp.match(c)&&d(u,"refetchOnReconnect")};function d(c,u){var m=c.getState()[t],h=m.queries,f=i.currentSubscriptions;r.batch(function(){for(var p=0,y=Object.keys(f);p<y.length;p++){var j=y[p],N=h[j],v=f[j];if(!(!v||!N)){var b=Object.values(v).some(function(x){return x[u]===!0})||Object.values(v).every(function(x){return x[u]===void 0})&&m.config[u];b&&(Object.keys(v).length===0?c.dispatch(o({queryCacheKey:j})):N.status!==Ve.uninitialized&&c.dispatch(a(N,j)))}}})}return l},zx=new Error("Promise never resolved before cacheEntryRemoved."),g5=function(e){var t=e.api,r=e.reducerPath,n=e.context,a=e.queryThunk,i=e.mutationThunk;e.internalState;var o=ih(a),l=ih(i),d=zn(a,i),c={},u=function(f,p,y){var j=m(f);if(a.pending.match(f)){var N=y[r].queries[j],v=p.getState()[r].queries[j];!N&&v&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,j,p,f.meta.requestId)}else if(i.pending.match(f)){var v=p.getState()[r].mutations[j];v&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,j,p,f.meta.requestId)}else if(d(f)){var b=c[j];b!=null&&b.valueResolved&&(b.valueResolved({data:f.payload,meta:f.meta.baseQueryMeta}),delete b.valueResolved)}else if(t.internalActions.removeQueryResult.match(f)||t.internalActions.removeMutationResult.match(f)){var b=c[j];b&&(delete c[j],b.cacheEntryRemoved())}else if(t.util.resetApiState.match(f))for(var x=0,g=Object.entries(c);x<g.length;x++){var k=g[x],C=k[0],b=k[1];delete c[C],b.cacheEntryRemoved()}};function m(f){return o(f)?f.meta.arg.queryCacheKey:l(f)?f.meta.requestId:t.internalActions.removeQueryResult.match(f)?f.payload.queryCacheKey:t.internalActions.removeMutationResult.match(f)?lo(f.payload):""}function h(f,p,y,j,N){var v=n.endpointDefinitions[f],b=v==null?void 0:v.onCacheEntryAdded;if(b){var x={},g=new Promise(function(T){x.cacheEntryRemoved=T}),k=Promise.race([new Promise(function(T){x.valueResolved=T}),g.then(function(){throw zx})]);k.catch(function(){}),c[y]=x;var C=t.endpoints[f].select(v.type===Gs.query?p:y),S=j.dispatch(function(T,M,P){return P}),A=Vs(Ze({},j),{getCacheEntry:function(){return C(j.getState())},requestId:N,extra:S,updateCachedData:v.type===Gs.query?function(T){return j.dispatch(t.util.updateQueryData(f,p,T))}:void 0,cacheDataLoaded:k,cacheEntryRemoved:g}),E=b(p,A);Promise.resolve(E).catch(function(T){if(T!==zx)throw T})}}return u},y5=function(e){var t=e.api,r=e.context,n=e.queryThunk,a=e.mutationThunk,i=Jf(n,a),o=io(n,a),l=zn(n,a),d={},c=function(u,m){var h,f,p;if(i(u)){var y=u.meta,j=y.requestId,N=y.arg,v=N.endpointName,b=N.originalArgs,x=r.endpointDefinitions[v],g=x==null?void 0:x.onQueryStarted;if(g){var k={},C=new Promise(function(R,L){k.resolve=R,k.reject=L});C.catch(function(){}),d[j]=k;var S=t.endpoints[v].select(x.type===Gs.query?b:j),A=m.dispatch(function(R,L,U){return U}),E=Vs(Ze({},m),{getCacheEntry:function(){return S(m.getState())},requestId:j,extra:A,updateCachedData:x.type===Gs.query?function(R){return m.dispatch(t.util.updateQueryData(v,b,R))}:void 0,queryFulfilled:C});g(b,E)}}else if(l(u)){var T=u.meta,j=T.requestId,M=T.baseQueryMeta;(h=d[j])==null||h.resolve({data:u.payload,meta:M}),delete d[j]}else if(o(u)){var P=u.meta,j=P.requestId,O=P.rejectedWithValue,M=P.baseQueryMeta;(p=d[j])==null||p.reject({error:(f=u.payload)!=null?f:u.error,isUnhandledError:!O,meta:M}),delete d[j]}};return c},v5=function(e){var t=e.api,r=e.context.apiUid;return e.reducerPath,function(n,a){t.util.resetApiState.match(n)&&a.dispatch(t.internalActions.middlewareRegistered(r))}},Vx,b5=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis):function(e){return(Vx||(Vx=Promise.resolve())).then(e).catch(function(t){return setTimeout(function(){throw t},0)})},j5=function(e){var t=e.api,r=e.queryThunk,n=e.internalState,a=t.reducerPath+"/subscriptions",i=null,o=!1,l=t.internalActions,d=l.updateSubscriptionOptions,c=l.unsubscribeQueryResult,u=function(m,h){var f,p,y,j,N,v,b,x,g;if(d.match(h)){var k=h.payload,C=k.queryCacheKey,S=k.requestId,A=k.options;return(f=m==null?void 0:m[C])!=null&&f[S]&&(m[C][S]=A),!0}if(c.match(h)){var E=h.payload,C=E.queryCacheKey,S=E.requestId;return m[C]&&delete m[C][S],!0}if(t.internalActions.removeQueryResult.match(h))return delete m[h.payload.queryCacheKey],!0;if(r.pending.match(h)){var T=h.meta,M=T.arg,S=T.requestId;if(M.subscribe){var P=(y=m[p=M.queryCacheKey])!=null?y:m[p]={};return P[S]=(N=(j=M.subscriptionOptions)!=null?j:P[S])!=null?N:{},!0}}if(r.rejected.match(h)){var O=h.meta,R=O.condition,M=O.arg,S=O.requestId;if(R&&M.subscribe){var P=(b=m[v=M.queryCacheKey])!=null?b:m[v]={};return P[S]=(g=(x=M.subscriptionOptions)!=null?x:P[S])!=null?g:{},!0}}return!1};return function(m,h){var f,p;if(i||(i=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(m))return i=n.currentSubscriptions={},[!0,!1];if(t.internalActions.internal_probeSubscription.match(m)){var y=m.payload,j=y.queryCacheKey,N=y.requestId,v=!!((f=n.currentSubscriptions[j])!=null&&f[N]);return[!1,v]}var b=u(n.currentSubscriptions,m);if(b){o||(b5(function(){var C=JSON.parse(JSON.stringify(n.currentSubscriptions)),S=Sj(i,function(){return C}),A=S[1];h.next(t.internalActions.subscriptionsUpdated(A)),i=C,o=!1}),o=!0);var x=!!((p=m.type)!=null&&p.startsWith(a)),g=r.rejected.match(m)&&m.meta.condition&&!!m.meta.arg.subscribe,k=!x&&!g;return[k,!1]}return[!0,!1]}};function w5(e){var t=e.reducerPath,r=e.queryThunk,n=e.api,a=e.context,i=a.apiUid,o={invalidateTags:$t(t+"/invalidateTags")},l=function(m){return!!m&&typeof m.type=="string"&&m.type.startsWith(t+"/")},d=[v5,h5,f5,p5,g5,y5],c=function(m){var h=!1,f={currentSubscriptions:{}},p=Vs(Ze({},e),{internalState:f,refetchQuery:u}),y=d.map(function(v){return v(p)}),j=j5(p),N=x5(p);return function(v){return function(b){h||(h=!0,m.dispatch(n.internalActions.middlewareRegistered(i)));var x=Vs(Ze({},m),{next:v}),g=m.getState(),k=j(b,x,g),C=k[0],S=k[1],A;if(C?A=v(b):A=S,m.getState()[t]&&(N(b,x,g),l(b)||a.hasRehydrationInfo(b)))for(var E=0,T=y;E<T.length;E++){var M=T[E];M(b,x,g)}return A}}};return{middleware:c,actions:o};function u(m,h,f){return f===void 0&&(f={}),r(Ze({type:"query",endpointName:m.endpointName,originalArgs:m.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:h},f))}}function wr(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.assign.apply(Object,wc([e],t))}var qx=Symbol(),N5=function(){return{name:qx,init:function(e,t,r){var n=t.baseQuery;t.tagTypes;var a=t.reducerPath,i=t.serializeQueryArgs,o=t.keepUnusedDataFor,l=t.refetchOnMountOrArgChange,d=t.refetchOnFocus,c=t.refetchOnReconnect;Gk();var u=function(W){return W};Object.assign(e,{reducerPath:a,endpoints:{},internalActions:{onOnline:tp,onOffline:Fj,onFocus:ep,onFocusLost:$j},util:{}});var m=o5({baseQuery:n,reducerPath:a,context:r,api:e,serializeQueryArgs:i,assertTagType:u}),h=m.queryThunk,f=m.mutationThunk,p=m.patchQueryData,y=m.updateQueryData,j=m.upsertQueryData,N=m.prefetch,v=m.buildMatchThunkActions,b=l5({context:r,queryThunk:h,mutationThunk:f,reducerPath:a,assertTagType:u,config:{refetchOnFocus:d,refetchOnReconnect:c,refetchOnMountOrArgChange:l,keepUnusedDataFor:o,reducerPath:a}}),x=b.reducer,g=b.actions;wr(e.util,{patchQueryData:p,updateQueryData:y,upsertQueryData:j,prefetch:N,resetApiState:g.resetApiState}),wr(e.internalActions,g);var k=w5({reducerPath:a,context:r,queryThunk:h,mutationThunk:f,api:e,assertTagType:u}),C=k.middleware,S=k.actions;wr(e.util,S),wr(e,{reducer:x,middleware:C});var A=c5({serializeQueryArgs:i,reducerPath:a}),E=A.buildQuerySelector,T=A.buildMutationSelector,M=A.selectInvalidatedBy;wr(e.util,{selectInvalidatedBy:M});var P=i5({queryThunk:h,mutationThunk:f,api:e,serializeQueryArgs:i,context:r}),O=P.buildInitiateQuery,R=P.buildInitiateMutation,L=P.getRunningMutationThunk,U=P.getRunningMutationsThunk,D=P.getRunningQueriesThunk,_=P.getRunningQueryThunk,I=P.getRunningOperationPromises,q=P.removalWarning;return wr(e.util,{getRunningOperationPromises:I,getRunningOperationPromise:q,getRunningMutationThunk:L,getRunningMutationsThunk:U,getRunningQueryThunk:_,getRunningQueriesThunk:D}),{name:qx,injectEndpoint:function(W,ie){var se,$,H=e;($=(se=H.endpoints)[W])!=null||(se[W]={}),Bj(ie)?wr(H.endpoints[W],{name:W,select:E(W,ie),initiate:O(W,ie)},v(h,W)):n5(ie)&&wr(H.endpoints[W],{name:W,select:T(),initiate:R(W)},v(f,W))}}}}},S5=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},k5=Object.defineProperty,C5=Object.defineProperties,P5=Object.getOwnPropertyDescriptors,Hx=Object.getOwnPropertySymbols,A5=Object.prototype.hasOwnProperty,E5=Object.prototype.propertyIsEnumerable,Wx=function(e,t,r){return t in e?k5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Zs=function(e,t){for(var r in t||(t={}))A5.call(t,r)&&Wx(e,r,t[r]);if(Hx)for(var n=0,a=Hx(t);n<a.length;n++){var r=a[n];E5.call(t,r)&&Wx(e,r,t[r])}return e},El=function(e,t){return C5(e,P5(t))};function Qx(e,t,r,n){var a=w.useMemo(function(){return{queryArgs:e,serialized:typeof e=="object"?t({queryArgs:e,endpointDefinition:r,endpointName:n}):e}},[e,t,r,n]),i=w.useRef(a);return w.useEffect(function(){i.current.serialized!==a.serialized&&(i.current=a)},[a]),i.current.serialized===a.serialized?i.current.queryArgs:e}var _u=Symbol();function Du(e){var t=w.useRef(e);return w.useEffect(function(){mc(t.current,e)||(t.current=e)},[e]),mc(t.current,e)?t.current:e}var sl=WeakMap?new WeakMap:void 0,T5=function(e){var t=e.endpointName,r=e.queryArgs,n="",a=sl==null?void 0:sl.get(r);if(typeof a=="string")n=a;else{var i=JSON.stringify(r,function(o,l){return Zr(l)?Object.keys(l).sort().reduce(function(d,c){return d[c]=l[c],d},{}):l});Zr(r)&&(sl==null||sl.set(r,i)),n=i}return t+"("+n+")"},O5=typeof window<"u"&&window.document&&window.document.createElement?w.useLayoutEffect:w.useEffect,R5=function(e){return e},M5=function(e){return e.isUninitialized?El(Zs({},e),{isUninitialized:!1,isFetching:!0,isLoading:e.data===void 0,status:Ve.pending}):e};function L5(e){var t=e.api,r=e.moduleOptions,n=r.batch,a=r.useDispatch,i=r.useSelector,o=r.useStore,l=r.unstable__sideEffectsInRender,d=e.serializeQueryArgs,c=e.context,u=l?function(y){return y()}:w.useEffect;return{buildQueryHooks:f,buildMutationHook:p,usePrefetch:h};function m(y,j,N){if(j!=null&&j.endpointName&&y.isUninitialized){var v=j.endpointName,b=c.endpointDefinitions[v];d({queryArgs:j.originalArgs,endpointDefinition:b,endpointName:v})===d({queryArgs:N,endpointDefinition:b,endpointName:v})&&(j=void 0)}var x=y.isSuccess?y.data:j==null?void 0:j.data;x===void 0&&(x=y.data);var g=x!==void 0,k=y.isLoading,C=!g&&k,S=y.isSuccess||k&&g;return El(Zs({},y),{data:x,currentData:y.data,isFetching:k,isLoading:C,isSuccess:S})}function h(y,j){var N=a(),v=Du(j);return w.useCallback(function(b,x){return N(t.util.prefetch(y,b,Zs(Zs({},v),x)))},[y,N,v])}function f(y){var j=function(b,x){var g=x===void 0?{}:x,k=g.refetchOnReconnect,C=g.refetchOnFocus,S=g.refetchOnMountOrArgChange,A=g.skip,E=A===void 0?!1:A,T=g.pollingInterval,M=T===void 0?0:T,P=t.endpoints[y].initiate,O=a(),R=Qx(E?Nn:b,T5,c.endpointDefinitions[y],y),L=Du({refetchOnReconnect:k,refetchOnFocus:C,pollingInterval:M}),U=w.useRef(!1),D=w.useRef(),_=D.current||{},I=_.queryCacheKey,q=_.requestId,W=!1;if(I&&q){var ie=O(t.internalActions.internal_probeSubscription({queryCacheKey:I,requestId:q}));W=!!ie}var se=!W&&U.current;return u(function(){U.current=W}),u(function(){se&&(D.current=void 0)},[se]),u(function(){var $,H=D.current;if(R===Nn){H==null||H.unsubscribe(),D.current=void 0;return}var J=($=D.current)==null?void 0:$.subscriptionOptions;if(!H||H.arg!==R){H==null||H.unsubscribe();var oe=O(P(R,{subscriptionOptions:L,forceRefetch:S}));D.current=oe}else L!==J&&H.updateSubscriptionOptions(L)},[O,P,S,R,L,se]),w.useEffect(function(){return function(){var $;($=D.current)==null||$.unsubscribe(),D.current=void 0}},[]),w.useMemo(function(){return{refetch:function(){var $;if(!D.current)throw new Error("Cannot refetch a query that has not been started yet.");return($=D.current)==null?void 0:$.refetch()}}},[])},N=function(b){var x=b===void 0?{}:b,g=x.refetchOnReconnect,k=x.refetchOnFocus,C=x.pollingInterval,S=C===void 0?0:C,A=t.endpoints[y].initiate,E=a(),T=w.useState(_u),M=T[0],P=T[1],O=w.useRef(),R=Du({refetchOnReconnect:g,refetchOnFocus:k,pollingInterval:S});u(function(){var D,_,I=(D=O.current)==null?void 0:D.subscriptionOptions;R!==I&&((_=O.current)==null||_.updateSubscriptionOptions(R))},[R]);var L=w.useRef(R);u(function(){L.current=R},[R]);var U=w.useCallback(function(D,_){_===void 0&&(_=!1);var I;return n(function(){var q;(q=O.current)==null||q.unsubscribe(),O.current=I=E(A(D,{subscriptionOptions:L.current,forceRefetch:!_})),P(D)}),I},[E,A]);return w.useEffect(function(){return function(){var D;(D=O==null?void 0:O.current)==null||D.unsubscribe()}},[]),w.useEffect(function(){M!==_u&&!O.current&&U(M,!0)},[M,U]),w.useMemo(function(){return[U,M]},[U,M])},v=function(b,x){var g=x===void 0?{}:x,k=g.skip,C=k===void 0?!1:k,S=g.selectFromResult,A=t.endpoints[y].select,E=Qx(C?Nn:b,d,c.endpointDefinitions[y],y),T=w.useRef(),M=w.useMemo(function(){return Mi([A(E),function(U,D){return D},function(U){return E}],m)},[A,E]),P=w.useMemo(function(){return S?Mi([M],S):M},[M,S]),O=i(function(U){return P(U,T.current)},mc),R=o(),L=M(R.getState(),T.current);return O5(function(){T.current=L},[L]),O};return{useQueryState:v,useQuerySubscription:j,useLazyQuerySubscription:N,useLazyQuery:function(b){var x=N(b),g=x[0],k=x[1],C=v(k,El(Zs({},b),{skip:k===_u})),S=w.useMemo(function(){return{lastArg:k}},[k]);return w.useMemo(function(){return[g,C,S]},[g,C,S])},useQuery:function(b,x){var g=j(b,x),k=v(b,Zs({selectFromResult:b===Nn||x!=null&&x.skip?void 0:M5},x)),C=k.data,S=k.status,A=k.isLoading,E=k.isSuccess,T=k.isError,M=k.error;return w.useDebugValue({data:C,status:S,isLoading:A,isSuccess:E,isError:T,error:M}),w.useMemo(function(){return Zs(Zs({},k),g)},[k,g])}}}function p(y){return function(j){var N=j===void 0?{}:j,v=N.selectFromResult,b=v===void 0?R5:v,x=N.fixedCacheKey,g=t.endpoints[y],k=g.select,C=g.initiate,S=a(),A=w.useState(),E=A[0],T=A[1];w.useEffect(function(){return function(){E!=null&&E.arg.fixedCacheKey||E==null||E.reset()}},[E]);var M=w.useCallback(function(H){var J=S(C(H,{fixedCacheKey:x}));return T(J),J},[S,C,x]),P=(E||{}).requestId,O=w.useMemo(function(){return Mi([k({fixedCacheKey:x,requestId:E==null?void 0:E.requestId})],b)},[k,E,b,x]),R=i(O,mc),L=x==null?E==null?void 0:E.arg.originalArgs:void 0,U=w.useCallback(function(){n(function(){E&&T(void 0),x&&S(t.internalActions.removeMutationResult({requestId:P,fixedCacheKey:x}))})},[S,x,E,P]),D=R.endpointName,_=R.data,I=R.status,q=R.isLoading,W=R.isSuccess,ie=R.isError,se=R.error;w.useDebugValue({endpointName:D,data:_,status:I,isLoading:q,isSuccess:W,isError:ie,error:se});var $=w.useMemo(function(){return El(Zs({},R),{originalArgs:L,reset:U})},[R,L,U]);return w.useMemo(function(){return[M,$]},[M,$])}}}var kc;(function(e){e.query="query",e.mutation="mutation"})(kc||(kc={}));function _5(e){return e.type===kc.query}function D5(e){return e.type===kc.mutation}function Iu(e){return e.replace(e[0],e[0].toUpperCase())}function rl(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.assign.apply(Object,S5([e],t))}var I5=Symbol(),$5=function(e){var t={},r=t.batch,n=r===void 0?nd.unstable_batchedUpdates:r,a=t.useDispatch,i=a===void 0?tt:a,o=t.useSelector,l=o===void 0?de:o,d=t.useStore,c=d===void 0?dj:d,u=t.unstable__sideEffectsInRender,m=u===void 0?!1:u;return{name:I5,init:function(h,f,p){var y=f.serializeQueryArgs,j=h,N=L5({api:h,moduleOptions:{batch:n,useDispatch:i,useSelector:l,useStore:c,unstable__sideEffectsInRender:m},serializeQueryArgs:y,context:p}),v=N.buildQueryHooks,b=N.buildMutationHook,x=N.usePrefetch;return rl(j,{usePrefetch:x}),rl(p,{batch:n}),{injectEndpoint:function(g,k){if(_5(k)){var C=v(g),S=C.useQuery,A=C.useLazyQuery,E=C.useLazyQuerySubscription,T=C.useQueryState,M=C.useQuerySubscription;rl(j.endpoints[g],{useQuery:S,useLazyQuery:A,useLazyQuerySubscription:E,useQueryState:T,useQuerySubscription:M}),h["use"+Iu(g)+"Query"]=S,h["useLazy"+Iu(g)+"Query"]=A}else if(D5(k)){var P=b(g);rl(j.endpoints[g],{useMutation:P}),h["use"+Iu(g)+"Mutation"]=P}}}}}},F5=d5(N5(),$5());const B5=new Error("request for lock canceled");var U5=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(m){o(m)}}function d(u){try{c(n.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};class z5{constructor(t,r=B5){this._value=t,this._cancelError=r,this._queue=[],this._weightedWaiters=[]}acquire(t=1,r=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise((n,a)=>{const i={resolve:n,reject:a,weight:t,priority:r},o=Vj(this._queue,l=>r<=l.priority);o===-1&&t<=this._value?this._dispatchItem(i):this._queue.splice(o+1,0,i)})}runExclusive(t){return U5(this,arguments,void 0,function*(r,n=1,a=0){const[i,o]=yield this.acquire(n,a);try{return yield r(i)}finally{o()}})}waitForUnlock(t=1,r=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return this._couldLockImmediately(t,r)?Promise.resolve():new Promise(n=>{this._weightedWaiters[t-1]||(this._weightedWaiters[t-1]=[]),V5(this._weightedWaiters[t-1],{resolve:n,priority:r})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(t){this._value=t,this._dispatchQueue()}release(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);this._value+=t,this._dispatchQueue()}cancel(){this._queue.forEach(t=>t.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(t){const r=this._value;this._value-=t.weight,t.resolve([r,this._newReleaser(t.weight)])}_newReleaser(t){let r=!1;return()=>{r||(r=!0,this.release(t))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let t=this._value;t>0;t--){const r=this._weightedWaiters[t-1];r&&(r.forEach(n=>n.resolve()),this._weightedWaiters[t-1]=[])}else{const t=this._queue[0].priority;for(let r=this._value;r>0;r--){const n=this._weightedWaiters[r-1];if(!n)continue;const a=n.findIndex(i=>i.priority<=t);(a===-1?n:n.splice(0,a)).forEach(i=>i.resolve())}}}_couldLockImmediately(t,r){return(this._queue.length===0||this._queue[0].priority<r)&&t<=this._value}}function V5(e,t){const r=Vj(e,n=>t.priority<=n.priority);e.splice(r+1,0,t)}function Vj(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return-1}var q5=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(m){o(m)}}function d(u){try{c(n.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})};class H5{constructor(t){this._semaphore=new z5(1,t)}acquire(){return q5(this,arguments,void 0,function*(t=0){const[,r]=yield this._semaphore.acquire(1,t);return r})}runExclusive(t,r=0){return this._semaphore.runExclusive(()=>t(),1,r)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(t=0){return this._semaphore.waitForUnlock(1,t)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const W5="http://localhost:5001/api",nl=new H5,al=r5({baseUrl:W5,credentials:"include",timeout:1e4,prepareHeaders:(e,{getState:t})=>{var r,n;try{const a=(n=(r=t().auth)==null?void 0:r.tokens)==null?void 0:n.accessToken;a&&e.set("authorization",`Bearer ${a}`)}catch{}return e}}),Q5=async(e,t,r)=>{var a,i,o,l,d;await nl.waitForUnlock();let n=await al(e,t,r);if(n.error&&n.error.status===401)if(nl.isLocked())await nl.waitForUnlock(),n=await al(e,t,r);else{const c=await nl.acquire();try{const u=await al({url:"/auth/refresh",method:"POST",body:{refreshToken:(i=(a=t.getState().auth)==null?void 0:a.tokens)==null?void 0:i.refreshToken}},t,r);(o=u==null?void 0:u.data)!=null&&o.accessToken?(t.dispatch({type:"auth/setTokens",payload:{accessToken:u.data.accessToken,refreshToken:u.data.refreshToken??((d=(l=t.getState().auth)==null?void 0:l.tokens)==null?void 0:d.refreshToken)}}),n=await al(e,t,r)):t.dispatch({type:"auth/logout"})}finally{c()}}return n},Ga=F5({reducerPath:"api",baseQuery:Q5,tagTypes:["User","Product","Order","Payment","Cart","Address","Notification"],endpoints:e=>({login:e.mutation({query:t=>({url:"/auth/login",method:"POST",body:t})}),signup:e.mutation({query:t=>({url:"/auth/signup",method:"POST",body:t})}),refreshToken:e.mutation({query:t=>({url:"/auth/refresh",method:"POST",body:{refreshToken:t}})}),changePassword:e.mutation({query:t=>({url:"/auth/change-password",method:"POST",body:t}),invalidatesTags:["User"]}),logout:e.mutation({query:t=>({url:"/auth/logout",method:"POST",body:t}),async onQueryStarted(t,{dispatch:r,queryFulfilled:n}){try{await n}finally{r(en())}}}),getProfile:e.query({query:()=>"/user/profile",providesTags:["User"],transformResponse:t=>t}),updateProfile:e.mutation({query:t=>({url:"/user/profile",method:"PUT",body:t}),invalidatesTags:["User"]}),deleteAccount:e.mutation({query:()=>({url:"/user/delete-account",method:"DELETE"}),invalidatesTags:["User","Cart","Order","Notification"],async onQueryStarted(t,{dispatch:r,queryFulfilled:n}){try{await n,r(Ga.util.resetApiState())}catch{}}}),getProducts:e.query({query:t=>({url:"/products",method:"GET",params:t}),providesTags:t=>t!=null&&t.products?[...t.products.map(r=>({type:"Product",id:r._id})),{type:"Product",id:"LIST"}]:[{type:"Product",id:"LIST"}],transformResponse:t=>{const r=((t==null?void 0:t.products)||[]).map(n=>({...n,id:n._id??n.id}));return{...t,products:r}}}),getProductById:e.query({query:t=>`/products/${t}`,providesTags:(t,r,n)=>[{type:"Product",id:n}],transformResponse:t=>({...t,id:t._id??t.id})}),getSimilarProducts:e.query({query:({id:t,limit:r=4})=>({url:`/products/${t}/similar`,method:"GET",params:{limit:r}}),transformResponse:t=>t,providesTags:["Product"]}),getSearchSuggestions:e.query({query:({q:t})=>({url:"/products/search/suggestions",method:"GET",params:{q:t}}),transformResponse:t=>(t==null?void 0:t.suggestions)||[]}),searchProducts:e.query({query:t=>({url:"/products/search",method:"GET",params:t}),transformResponse:t=>t,providesTags:["Product"]}),getCart:e.query({query:()=>"/cart",providesTags:["Cart"]}),addToCart:e.mutation({query:t=>({url:"/cart",method:"POST",body:t}),invalidatesTags:["Cart"]}),updateCartItem:e.mutation({query:t=>({url:"/cart",method:"PUT",body:t}),invalidatesTags:["Cart"]}),removeFromCart:e.mutation({query:t=>({url:`/cart/${t}`,method:"DELETE"}),invalidatesTags:["Cart"]}),clearCart:e.mutation({query:()=>({url:"/cart/clear",method:"DELETE"}),invalidatesTags:["Cart"]}),getOrders:e.query({query:()=>"/orders",providesTags:["Order"]}),createOrder:e.mutation({query:t=>({url:"/orders",method:"POST",body:t}),invalidatesTags:["Cart","Order"]}),getAddresses:e.query({query:()=>"/user/addresses",providesTags:["Address"],transformResponse:t=>({addresses:(t==null?void 0:t.addresses)||[],defaultAddressId:(t==null?void 0:t.defaultAddressId)||null})}),addAddress:e.mutation({query:t=>({url:"/user/addresses",method:"POST",body:t}),invalidatesTags:["Address"]}),updateAddress:e.mutation({query:({addressId:t,...r})=>({url:`/user/addresses/${t}`,method:"PUT",body:r}),invalidatesTags:["Address"]}),deleteAddress:e.mutation({query:t=>({url:`/user/addresses/${t}`,method:"DELETE"}),invalidatesTags:["Address"]}),setDefaultAddress:e.mutation({query:t=>({url:`/user/addresses/${t}/default`,method:"PATCH"}),invalidatesTags:["Address"]}),getNotifications:e.query({query:()=>"/notifications",providesTags:["Notification"]}),getUnreadCount:e.query({query:()=>"/notifications/unread/count",providesTags:["Notification"]}),markAsRead:e.mutation({query:t=>({url:`/notifications/${t}/read`,method:"PUT"}),invalidatesTags:["Notification"]}),markAllAsRead:e.mutation({query:()=>({url:"/notifications/read-all",method:"PUT"}),invalidatesTags:["Notification"]}),deleteNotification:e.mutation({query:t=>({url:`/notifications/${t}`,method:"DELETE"}),invalidatesTags:["Notification"]}),getNotificationPreferences:e.query({query:()=>"/user/notification-preferences",providesTags:["User"]}),updateNotificationPreferences:e.mutation({query:t=>({url:"/user/notification-preferences",method:"PUT",body:{preferences:t}}),invalidatesTags:["User"]}),getPresignedUploadUrl:e.mutation({query:t=>({url:"/products/upload-url",method:"POST",body:t})}),createProduct:e.mutation({query:t=>({url:"/products",method:"POST",body:t}),invalidatesTags:["Product"]}),updateProduct:e.mutation({query:({id:t,...r})=>({url:`/products/${t}`,method:"PUT",body:r}),invalidatesTags:["Product"]}),deleteProduct:e.mutation({query:t=>({url:`/admin/products/${t}`,method:"DELETE"}),invalidatesTags:["Product"]}),checkPincode:e.query({query:t=>`/pincode/check/${t}`})})}),{useLoginMutation:I_,useSignupMutation:$_,useRefreshTokenMutation:qj,useChangePasswordMutation:K5,useLogoutMutation:F_,useGetProfileQuery:qn,useUpdateProfileMutation:G5,useDeleteAccountMutation:Y5,useGetProductsQuery:rp,useGetProductByIdQuery:J5,useGetSimilarProductsQuery:X5,useGetSearchSuggestionsQuery:Z5,useSearchProductsQuery:e6,useGetCartQuery:t6,useAddToCartMutation:Md,useUpdateCartItemMutation:s6,useRemoveFromCartMutation:r6,useClearCartMutation:n6,useGetOrdersQuery:B_,useCreateOrderMutation:U_,useGetAddressesQuery:Ld,useAddAddressMutation:a6,useUpdateAddressMutation:i6,useDeleteAddressMutation:o6,useSetDefaultAddressMutation:np,useGetNotificationsQuery:l6,useGetUnreadCountQuery:z_,useMarkAsReadMutation:c6,useMarkAllAsReadMutation:d6,useDeleteNotificationMutation:u6,useGetNotificationPreferencesQuery:Hj,useUpdateNotificationPreferencesMutation:Wj,useGetPresignedUploadUrlMutation:V_,useCreateProductMutation:m6,useUpdateProductMutation:h6,useDeleteProductMutation:f6,useCheckPincodeQuery:q_}=Ga,$u=Yf({auth:IC,cart:zC,ui:qC,api:Ga.reducer}),p6=(e,t)=>{var r;if(t.type==="app/RESET_STATE"){console.log(" RESETTING ENTIRE APP STATE");const n=((r=e==null?void 0:e.ui)==null?void 0:r.theme)||"light";return{...$u(void 0,t),ui:{...$u(void 0,t).ui,theme:n}}}return $u(e,t)},Cc=CC({reducer:p6,middleware:e=>e({serializableCheck:!1}).concat(Ga.middleware)});let x6={data:""},g6=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||x6},y6=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,v6=/\/\*[^]*?\*\/|  +/g,Kx=/\n+/g,Tr=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Tr(o,i):i+"{"+Tr(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Tr(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,l):l?l+" "+d:d)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Tr.p?Tr.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},Xs={},Qj=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Qj(e[r]);return t}return e},b6=(e,t,r,n,a)=>{let i=Qj(e),o=Xs[i]||(Xs[i]=(d=>{let c=0,u=11;for(;c<d.length;)u=101*u+d.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Xs[o]){let d=i!==e?e:(c=>{let u,m,h=[{}];for(;u=y6.exec(c.replace(v6,""));)u[4]?h.shift():u[3]?(m=u[3].replace(Kx," ").trim(),h.unshift(h[0][m]=h[0][m]||{})):h[0][u[1]]=u[2].replace(Kx," ").trim();return h[0]})(e);Xs[o]=Tr(a?{["@keyframes "+o]:d}:d,r?"":"."+o)}let l=r&&Xs.g?Xs.g:null;return r&&(Xs.g=Xs[o]),((d,c,u,m)=>{m?c.data=c.data.replace(m,d):c.data.indexOf(d)===-1&&(c.data=u?d+c.data:c.data+d)})(Xs[o],t,n,l),o},j6=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),d=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=d?"."+d:l&&typeof l=="object"?l.props?"":Tr(l,""):l===!1?"":l}return n+a+(o??"")},"");function _d(e){let t=this||{},r=e.call?e(t.p):e;return b6(r.unshift?r.raw?j6(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,g6(t.target),t.g,t.o,t.k)}let Kj,ch,dh;_d.bind({g:1});let gr=_d.bind({k:1});function w6(e,t,r,n){Tr.p=t,Kj=e,ch=r,dh=n}function dn(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),d=l.className||a.className;r.p=Object.assign({theme:ch&&ch()},l),r.o=/ *go\d+/.test(d),l.className=_d.apply(r,n)+(d?" "+d:"");let c=e;return e[0]&&(c=l.as||e,delete l.as),dh&&c[0]&&dh(l),Kj(c,l)}return a}}var N6=e=>typeof e=="function",Pc=(e,t)=>N6(e)?e(t):e,S6=(()=>{let e=0;return()=>(++e).toString()})(),Gj=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),k6=20,Tl=new Map,C6=1e3,Gx=e=>{if(Tl.has(e))return;let t=setTimeout(()=>{Tl.delete(e),Hn({type:4,toastId:e})},C6);Tl.set(e,t)},P6=e=>{let t=Tl.get(e);t&&clearTimeout(t)},uh=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,k6)};case 1:return t.toast.id&&P6(t.toast.id),{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:r}=t;return e.toasts.find(i=>i.id===r.id)?uh(e,{type:1,toast:r}):uh(e,{type:0,toast:r});case 3:let{toastId:n}=t;return n?Gx(n):e.toasts.forEach(i=>{Gx(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},Ol=[],Rl={toasts:[],pausedAt:void 0},Hn=e=>{Rl=uh(Rl,e),Ol.forEach(t=>{t(Rl)})},A6={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},E6=(e={})=>{let[t,r]=w.useState(Rl);w.useEffect(()=>(Ol.push(r),()=>{let a=Ol.indexOf(r);a>-1&&Ol.splice(a,1)}),[t]);let n=t.toasts.map(a=>{var i,o;return{...e,...e[a.type],...a,duration:a.duration||((i=e[a.type])==null?void 0:i.duration)||(e==null?void 0:e.duration)||A6[a.type],style:{...e.style,...(o=e[a.type])==null?void 0:o.style,...a.style}}});return{...t,toasts:n}},T6=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||S6()}),Po=e=>(t,r)=>{let n=T6(t,e,r);return Hn({type:2,toast:n}),n.id},K=(e,t)=>Po("blank")(e,t);K.error=Po("error");K.success=Po("success");K.loading=Po("loading");K.custom=Po("custom");K.dismiss=e=>{Hn({type:3,toastId:e})};K.remove=e=>Hn({type:4,toastId:e});K.promise=(e,t,r)=>{let n=K.loading(t.loading,{...r,...r==null?void 0:r.loading});return e.then(a=>(K.success(Pc(t.success,a),{id:n,...r,...r==null?void 0:r.success}),a)).catch(a=>{K.error(Pc(t.error,a),{id:n,...r,...r==null?void 0:r.error})}),e};var O6=(e,t)=>{Hn({type:1,toast:{id:e,height:t}})},R6=()=>{Hn({type:5,time:Date.now()})},M6=e=>{let{toasts:t,pausedAt:r}=E6(e);w.useEffect(()=>{if(r)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let d=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(d<0){l.visible&&K.dismiss(l.id);return}return setTimeout(()=>K.dismiss(l.id),d)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,r]);let n=w.useCallback(()=>{r&&Hn({type:6,time:Date.now()})},[r]),a=w.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:d=8,defaultPosition:c}=o||{},u=t.filter(f=>(f.position||c)===(i.position||c)&&f.height),m=u.findIndex(f=>f.id===i.id),h=u.filter((f,p)=>p<m&&f.visible).length;return u.filter(f=>f.visible).slice(...l?[h+1]:[0,h]).reduce((f,p)=>f+(p.height||0)+d,0)},[t]);return{toasts:t,handlers:{updateHeight:O6,startPause:R6,endPause:n,calculateOffset:a}}},L6=gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,_6=gr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,D6=gr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,I6=dn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${L6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${_6} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${D6} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$6=gr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,F6=dn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${$6} 1s linear infinite;
`,B6=gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,U6=gr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,z6=dn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${B6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${U6} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,V6=dn("div")`
  position: absolute;
`,q6=dn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,H6=gr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,W6=dn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${H6} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Q6=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?w.createElement(W6,null,t):t:r==="blank"?null:w.createElement(q6,null,w.createElement(F6,{...n}),r!=="loading"&&w.createElement(V6,null,r==="error"?w.createElement(I6,{...n}):w.createElement(z6,{...n})))},K6=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,G6=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Y6="0%{opacity:0;} 100%{opacity:1;}",J6="0%{opacity:1;} 100%{opacity:0;}",X6=dn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Z6=dn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,eP=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=Gj()?[Y6,J6]:[K6(r),G6(r)];return{animation:t?`${gr(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${gr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},tP=w.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?eP(e.position||t||"top-center",e.visible):{opacity:0},i=w.createElement(Q6,{toast:e}),o=w.createElement(Z6,{...e.ariaProps},Pc(e.message,e));return w.createElement(X6,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):w.createElement(w.Fragment,null,i,o))});w6(w.createElement);var sP=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=w.useCallback(o=>{if(o){let l=()=>{let d=o.getBoundingClientRect().height;n(e,d)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return w.createElement("div",{ref:i,className:t,style:r},a)},rP=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Gj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},nP=_d`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,il=16,aP=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:d}=M6(r);return w.createElement("div",{style:{position:"fixed",zIndex:9999,top:il,left:il,right:il,bottom:il,pointerEvents:"none",...i},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},l.map(c=>{let u=c.position||t,m=d.calculateOffset(c,{reverseOrder:e,gutter:n,defaultPosition:t}),h=rP(u,m);return w.createElement(sP,{id:c.id,key:c.id,onHeightUpdate:d.updateHeight,className:c.visible?nP:"",style:h},c.type==="custom"?Pc(c.message,c):a?a(c):w.createElement(tP,{toast:c,position:u}))}))},ae=K;const Yj=w.createContext(void 0),iP={en:{"account.title":"Account","account.welcome":"Manage your account settings","account.welcome.authenticated":"Welcome back, {{name}}!","account.profile":"Profile","account.profile.description":"Manage your personal information","account.orders":"Orders","account.orders.description":"View your order history","account.settings":"Settings","account.settings.description":"App preferences and configuration","account.notifications":"Notifications","account.notifications.description":"Manage your notification preferences","account.privacy":"Privacy","account.privacy.description":"Control your privacy settings","account.help":"Help & Support","account.help.description":"Get help and contact support","account.logout":"Logout","account.logout.description":"Sign out of your account","account.language":"Language","account.language.description":"Choose your preferred language","account.language.english":"English","account.language.telugu":"","account.language.hindi":"","profile.edit":"Edit Profile","profile.name":"Name","profile.email":"Email","profile.phone":"Phone","profile.address":"Address","profile.save":"Save Changes","profile.cancel":"Cancel","common.shop_now":"Shop Now","common.add_to_cart":"Add to Cart","common.search":"Search","common.cart":"Cart","common.home":"Home","common.categories":"Categories","common.account":"Account","home.for_you":"For You","home.categories":"Categories","home.end_of_products":"End of Products","home.search_placeholder":"Search for products","categories.title":"Categories","categories.subtitle":"Browse products by category","categories.chocolates":"Chocolates","categories.ladoos":"Laddus","categories.biscuits":"Biscuits","categories.cakes":"Cakes","categories.hot_snacks":"Hot Snacks","categories.beverages":"Beverages","categories.chocolates_desc":"Sweet chocolate treats","categories.ladoos_desc":"Traditional Indian sweets","categories.biscuits_desc":"Crispy and delicious biscuits","categories.cakes_desc":"Delicious and fresh cakes","categories.hot_snacks_desc":"Spicy and crispy snacks","categories.beverages_desc":"Refreshing drinks and beverages","nav.home":"Home","nav.categories":"Categories","nav.account":"Account","nav.cart":"Cart","sort.title":"Sort by","sort.price_low_high":"Price: Low to High","sort.price_high_low":"Price: High to Low","sort.popularity":"Popularity","sort.newest":"Newest Arrivals","sort.best_selling":"Best Selling"},te:{"account.title":"","account.welcome":"   ","account.welcome.authenticated":", {{name}}!","account.profile":"","account.profile.description":"   ","account.orders":"","account.orders.description":"   ","account.settings":"","account.settings.description":"   ","account.notifications":"","account.notifications.description":"   ","account.privacy":"","account.privacy.description":"   ","account.help":"  ","account.help.description":"    ","account.logout":" ","account.logout.description":"     ","account.language":"","account.language.description":"   ","account.language.english":"English","account.language.telugu":"","account.language.hindi":"","profile.edit":" ","profile.name":"","profile.email":"","profile.phone":"","profile.address":"","profile.save":"  ","profile.cancel":" ","common.shop_now":" ","common.add_to_cart":" ","common.search":"","common.cart":"","common.home":"","common.categories":"","common.account":"","home.for_you":" ","home.categories":"","home.end_of_products":" ","home.search_placeholder":"  ","categories.title":"","categories.subtitle":"    ","categories.chocolates":"","categories.ladoos":"","categories.biscuits":"","categories.cakes":"","categories.hot_snacks":" ","categories.chocolates_desc":"  ","categories.ladoos_desc":"  ","categories.biscuits_desc":"   ","categories.cakes_desc":"   ","categories.hot_snacks_desc":"   ","nav.home":"","nav.categories":"","nav.account":"","nav.cart":"","sort.title":" ","sort.price_low_high":":   ","sort.price_high_low":":   ","sort.popularity":"","sort.newest":" ","sort.best_selling":" "},hi:{"account.title":"","account.welcome":"    ","account.welcome.authenticated":" , {{name}}!","account.profile":"","account.profile.description":"    ","account.orders":"","account.orders.description":"   ","account.settings":"","account.settings.description":"   ","account.notifications":"","account.notifications.description":"    ","account.privacy":"","account.privacy.description":"    ","account.help":"  ","account.help.description":"       ","account.logout":" ","account.logout.description":"     ","account.language":"","account.language.description":"   ","account.language.english":"English","account.language.telugu":"","account.language.hindi":"","profile.edit":"  ","profile.name":"","profile.email":"","profile.phone":"","profile.address":"","profile.save":" ","profile.cancel":" ","common.shop_now":" ","common.add_to_cart":"  ","common.search":"","common.cart":"","common.home":"","common.categories":"","common.account":"","home.for_you":" ","home.categories":"","home.end_of_products":"  ","home.search_placeholder":"   ","categories.title":"","categories.subtitle":"     ","categories.chocolates":"","categories.ladoos":"","categories.biscuits":"","categories.cakes":"","categories.hot_snacks":" ","categories.chocolates_desc":"  ","categories.ladoos_desc":"  ","categories.biscuits_desc":"   ","categories.cakes_desc":"   ","categories.hot_snacks_desc":"   ","nav.home":"","nav.categories":"","nav.account":"","nav.cart":"","sort.title":" ","sort.price_low_high":":   ","sort.price_high_low":":   ","sort.popularity":"","sort.newest":" ","sort.best_selling":"   "}},oP=({children:e})=>{const[t,r]=w.useState(()=>localStorage.getItem("app-language")||"en"),n=i=>{r(i),localStorage.setItem("app-language",i)},a=(i,o)=>{let l=iP[t][i]||i;return o&&Object.entries(o).forEach(([d,c])=>{l=l.replace(`{{${d}}}`,c)}),l};return s.jsx(Yj.Provider,{value:{language:t,setLanguage:n,t:a},children:e})},Ya=()=>{const e=w.useContext(Yj);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cP=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Yx=e=>{const t=cP(e);return t.charAt(0).toUpperCase()+t.slice(1)},Jj=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),dP=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},d)=>w.createElement("svg",{ref:d,...uP,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Jj("lucide",a),...!i&&!dP(l)&&{"aria-hidden":"true"},...l},[...o.map(([c,u])=>w.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,t)=>{const r=w.forwardRef(({className:n,...a},i)=>w.createElement(mP,{ref:i,iconNode:t,className:Jj(`lucide-${lP(Yx(e))}`,`lucide-${e}`,n),...a}));return r.displayName=Yx(e),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ce=Y("arrow-left",hP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],mh=Y("arrow-right",fP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],xP=Y("arrow-up-narrow-wide",pP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ac=Y("award",gP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Dt=Y("bell",yP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Jx=Y("briefcase",vP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],jP=Y("building-2",bP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],NP=Y("building",wP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Dn=Y("calendar",SP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],co=Y("camera",kP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],uo=Y("chart-column",CP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],AP=Y("chart-no-axes-column",PP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Es=Y("check",EP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sa=Y("chevron-down",TP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],RP=Y("chevron-left",OP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Lr=Y("chevron-right",MP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Xj=Y("chevron-up",LP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Da=Y("circle-alert",_P);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ee=Y("circle-check-big",DP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yr=Y("circle-question-mark",IP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],tn=Y("circle-x",$P);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],He=Y("clock",FP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Zj=Y("copy",BP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ys=Y("credit-card",UP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],js=Y("dollar-sign",zP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ap=Y("download",VP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Xx=Y("ellipsis-vertical",qP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],WP=Y("ellipsis",HP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ka=Y("eye-off",QP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],or=Y("eye",KP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ew=Y("file-text",GP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],JP=Y("funnel",YP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],mo=Y("gift",XP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ip=Y("globe",ZP);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],t3=Y("graduation-cap",e3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],r3=Y("grid-3x3",s3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],a3=Y("hash",n3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],tw=Y("headphones",i3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],sw=Y("heart",o3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],op=Y("house",l3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],d3=Y("image",c3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ho=Y("loader-circle",u3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],h3=Y("log-in",m3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lp=Y("log-out",f3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ia=Y("lock",p3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ft=Y("mail",x3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ut=Y("map-pin",g3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],cp=Y("message-circle",y3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ec=Y("message-square",v3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],j3=Y("monitor",b3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],N3=Y("moon",w3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],hh=Y("navigation",S3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ze=Y("package",k3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ol=Y("pen-line",C3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],mt=Y("phone",P3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tc=Y("plus",A3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],T3=Y("qr-code",E3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Dd=Y("refresh-cw",O3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],M3=Y("rotate-ccw",R3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sn=Y("search",L3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],D3=Y("send",_3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ao=Y("settings",I3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],rw=Y("share-2",$3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fo=Y("shield-check",F3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Xt=Y("shield",B3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],z3=Y("shopping-bag",U3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Kt=Y("shopping-cart",V3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],dp=Y("smartphone",q3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],W3=Y("square-check-big",H3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],up=Y("square-pen",Q3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ct=Y("star",K3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Y3=Y("store",G3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],X3=Y("sun",J3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Zx=Y("tag",Z3);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fh=Y("target",eA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mp=Y("trash-2",tA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],rr=Y("trending-up",sA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$a=Y("triangle-alert",rA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],dr=Y("truck",nA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],iA=Y("upload",aA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fu=Y("user-check",oA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],cA=Y("user-x",lA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ns=Y("users",dA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],De=Y("user",uA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],hA=Y("wallet",mA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pA=Y("wifi-off",fA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],gA=Y("wifi",xA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pt=Y("x",yA);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],eg=Y("zap",vA),nw=({isOpen:e,onClose:t,redirectTo:r="/account/profile"})=>{const n=tt(),{isAuthenticated:a}=de(R=>R.auth),[i,o]=w.useState("choose"),[l,d]=w.useState(""),[c,u]=w.useState(""),[m,h]=w.useState(""),[f,p]=w.useState(!1),[y,j]=w.useState(""),[N,v]=w.useState(!1),[b,x]=w.useState(""),[g,k]=w.useState(30),[C,S]=w.useState(!1);w.useEffect(()=>{a&&e&&(console.log("OtpLoginModal: User authenticated, closing modal"),t())},[a,e,t]);const A=R=>/^[6-9]\d{9}$/.test(R),E=()=>{d(""),u(""),h(""),j(""),x(""),v(!1),k(30),S(!1),o("choose")},T=()=>{E(),t()},M=async()=>{p(!0),j(""),x("");try{let R={};if(l){if(!A(l)){x("Please enter a valid 10-digit mobile number."),p(!1);return}const _=l.replace(/\D/g,"");R.phone=_}else if(c)R.email=c;else{p(!1);return}console.log(" Sending OTP request payload:",R);const L=await fetch("http://localhost:5001/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});console.log(" send-otp status:",L.status);const U=await L.json();if(console.log(" send-otp response body:",U),!L.ok){if(L.status===404&&U.action==="signup_required"){j("Account does not exist. Redirecting to signup...");const _=l||c,I=_?`?identifier=${encodeURIComponent(_)}`:"";window.location.href=`/signup${I}`;return}throw new Error(U.error||"Failed to send OTP")}v(!0),k(30),S(!1);const D=setInterval(()=>{k(_=>_<=1?(clearInterval(D),S(!0),0):_-1)},1e3)}catch(R){j(R instanceof Error?R.message:"Failed to send OTP")}finally{p(!1)}},P=async()=>{p(!0),j("");try{const R=await fetch("http://localhost:5001/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({otp:m,...l?{phone:l}:{email:c}})}),L=await R.json();if(!R.ok){const U=L.error||"Failed to verify OTP";U.includes("email already exists")?j("An account with this email already exists. Please use a different email or try logging in."):U.includes("phone number already exists")?j("An account with this phone number already exists. Please use a different phone number or try logging in."):j(U);return}n(Ks(L.user)),n(Vn({accessToken:L.accessToken,refreshToken:L.refreshToken})),T(),setTimeout(()=>{L.user.isAdmin?window.location.href="/admin":window.location.pathname!==r&&(window.location.href=r)},500)}catch(R){j(R instanceof Error?R.message:"Failed to verify OTP")}finally{p(!1)}},O=()=>{window.location.href="http://localhost:5001/api/auth/google"};return e?(console.log("OtpLoginModal: Modal is open, rendering"),s.jsx("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-screen overflow-auto flex",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 text-white p-12 flex-1 flex flex-col justify-center relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full"}),s.jsx("div",{className:"absolute top-32 right-16 w-24 h-24 bg-white rounded-full"}),s.jsx("div",{className:"absolute bottom-20 left-20 w-16 h-16 bg-white rounded-full"}),s.jsx("div",{className:"absolute bottom-32 right-10 w-20 h-20 bg-white rounded-full"})]}),s.jsxs("div",{className:"text-center relative z-10",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(De,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent",children:"Welcome Back"}),s.jsx("p",{className:"text-lg text-blue-100 leading-relaxed",children:"Get access to your Orders and Recommendations"})]}),s.jsxs("div",{className:"mt-8 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-100",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-200 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Secure Login"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-100",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-200 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Fast Checkout"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-100",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-200 rounded-full"}),s.jsx("span",{className:"text-sm",children:"Personalized Experience"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-12 flex-1 flex flex-col justify-center relative",children:[s.jsx("button",{onClick:T,"aria-label":"Close login modal",className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full z-20",children:s.jsx(pt,{className:"h-5 w-5"})}),s.jsx("div",{className:"w-full max-w-md mx-auto overflow-y-auto min-h-[360px]",children:i==="choose"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Sign In"}),s.jsx("p",{className:"text-gray-600",children:"Enter your email or mobile number"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:l||c,onChange:R=>{R.stopPropagation();const L=R.target.value;x(""),L.includes("@")?(u(L),d("")):/^[0-9]{10}$/.test(L)||/^[0-9]*$/.test(L)&&L.length<=10?(d(L),u("")):/^[a-zA-Z0-9@._-]*$/.test(L)&&(u(L),d(""))},onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),R.stopPropagation(),(l||c)&&M())},placeholder:"Enter Email/Mobile number",className:`w-full px-4 py-4 text-lg border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 transition-all ${b?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l?s.jsx(mt,{className:"h-5 w-5 text-gray-400"}):c?s.jsx(Ft,{className:"h-5 w-5 text-gray-400"}):null})]}),b&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b}),y&&s.jsx("div",{className:"text-red-600 text-sm mb-3",children:y}),s.jsxs("div",{className:"text-xs text-gray-500",children:["By continuing, you agree to CS Store's"," ",s.jsx("a",{href:"/terms",className:"text-blue-600 hover:underline",children:"Terms of Use"})," ","and"," ",s.jsx("a",{href:"/privacy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]}),s.jsx("button",{onClick:()=>{(l||c)&&M()},disabled:!l&&!c||!!(l&&!A(l)),className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-4 px-6 rounded-lg text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-lg",children:"Continue"}),N&&s.jsxs(s.Fragment,{children:[s.jsx("label",{className:"text-gray-700 text-sm font-medium mt-4 block",children:"Enter OTP"}),s.jsx("input",{type:"text",value:m,onChange:R=>h(R.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"w-full px-4 py-3 border-2 rounded-lg border-gray-200 focus:outline-none focus:border-blue-500",placeholder:"Enter 6-digit OTP"}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("button",{type:"button",disabled:!C,onClick:M,className:`text-sm font-medium transition-colors ${C?"text-blue-600 hover:text-blue-700 cursor-pointer":"text-gray-400 cursor-not-allowed"}`,style:{background:"none",border:"none",padding:0},children:"Resend OTP"}),s.jsx("span",{className:"text-sm text-gray-500",children:C?"":`Resend in ${g}s`})]}),s.jsx("button",{onClick:P,disabled:m.length!==6||f,className:"w-full bg-blue-600 text-white py-3 rounded-lg disabled:opacity-50",children:f?"Verifying...":"Verify OTP"})]}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"or"})})]}),s.jsxs("button",{onClick:O,className:"w-full border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-medium py-4 px-6 rounded-lg transition-all flex items-center justify-center space-x-2",children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{children:"Continue with Google"})]}),s.jsxs("div",{className:"text-center text-sm text-gray-600 mt-4",children:["New to CS Store?"," ",s.jsx("button",{onClick:()=>window.location.href="/signup",className:"text-blue-600 font-medium hover:underline",children:"create an account."})]})]})})]})]})})):(console.log("OtpLoginModal: Modal is closed, not rendering"),null)},aw=w.createContext(void 0),Id=()=>{const e=w.useContext(aw);if(!e)throw new Error("useOtpModal must be used within an OtpModalProvider");return e},bA=({children:e})=>{const[t,r]=w.useState(!1),[n,a]=w.useState("/account/profile"),{isAuthenticated:i}=de(c=>c.auth),o=c=>{if(i){console.log("OtpModalContext: User is already authenticated, skipping modal");return}console.log("OtpModalContext: showOtpModal called with redirectPath:",c),a(c||"/account/profile"),requestAnimationFrame(()=>r(!0)),console.log("OtpModalContext: Modal should now be open")},l=()=>{r(!1)};w.useEffect(()=>{i&&t&&(console.log("OtpModalContext: User authenticated, closing modal"),l())},[i,t]);const d=t&&!i;return s.jsxs(aw.Provider,{value:{showOtpModal:o,hideOtpModal:l,isOtpModalOpen:d},children:[e,t&&s.jsx(Ae.Suspense,{fallback:s.jsx(s.Fragment,{}),children:s.jsx(nw,{isOpen:!i,onClose:l,redirectTo:n})})]})},iw=w.createContext(void 0),jA=()=>{const e=w.useContext(iw);if(!e)throw new Error("useCurrency must be used within a CurrencyProvider");return e},wA={USD:"$",INR:"",EUR:"",GBP:""},NA=({children:e})=>{const[t,r]=w.useState(()=>typeof window<"u"&&localStorage.getItem("currency")||"USD"),n=i=>{r(i),localStorage.setItem("currency",i)},a=i=>`${wA[t]}${i.toFixed(2)}`;return s.jsx(iw.Provider,{value:{currency:t,setCurrency:n,formatPrice:a},children:e})},tg=({href:e,children:t,className:r=""})=>s.jsx("a",{href:e,className:`
        sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4
        bg-primary-600 text-white px-4 py-2 rounded-md z-skipLink
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500
        ${r}
      `,children:t}),ow=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),$d=w.createContext({}),Fd=w.createContext(null),Bd=typeof document<"u",hp=Bd?w.useLayoutEffect:w.useEffect,lw=w.createContext({strict:!1});function SA(e,t,r,n){const{visualElement:a}=w.useContext($d),i=w.useContext(lw),o=w.useContext(Fd),l=w.useContext(ow).reducedMotion,d=w.useRef();n=n||i.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;w.useInsertionEffect(()=>{c&&c.update(r,o)});const u=w.useRef(!!window.HandoffAppearAnimations);return hp(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),w.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,u.current=!1)}),c}function ua(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function kA(e,t,r){return w.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ua(r)&&(r.current=n))},[t])}function po(e){return typeof e=="string"||Array.isArray(e)}function Ud(e){return typeof e=="object"&&typeof e.start=="function"}const fp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pp=["initial",...fp];function zd(e){return Ud(e.animate)||pp.some(t=>po(e[t]))}function cw(e){return!!(zd(e)||e.variants)}function CA(e,t){if(zd(e)){const{initial:r,animate:n}=e;return{initial:r===!1||po(r)?r:void 0,animate:po(n)?n:void 0}}return e.inherit!==!1?t:{}}function PA(e){const{initial:t,animate:r}=CA(e,w.useContext($d));return w.useMemo(()=>({initial:t,animate:r}),[sg(t),sg(r)])}function sg(e){return Array.isArray(e)?e.join(" "):e}const rg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xo={};for(const e in rg)xo[e]={isEnabled:t=>rg[e].some(r=>!!t[r])};function AA(e){for(const t in e)xo[t]={...xo[t],...e[t]}}const xp=w.createContext({}),dw=w.createContext({}),EA=Symbol.for("motionComponentSymbol");function TA({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){e&&AA(e);function i(l,d){let c;const u={...w.useContext(ow),...l,layoutId:OA(l)},{isStatic:m}=u,h=PA(l),f=n(l,m);if(!m&&Bd){h.visualElement=SA(a,f,u,t);const p=w.useContext(dw),y=w.useContext(lw).strict;h.visualElement&&(c=h.visualElement.loadFeatures(u,y,e,p))}return w.createElement($d.Provider,{value:h},c&&h.visualElement?w.createElement(c,{visualElement:h.visualElement,...u}):null,r(a,l,kA(f,h.visualElement,d),f,m,h.visualElement))}const o=w.forwardRef(i);return o[EA]=a,o}function OA({layoutId:e}){const t=w.useContext(xp).id;return t&&e!==void 0?t+"-"+e:e}function RA(e){function t(n,a={}){return TA(e(n,a))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,a)=>(r.has(a)||r.set(a,t(a)),r.get(a))})}const MA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gp(e){return typeof e!="string"||e.includes("-")?!1:!!(MA.indexOf(e)>-1||/[A-Z]/.test(e))}const Oc={};function LA(e){Object.assign(Oc,e)}const Eo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wn=new Set(Eo);function uw(e,{layout:t,layoutId:r}){return Wn.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Oc[e]||e==="opacity")}const Zt=e=>!!(e&&e.getVelocity),_A={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DA=Eo.length;function IA(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,a){let i="";for(let o=0;o<DA;o++){const l=Eo[o];if(e[l]!==void 0){const d=_A[l]||l;i+=`${d}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):r&&n&&(i="none"),i}const mw=e=>t=>typeof t=="string"&&t.startsWith(e),hw=mw("--"),ph=mw("var(--"),$A=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,FA=(e,t)=>t&&typeof e=="number"?t.transform(e):e,rn=(e,t,r)=>Math.min(Math.max(r,e),t),Qn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},_i={...Qn,transform:e=>rn(0,1,e)},ll={...Qn,default:1},Di=e=>Math.round(e*1e5)/1e5,Vd=/(-)?([\d]*\.?[\d])+/g,fw=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,BA=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function To(e){return typeof e=="string"}const Oo=e=>({test:t=>To(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Nr=Oo("deg"),Qs=Oo("%"),me=Oo("px"),UA=Oo("vh"),zA=Oo("vw"),ng={...Qs,parse:e=>Qs.parse(e)/100,transform:e=>Qs.transform(e*100)},ag={...Qn,transform:Math.round},pw={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:Nr,rotateX:Nr,rotateY:Nr,rotateZ:Nr,scale:ll,scaleX:ll,scaleY:ll,scaleZ:ll,skew:Nr,skewX:Nr,skewY:Nr,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:_i,originX:ng,originY:ng,originZ:me,zIndex:ag,fillOpacity:_i,strokeOpacity:_i,numOctaves:ag};function yp(e,t,r,n){const{style:a,vars:i,transform:o,transformOrigin:l}=e;let d=!1,c=!1,u=!0;for(const m in t){const h=t[m];if(hw(m)){i[m]=h;continue}const f=pw[m],p=FA(h,f);if(Wn.has(m)){if(d=!0,o[m]=p,!u)continue;h!==(f.default||0)&&(u=!1)}else m.startsWith("origin")?(c=!0,l[m]=p):a[m]=p}if(t.transform||(d||n?a.transform=IA(e.transform,r,u,n):a.transform&&(a.transform="none")),c){const{originX:m="50%",originY:h="50%",originZ:f=0}=l;a.transformOrigin=`${m} ${h} ${f}`}}const vp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xw(e,t,r){for(const n in t)!Zt(t[n])&&!uw(n,r)&&(e[n]=t[n])}function VA({transformTemplate:e},t,r){return w.useMemo(()=>{const n=vp();return yp(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function qA(e,t,r){const n=e.style||{},a={};return xw(a,n,e),Object.assign(a,VA(e,t,r)),e.transformValues?e.transformValues(a):a}function HA(e,t,r){const n={},a=qA(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const WA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Rc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||WA.has(e)}let gw=e=>!Rc(e);function QA(e){e&&(gw=t=>t.startsWith("on")?!Rc(t):e(t))}try{QA(require("@emotion/is-prop-valid").default)}catch{}function KA(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(gw(a)||r===!0&&Rc(a)||!t&&!Rc(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function ig(e,t,r){return typeof e=="string"?e:me.transform(t+r*e)}function GA(e,t,r){const n=ig(t,e.x,e.width),a=ig(r,e.y,e.height);return`${n} ${a}`}const YA={offset:"stroke-dashoffset",array:"stroke-dasharray"},JA={offset:"strokeDashoffset",array:"strokeDasharray"};function XA(e,t,r=1,n=0,a=!0){e.pathLength=1;const i=a?YA:JA;e[i.offset]=me.transform(-n);const o=me.transform(t),l=me.transform(r);e[i.array]=`${o} ${l}`}function bp(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...c},u,m,h){if(yp(e,c,u,h),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:y}=e;f.transform&&(y&&(p.transform=f.transform),delete f.transform),y&&(a!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=GA(y,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&XA(f,o,l,d,!1)}const yw=()=>({...vp(),attrs:{}}),jp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ZA(e,t,r,n){const a=w.useMemo(()=>{const i=yw();return bp(i,t,{enableHardwareAcceleration:!1},jp(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};xw(i,e.style,e),a.style={...i,...a.style}}return a}function eE(e=!1){return(r,n,a,{latestValues:i},o)=>{const d=(gp(r)?ZA:HA)(n,i,o,r),u={...KA(n,typeof r=="string",e),...d,ref:a},{children:m}=n,h=w.useMemo(()=>Zt(m)?m.get():m,[m]);return w.createElement(r,{...u,children:h})}}const wp=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function vw(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const bw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jw(e,t,r,n){vw(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(bw.has(a)?a:wp(a),t.attrs[a])}function Np(e,t){const{style:r}=e,n={};for(const a in r)(Zt(r[a])||t.style&&Zt(t.style[a])||uw(a,e))&&(n[a]=r[a]);return n}function ww(e,t){const r=Np(e,t);for(const n in e)if(Zt(e[n])||Zt(t[n])){const a=Eo.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=e[n]}return r}function Sp(e,t,r,n={},a={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,a)),t}function Nw(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const Mc=e=>Array.isArray(e),tE=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),sE=e=>Mc(e)?e[e.length-1]||0:e;function Ml(e){const t=Zt(e)?e.get():e;return tE(t)?t.toValue():t}function rE({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,a,i){const o={latestValues:nE(n,a,i,e),renderState:t()};return r&&(o.mount=l=>r(n,l,o)),o}const Sw=e=>(t,r)=>{const n=w.useContext($d),a=w.useContext(Fd),i=()=>rE(e,t,n,a);return r?i():Nw(i)};function nE(e,t,r,n){const a={},i=n(e,{});for(const h in i)a[h]=Ml(i[h]);let{initial:o,animate:l}=e;const d=zd(e),c=cw(e);t&&c&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const m=u?l:o;return m&&typeof m!="boolean"&&!Ud(m)&&(Array.isArray(m)?m:[m]).forEach(f=>{const p=Sp(e,f);if(!p)return;const{transitionEnd:y,transition:j,...N}=p;for(const v in N){let b=N[v];if(Array.isArray(b)){const x=u?b.length-1:0;b=b[x]}b!==null&&(a[v]=b)}for(const v in y)a[v]=y[v]}),a}const rt=e=>e;class og{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function aE(e){let t=new og,r=new og,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(d,c=!1,u=!1)=>{const m=u&&a,h=m?t:r;return c&&o.add(d),h.add(d)&&m&&a&&(n=t.order.length),d},cancel:d=>{r.remove(d),o.delete(d)},process:d=>{if(a){i=!0;return}if(a=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let c=0;c<n;c++){const u=t.order[c];u(d),o.has(u)&&(l.schedule(u),e())}a=!1,i&&(i=!1,l.process(d))}};return l}const cl=["prepare","read","update","preRender","render","postRender"],iE=40;function oE(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=cl.reduce((m,h)=>(m[h]=aE(()=>r=!0),m),{}),o=m=>i[m].process(a),l=()=>{const m=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(m-a.timestamp,iE),1),a.timestamp=m,a.isProcessing=!0,cl.forEach(o),a.isProcessing=!1,r&&t&&(n=!1,e(l))},d=()=>{r=!0,n=!0,a.isProcessing||e(l)};return{schedule:cl.reduce((m,h)=>{const f=i[h];return m[h]=(p,y=!1,j=!1)=>(r||d(),f.schedule(p,y,j)),m},{}),cancel:m=>cl.forEach(h=>i[h].cancel(m)),state:a,steps:i}}const{schedule:_e,cancel:vr,state:ht,steps:Bu}=oE(typeof requestAnimationFrame<"u"?requestAnimationFrame:rt,!0),lE={useVisualState:Sw({scrapeMotionValuesFromProps:ww,createRenderState:yw,onMount:(e,t,{renderState:r,latestValues:n})=>{_e.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),_e.render(()=>{bp(r,n,{enableHardwareAcceleration:!1},jp(t.tagName),e.transformTemplate),jw(t,r)})}})},cE={useVisualState:Sw({scrapeMotionValuesFromProps:Np,createRenderState:vp})};function dE(e,{forwardMotionProps:t=!1},r,n){return{...gp(e)?lE:cE,preloadedFeatures:r,useRender:eE(t),createVisualElement:n,Component:e}}function lr(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const kw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function qd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const uE=e=>t=>kw(t)&&e(t,qd(t));function ur(e,t,r,n){return lr(e,t,uE(r),n)}const mE=(e,t)=>r=>t(e(r)),Wr=(...e)=>e.reduce(mE);function Cw(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const lg=Cw("dragHorizontal"),cg=Cw("dragVertical");function Pw(e){let t=!1;if(e==="y")t=cg();else if(e==="x")t=lg();else{const r=lg(),n=cg();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function Aw(){const e=Pw(!0);return e?(e(),!1):!0}class un{constructor(t){this.isMounted=!1,this.node=t}update(){}}function dg(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),a=(i,o)=>{if(i.type==="touch"||Aw())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&_e.update(()=>l[n](i,o))};return ur(e.current,r,a,{passive:!e.getProps()[n]})}class hE extends un{mount(){this.unmount=Wr(dg(this.node,!0),dg(this.node,!1))}unmount(){}}class fE extends un{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wr(lr(this.node.current,"focus",()=>this.onFocus()),lr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Ew=(e,t)=>t?e===t?!0:Ew(e,t.parentElement):!1;function Uu(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,qd(r))}class pE extends un{constructor(){super(...arguments),this.removeStartListeners=rt,this.removeEndListeners=rt,this.removeAccessibleListeners=rt,this.startPointerPress=(t,r)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),i=ur(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u}=this.node.getProps();_e.update(()=>{Ew(this.node.current,l.target)?c&&c(l,d):u&&u(l,d)})},{passive:!(n.onTap||n.onPointerUp)}),o=ur(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Wr(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Uu("up",(d,c)=>{const{onTap:u}=this.node.getProps();u&&_e.update(()=>u(d,c))})};this.removeEndListeners(),this.removeEndListeners=lr(this.node.current,"keyup",o),Uu("down",(l,d)=>{this.startPress(l,d)})},r=lr(this.node.current,"keydown",t),n=()=>{this.isPressing&&Uu("cancel",(i,o)=>this.cancelPress(i,o))},a=lr(this.node.current,"blur",n);this.removeAccessibleListeners=Wr(r,a)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&_e.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Aw()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&_e.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=ur(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=lr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wr(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const xh=new WeakMap,zu=new WeakMap,xE=e=>{const t=xh.get(e.target);t&&t(e)},gE=e=>{e.forEach(xE)};function yE({root:e,...t}){const r=e||document;zu.has(r)||zu.set(r,{});const n=zu.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(gE,{root:e,...t})),n[a]}function vE(e,t,r){const n=yE(t);return xh.set(e,r),n.observe(e),()=>{xh.delete(e),n.unobserve(e)}}const bE={some:0,all:1};class jE extends un{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:bE[a]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),h=c?u:m;h&&h(d)};return vE(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(wE(t,r))&&this.startObserver()}unmount(){}}function wE({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const NE={inView:{Feature:jE},tap:{Feature:pE},focus:{Feature:fE},hover:{Feature:hE}};function Tw(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function SE(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function kE(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function Hd(e,t,r){const n=e.getProps();return Sp(n,t,r!==void 0?r:n.custom,SE(e),kE(e))}const CE="framerAppearId",PE="data-"+wp(CE);let kp=rt;const An=e=>e*1e3,mr=e=>e/1e3,AE={current:!1},Ow=e=>Array.isArray(e)&&typeof e[0]=="number";function Rw(e){return!!(!e||typeof e=="string"&&Mw[e]||Ow(e)||Array.isArray(e)&&e.every(Rw))}const ji=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,Mw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ji([0,.65,.55,1]),circOut:ji([.55,0,1,.45]),backIn:ji([.31,.01,.66,-.59]),backOut:ji([.33,1.53,.69,.99])};function Lw(e){if(e)return Ow(e)?ji(e):Array.isArray(e)?e.map(Lw):Mw[e]}function EE(e,t,r,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:d}={}){const c={[t]:r};d&&(c.offset=d);const u=Lw(l);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function TE(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const _w=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,OE=1e-7,RE=12;function ME(e,t,r,n,a){let i,o,l=0;do o=t+(r-t)/2,i=_w(o,n,a)-e,i>0?r=o:t=o;while(Math.abs(i)>OE&&++l<RE);return o}function Ro(e,t,r,n){if(e===t&&r===n)return rt;const a=i=>ME(i,0,1,e,r);return i=>i===0||i===1?i:_w(a(i),t,n)}const LE=Ro(.42,0,1,1),_E=Ro(0,0,.58,1),Dw=Ro(.42,0,.58,1),DE=e=>Array.isArray(e)&&typeof e[0]!="number",Iw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$w=e=>t=>1-e(1-t),Fw=e=>1-Math.sin(Math.acos(e)),Cp=$w(Fw),IE=Iw(Cp),Bw=Ro(.33,1.53,.69,.99),Pp=$w(Bw),$E=Iw(Pp),FE=e=>(e*=2)<1?.5*Pp(e):.5*(2-Math.pow(2,-10*(e-1))),BE={linear:rt,easeIn:LE,easeInOut:Dw,easeOut:_E,circIn:Fw,circInOut:IE,circOut:Cp,backIn:Pp,backInOut:$E,backOut:Bw,anticipate:FE},ug=e=>{if(Array.isArray(e)){kp(e.length===4);const[t,r,n,a]=e;return Ro(t,r,n,a)}else if(typeof e=="string")return BE[e];return e},Ap=(e,t)=>r=>!!(To(r)&&BA.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),Uw=(e,t,r)=>n=>{if(!To(n))return n;const[a,i,o,l]=n.match(Vd);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},UE=e=>rn(0,255,e),Vu={...Qn,transform:e=>Math.round(UE(e))},Sn={test:Ap("rgb","red"),parse:Uw("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Vu.transform(e)+", "+Vu.transform(t)+", "+Vu.transform(r)+", "+Di(_i.transform(n))+")"};function zE(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const gh={test:Ap("#"),parse:zE,transform:Sn.transform},ma={test:Ap("hsl","hue"),parse:Uw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Qs.transform(Di(t))+", "+Qs.transform(Di(r))+", "+Di(_i.transform(n))+")"},Mt={test:e=>Sn.test(e)||gh.test(e)||ma.test(e),parse:e=>Sn.test(e)?Sn.parse(e):ma.test(e)?ma.parse(e):gh.parse(e),transform:e=>To(e)?e:e.hasOwnProperty("red")?Sn.transform(e):ma.transform(e)},Ke=(e,t,r)=>-r*e+r*t+e;function qu(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function VE({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,d=2*r-l;a=qu(d,l,e+1/3),i=qu(d,l,e),o=qu(d,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Hu=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},qE=[gh,Sn,ma],HE=e=>qE.find(t=>t.test(e));function mg(e){const t=HE(e);let r=t.parse(e);return t===ma&&(r=VE(r)),r}const zw=(e,t)=>{const r=mg(e),n=mg(t),a={...r};return i=>(a.red=Hu(r.red,n.red,i),a.green=Hu(r.green,n.green,i),a.blue=Hu(r.blue,n.blue,i),a.alpha=Ke(r.alpha,n.alpha,i),Sn.transform(a))};function WE(e){var t,r;return isNaN(e)&&To(e)&&(((t=e.match(Vd))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(fw))===null||r===void 0?void 0:r.length)||0)>0}const Vw={regex:$A,countKey:"Vars",token:"${v}",parse:rt},qw={regex:fw,countKey:"Colors",token:"${c}",parse:Mt.parse},Hw={regex:Vd,countKey:"Numbers",token:"${n}",parse:Qn.parse};function Wu(e,{regex:t,countKey:r,token:n,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(a)))}function Lc(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Wu(r,Vw),Wu(r,qw),Wu(r,Hw),r}function Ww(e){return Lc(e).values}function Qw(e){const{values:t,numColors:r,numVars:n,tokenised:a}=Lc(e),i=t.length;return o=>{let l=a;for(let d=0;d<i;d++)d<n?l=l.replace(Vw.token,o[d]):d<n+r?l=l.replace(qw.token,Mt.transform(o[d])):l=l.replace(Hw.token,Di(o[d]));return l}}const QE=e=>typeof e=="number"?0:e;function KE(e){const t=Ww(e);return Qw(e)(t.map(QE))}const nn={test:WE,parse:Ww,createTransformer:Qw,getAnimatableNone:KE},Kw=(e,t)=>r=>`${r>0?t:e}`;function Gw(e,t){return typeof e=="number"?r=>Ke(e,t,r):Mt.test(e)?zw(e,t):e.startsWith("var(")?Kw(e,t):Jw(e,t)}const Yw=(e,t)=>{const r=[...e],n=r.length,a=e.map((i,o)=>Gw(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}},GE=(e,t)=>{const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=Gw(e[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},Jw=(e,t)=>{const r=nn.createTransformer(t),n=Lc(e),a=Lc(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?Wr(Yw(n.values,a.values),r):Kw(e,t)},go=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},hg=(e,t)=>r=>Ke(e,t,r);function YE(e){return typeof e=="number"?hg:typeof e=="string"?Mt.test(e)?zw:Jw:Array.isArray(e)?Yw:typeof e=="object"?GE:hg}function JE(e,t,r){const n=[],a=r||YE(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||rt:t;l=Wr(d,l)}n.push(l)}return n}function Xw(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=e.length;if(kp(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=JE(t,n,a),l=o.length,d=c=>{let u=0;if(l>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const m=go(e[u],e[u+1],c);return o[u](m)};return r?c=>d(rn(e[0],e[i-1],c)):d}function XE(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=go(0,t,n);e.push(Ke(r,1,a))}}function ZE(e){const t=[0];return XE(t,e.length-1),t}function eT(e,t){return e.map(r=>r*t)}function tT(e,t){return e.map(()=>t||Dw).splice(0,e.length-1)}function _c({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=DE(n)?n.map(ug):ug(n),i={done:!1,value:t[0]},o=eT(r&&r.length===t.length?r:ZE(t),e),l=Xw(o,t,{ease:Array.isArray(a)?a:tT(t,a)});return{calculatedDuration:e,next:d=>(i.value=l(d),i.done=d>=e,i)}}function Zw(e,t){return t?e*(1e3/t):0}const sT=5;function eN(e,t,r){const n=Math.max(t-sT,0);return Zw(r-e(n),t-n)}const Qu=.001,rT=.01,nT=10,aT=.05,iT=1;function oT({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let a,i,o=1-t;o=rn(aT,iT,o),e=rn(rT,nT,mr(e)),o<1?(a=c=>{const u=c*o,m=u*e,h=u-r,f=yh(c,o),p=Math.exp(-m);return Qu-h/f*p},i=c=>{const m=c*o*e,h=m*r+r,f=Math.pow(o,2)*Math.pow(c,2)*e,p=Math.exp(-m),y=yh(Math.pow(c,2),o);return(-a(c)+Qu>0?-1:1)*((h-f)*p)/y}):(a=c=>{const u=Math.exp(-c*e),m=(c-r)*e+1;return-Qu+u*m},i=c=>{const u=Math.exp(-c*e),m=(r-c)*(e*e);return u*m});const l=5/e,d=cT(a,i,l);if(e=An(e),isNaN(d))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(d,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const lT=12;function cT(e,t,r){let n=r;for(let a=1;a<lT;a++)n=n-e(n)/t(n);return n}function yh(e,t){return e*Math.sqrt(1-t*t)}const dT=["duration","bounce"],uT=["stiffness","damping","mass"];function fg(e,t){return t.some(r=>e[r]!==void 0)}function mT(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!fg(e,uT)&&fg(e,dT)){const r=oT(e);t={...t,...r,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function tN({keyframes:e,restDelta:t,restSpeed:r,...n}){const a=e[0],i=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:d,mass:c,velocity:u,duration:m,isResolvedFromDuration:h}=mT(n),f=u?-mr(u):0,p=d/(2*Math.sqrt(l*c)),y=i-a,j=mr(Math.sqrt(l/c)),N=Math.abs(y)<5;r||(r=N?.01:2),t||(t=N?.005:.5);let v;if(p<1){const b=yh(j,p);v=x=>{const g=Math.exp(-p*j*x);return i-g*((f+p*j*y)/b*Math.sin(b*x)+y*Math.cos(b*x))}}else if(p===1)v=b=>i-Math.exp(-j*b)*(y+(f+j*y)*b);else{const b=j*Math.sqrt(p*p-1);v=x=>{const g=Math.exp(-p*j*x),k=Math.min(b*x,300);return i-g*((f+p*j*y)*Math.sinh(k)+b*y*Math.cosh(k))/b}}return{calculatedDuration:h&&m||null,next:b=>{const x=v(b);if(h)o.done=b>=m;else{let g=f;b!==0&&(p<1?g=eN(v,b,x):g=0);const k=Math.abs(g)<=r,C=Math.abs(i-x)<=t;o.done=k&&C}return o.value=o.done?i:x,o}}}function pg({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:d,restDelta:c=.5,restSpeed:u}){const m=e[0],h={done:!1,value:m},f=S=>l!==void 0&&S<l||d!==void 0&&S>d,p=S=>l===void 0?d:d===void 0||Math.abs(l-S)<Math.abs(d-S)?l:d;let y=r*t;const j=m+y,N=o===void 0?j:o(j);N!==j&&(y=N-m);const v=S=>-y*Math.exp(-S/n),b=S=>N+v(S),x=S=>{const A=v(S),E=b(S);h.done=Math.abs(A)<=c,h.value=h.done?N:E};let g,k;const C=S=>{f(h.value)&&(g=S,k=tN({keyframes:[h.value,p(h.value)],velocity:eN(b,S,h.value),damping:a,stiffness:i,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:S=>{let A=!1;return!k&&g===void 0&&(A=!0,x(S),C(S)),g!==void 0&&S>g?k.next(S-g):(!A&&x(S),h)}}}const hT=e=>{const t=({timestamp:r})=>e(r);return{start:()=>_e.update(t,!0),stop:()=>vr(t),now:()=>ht.isProcessing?ht.timestamp:performance.now()}},xg=2e4;function gg(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<xg;)t+=r,n=e.next(t);return t>=xg?1/0:t}const fT={decay:pg,inertia:pg,tween:_c,keyframes:_c,spring:tN};function Dc({autoplay:e=!0,delay:t=0,driver:r=hT,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:u,onUpdate:m,...h}){let f=1,p=!1,y,j;const N=()=>{j=new Promise(q=>{y=q})};N();let v;const b=fT[a]||_c;let x;b!==_c&&typeof n[0]!="number"&&(x=Xw([0,100],n,{clamp:!1}),n=[0,100]);const g=b({...h,keyframes:n});let k;l==="mirror"&&(k=b({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let C="idle",S=null,A=null,E=null;g.calculatedDuration===null&&i&&(g.calculatedDuration=gg(g));const{calculatedDuration:T}=g;let M=1/0,P=1/0;T!==null&&(M=T+o,P=M*(i+1)-o);let O=0;const R=q=>{if(A===null)return;f>0&&(A=Math.min(A,q)),f<0&&(A=Math.min(q-P/f,A)),S!==null?O=S:O=Math.round(q-A)*f;const W=O-t*(f>=0?1:-1),ie=f>=0?W<0:W>P;O=Math.max(W,0),C==="finished"&&S===null&&(O=P);let se=O,$=g;if(i){const ee=O/M;let ge=Math.floor(ee),pe=ee%1;!pe&&ee>=1&&(pe=1),pe===1&&ge--,ge=Math.min(ge,i+1);const Ne=!!(ge%2);Ne&&(l==="reverse"?(pe=1-pe,o&&(pe-=o/M)):l==="mirror"&&($=k));let We=rn(0,1,pe);O>P&&(We=l==="reverse"&&Ne?1:0),se=We*M}const H=ie?{done:!1,value:n[0]}:$.next(se);x&&(H.value=x(H.value));let{done:J}=H;!ie&&T!==null&&(J=f>=0?O>=P:O<=0);const oe=S===null&&(C==="finished"||C==="running"&&J);return m&&m(H.value),oe&&D(),H},L=()=>{v&&v.stop(),v=void 0},U=()=>{C="idle",L(),y(),N(),A=E=null},D=()=>{C="finished",u&&u(),L(),y()},_=()=>{if(p)return;v||(v=r(R));const q=v.now();d&&d(),S!==null?A=q-S:(!A||C==="finished")&&(A=q),C==="finished"&&N(),E=A,S=null,C="running",v.start()};e&&_();const I={then(q,W){return j.then(q,W)},get time(){return mr(O)},set time(q){q=An(q),O=q,S!==null||!v||f===0?S=q:A=v.now()-q/f},get duration(){const q=g.calculatedDuration===null?gg(g):g.calculatedDuration;return mr(q)},get speed(){return f},set speed(q){q===f||!v||(f=q,I.time=mr(O))},get state(){return C},play:_,pause:()=>{C="paused",S=O},stop:()=>{p=!0,C!=="idle"&&(C="idle",c&&c(),U())},cancel:()=>{E!==null&&R(E),U()},complete:()=>{C="finished"},sample:q=>(A=0,R(q))};return I}function pT(e){let t;return()=>(t===void 0&&(t=e()),t)}const xT=pT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),gT=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),dl=10,yT=2e4,vT=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Rw(t.ease);function bT(e,t,{onUpdate:r,onComplete:n,...a}){if(!(xT()&&gT.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,d;const c=()=>{d=new Promise(v=>{l=v})};c();let{keyframes:u,duration:m=300,ease:h,times:f}=a;if(vT(t,a)){const v=Dc({...a,repeat:0,delay:0});let b={done:!1,value:u[0]};const x=[];let g=0;for(;!b.done&&g<yT;)b=v.sample(g),x.push(b.value),g+=dl;f=void 0,u=x,m=g-dl,h="linear"}const p=EE(e.owner.current,t,u,{...a,duration:m,ease:h,times:f});a.syncStart&&(p.startTime=ht.isProcessing?ht.timestamp:document.timeline?document.timeline.currentTime:performance.now());const y=()=>p.cancel(),j=()=>{_e.update(y),l(),c()};return p.onfinish=()=>{e.set(TE(u,a)),n&&n(),j()},{then(v,b){return d.then(v,b)},attachTimeline(v){return p.timeline=v,p.onfinish=null,rt},get time(){return mr(p.currentTime||0)},set time(v){p.currentTime=An(v)},get speed(){return p.playbackRate},set speed(v){p.playbackRate=v},get duration(){return mr(m)},play:()=>{o||(p.play(),vr(y))},pause:()=>p.pause(),stop:()=>{if(o=!0,p.playState==="idle")return;const{currentTime:v}=p;if(v){const b=Dc({...a,autoplay:!1});e.setWithVelocity(b.sample(v-dl).value,b.sample(v).value,dl)}j()},complete:()=>p.finish(),cancel:j}}function jT({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const a=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:rt,pause:rt,stop:rt,then:i=>(i(),Promise.resolve()),cancel:rt,complete:rt});return t?Dc({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const wT={type:"spring",stiffness:500,damping:25,restSpeed:10},NT=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ST={type:"keyframes",duration:.8},kT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CT=(e,{keyframes:t})=>t.length>2?ST:Wn.has(e)?e.startsWith("scale")?NT(t[1]):wT:kT,vh=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(nn.test(t)||t==="0")&&!t.startsWith("url(")),PT=new Set(["brightness","contrast","saturate","opacity"]);function AT(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Vd)||[];if(!n)return e;const a=r.replace(n,"");let i=PT.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const ET=/([a-z-]*)\(.*?\)/g,bh={...nn,getAnimatableNone:e=>{const t=e.match(ET);return t?t.map(AT).join(" "):e}},TT={...pw,color:Mt,backgroundColor:Mt,outlineColor:Mt,fill:Mt,stroke:Mt,borderColor:Mt,borderTopColor:Mt,borderRightColor:Mt,borderBottomColor:Mt,borderLeftColor:Mt,filter:bh,WebkitFilter:bh},Ep=e=>TT[e];function sN(e,t){let r=Ep(e);return r!==bh&&(r=nn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const rN=e=>/^0[^.\s]+$/.test(e);function OT(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||rN(e)}function RT(e,t,r,n){const a=vh(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:e.get();let l;const d=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),OT(i[c])&&d.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(a&&d.length&&l)for(let c=0;c<d.length;c++){const u=d[c];i[u]=sN(t,l)}return i}function MT({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}function nN(e,t){return e[t]||e.default||e}const Tp=(e,t,r,n={})=>a=>{const i=nN(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-An(o);const d=RT(t,e,r,i),c=d[0],u=d[d.length-1],m=vh(e,c),h=vh(e,u);let f={keyframes:d,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(MT(i)||(f={...f,...CT(e,f)}),f.duration&&(f.duration=An(f.duration)),f.repeatDelay&&(f.repeatDelay=An(f.repeatDelay)),!m||!h||AE.current||i.type===!1)return jT(f);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=bT(t,e,f);if(p)return p}return Dc(f)};function Ic(e){return!!(Zt(e)&&e.add)}const aN=e=>/^\-?\d*\.?\d+$/.test(e);function Op(e,t){e.indexOf(t)===-1&&e.push(t)}function Rp(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Mp{constructor(){this.subscriptions=[]}add(t){return Op(this.subscriptions,t),()=>Rp(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const LT=e=>!isNaN(parseFloat(e));class _T{constructor(t,r={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=ht;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,_e.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_e.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=LT(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Mp);const n=this.events[t].add(r);return t==="change"?()=>{n(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Zw(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fa(e,t){return new _T(e,t)}const iN=e=>t=>t.test(e),DT={test:e=>e==="auto",parse:e=>e},oN=[Qn,me,Qs,Nr,zA,UA,DT],di=e=>oN.find(iN(e)),IT=[...oN,Mt,nn],$T=e=>IT.find(iN(e));function FT(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Fa(r))}function BT(e,t){const r=Hd(e,t);let{transitionEnd:n={},transition:a={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const l=sE(i[o]);FT(e,o,l)}}function UT(e,t,r){var n,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const d=i[l],c=t[d];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(a=(n=r[d])!==null&&n!==void 0?n:e.readValue(d))!==null&&a!==void 0?a:t[d]),u!=null&&(typeof u=="string"&&(aN(u)||rN(u))?u=parseFloat(u):!$T(u)&&nn.test(c)&&(u=sN(d,c)),e.addValue(d,Fa(u,{owner:e})),r[d]===void 0&&(r[d]=u),u!==null&&e.setBaseTarget(d,u))}}function zT(e,t){return t?(t[e]||t.default||t).from:void 0}function VT(e,t,r){const n={};for(const a in e){const i=zT(a,t);if(i!==void 0)n[a]=i;else{const o=r.getValue(a);o&&(n[a]=o.get())}}return n}function qT({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function lN(e,t,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const d=e.getValue("willChange");n&&(i=n);const c=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const m in l){const h=e.getValue(m),f=l[m];if(!h||f===void 0||u&&qT(u,m))continue;const p={delay:r,elapsed:0,...i};if(window.HandoffAppearAnimations&&!h.hasAnimated){const j=e.getProps()[PE];j&&(p.elapsed=window.HandoffAppearAnimations(j,m,h,_e),p.syncStart=!0)}h.start(Tp(m,h,f,e.shouldReduceMotion&&Wn.has(m)?{type:!1}:p));const y=h.animation;Ic(d)&&(d.add(m),y.then(()=>d.remove(m))),c.push(y)}return o&&Promise.all(c).then(()=>{o&&BT(e,o)}),c}function jh(e,t,r={}){const n=Hd(e,t,r.custom);let{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(lN(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:m}=a;return HT(e,t,c+d,u,m,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,c]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>c())}else return Promise.all([i(),o(r.delay)])}function HT(e,t,r=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,d=a===1?(c=0)=>c*n:(c=0)=>l-c*n;return Array.from(e.variantChildren).sort(WT).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(jh(c,t,{...i,delay:r+d(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function WT(e,t){return e.sortNodePosition(t)}function QT(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>jh(e,i,r));n=Promise.all(a)}else if(typeof t=="string")n=jh(e,t,r);else{const a=typeof t=="function"?Hd(e,t,r.custom):t;n=Promise.all(lN(e,a,r))}return n.then(()=>e.notify("AnimationComplete",t))}const KT=[...fp].reverse(),GT=fp.length;function YT(e){return t=>Promise.all(t.map(({animation:r,options:n})=>QT(e,r,n)))}function JT(e){let t=YT(e);const r=ZT();let n=!0;const a=(d,c)=>{const u=Hd(e,c);if(u){const{transition:m,transitionEnd:h,...f}=u;d={...d,...f,...h}}return d};function i(d){t=d(e)}function o(d,c){const u=e.getProps(),m=e.getVariantContext(!0)||{},h=[],f=new Set;let p={},y=1/0;for(let N=0;N<GT;N++){const v=KT[N],b=r[v],x=u[v]!==void 0?u[v]:m[v],g=po(x),k=v===c?b.isActive:null;k===!1&&(y=N);let C=x===m[v]&&x!==u[v]&&g;if(C&&n&&e.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...p},!b.isActive&&k===null||!x&&!b.prevProp||Ud(x)||typeof x=="boolean")continue;const S=XT(b.prevProp,x);let A=S||v===c&&b.isActive&&!C&&g||N>y&&g;const E=Array.isArray(x)?x:[x];let T=E.reduce(a,{});k===!1&&(T={});const{prevResolvedValues:M={}}=b,P={...M,...T},O=R=>{A=!0,f.delete(R),b.needsAnimating[R]=!0};for(const R in P){const L=T[R],U=M[R];p.hasOwnProperty(R)||(L!==U?Mc(L)&&Mc(U)?!Tw(L,U)||S?O(R):b.protectedKeys[R]=!0:L!==void 0?O(R):f.add(R):L!==void 0&&f.has(R)?O(R):b.protectedKeys[R]=!0)}b.prevProp=x,b.prevResolvedValues=T,b.isActive&&(p={...p,...T}),n&&e.blockInitialAnimation&&(A=!1),A&&!C&&h.push(...E.map(R=>({animation:R,options:{type:v,...d}})))}if(f.size){const N={};f.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(N[v]=b)}),h.push({animation:N})}let j=!!h.length;return n&&u.initial===!1&&!e.manuallyAnimateOnMount&&(j=!1),n=!1,j?t(h):Promise.resolve()}function l(d,c,u){var m;if(r[d].isActive===c)return Promise.resolve();(m=e.variantChildren)===null||m===void 0||m.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(d,c)}),r[d].isActive=c;const h=o(u,d);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function XT(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Tw(t,e):!1}function mn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZT(){return{animate:mn(!0),whileInView:mn(),whileHover:mn(),whileTap:mn(),whileDrag:mn(),whileFocus:mn(),exit:mn()}}class eO extends un{constructor(t){super(t),t.animationState||(t.animationState=JT(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Ud(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let tO=0;class sO extends un{constructor(){super(...arguments),this.id=tO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const rO={animation:{Feature:eO},exit:{Feature:sO}},yg=(e,t)=>Math.abs(e-t);function nO(e,t){const r=yg(e.x,t.x),n=yg(e.y,t.y);return Math.sqrt(r**2+n**2)}class cN{constructor(t,r,{transformPagePoint:n}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=Gu(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,m=nO(c.offset,{x:0,y:0})>=3;if(!u&&!m)return;const{point:h}=c,{timestamp:f}=ht;this.history.push({...h,timestamp:f});const{onStart:p,onMove:y}=this.handlers;u||(p&&p(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,c)},this.handlePointerMove=(c,u)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=Ku(u,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(c,u)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:m,onSessionEnd:h}=this.handlers,f=Gu(c.type==="pointercancel"?this.lastMoveEventInfo:Ku(u,this.transformPagePoint),this.history);this.startEvent&&m&&m(c,f),h&&h(c,f)},!kw(t))return;this.handlers=r,this.transformPagePoint=n;const a=qd(t),i=Ku(a,this.transformPagePoint),{point:o}=i,{timestamp:l}=ht;this.history=[{...o,timestamp:l}];const{onSessionStart:d}=r;d&&d(t,Gu(i,this.history)),this.removeListeners=Wr(ur(window,"pointermove",this.handlePointerMove),ur(window,"pointerup",this.handlePointerUp),ur(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vr(this.updatePoint)}}function Ku(e,t){return t?{point:t(e.point)}:e}function vg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gu({point:e},t){return{point:e,delta:vg(e,dN(t)),offset:vg(e,aO(t)),velocity:iO(t,.1)}}function aO(e){return e[0]}function dN(e){return e[e.length-1]}function iO(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=dN(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>An(t)));)r--;if(!n)return{x:0,y:0};const i=mr(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function os(e){return e.max-e.min}function wh(e,t=0,r=.01){return Math.abs(e-t)<=r}function bg(e,t,r,n=.5){e.origin=n,e.originPoint=Ke(t.min,t.max,e.origin),e.scale=os(r)/os(t),(wh(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Ke(r.min,r.max,e.origin)-e.originPoint,(wh(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Ii(e,t,r,n){bg(e.x,t.x,r.x,n?n.originX:void 0),bg(e.y,t.y,r.y,n?n.originY:void 0)}function jg(e,t,r){e.min=r.min+t.min,e.max=e.min+os(t)}function oO(e,t,r){jg(e.x,t.x,r.x),jg(e.y,t.y,r.y)}function wg(e,t,r){e.min=t.min-r.min,e.max=e.min+os(t)}function $i(e,t,r){wg(e.x,t.x,r.x),wg(e.y,t.y,r.y)}function lO(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ke(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ke(r,e,n.max):Math.min(e,r)),e}function Ng(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function cO(e,{top:t,left:r,bottom:n,right:a}){return{x:Ng(e.x,r,a),y:Ng(e.y,t,n)}}function Sg(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function dO(e,t){return{x:Sg(e.x,t.x),y:Sg(e.y,t.y)}}function uO(e,t){let r=.5;const n=os(e),a=os(t);return a>n?r=go(t.min,t.max-n,e.min):n>a&&(r=go(e.min,e.max-a,t.min)),rn(0,1,r)}function mO(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Nh=.35;function hO(e=Nh){return e===!1?e=0:e===!0&&(e=Nh),{x:kg(e,"left","right"),y:kg(e,"top","bottom")}}function kg(e,t,r){return{min:Cg(e,t),max:Cg(e,r)}}function Cg(e,t){return typeof e=="number"?e:e[t]||0}const Pg=()=>({translate:0,scale:1,origin:0,originPoint:0}),ha=()=>({x:Pg(),y:Pg()}),Ag=()=>({min:0,max:0}),nt=()=>({x:Ag(),y:Ag()});function Us(e){return[e("x"),e("y")]}function uN({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function fO({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function pO(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Yu(e){return e===void 0||e===1}function Sh({scale:e,scaleX:t,scaleY:r}){return!Yu(e)||!Yu(t)||!Yu(r)}function gn(e){return Sh(e)||mN(e)||e.z||e.rotate||e.rotateX||e.rotateY}function mN(e){return Eg(e.x)||Eg(e.y)}function Eg(e){return e&&e!=="0%"}function $c(e,t,r){const n=e-r,a=t*n;return r+a}function Tg(e,t,r,n,a){return a!==void 0&&(e=$c(e,a,n)),$c(e,r,n)+t}function kh(e,t=0,r=1,n,a){e.min=Tg(e.min,t,r,n,a),e.max=Tg(e.max,t,r,n,a)}function hN(e,{x:t,y:r}){kh(e.x,t.translate,t.scale,t.originPoint),kh(e.y,r.translate,r.scale,r.originPoint)}function xO(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fa(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,hN(e,o)),n&&gn(i.latestValues)&&fa(e,i.latestValues))}t.x=Og(t.x),t.y=Og(t.y)}function Og(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Cr(e,t){e.min=e.min+t,e.max=e.max+t}function Rg(e,t,[r,n,a]){const i=t[a]!==void 0?t[a]:.5,o=Ke(e.min,e.max,i);kh(e,t[r],t[n],o,t.scale)}const gO=["x","scaleX","originX"],yO=["y","scaleY","originY"];function fa(e,t){Rg(e.x,t,gO),Rg(e.y,t,yO)}function fN(e,t){return uN(pO(e.getBoundingClientRect(),t))}function vO(e,t,r){const n=fN(e,r),{scroll:a}=t;return a&&(Cr(n.x,a.offset.x),Cr(n.y,a.offset.y)),n}const bO=new WeakMap;class jO{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nt(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=d=>{this.stopAnimation(),r&&this.snapToCursor(qd(d,"page").point)},i=(d,c)=>{const{drag:u,dragPropagation:m,onDragStart:h}=this.getProps();if(u&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Pw(u),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Us(p=>{let y=this.getAxisMotionValue(p).get()||0;if(Qs.test(y)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[p];N&&(y=os(N)*(parseFloat(y)/100))}}this.originPoint[p]=y}),h&&_e.update(()=>h(d,c),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(d,c)=>{const{dragPropagation:u,dragDirectionLock:m,onDirectionLock:h,onDrag:f}=this.getProps();if(!u&&!this.openGlobalLock)return;const{offset:p}=c;if(m&&this.currentDirection===null){this.currentDirection=wO(p),this.currentDirection!==null&&h&&h(this.currentDirection);return}this.updateAxis("x",c.point,p),this.updateAxis("y",c.point,p),this.visualElement.render(),f&&f(d,c)},l=(d,c)=>this.stop(d,c);this.panSession=new cN(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&_e.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!ul(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=lO(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),{layout:n}=this.visualElement.projection||{},a=this.constraints;t&&ua(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=cO(n.layoutBox,t):this.constraints=!1,this.elastic=hO(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Us(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=mO(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ua(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=vO(n,a.root,this.visualElement.getTransformPagePoint());let o=dO(a.layout.layoutBox,i);if(r){const l=r(fO(o));this.hasMutatedConstraints=!!l,l&&(o=uN(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=Us(u=>{if(!ul(u,r,this.currentDirection))return;let m=d&&d[u]||{};o&&(m={min:0,max:0});const h=a?200:1e6,f=a?40:1e7,p={type:"inertia",velocity:n?t[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(Tp(t,n,0,r))}stopAnimation(){Us(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Us(r=>{const{drag:n}=this.getProps();if(!ul(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-Ke(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ua(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Us(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();a[o]=uO({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Us(o=>{if(!ul(o,t,null))return;const l=this.getAxisMotionValue(o),{min:d,max:c}=this.constraints[o];l.set(Ke(d,c,a[o]))})}addListeners(){if(!this.visualElement.current)return;bO.set(this.visualElement,this);const t=this.visualElement.current,r=ur(t,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();ua(d)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=lr(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(Us(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=d[u].translate,m.set(m.get()+d[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Nh,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ul(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function wO(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class NO extends un{constructor(t){super(t),this.removeGroupControls=rt,this.removeListeners=rt,this.controls=new jO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Mg=e=>(t,r)=>{e&&_e.update(()=>e(t,r))};class SO extends un{constructor(){super(...arguments),this.removePointerDownListener=rt}onPointerDown(t){this.session=new cN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Mg(t),onStart:Mg(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&_e.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=ur(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function kO(){const e=w.useContext(Fd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,a=w.useId();return w.useEffect(()=>n(a),[]),!t&&r?[!1,()=>r&&r(a)]:[!0]}const Ll={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Lg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ui={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(me.test(e))e=parseFloat(e);else return e;const r=Lg(e,t.target.x),n=Lg(e,t.target.y);return`${r}% ${n}%`}},CO={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=nn.parse(e);if(a.length>5)return n;const i=nn.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,d=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=d;const c=Ke(l,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=c),typeof a[3+o]=="number"&&(a[3+o]/=c),i(a)}};class PO extends Ae.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;LA(AO),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ll.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||_e.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function pN(e){const[t,r]=kO(),n=w.useContext(xp);return Ae.createElement(PO,{...e,layoutGroup:n,switchLayoutGroup:w.useContext(dw),isPresent:t,safeToRemove:r})}const AO={borderRadius:{...ui,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ui,borderTopRightRadius:ui,borderBottomLeftRadius:ui,borderBottomRightRadius:ui,boxShadow:CO},xN=["TopLeft","TopRight","BottomLeft","BottomRight"],EO=xN.length,_g=e=>typeof e=="string"?parseFloat(e):e,Dg=e=>typeof e=="number"||me.test(e);function TO(e,t,r,n,a,i){a?(e.opacity=Ke(0,r.opacity!==void 0?r.opacity:1,OO(n)),e.opacityExit=Ke(t.opacity!==void 0?t.opacity:1,0,RO(n))):i&&(e.opacity=Ke(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<EO;o++){const l=`border${xN[o]}Radius`;let d=Ig(t,l),c=Ig(r,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||Dg(d)===Dg(c)?(e[l]=Math.max(Ke(_g(d),_g(c),n),0),(Qs.test(c)||Qs.test(d))&&(e[l]+="%")):e[l]=c}(t.rotate||r.rotate)&&(e.rotate=Ke(t.rotate||0,r.rotate||0,n))}function Ig(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const OO=gN(0,.5,Cp),RO=gN(.5,.95,rt);function gN(e,t,r){return n=>n<e?0:n>t?1:r(go(e,t,n))}function $g(e,t){e.min=t.min,e.max=t.max}function us(e,t){$g(e.x,t.x),$g(e.y,t.y)}function Fg(e,t,r,n,a){return e-=t,e=$c(e,1/r,n),a!==void 0&&(e=$c(e,1/a,n)),e}function MO(e,t=0,r=1,n=.5,a,i=e,o=e){if(Qs.test(t)&&(t=parseFloat(t),t=Ke(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ke(i.min,i.max,n);e===i&&(l-=t),e.min=Fg(e.min,t,r,l,a),e.max=Fg(e.max,t,r,l,a)}function Bg(e,t,[r,n,a],i,o){MO(e,t[r],t[n],t[a],t.scale,i,o)}const LO=["x","scaleX","originX"],_O=["y","scaleY","originY"];function Ug(e,t,r,n){Bg(e.x,t,LO,r?r.x:void 0,n?n.x:void 0),Bg(e.y,t,_O,r?r.y:void 0,n?n.y:void 0)}function zg(e){return e.translate===0&&e.scale===1}function yN(e){return zg(e.x)&&zg(e.y)}function DO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function vN(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Vg(e){return os(e.x)/os(e.y)}class IO{constructor(){this.members=[]}add(t){Op(this.members,t),t.scheduleRender()}remove(t){if(Rp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qg(e,t,r){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:d,rotateX:c,rotateY:u}=r;d&&(n+=`rotate(${d}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const $O=(e,t)=>e.depth-t.depth;class FO{constructor(){this.children=[],this.isDirty=!1}add(t){Op(this.children,t),this.isDirty=!0}remove(t){Rp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($O),this.isDirty=!1,this.children.forEach(t)}}function BO(e,t){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(vr(n),e(i-t))};return _e.read(n,!0),()=>vr(n)}function UO(e){window.MotionDebug&&window.MotionDebug.record(e)}function zO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function VO(e,t,r){const n=Zt(e)?e:Fa(e);return n.start(Tp("",n,t,r)),n.animation}const Hg=["","X","Y","Z"],Wg=1e3;let qO=0;const yn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function bN({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=qO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{yn.totalNodes=yn.resolvedTargetDeltas=yn.recalculatedProjection=0,this.nodes.forEach(QO),this.nodes.forEach(XO),this.nodes.forEach(ZO),this.nodes.forEach(KO),UO(yn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new FO)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Mp),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zO(o),this.instance=o;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),e){let m;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=BO(h,250),Ll.hasAnimatedSinceResize&&(Ll.hasAnimatedSinceResize=!1,this.nodes.forEach(Kg))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||nR,{onLayoutAnimationStart:j,onLayoutAnimationComplete:N}=u.getProps(),v=!this.targetLayout||!vN(this.targetLayout,p)||f,b=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,b);const x={...nN(y,"layout"),onPlay:j,onComplete:N};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else h||Kg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eR),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qg);return}this.isUpdating||this.nodes.forEach(YO),this.isUpdating=!1,this.nodes.forEach(JO),this.nodes.forEach(HO),this.nodes.forEach(WO),this.clearAllSnapshots();const l=performance.now();ht.delta=rn(0,1e3/60,l-ht.timestamp),ht.timestamp=l,ht.isProcessing=!0,Bu.update.process(ht),Bu.preRender.process(ht),Bu.render.process(ht),ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(GO),this.sharedNodes.forEach(tR)}scheduleUpdateProjection(){_e.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!yN(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||gn(this.latestValues)||u)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),aR(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return nt();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(Cr(l.x,d.offset.x),Cr(l.y,d.offset.y)),l}removeElementScroll(o){const l=nt();us(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:u,options:m}=c;if(c!==this.root&&u&&m.layoutScroll){if(u.isRoot){us(l,o);const{scroll:h}=this.root;h&&(Cr(l.x,-h.offset.x),Cr(l.y,-h.offset.y))}Cr(l.x,u.offset.x),Cr(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const d=nt();us(d,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&fa(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),gn(u.latestValues)&&fa(d,u.latestValues)}return gn(this.latestValues)&&fa(d,this.latestValues),d}removeTransform(o){const l=nt();us(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!gn(c.latestValues))continue;Sh(c.latestValues)&&c.updateSnapshot();const u=nt(),m=c.measurePageBox();us(u,m),Ug(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return gn(this.latestValues)&&Ug(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=ht.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),$i(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=nt(),this.targetWithTransforms=nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):us(this.target,this.layout.layoutBox),hN(this.target,this.targetDelta)):us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),$i(this.relativeTargetOrigin,this.target,f.target),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}yn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Sh(this.parent.latestValues)||mN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ht.timestamp&&(c=!1),c)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;us(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;xO(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=ha(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ha(),this.projectionDeltaWithTransform=ha());const y=this.projectionTransform;Ii(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=qg(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==h||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),yn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},m=ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=nt(),f=d?d.source:void 0,p=this.layout?this.layout.source:void 0,y=f!==p,j=this.getStack(),N=!j||j.members.length<=1,v=!!(y&&!N&&this.options.crossfade===!0&&!this.path.some(rR));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const g=x/1e3;Gg(m.x,o.x,g),Gg(m.y,o.y,g),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($i(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sR(this.relativeTarget,this.relativeTargetOrigin,h,g),b&&DO(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=nt()),us(b,this.relativeTarget)),y&&(this.animationValues=u,TO(u,c,this.latestValues,g,v,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=g},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{Ll.hasAnimatedSinceResize=!0,this.currentAnimation=VO(0,Wg,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Wg),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=o;if(!(!l||!d||!c)){if(this!==o&&this.layout&&c&&jN(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||nt();const m=os(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+m;const h=os(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+h}us(l,d),fa(l,u),Ii(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IO),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<Hg.length;u++){const m="rotate"+Hg[u];d[m]&&(c[m]=d[m],o.setStaticValue(m,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o={}){var l,d;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ml(o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Ml(o.pointerEvents)||""),this.hasProjected&&!gn(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const h=m.animationValues||m.latestValues;this.applyTransformsToTarget(),c.transform=qg(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,m.animationValues?c.opacity=m===this?(d=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=m===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in Oc){if(h[y]===void 0)continue;const{correct:j,applyTo:N}=Oc[y],v=c.transform==="none"?h[y]:j(h[y],m);if(N){const b=N.length;for(let x=0;x<b;x++)c[N[x]]=v}else c[y]=v}return this.options.layoutId&&(c.pointerEvents=m===this?Ml(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Qg),this.root.sharedNodes.clear()}}}function HO(e){e.updateLayout()}function WO(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?Us(m=>{const h=o?r.measuredBox[m]:r.layoutBox[m],f=os(h);h.min=n[m].min,h.max=h.min+f}):jN(i,r.layoutBox,n)&&Us(m=>{const h=o?r.measuredBox[m]:r.layoutBox[m],f=os(n[m]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+f)});const l=ha();Ii(l,n,r.layoutBox);const d=ha();o?Ii(d,e.applyTransform(a,!0),r.measuredBox):Ii(d,n,r.layoutBox);const c=!yN(l);let u=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:f}=m;if(h&&f){const p=nt();$i(p,r.layoutBox,h.layoutBox);const y=nt();$i(y,n,f.layoutBox),vN(p,y)||(u=!0),m.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=p,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function QO(e){yn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function KO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function GO(e){e.clearSnapshot()}function Qg(e){e.clearMeasurements()}function YO(e){e.isLayoutDirty=!1}function JO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Kg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function XO(e){e.resolveTargetDelta()}function ZO(e){e.calcProjection()}function eR(e){e.resetRotation()}function tR(e){e.removeLeadSnapshot()}function Gg(e,t,r){e.translate=Ke(t.translate,0,r),e.scale=Ke(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Yg(e,t,r,n){e.min=Ke(t.min,r.min,n),e.max=Ke(t.max,r.max,n)}function sR(e,t,r,n){Yg(e.x,t.x,r.x,n),Yg(e.y,t.y,r.y,n)}function rR(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const nR={duration:.45,ease:[.4,0,.1,1]},Jg=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Xg=Jg("applewebkit/")&&!Jg("chrome/")?Math.round:rt;function Zg(e){e.min=Xg(e.min),e.max=Xg(e.max)}function aR(e){Zg(e.x),Zg(e.y)}function jN(e,t,r){return e==="position"||e==="preserve-aspect"&&!wh(Vg(t),Vg(r),.2)}const iR=bN({attachResizeListener:(e,t)=>lr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ju={current:void 0},wN=bN({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ju.current){const e=new iR({});e.mount(window),e.setOptions({layoutScroll:!0}),Ju.current=e}return Ju.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),oR={pan:{Feature:SO},drag:{Feature:NO,ProjectionNode:wN,MeasureLayout:pN}},lR=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cR(e){const t=lR.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function Ch(e,t,r=1){const[n,a]=cR(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return aN(o)?parseFloat(o):o}else return ph(a)?Ch(a,t,r+1):a}function dR(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(a=>{const i=a.get();if(!ph(i))return;const o=Ch(i,n);o&&a.set(o)});for(const a in t){const i=t[a];if(!ph(i))continue;const o=Ch(i,n);o&&(t[a]=o,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:t,transitionEnd:r}}const uR=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),NN=e=>uR.has(e),mR=e=>Object.keys(e).some(NN),ey=e=>e===Qn||e===me,ty=(e,t)=>parseFloat(e.split(", ")[t]),sy=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return ty(a[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?ty(i[1],e):0}},hR=new Set(["x","y","z"]),fR=Eo.filter(e=>!hR.has(e));function pR(e){const t=[];return fR.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ba={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:sy(4,13),y:sy(5,14)};Ba.translateX=Ba.x;Ba.translateY=Ba.y;const xR=(e,t,r)=>{const n=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(c=>{l[c]=Ba[c](n,i)}),t.render();const d=t.measureViewportBox();return r.forEach(c=>{const u=t.getValue(c);u&&u.jump(l[c]),e[c]=Ba[c](d,i)}),e},gR=(e,t,r={},n={})=>{t={...t},n={...n};const a=Object.keys(t).filter(NN);let i=[],o=!1;const l=[];if(a.forEach(d=>{const c=e.getValue(d);if(!e.hasValue(d))return;let u=r[d],m=di(u);const h=t[d];let f;if(Mc(h)){const p=h.length,y=h[0]===null?1:0;u=h[y],m=di(u);for(let j=y;j<p&&h[j]!==null;j++)f?kp(di(h[j])===f):f=di(h[j])}else f=di(h);if(m!==f)if(ey(m)&&ey(f)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof h=="string"?t[d]=parseFloat(h):Array.isArray(h)&&f===me&&(t[d]=h.map(parseFloat))}else m!=null&&m.transform&&(f!=null&&f.transform)&&(u===0||h===0)?u===0?c.set(f.transform(u)):t[d]=m.transform(h):(o||(i=pR(e),o=!0),l.push(d),n[d]=n[d]!==void 0?n[d]:t[d],c.jump(h))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=xR(t,e,l);return i.length&&i.forEach(([u,m])=>{e.getValue(u).set(m)}),e.render(),Bd&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:n}}else return{target:t,transitionEnd:n}};function yR(e,t,r,n){return mR(t)?gR(e,t,r,n):{target:t,transitionEnd:n}}const vR=(e,t,r,n)=>{const a=dR(e,t,n);return t=a.target,n=a.transitionEnd,yR(e,t,r,n)},Ph={current:null},SN={current:!1};function bR(){if(SN.current=!0,!!Bd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ph.current=e.matches;e.addListener(t),t()}else Ph.current=!1}function jR(e,t,r){const{willChange:n}=t;for(const a in t){const i=t[a],o=r[a];if(Zt(i))e.addValue(a,i),Ic(n)&&n.add(a);else if(Zt(o))e.addValue(a,Fa(i,{owner:e})),Ic(n)&&n.remove(a);else if(o!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,Fa(l!==void 0?l:i,{owner:e}))}}for(const a in r)t[a]===void 0&&e.removeValue(a);return t}const ry=new WeakMap,kN=Object.keys(xo),wR=kN.length,ny=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],NR=pp.length;class SR{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_e.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=zd(r),this.isVariantNode=cw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{});for(const m in u){const h=u[m];l[m]!==void 0&&Zt(h)&&(h.set(l[m],!1),Ic(c)&&c.add(m))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,ry.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),SN.current||bR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ph.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ry.delete(this.current),this.projection&&this.projection.unmount(),vr(this.notifyUpdate),vr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=Wn.has(t),a=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&_e.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,a,i){let o,l;for(let d=0;d<wR;d++){const c=kN[d],{isEnabled:u,Feature:m,ProjectionNode:h,MeasureLayout:f}=xo[c];h&&(o=h),u(r)&&(!this.features[c]&&m&&(this.features[c]=new m(this)),f&&(l=f))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:u,dragConstraints:m,layoutScroll:h,layoutRoot:f}=r;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!u||m&&ua(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:f})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<ny.length;n++){const a=ny[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=jR(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<NR;n++){const a=pp[n],i=this.props[a];(po(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Fa(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=Sp(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Zt(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Mp),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class CN extends SR{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:a},i){let o=VT(n,t||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),o&&(o=a(o))),i){UT(this,n,o);const l=vR(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function kR(e){return window.getComputedStyle(e)}class CR extends CN{readValueFromInstance(t,r){if(Wn.has(r)){const n=Ep(r);return n&&n.default||0}else{const n=kR(t),a=(hw(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return fN(t,r)}build(t,r,n,a){yp(t,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Np(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,a){vw(t,r,n,a)}}class PR extends CN{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Wn.has(r)){const n=Ep(r);return n&&n.default||0}return r=bw.has(r)?r:wp(r),t.getAttribute(r)}measureInstanceViewportBox(){return nt()}scrapeMotionValuesFromProps(t,r){return ww(t,r)}build(t,r,n,a){bp(t,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(t,r,n,a){jw(t,r,n,a)}mount(t){this.isSVGTag=jp(t.tagName),super.mount(t)}}const AR=(e,t)=>gp(e)?new PR(t,{enableHardwareAcceleration:!1}):new CR(t,{enableHardwareAcceleration:!0}),ER={layout:{ProjectionNode:wN,MeasureLayout:pN}},TR={...rO,...NE,...oR,...ER},B=RA((e,t)=>dE(e,t,TR,AR));function PN(){const e=w.useRef(!1);return hp(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function OR(){const e=PN(),[t,r]=w.useState(0),n=w.useCallback(()=>{e.current&&r(t+1)},[t]);return[w.useCallback(()=>_e.postRender(n),[n]),t]}class RR extends w.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function MR({children:e,isPresent:t}){const r=w.useId(),n=w.useRef(null),a=w.useRef({width:0,height:0,top:0,left:0});return w.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:d}=a.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),w.createElement(RR,{isPresent:t,childRef:n,sizeRef:a},w.cloneElement(e,{ref:n}))}const Xu=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=Nw(LR),d=w.useId(),c=w.useMemo(()=>({id:d,initial:t,isPresent:r,custom:a,onExitComplete:u=>{l.set(u,!0);for(const m of l.values())if(!m)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[r]);return w.useMemo(()=>{l.forEach((u,m)=>l.set(m,!1))},[r]),w.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(e=w.createElement(MR,{isPresent:r},e)),w.createElement(Fd.Provider,{value:c},e)};function LR(){return new Map}function _R(e){return w.useEffect(()=>()=>e(),[])}const Jn=e=>e.key||"";function DR(e,t){e.forEach(r=>{const n=Jn(r);t.set(n,r)})}function IR(e){const t=[];return w.Children.forEach(e,r=>{w.isValidElement(r)&&t.push(r)}),t}const Ua=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=w.useContext(xp).forceRender||OR()[0],d=PN(),c=IR(e);let u=c;const m=w.useRef(new Map).current,h=w.useRef(u),f=w.useRef(new Map).current,p=w.useRef(!0);if(hp(()=>{p.current=!1,DR(c,f),h.current=u}),_R(()=>{p.current=!0,f.clear(),m.clear()}),p.current)return w.createElement(w.Fragment,null,u.map(v=>w.createElement(Xu,{key:Jn(v),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},v)));u=[...u];const y=h.current.map(Jn),j=c.map(Jn),N=y.length;for(let v=0;v<N;v++){const b=y[v];j.indexOf(b)===-1&&!m.has(b)&&m.set(b,void 0)}return o==="wait"&&m.size&&(u=[]),m.forEach((v,b)=>{if(j.indexOf(b)!==-1)return;const x=f.get(b);if(!x)return;const g=y.indexOf(b);let k=v;if(!k){const C=()=>{f.delete(b),m.delete(b);const S=h.current.findIndex(A=>A.key===b);if(h.current.splice(S,1),!m.size){if(h.current=c,d.current===!1)return;l(),n&&n()}};k=w.createElement(Xu,{key:Jn(x),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:o},x),m.set(b,k)}u.splice(g,0,k)}),u=u.map(v=>{const b=v.key;return m.has(b)?v:w.createElement(Xu,{key:Jn(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),w.createElement(w.Fragment,null,m.size?u:u.map(v=>w.cloneElement(v)))},$R=({id:e,type:t,title:r,message:n,duration:a=5e3,action:i,onClose:o})=>{const[l,d]=w.useState(!0);w.useEffect(()=>{if(a>0){const f=setTimeout(()=>{d(!1),setTimeout(()=>o(e),300)},a);return()=>clearTimeout(f)}},[a,e,o]);const c=()=>{d(!1),setTimeout(()=>o(e),300)},u=()=>{switch(t){case"success":return{bg:"bg-success-50",border:"border-success-200",icon:"text-success-600",iconBg:"bg-success-100"};case"error":return{bg:"bg-error-50",border:"border-error-200",icon:"text-error-600",iconBg:"bg-error-100"};case"warning":return{bg:"bg-warning-50",border:"border-warning-200",icon:"text-warning-600",iconBg:"bg-warning-100"};case"info":return{bg:"bg-info-50",border:"border-info-200",icon:"text-info-600",iconBg:"bg-info-100"};default:return{bg:"bg-secondary-50",border:"border-secondary-200",icon:"text-secondary-600",iconBg:"bg-secondary-100"}}},m=()=>{switch(t){case"success":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"info":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}},h=u();return s.jsx(B.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.95},transition:{duration:.3,ease:"easeOut"},className:`
        max-w-sm w-full ${h.bg} ${h.border} border rounded-lg shadow-lg
        pointer-events-auto overflow-hidden
      `,role:"alert","aria-live":"polite","aria-atomic":"true",children:s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`flex-shrink-0 ${h.iconBg} rounded-full p-1`,children:s.jsx("div",{className:h.icon,children:m()})}),s.jsxs("div",{className:"ml-3 w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),n&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n}),i&&s.jsx("div",{className:"mt-3",children:s.jsx("button",{onClick:i.onClick,className:"text-sm font-medium text-primary-600 hover:text-primary-500 focus:outline-none focus:underline",children:i.label})})]}),s.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:s.jsx("button",{onClick:c,className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500","aria-label":"Close notification",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})})})},FR=({toasts:e,onClose:t})=>s.jsx("div",{className:"fixed top-4 right-4 z-toast space-y-4","aria-live":"polite","aria-label":"Notifications",children:s.jsx(Ua,{children:e.map(r=>s.jsx($R,{...r,onClose:t},r.id))})}),Ns=()=>{const[e,t]=w.useState([]),r=(d,c,u,m)=>{const f={id:Math.random().toString(36).substr(2,9),type:d,title:c,message:u,duration:m==null?void 0:m.duration,action:m==null?void 0:m.action,onClose:p=>{t(y=>y.filter(j=>j.id!==p))}};t(p=>[...p,f])};return{toasts:e,success:(d,c,u)=>r("success",d,c,u),error:(d,c,u)=>r("error",d,c,u),warning:(d,c,u)=>r("warning",d,c,u),info:(d,c,u)=>r("info",d,c,u),removeToast:d=>{t(c=>c.filter(u=>u.id!==d))}}},BR=({children:e})=>{const{toasts:t,removeToast:r}=Ns();return s.jsxs(s.Fragment,{children:[e,typeof document<"u"&&nd.createPortal(s.jsx(FR,{toasts:t,onClose:r}),document.body)]})},UR=()=>{const e=Jt(),t=de(f=>f.cart),{user:r,isAuthenticated:n}=de(f=>f.auth),{t:a}=Ya(),i=r==null?void 0:r.isAdmin,o=(r==null?void 0:r.role)==="delivery",l=e.pathname.startsWith("/admin"),d=e.pathname.startsWith("/delivery"),c=[{path:"/admin",label:"Dashboard",icon:uo,ariaLabel:"Admin dashboard"},{path:"/admin-profile",label:"Profile",icon:De,ariaLabel:"Admin profile"}],u=[{path:"/delivery",label:"Dashboard",icon:dr,ariaLabel:"Delivery dashboard"},{path:"/delivery-profile",label:"Account",icon:De,ariaLabel:"View your account"}],m=[{path:"/",label:a("nav.home"),icon:op,ariaLabel:"Navigate to home page"},{path:"/categories",label:a("nav.categories"),icon:r3,ariaLabel:"Browse product categories"},{path:"/account",label:a("nav.account"),icon:De,ariaLabel:"View your account"},{path:"/cart",label:a("nav.cart"),icon:Kt,ariaLabel:`View cart with ${t.itemCount} items`}];let h;return i&&l?h=c:o&&d?h=[]:o?h=u:h=m,!n&&!o?null:s.jsx(B.nav,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-0 left-0 right-0 bg-white shadow-md flex justify-around py-2 border-t z-40",role:"navigation","aria-label":"Main navigation",children:h.map(f=>{const p=e.pathname===f.path,y=f.path==="/cart"&&n&&t.itemCount>0,j=f.icon;return s.jsxs(fe,{to:f.path,className:`flex flex-col items-center py-2 px-3 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${p?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,"aria-label":f.ariaLabel,"aria-current":p?"page":void 0,onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),window.location.href=f.path)},children:[s.jsxs("div",{className:"relative",children:[s.jsx(j,{className:`h-6 w-6 ${p?"text-blue-600":"text-gray-600"}`,"aria-hidden":"true"}),y&&s.jsx(B.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center font-semibold","aria-label":`${t.itemCount} items in cart`,children:t.itemCount})]}),s.jsx("span",{className:"text-xs font-medium mt-1",children:f.label})]},f.path)})})},Lp=()=>{console.log(" === LOCALSTORAGE AUDIT START ===");const e=["auth","accessToken","refreshToken","token","user","userId","user_id","currentUser","userProfile","addresses","saved_addresses","cart","cartData","userCart","autofillAddress","selectedAddress","defaultAddress"],t={};e.forEach(r=>{const n=localStorage.getItem(r);if(n)try{t[r]=JSON.parse(n),console.log(` FOUND ${r}:`,t[r])}catch{t[r]=n,console.log(` FOUND ${r} (string):`,n)}});for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);if(n&&(n.includes("user")||n.includes("auth")||n.includes("token"))&&!e.includes(n)){const a=localStorage.getItem(n);console.log(` SUSPICIOUS KEY FOUND: ${n}:`,a),t[n]=a}}return console.log(" === LOCALSTORAGE AUDIT END ==="),t},zR=()=>{console.log(" NUCLEAR CLEAR: Removing ALL localStorage data...");const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&e.push(r)}e.forEach(t=>{console.log(` NUCLEAR: Removing ${t}`),localStorage.removeItem(t)}),sessionStorage.clear(),console.log(" NUCLEAR CLEAR: Complete")},VR=()=>{var r,n,a,i;console.log(" === API HEADERS DEBUG ===");const e=localStorage.getItem("auth");if(e)try{const o=JSON.parse(e);console.log(" Auth data found in localStorage:",{hasUser:!!o.user,userId:(r=o.user)==null?void 0:r.id,hasAccessToken:!!((n=o.tokens)!=null&&n.accessToken),tokenPreview:((i=(a=o.tokens)==null?void 0:a.accessToken)==null?void 0:i.substring(0,20))+"...",isAuthenticated:o.isAuthenticated})}catch{console.log(" Invalid auth data format")}else console.log(" No auth data in localStorage");const t=localStorage.getItem("accessToken");t&&console.log(" Separate accessToken found:",t.substring(0,20)+"..."),console.log(" === API HEADERS DEBUG END ===")},qR=()=>{console.log(" Starting localStorage monitoring...");const e=localStorage.setItem,t=localStorage.removeItem;localStorage.setItem=function(r,n){return console.log(` localStorage.setItem: ${r} =`,n),e.call(this,r,n)},localStorage.removeItem=function(r){return console.log(` localStorage.removeItem: ${r}`),t.call(this,r)},console.log(" localStorage monitoring active")},AN=()=>{console.log(" === CONTAMINATION CHECK ===");const e=localStorage.getItem("auth");if(e)return console.log(" WARNING: Auth data exists when it should be clean!",e),!0;const t=["accessToken","user","userId","cart","addresses"];let r=!1;return t.forEach(n=>{localStorage.getItem(n)&&(console.log(` CONTAMINATION: ${n} exists when it should be clean!`),r=!0)}),r||console.log(" No contamination detected"),console.log(" === CONTAMINATION CHECK END ==="),r};typeof window<"u"&&(window.storageDebug={audit:Lp,nuclear:zR,headers:VR,monitor:qR,contamination:AN},console.log(" Storage debug utilities available on window.storageDebug"));const _p=()=>{const e=tt(),t=ce();return async()=>{var a;console.log(" LOGOUT: Starting AGGRESSIVE logout process..."),typeof window<"u"&&localStorage.setItem("isLoggingOut","true"),console.log(" PRE-LOGOUT AUDIT:"),Lp();try{console.log(" SECURE LOGOUT: Calling protected backend logout endpoint...");const i=localStorage.getItem("auth"),o=localStorage.getItem("accessToken");let l=null;if(i)try{l=(a=JSON.parse(i).tokens)==null?void 0:a.refreshToken}catch{console.warn("Could not parse auth data for refresh token")}if(!o)console.warn(" No access token found, cannot call secure logout endpoint");else{const d=await fetch("http://localhost:5001/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({refreshToken:l})});if(d.ok){const c=await d.json();console.log(" SECURE LOGOUT: Backend session revoked successfully",{tokensRevoked:c.tokensRevoked,message:c.message})}else d.status===401?console.warn(" SECURE LOGOUT: Token already invalid/expired, continuing cleanup"):console.warn(" SECURE LOGOUT: Backend logout failed, continuing with client cleanup")}}catch(i){console.warn(" SECURE LOGOUT: Backend error (continuing with client cleanup):",i)}console.log(" AGGRESSIVE: Clearing all localStorage keys...");const n=["auth","accessToken","refreshToken","token","user","userId","user_id","currentUser","userProfile","addresses","saved_addresses","cart","cartData","userCart","autofillAddress","selectedAddress","defaultAddress","isLoggingOut"];n.forEach(i=>{localStorage.getItem(i)&&(console.log(` REMOVING localStorage key: ${i}`),localStorage.removeItem(i))}),console.log(" AGGRESSIVE: Clearing sessionStorage...");try{sessionStorage.clear()}catch(i){console.warn("Could not clear sessionStorage:",i)}e(en()),e(Rj()),console.log(" AGGRESSIVE: Clearing RTK Query cache..."),e(Ga.util.resetApiState()),setTimeout(()=>{var l;const o=(((l=e.getState)==null?void 0:l.call(e))||{}).api;console.log(" RTK Query state after reset:",{queries:Object.keys((o==null?void 0:o.queries)||{}),mutations:Object.keys((o==null?void 0:o.mutations)||{}),totalQueries:Object.keys((o==null?void 0:o.queries)||{}).length})},10),setTimeout(()=>{n.forEach(i=>localStorage.removeItem(i)),console.log(" DOUBLE-CHECK: Re-cleared localStorage keys")},100),setTimeout(()=>{console.log(" POST-LOGOUT CONTAMINATION CHECK:"),AN()?console.error(" CRITICAL: Contamination still detected after logout!"):console.log(" Clean state confirmed")},150),console.log(" LOGOUT: Executing GUARANTEED redirect to break auth loop..."),setTimeout(()=>{console.log(" LOGOUT: FORCE REDIRECT - Breaking any auth loops"),window.location.href="/"},100),t("/",{replace:!0}),console.log(" AGGRESSIVE LOGOUT: Complete state cleanup finished")}},HR=()=>{const e=tt();return()=>{console.log(" USER SWITCH: AGGRESSIVE cleaning for new user..."),console.log(" PRE-SWITCH AUDIT:"),Lp(),console.log(" PRE-LOGIN: Clearing all localStorage keys..."),["auth","accessToken","refreshToken","token","user","userId","user_id","currentUser","userProfile","addresses","saved_addresses","cart","cartData","userCart","autofillAddress","selectedAddress","defaultAddress"].forEach(n=>{localStorage.getItem(n)&&(console.log(` PRE-LOGIN REMOVING: ${n}`),localStorage.removeItem(n))});try{sessionStorage.clear()}catch(n){console.warn("Could not clear sessionStorage:",n)}e(Rj()),e(Ga.util.resetApiState()),console.log(" USER SWITCH: AGGRESSIVE cleanup completed for new user")}},WR=(e,t=15)=>{if(!e)return"User";const r=e.trim().split(" ")[0];return r.length>t?r.substring(0,t)+"...":r},QR=(e,t=15)=>WR(e,t),ml="https://res.cloudinary.com/demo/image/upload/sample.jpg";function an({image:e,size:t="small",alt:r="Product image",className:n="",priority:a=!1,debug:i=!1,productId:o}){var S;const l=e!=null&&e.publicId?e:e!=null&&e._doc?e._doc:e||{},d=l.variants||{},c=l.formats||{},u=l.metadata||{};console.group(` OptimizedImage Debug: ${o}`),console.log("Received image:",e),console.log("Fixed img object:",l),console.log("Variants:",d),console.log("Selected variant:",d[t]),console.log("Formats:",c),console.log("Metadata:",u),console.groupEnd();const m=(...A)=>{i&&console.log(`[OptimizedImage] product=${o||"unknown"}`,...A)},h=w.useRef(null),[f,p]=w.useState(a),[y,j]=w.useState(!1);w.useEffect(()=>{m("incoming image object:",e),m("fixed img object:",l),m("variants:",d),m("variants.small:",d.small),m("variants.thumb:",d.thumb),m("formats:",c),m("metadata:",u)},[e]);const N=A=>{if(!l)return ml;let E=d[A]||null;return!E&&c&&(E=c.webp||c.avif||c.jpg||null),E||ml},v=N(t),b=N("thumb");w.useEffect(()=>{if(a)return;h.current;const A=h.current||document.querySelector(`img[data-optim-product="${o||""}"]`);if(!A){p(!0);return}const E=new IntersectionObserver(T=>{T.forEach(M=>{M.isIntersecting&&(p(!0),E.disconnect())})},{rootMargin:"100px",threshold:.01});return E.observe(A),()=>E.disconnect()},[a,h.current]);const g={aspectRatio:((S=e==null?void 0:e.metadata)==null?void 0:S.aspectRatio)||1,minWidth:1,minHeight:1,overflow:"hidden",display:"block",backgroundColor:"#f3f4f6"};w.useEffect(()=>{n&&/w-|h-/.test(n)&&m("Warning: className may override layout width/height:",n)},[n]);const k=A=>{m("image loaded:",A.target.src),j(!0)},C=A=>{console.error("[OptimizedImage] image load error, falling back to placeholder",A.target.src),A.target.src=ml};return(!l||!l.variants&&!l.formats&&!l.publicId)&&m("Invalid/empty image object detected  will use placeholder:",l),!e||!e.variants?(console.error(" Missing image or variants for product:",o,e),s.jsx("div",{style:{background:"#eee",padding:20},children:"No Image"})):s.jsx("div",{style:g,className:`optimized-image-root ${n}`,"data-productid":o,children:f?s.jsxs("picture",{children:[(c==null?void 0:c.avif)&&s.jsx("source",{type:"image/avif",srcSet:c.avif}),(c==null?void 0:c.webp)&&s.jsx("source",{type:"image/webp",srcSet:c.webp}),s.jsx("img",{ref:h,"data-optim-product":o||"",src:v,srcSet:b?`${b} 150w, ${v} 600w`:void 0,sizes:"(max-width: 600px) 150px, 300px",loading:a?"eager":"lazy",alt:r||"",onLoad:k,onError:C,style:{width:"100%",height:"100%",objectFit:"cover",display:"block",opacity:y?1:0,transition:"opacity 300ms ease-in-out"}})]}):s.jsx("div",{style:{width:"100%",height:"100%"},"aria-hidden":!0,children:s.jsx("img",{ref:h,"data-optim-product":o||"",src:b||ml,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(6px)"}})})})}const KR=({suggestions:e,searchQuery:t,onClose:r,isLoading:n=!1})=>{const a=ce(),i=o=>{a(`/product/${o}`),r()};return!t||t.length<1?null:s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-md shadow-lg z-50 overflow-hidden",children:n?s.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-2 text-sm",children:"Searching..."})]}):e.length>0?s.jsx(s.Fragment,{children:e.map(o=>{var l;return s.jsxs("div",{onClick:()=>i(o._id),className:"flex items-center px-4 py-2.5 hover:bg-gray-100 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"w-10 h-10 flex-shrink-0 mr-3",children:s.jsx(an,{image:((l=o.images)==null?void 0:l[0])||{variants:{micro:"/placeholder-product.svg",thumb:"/placeholder-product.svg",small:"/placeholder-product.svg",medium:"/placeholder-product.svg",large:"/placeholder-product.svg",original:"/placeholder-product.svg"}},size:"thumb",alt:o.name,className:"w-full h-full",productId:o._id,debug:!1})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm text-gray-900 truncate",children:o.name}),s.jsxs("div",{className:"text-xs text-blue-600 mt-0.5",children:["in ",o.category]})]})]},o._id)})}):s.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("p",{className:"mt-2 text-sm font-medium",children:"No suggestions found"}),s.jsx("p",{className:"mt-1 text-xs",children:"Try searching with different keywords"})]})})},GR=e=>{const t=parseInt(e),r=t>=515e3&&t<=515999||t>=516e3&&t<=516999||t>=517e3&&t<=517999||t>=518e3&&t<=518999||t>=52e4&&t<=520999||t>=521e3&&t<=521999||t>=522e3&&t<=522999||t>=523e3&&t<=523999||t>=524e3&&t<=524999||t>=525e3&&t<=525999||t>=526e3&&t<=526999||t>=527e3&&t<=527999||t>=528e3&&t<=528999||t>=529e3&&t<=529999||t>=53e4&&t<=530999||t>=531e3&&t<=531999||t>=532e3&&t<=532999||t>=533e3&&t<=533999||t>=534e3&&t<=534999||t>=535e3&&t<=535999||t>=536e3&&t<=536999||t>=537e3&&t<=537999||t>=538e3&&t<=538999||t>=539e3&&t<=539999||t>=54e4&&t<=540999||t>=541e3&&t<=541999||t>=542e3&&t<=542999||t>=543e3&&t<=543999||t>=544e3&&t<=544999||t>=545e3&&t<=545999||t>=546e3&&t<=546999||t>=547e3&&t<=547999||t>=548e3&&t<=548999||t>=549e3&&t<=549999||t>=55e4&&t<=550999||t>=551e3&&t<=551999||t>=552e3&&t<=552999||t>=553e3&&t<=553999||t>=554e3&&t<=554999||t>=555e3&&t<=555999||t>=556e3&&t<=556999||t>=557e3&&t<=557999||t>=558e3&&t<=558999||t>=559e3&&t<=559999||t>=56e4&&t<=560999||t>=561e3&&t<=561999||t>=562e3&&t<=562999||t>=563e3&&t<=563999||t>=564e3&&t<=564999||t>=565e3&&t<=565999||t>=566e3&&t<=566999||t>=567e3&&t<=567999||t>=568e3&&t<=568999||t>=569e3&&t<=569999||t>=57e4&&t<=570999||t>=571e3&&t<=571999||t>=572e3&&t<=572999||t>=573e3&&t<=573999||t>=574e3&&t<=574999||t>=575e3&&t<=575999||t>=576e3&&t<=576999||t>=577e3&&t<=577999||t>=578e3&&t<=578999||t>=579e3&&t<=579999||t>=58e4&&t<=580999||t>=581e3&&t<=581999||t>=582e3&&t<=582999||t>=583e3&&t<=583999||t>=584e3&&t<=584999||t>=585e3&&t<=585999||t>=586e3&&t<=586999||t>=587e3&&t<=587999||t>=588e3&&t<=588999||t>=589e3&&t<=589999||t>=59e4&&t<=590999||t>=591e3&&t<=591999||t>=592e3&&t<=592999||t>=593e3&&t<=593999||t>=594e3&&t<=594999||t>=595e3&&t<=595999||t>=596e3&&t<=596999||t>=597e3&&t<=597999||t>=598e3&&t<=598999||t>=599e3&&t<=599999,n=t>=5e5&&t<=500999||t>=501e3&&t<=501999||t>=502e3&&t<=502999||t>=503e3&&t<=503999||t>=504e3&&t<=504999||t>=505e3&&t<=505999||t>=506e3&&t<=506999||t>=507e3&&t<=507999||t>=508e3&&t<=508999||t>=509e3&&t<=509999||t>=51e4&&t<=510999||t>=511e3&&t<=511999||t>=512e3&&t<=512999||t>=513e3&&t<=513999||t>=514e3&&t<=514999;return r||n},EN=({isOpen:e,onClose:t,onAddressSelect:r,addresses:n,defaultAddressId:a})=>{const i=ce(),[o,l]=w.useState(!1),[d,c]=w.useState(""),u=h=>{r(h),t()},m=async()=>{l(!0),c("");try{if(!navigator.geolocation){c("Geolocation is not supported by your browser"),l(!1);return}navigator.geolocation.getCurrentPosition(async h=>{const{latitude:f,longitude:p}=h.coords;try{const j=await(await fetch(`/api/location/reverse-geocode?lat=${f}&lng=${p}`)).json();if(j.success&&j.data&&j.data.pincode){const N=j.data.pincode;if(!GR(N)){c(`Delivery not available for pincode ${N}. Please enter a different address.`),l(!1);return}const b={addressLine:j.data.address||"",city:j.data.city||"",state:j.data.state||"",pincode:N,lat:f,lng:p};localStorage.setItem("autofillAddress",JSON.stringify(b)),t(),i("/addresses")}else c("Could not determine your location. Please try again or enter address manually.")}catch(y){console.error("Reverse geocoding failed:",y),c("Failed to detect your location. Please try again or enter address manually.")}l(!1)},h=>{let f="Could not access your location. ";switch(h.code){case h.PERMISSION_DENIED:f+="Please allow location access and try again.";break;case h.POSITION_UNAVAILABLE:f+="Location information is unavailable.";break;case h.TIMEOUT:f+="Location request timed out.";break;default:f+="Please enter address manually.";break}c(f),l(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}catch(h){console.error("Location detection failed:",h),c("Failed to detect your location. Please try again or enter address manually."),l(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Choose your location"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(pt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Saved Addresses"}),n.length>0?s.jsx("div",{className:"space-y-2",children:n.map(h=>s.jsx("div",{onClick:()=>u(h.id),className:`p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ${a===h.id?"border-blue-200 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:`h-5 w-5 flex-shrink-0 ${a===h.id?"text-blue-600":"text-gray-400"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:h.label}),s.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[h.city,", ",h.state," - ",h.pincode]})]}),a===h.id&&s.jsx(Es,{className:"h-5 w-5 text-blue-600"})]})},h.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(ut,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"No saved addresses yet"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Add a new location below to get started"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:[s.jsx("button",{onClick:m,disabled:o,className:"w-full p-4 bg-white border-2 border-gray-300 hover:border-blue-500 hover:bg-blue-50 text-gray-700 hover:text-blue-700 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:"Detecting your location..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(hh,{className:"w-5 h-5"}),s.jsx("span",{children:"Use My Current Location"})]})}),d&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-800",children:d})}),s.jsxs("button",{onClick:()=>{t(),i("/addresses")},className:"w-full p-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),s.jsx("span",{children:"Add New Address"})]})]})]})})}):null},YR=({isVisible:e,productName:t,productImage:r,onClose:n})=>{const[a,i]=w.useState(!1);return w.useEffect(()=>{if(e){i(!0);const o=setTimeout(()=>{n()},4e3);return()=>clearTimeout(o)}else{const o=setTimeout(()=>{i(!1)},300);return()=>clearTimeout(o)}},[e,n]),a?s.jsx("div",{className:`fixed top-20 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ease-in-out ${e?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-sm mx-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Ee,{className:"h-6 w-6 text-green-600"})}),r&&s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{src:r,alt:t,className:"h-12 w-12 object-cover rounded-md border border-gray-200"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Added to cart"}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:t})]}),s.jsx("button",{onClick:n,className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close notification",children:s.jsx(pt,{className:"h-4 w-4"})})]})})}):null},JR=({isVisible:e,productName:t,productImage:r,currentCartCount:n,cartTotal:a=0,onClose:i})=>{w.useEffect(()=>{if(e){const d=setTimeout(()=>{i()},5e3);return()=>clearTimeout(d)}},[e,i]);const o=2e3,l=d=>d>=o?" Your order qualifies for FREE Delivery!":`Add ${o-d} more for FREE Delivery`;return s.jsx(Ua,{children:e&&s.jsxs(B.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30,duration:.6},className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-lg",role:"alert","aria-live":"polite",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex items-center justify-between py-3",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"bg-green-100 rounded-full p-2",children:s.jsx(Ee,{className:"h-6 w-6 text-green-600"})})}),r&&s.jsx("div",{className:"flex-shrink-0 hidden sm:block",children:s.jsx("img",{src:r,alt:t,className:"h-12 w-12 object-cover rounded-md border border-gray-200 shadow-sm"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:" Added to cart"}),s.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{children:""}),s.jsx(Kt,{className:"h-4 w-4"}),s.jsxs("span",{className:"font-medium",children:[n," item",n!==1?"s":""]}),s.jsx("span",{children:""}),s.jsxs("span",{className:"font-semibold text-green-600",children:["",a]})]})]}),s.jsx("p",{className:"text-sm text-gray-700 truncate max-w-xs sm:max-w-md",children:t}),s.jsxs("div",{className:"md:hidden flex items-center space-x-2 text-xs text-gray-500 mt-1",children:[s.jsx(Kt,{className:"h-3 w-3"}),s.jsxs("span",{children:[n," item",n!==1?"s":""]}),s.jsx("span",{children:""}),s.jsxs("span",{className:"font-semibold text-green-600",children:["",a]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"hidden lg:block text-right",children:[s.jsx("p",{className:"text-sm text-green-600 font-medium",children:l(a)}),a>=o&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Estimated delivery: Tomorrow"})]}),s.jsx("button",{onClick:i,className:"flex-shrink-0 p-1.5 text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-gray-100","aria-label":"Close notification",children:s.jsx(pt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"lg:hidden border-t border-gray-100 py-2",children:[s.jsx("p",{className:"text-sm text-green-600 font-medium",children:l(a)}),a>=o&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Estimated delivery: Tomorrow"})]})]}),s.jsx(B.div,{initial:{scaleX:1},animate:{scaleX:0},transition:{duration:5,ease:"linear"},className:"absolute bottom-0 left-0 right-0 h-0.5 bg-green-500 origin-left"})]})})},TN=w.createContext(null),XR=({children:e,triggerCartConfirmation:t,triggerGlobalConfirmation:r})=>s.jsx(TN.Provider,{value:{triggerCartConfirmation:t,triggerGlobalConfirmation:r},children:e}),Dp=()=>{const e=w.useContext(TN);if(!e)throw new Error("useCartFeedback must be used within a CartFeedbackProvider");return e},_l=({children:e,title:t="CS Store",description:r="E-commerce platform",hideBottomNav:n=!1})=>{var Vp,qp;const a=Jt(),i=n||a.pathname==="/cart",[o,l]=w.useState(""),[d,c]=w.useState(!1),[u,m]=w.useState(""),[h,f]=w.useState(!1),[p,y]=w.useState(!1),[j,N]=w.useState(!1),[v,b]=w.useState(!1),[x,g]=w.useState(!1),k=Jt(),C=ce(),S=tt(),A=de(ue=>ue.auth),E=_p(),{data:T,refetch:M}=Ld(void 0,{skip:!A.isAuthenticated}),{data:P}=qn(void 0,{skip:!A.isAuthenticated}),[O]=np(),R=(T==null?void 0:T.addresses)||[],L=(T==null?void 0:T.defaultAddressId)||null,U=R.find(ue=>ue.id===L),D=de(ue=>ue.cart),{error:_}=Ns(),[I,q]=w.useState(!1),[W,ie]=w.useState({isVisible:!1,productName:"",productImage:""}),[se,$]=w.useState({isVisible:!1,productName:"",productImage:"",cartCount:0,cartTotal:0}),H=(ue,yt)=>{ie({isVisible:!0,productName:ue,productImage:yt||""}),q(!0),setTimeout(()=>q(!1),600)},J=(ue,yt,Ds,F1)=>{$({isVisible:!0,productName:ue,productImage:yt||"",cartCount:Ds||D.itemCount||0,cartTotal:F1||D.total||0}),q(!0),setTimeout(()=>q(!1),600)},oe=()=>{ie(ue=>({...ue,isVisible:!1}))},ee=()=>{$(ue=>({...ue,isVisible:!1}))},ge=()=>{o.trim()?C(`/search?q=${encodeURIComponent(o.trim())}`):_("Please enter a product name to search")},{showOtpModal:pe}=Id(),Ne=(Vp=A.user)==null?void 0:Vp.isAdmin,We=((qp=A.user)==null?void 0:qp.role)==="delivery",Tt=k.pathname.startsWith("/admin"),Ot=k.pathname.startsWith("/delivery");if(w.useEffect(()=>{document.title=t;const ue=document.querySelector('meta[name="description"]');ue&&ue.setAttribute("content",r)},[t,r]),Ot)return s.jsx("main",{id:"main-content",children:e});w.useEffect(()=>{if(k.pathname==="/search"){const yt=new URLSearchParams(k.search).get("q");yt&&yt!==o&&l(yt)}},[k.pathname,k.search]),w.useEffect(()=>{const ue=setTimeout(()=>{m(o)},300);return()=>clearTimeout(ue)},[o]);const{data:F,isLoading:X}=Z5({q:u},{skip:u.trim().length===0}),le=F||[];w.useEffect(()=>(window.clearSearchBar=()=>{l("")},window.updateSearchQuery=ue=>{l(ue)},()=>{delete window.clearSearchBar,delete window.updateSearchQuery}),[]),w.useEffect(()=>{const ue=yt=>{const Ds=yt.target;h&&!Ds.closest(".login-dropdown")&&f(!1),p&&!Ds.closest(".profile-dropdown")&&y(!1),v&&!Ds.closest(".more-dropdown")&&b(!1),p&&!Ds.closest(".profile-dropdown")&&!Ds.closest(".admin-dropdown")&&y(!1)};return document.addEventListener("mousedown",ue),()=>{document.removeEventListener("mousedown",ue)}},[h,p,v]);const xe=()=>{k.pathname==="/"?window.location.reload():C("/")},ke=()=>{C("/account")},Re=()=>{f(!h)},Ie=ue=>{ue(),f(!1)},zt=()=>{j?(N(!1),y(!1)):(N(!0),y(!0))},z=()=>{j||y(!0)},G=()=>{j||y(!1)};w.useEffect(()=>{const ue=yt=>{j&&(yt.target.closest(".profile-dropdown")||(N(!1),y(!1)))};return document.addEventListener("mousedown",ue),()=>{document.removeEventListener("mousedown",ue)}},[j]);const Z=ue=>{ue(),y(!1)},te=async()=>{try{console.log("[Logout] dispatching logout, currentPath:",window.location.pathname),y(!1),S(en());try{localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("isLoggingOut")}catch(ue){console.warn("logout: failed to clean localStorage",ue)}try{console.log("[Logout] attempting SPA navigate to /"),C("/",{replace:!0}),setTimeout(()=>{window.location.pathname!=="/"&&(console.log("[Logout] SPA navigate failed, using fallback"),window.location.assign("/"))},120)}catch(ue){console.warn("SPA navigate failed, falling back to location.assign",ue),window.location.assign("/")}}catch(ue){console.error("Logout failed:",ue),window.location.assign("/")}},he=()=>{b(!v)},ve=()=>{g(!0)},Rt=async ue=>{try{await O(ue).unwrap(),await M();const yt=R.find(Ds=>Ds.id===ue);yt&&_(`Location updated to ${yt.city}, ${yt.state}`)}catch(yt){console.error("Error updating default address:",yt),_("Failed to update location. Please try again.")}},$e=ue=>{ue(),b(!1)},Js=()=>{o.trim()?ge():C("/search")},Kn=()=>{C("/cart")};return s.jsxs(BR,{children:[s.jsx("style",{children:`
        /*  MAGICAL STAR GLOW ANIMATION */
        @keyframes sparkle {
          0% {
            transform: scale(0) rotate(0deg);
            opacity: 0;
          }
          50% {
            transform: scale(1) rotate(180deg);
            opacity: 1;
          }
          100% {
            transform: scale(0) rotate(360deg);
            opacity: 0;
          }
        }
        
        /* Amazon-Style Professional Cart Pulse Animation */
        .cart-pulse-active {
          animation: cart-jiggle-flash 0.6s ease-in-out;
        }
        
        /* Cart icon color flash during pulse */
        .cart-pulse-active .cart-icon {
          animation: cart-icon-flash 0.6s ease-in-out;
        }
        
        /* Jiggle + Glow Animation */
        @keyframes cart-jiggle-flash {
          0% {
            transform: scale(1) translateX(0);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          }
          15% {
            transform: scale(1.05) translateX(-2px);
            box-shadow: 0 0 12px rgba(34, 197, 94, 0.4), 0 0 20px rgba(34, 197, 94, 0.2);
          }
          30% {
            transform: scale(1.05) translateX(2px);
            box-shadow: 0 0 16px rgba(34, 197, 94, 0.6), 0 0 28px rgba(34, 197, 94, 0.3);
          }
          45% {
            transform: scale(1.05) translateX(-1px);
            box-shadow: 0 0 12px rgba(34, 197, 94, 0.4), 0 0 20px rgba(34, 197, 94, 0.2);
          }
          60% {
            transform: scale(1.02) translateX(1px);
            box-shadow: 0 0 8px rgba(34, 197, 94, 0.3), 0 0 15px rgba(34, 197, 94, 0.15);
          }
          100% {
            transform: scale(1) translateX(0);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          }
        }
        
        /* Cart Icon Color Flash - Works for both blue and gray icons */
        @keyframes cart-icon-flash {
          0% {
            color: currentColor; /* Preserve original color */
          }
          25% {
            color: rgb(34, 197, 94) !important; /* Bright green flash */
          }
          50% {
            color: rgb(34, 197, 94) !important; /* Hold green */
          }
          75% {
            color: rgb(16, 185, 129) !important; /* Slightly darker green */
          }
          100% {
            color: currentColor; /* Back to original color */
          }
        }
      `}),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tg,{href:"#main-content",children:"Skip to main content"}),s.jsx(tg,{href:"#navigation",children:"Skip to navigation"}),s.jsxs("div",{className:"flex flex-col min-h-screen",children:[s.jsx("header",{id:"navigation",className:"bg-white shadow-sm border-b border-gray-200 z-sticky",role:"banner",children:s.jsx("div",{className:"w-full px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:xe,className:"flex items-center space-x-2 text-2xl font-bold text-blue-600 hover:text-blue-700 transition-colors","aria-label":"CS Store Home",children:s.jsx("span",{children:"CS Store"})}),k.pathname!=="/"&&k.pathname!=="/checkout"&&!k.pathname.startsWith("/admin")&&s.jsxs("button",{onClick:ve,className:"hidden md:flex items-center space-x-2 text-sm text-gray-600 px-4 hover:bg-gray-50 rounded-lg py-2 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ut,{className:"h-4 w-4 text-gray-600"}),s.jsx("span",{className:"font-medium",children:"Deliver to"})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-gray-800 font-medium",children:[s.jsx("span",{children:U?`${U.name||"User"}, ${U.city}`:"Add Address"}),s.jsx(Sa,{className:"h-3 w-3"})]})]})]}),Tt?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Dashboard"})}):k.pathname!=="/account"&&k.pathname!=="/categories"&&!Ot?s.jsx("div",{className:"flex-1 max-w-4xl mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search for Products, Brands and More",value:o,onChange:ue=>{l(ue.target.value),c(!0)},onFocus:()=>{o.length>=1&&le.length>0&&c(!0)},onBlur:()=>{setTimeout(()=>c(!1),200)},onKeyDown:ue=>{ue.key==="Enter"?(ge(),c(!1)):ue.key==="Escape"&&c(!1)},className:"w-full px-4 py-3 h-12 pr-12 border border-gray-300 bg-white text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"}),s.jsx("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),ge(),c(!1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 text-gray-500 hover:text-gray-700 transition-colors duration-200 cursor-pointer",type:"button","aria-label":"Search",children:s.jsx(sn,{className:"h-5 w-5"})}),d&&o.length>=1&&s.jsx(KR,{suggestions:le,searchQuery:o,onClose:()=>{c(!1),l("")},isLoading:X})]})}):null,k.pathname==="/categories"&&!Ne&&!We?s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:Js,className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-full transition-all duration-200 shadow-sm hover:shadow-md hover:scale-110","aria-label":"Search products",children:s.jsx(sn,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("button",{onClick:Kn,className:`relative p-3 bg-blue-100 hover:bg-blue-200 rounded-full transition-all duration-200 shadow-sm hover:shadow-md hover:scale-110 ${I?"cart-pulse-active":""}`,"aria-label":`View cart with ${D.itemCount??0} items`,children:[s.jsx(Kt,{className:"h-5 w-5 text-blue-600 cart-icon"}),A.isAuthenticated&&D.itemCount>0&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-lg",children:D.itemCount>99?"99+":D.itemCount})]})]}):Ne&&Tt?s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>C("/admin-profile"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Profile"}),s.jsx("button",{onClick:async()=>{await E()},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]}):We&&Ot?s.jsx("div",{className:"flex items-center space-x-2"}):s.jsx("div",{className:"flex items-center space-x-8",children:A.isAuthenticated?s.jsxs("div",{className:"flex items-center space-x-8",children:[s.jsxs("div",{className:"relative profile-dropdown",onMouseEnter:z,onMouseLeave:G,children:[s.jsxs("button",{onClick:zt,className:"flex flex-col items-center space-y-1 text-gray-700 hover:text-blue-600 transition-colors duration-200 px-2 py-1","aria-label":"Account",children:[s.jsx(De,{className:"h-6 w-6"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:QR(P==null?void 0:P.name)||"Account"}),s.jsx(Sa,{className:`h-3 w-3 text-gray-500 transition-transform duration-200 ${p?"rotate-180":"rotate-0"}`,strokeWidth:2.5})]})]}),p&&s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>Z(ke),className:"w-full text-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"My Profile"}),s.jsx("button",{onClick:()=>Z(()=>C("/orders")),className:"w-full text-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"My Orders"}),s.jsx("button",{onClick:()=>Z(()=>C("/addresses")),className:"w-full text-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"My Addresses"}),s.jsx("div",{className:"border-t border-gray-200 my-2"}),s.jsx("button",{onClick:()=>Z(te),className:"w-full text-center px-3 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200 rounded",children:"Logout"})]})})})]}),s.jsxs("button",{onClick:Kn,className:`relative flex flex-col items-center space-y-1 text-gray-700 hover:text-blue-600 transition-colors duration-200 px-2 py-1 ${I?"cart-pulse-active":""}`,"aria-label":`View cart with ${D.itemCount??0} items`,children:[s.jsx(Kt,{className:"h-6 w-6 cart-icon"}),s.jsx("span",{className:"text-xs font-medium",children:"Cart"}),D.itemCount>0&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center font-bold",children:D.itemCount>99?"99+":D.itemCount})]}),s.jsxs("div",{className:"relative more-dropdown",children:[s.jsxs("button",{onClick:he,className:"flex flex-col items-center space-y-1 text-gray-700 hover:text-blue-600 transition-colors duration-200 px-2 py-1","aria-label":"More options",children:[s.jsx(Xx,{className:"h-6 w-6"}),s.jsx("span",{className:"text-xs font-medium",children:"More"})]}),v&&s.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:s.jsxs("div",{className:"py-2",children:[s.jsx("button",{onClick:()=>$e(()=>C("/notification-preferences")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"Notification Preferences"}),s.jsx("button",{onClick:()=>$e(()=>C("/customer-care")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"24x7 Customer Care"}),s.jsxs("button",{onClick:()=>$e(()=>{C("/download-app")}),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z"})}),s.jsx("span",{children:"Download App"})]}),s.jsx("div",{className:"border-t border-gray-200 my-1"}),s.jsx("button",{onClick:()=>$e(()=>C("/about-us")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"About Us"}),s.jsx("button",{onClick:()=>$e(()=>C("/careers")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"Careers"}),s.jsx("button",{onClick:()=>$e(()=>C("/contact-us")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"Contact Us"}),s.jsx("div",{className:"border-t border-gray-200 my-1"}),s.jsx("button",{onClick:()=>$e(()=>C("/become-seller")),className:"w-full text-left px-4 py-2 text-sm text-orange-600 hover:bg-orange-50 transition-colors duration-200 font-medium",children:"Become a Seller"})]})})]})]}):s.jsxs("div",{className:"flex items-center space-x-8",children:[s.jsxs("div",{className:"relative login-dropdown",children:[s.jsxs("button",{onClick:Re,className:"flex flex-col items-center space-y-1 text-gray-700 hover:text-blue-600 transition-colors duration-200 px-2 py-1","aria-label":"Login",children:[s.jsx(De,{className:"h-6 w-6"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-xs font-medium",children:"Login"}),s.jsx(Sa,{className:"h-3 w-3"})]})]}),h&&s.jsx("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Welcome"}),s.jsx("p",{className:"text-sm text-gray-600",children:"To access account and manage orders"})]}),s.jsx("button",{onClick:()=>{f(!1),pe("/account/profile")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 mb-2",children:"LOGIN / SIGNUP"}),s.jsx("div",{className:"border-t border-gray-200 my-2"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>{f(!1),pe("/account/profile")},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"Profile"}),s.jsx("button",{onClick:()=>{f(!1),pe("/account/orders")},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"Orders"}),s.jsx("button",{onClick:()=>{f(!1),pe("/account/gift-cards")},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"Gift Cards"}),s.jsx("button",{onClick:()=>{f(!1),pe("/account/rewards")},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"Rewards"}),s.jsx("button",{onClick:()=>Ie(()=>C("/help-support")),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded",children:"Help & Support"})]})]})})]}),s.jsxs("button",{onClick:Kn,className:`relative flex flex-col items-center space-y-1 text-gray-700 hover:text-blue-600 transition-colors duration-200 px-2 py-1 ${I?"cart-pulse-active":""}`,"aria-label":"View cart",children:[s.jsx(Kt,{className:"h-6 w-6 cart-icon"}),s.jsx("span",{className:"text-xs font-medium",children:"Cart"})]}),s.jsxs("button",{onClick:()=>C("/become-seller"),className:"flex flex-col items-center space-y-1 text-gray-700 hover:text-blue-600 transition-colors duration-200 px-2 py-1","aria-label":"Become a Seller",children:[s.jsx(Y3,{className:"h-6 w-6"}),s.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Become a Seller"})]}),s.jsxs("div",{className:"relative more-dropdown",children:[s.jsxs("button",{onClick:he,className:"flex flex-col items-center space-y-1 text-gray-700 hover:text-blue-600 transition-colors duration-200 px-2 py-1","aria-label":"More options",children:[s.jsx(Xx,{className:"h-6 w-6"}),s.jsx("span",{className:"text-xs font-medium",children:"More"})]}),v&&s.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:s.jsxs("div",{className:"py-2",children:[s.jsx("button",{onClick:()=>$e(()=>C("/notification-preferences")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"Notification Preferences"}),s.jsx("button",{onClick:()=>$e(()=>C("/customer-care")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:"24x7 Customer Care"}),s.jsxs("button",{onClick:()=>$e(()=>{C("/download-app")}),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z"})}),s.jsx("span",{children:"Download App"})]})]})})]})]})})]})})}),s.jsx("main",{id:"main-content",className:`flex-1 z-base ${A.isAuthenticated||We?"pb-16":"pb-4"}`,role:"main",tabIndex:-1,children:s.jsx(XR,{triggerCartConfirmation:H,triggerGlobalConfirmation:J,children:e})}),!i&&s.jsx(UR,{})]}),s.jsx(EN,{isOpen:x,onClose:()=>g(!1),onAddressSelect:Rt,addresses:R,defaultAddressId:L}),s.jsx(YR,{isVisible:W.isVisible,productName:W.productName,productImage:W.productImage,onClose:oe}),s.jsx(JR,{isVisible:se.isVisible,productName:se.productName,productImage:se.productImage,currentCartCount:se.cartCount,cartTotal:se.cartTotal,onClose:ee})]})]})},kt=({children:e,requireAuth:t=!0,redirectTo:r})=>{const{isAuthenticated:n}=de(i=>i.auth),a=Jt();return console.log("[ProtectedRoute] isAuthenticated:",n,"path:",a.pathname),t&&!n?r?s.jsx(ir,{to:r,replace:!0}):s.jsx(ir,{to:"/login",replace:!0}):s.jsx(s.Fragment,{children:e})};class ZR extends w.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Global Error Boundary caught an error:",t,r)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):this.props.children}}const e9=({products:e,className:t=""})=>{const[r,n]=w.useState(0),[a,i]=w.useState(!0),o=ce(),l=()=>{if(e.length<=4)return 0;const j=4,N=e.length;return Math.max(0,N-j)};w.useEffect(()=>{if(!a||e.length<=4)return;const j=setInterval(()=>{n(N=>{const v=l();return N>=v?0:N+1})},3e3);return()=>clearInterval(j)},[a,e.length,r]);const d=()=>{const j=l();r<j&&n(N=>N+1)},c=()=>{r>0&&n(j=>j-1)},u=r===0,m=r>=l(),h=j=>{if(!j.id){console.error("Product ID is missing:",j);return}try{o(`/product/${j.id}`)}catch(N){console.error("Navigation error:",N),o("/products")}},f=()=>{i(!1)},p=()=>{i(!0)};if(!e||e.length===0)return null;const y=()=>{if(e.length<=4)return 0;const j=e.length,N=4,v=l();return r>=v?-((j-N)/j*100):-(r/j*100)};return s.jsxs("div",{className:`relative w-full ${t}`,onMouseEnter:f,onMouseLeave:p,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-3 sm:space-y-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-neutral-900 mb-2",children:" Top Selling"}),s.jsx("p",{className:"text-sm sm:text-base text-neutral-600",children:"Most popular products this week"})]}),e.length>4&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(B.button,{whileHover:u?{}:{scale:1.1,rotate:-5,boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",transition:{duration:.3,ease:"easeOut"}},whileTap:u?{}:{scale:.95,transition:{duration:.1}},onClick:c,disabled:u,className:`p-3 rounded-lg shadow-flipkart transition-all duration-300 ${u?"bg-neutral-100 border border-neutral-200 cursor-not-allowed":"bg-white border border-neutral-300 hover:shadow-flipkart-hover hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50"}`,"aria-label":"Previous products",children:s.jsx(RP,{className:`h-4 w-4 ${u?"text-neutral-400":"text-neutral-600"}`})}),s.jsx(B.button,{whileHover:m?{}:{scale:1.1,rotate:5,boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",transition:{duration:.3,ease:"easeOut"}},whileTap:m?{}:{scale:.95,transition:{duration:.1}},onClick:d,disabled:m,className:`p-3 rounded-lg shadow-flipkart transition-all duration-300 ${m?"bg-neutral-100 border border-neutral-200 cursor-not-allowed":"bg-white border border-neutral-300 hover:shadow-flipkart-hover hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50"}`,"aria-label":"Next products",children:s.jsx(Lr,{className:`h-4 w-4 ${m?"text-neutral-400":"text-neutral-600"}`})})]})]}),s.jsx("div",{className:"relative overflow-hidden",children:s.jsx(B.div,{className:"flex space-x-4",animate:{x:`${y()}%`},transition:{duration:.8,ease:[.25,.46,.45,.94],type:"spring",stiffness:100,damping:20},children:e.map((j,N)=>{var v;return s.jsxs(B.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},transition:{delay:N*.15,duration:.6,ease:[.25,.46,.45,.94],type:"spring",stiffness:120,damping:15},whileHover:{scale:1.08,y:-8,rotateY:2,transition:{duration:.3,ease:"easeOut"}},whileTap:{scale:.95,transition:{duration:.1}},onClick:()=>h(j),className:"flex-shrink-0 w-48 sm:w-52 md:w-56 lg:w-60 bg-white rounded-lg shadow-flipkart hover:shadow-2xl transition-all duration-300 cursor-pointer overflow-hidden group",role:"button",tabIndex:0,onKeyDown:b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),h(j))},children:[s.jsxs("div",{className:"relative h-28 sm:h-32 overflow-hidden",children:[s.jsx(an,{image:{variants:{micro:j.image,thumb:j.image,small:j.image,medium:j.image,large:j.image,original:j.image}},size:"thumb",alt:j.name,className:"w-full h-full",productId:(v=j.id)==null?void 0:v.toString(),debug:!1}),s.jsx(B.div,{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-10 transition-all duration-300",whileHover:{scale:1.15},transition:{duration:.3}}),s.jsx(B.div,{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent",initial:{opacity:0},whileHover:{opacity:1,transition:{duration:.3,ease:"easeOut"}}}),s.jsx(B.div,{className:"absolute top-2 left-2",initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:N*.1+.3,duration:.5,type:"spring",stiffness:200,damping:15},whileHover:{scale:1.1,rotate:5,transition:{duration:.2}},children:s.jsx(B.div,{className:"bg-gradient-to-r from-secondary-500 to-orange-500 text-white px-2 py-1 rounded-md text-xs font-bold shadow-flipkart",whileHover:{boxShadow:"0 8px 25px rgba(255, 140, 0, 0.4)",transition:{duration:.3}},children:" Top"})})]}),s.jsxs(B.div,{className:"p-3 sm:p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:N*.1+.4,duration:.4,ease:"easeOut"},children:[s.jsx(B.h3,{className:"font-semibold text-neutral-900 text-xs sm:text-sm line-clamp-2 group-hover:text-primary-600 transition-colors duration-300",whileHover:{scale:1.02,transition:{duration:.2}},children:j.name}),s.jsx(B.p,{className:"text-xs text-neutral-500 mt-2 capitalize font-medium",whileHover:{color:"#f97316",transition:{duration:.2}},children:j.category})]})]},j.id)})})}),e.length>4&&s.jsx(B.div,{className:"flex justify-center mt-4 space-x-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.4},children:Array.from({length:Math.ceil(e.length/4)}).map((j,N)=>{const v=N*4,b=l(),x=r===v,g=v>b;return s.jsx(B.button,{onClick:()=>{v<=b&&n(v)},disabled:g,whileHover:g?{}:{scale:1.3,transition:{duration:.2}},whileTap:g?{}:{scale:.9,transition:{duration:.1}},className:`h-2 rounded-full transition-all duration-300 ${x?"bg-gradient-to-r from-blue-500 to-indigo-600 w-6 shadow-lg":g?"bg-gray-200 w-2 cursor-not-allowed":"bg-gray-300 hover:bg-gradient-to-r hover:from-blue-400 hover:to-indigo-500 w-2 hover:w-4"}`,"aria-label":`Go to slide ${N+1}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.6+N*.1,duration:.3,type:"spring",stiffness:200}},N)})})]})};function ON(e,t){return function(){return e.apply(t,arguments)}}const{toString:t9}=Object.prototype,{getPrototypeOf:Ip}=Object,{iterator:Wd,toStringTag:RN}=Symbol,Qd=(e=>t=>{const r=t9.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),_s=e=>(e=e.toLowerCase(),t=>Qd(t)===e),Kd=e=>t=>typeof t===e,{isArray:Ja}=Array,za=Kd("undefined");function Mo(e){return e!==null&&!za(e)&&e.constructor!==null&&!za(e.constructor)&&Gt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const MN=_s("ArrayBuffer");function s9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&MN(e.buffer),t}const r9=Kd("string"),Gt=Kd("function"),LN=Kd("number"),Lo=e=>e!==null&&typeof e=="object",n9=e=>e===!0||e===!1,Dl=e=>{if(Qd(e)!=="object")return!1;const t=Ip(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(RN in e)&&!(Wd in e)},a9=e=>{if(!Lo(e)||Mo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},i9=_s("Date"),o9=_s("File"),l9=_s("Blob"),c9=_s("FileList"),d9=e=>Lo(e)&&Gt(e.pipe),u9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Gt(e.append)&&((t=Qd(e))==="formdata"||t==="object"&&Gt(e.toString)&&e.toString()==="[object FormData]"))},m9=_s("URLSearchParams"),[h9,f9,p9,x9]=["ReadableStream","Request","Response","Headers"].map(_s),g9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _o(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Ja(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Mo(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function _N(e,t){if(Mo(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const kn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DN=e=>!za(e)&&e!==kn;function Ah(){const{caseless:e,skipUndefined:t}=DN(this)&&this||{},r={},n=(a,i)=>{const o=e&&_N(r,i)||i;Dl(r[o])&&Dl(a)?r[o]=Ah(r[o],a):Dl(a)?r[o]=Ah({},a):Ja(a)?r[o]=a.slice():(!t||!za(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&_o(arguments[a],n);return r}const y9=(e,t,r,{allOwnKeys:n}={})=>(_o(t,(a,i)=>{r&&Gt(a)?e[i]=ON(a,r):e[i]=a},{allOwnKeys:n}),e),v9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),b9=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},j9=(e,t,r,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&Ip(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},w9=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},N9=e=>{if(!e)return null;if(Ja(e))return e;let t=e.length;if(!LN(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},S9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ip(Uint8Array)),k9=(e,t)=>{const n=(e&&e[Wd]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},C9=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},P9=_s("HTMLFormElement"),A9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),ay=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),E9=_s("RegExp"),IN=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};_o(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},T9=e=>{IN(e,(t,r)=>{if(Gt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Gt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},O9=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Ja(e)?n(e):n(String(e).split(t)),r},R9=()=>{},M9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function L9(e){return!!(e&&Gt(e.append)&&e[RN]==="FormData"&&e[Wd])}const _9=e=>{const t=new Array(10),r=(n,a)=>{if(Lo(n)){if(t.indexOf(n)>=0)return;if(Mo(n))return n;if(!("toJSON"in n)){t[a]=n;const i=Ja(n)?[]:{};return _o(n,(o,l)=>{const d=r(o,a+1);!za(d)&&(i[l]=d)}),t[a]=void 0,i}}return n};return r(e,0)},D9=_s("AsyncFunction"),I9=e=>e&&(Lo(e)||Gt(e))&&Gt(e.then)&&Gt(e.catch),$N=((e,t)=>e?setImmediate:t?((r,n)=>(kn.addEventListener("message",({source:a,data:i})=>{a===kn&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),kn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Gt(kn.postMessage)),$9=typeof queueMicrotask<"u"?queueMicrotask.bind(kn):typeof process<"u"&&process.nextTick||$N,F9=e=>e!=null&&Gt(e[Wd]),V={isArray:Ja,isArrayBuffer:MN,isBuffer:Mo,isFormData:u9,isArrayBufferView:s9,isString:r9,isNumber:LN,isBoolean:n9,isObject:Lo,isPlainObject:Dl,isEmptyObject:a9,isReadableStream:h9,isRequest:f9,isResponse:p9,isHeaders:x9,isUndefined:za,isDate:i9,isFile:o9,isBlob:l9,isRegExp:E9,isFunction:Gt,isStream:d9,isURLSearchParams:m9,isTypedArray:S9,isFileList:c9,forEach:_o,merge:Ah,extend:y9,trim:g9,stripBOM:v9,inherits:b9,toFlatObject:j9,kindOf:Qd,kindOfTest:_s,endsWith:w9,toArray:N9,forEachEntry:k9,matchAll:C9,isHTMLForm:P9,hasOwnProperty:ay,hasOwnProp:ay,reduceDescriptors:IN,freezeMethods:T9,toObjectSet:O9,toCamelCase:A9,noop:R9,toFiniteNumber:M9,findKey:_N,global:kn,isContextDefined:DN,isSpecCompliantForm:L9,toJSONObject:_9,isAsyncFn:D9,isThenable:I9,setImmediate:$N,asap:$9,isIterable:F9};function ye(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}V.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const FN=ye.prototype,BN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{BN[e]={value:e}});Object.defineProperties(ye,BN);Object.defineProperty(FN,"isAxiosError",{value:!0});ye.from=(e,t,r,n,a,i)=>{const o=Object.create(FN);V.toFlatObject(e,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const l=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return ye.call(o,l,d,r,n,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const B9=null;function Eh(e){return V.isPlainObject(e)||V.isArray(e)}function UN(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function iy(e,t,r){return e?e.concat(t).map(function(a,i){return a=UN(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function U9(e){return V.isArray(e)&&!e.some(Eh)}const z9=V.toFlatObject(V,{},null,function(t){return/^is[A-Z]/.test(t)});function Gd(e,t,r){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,j){return!V.isUndefined(j[y])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(a))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(V.isDate(p))return p.toISOString();if(V.isBoolean(p))return p.toString();if(!d&&V.isBlob(p))throw new ye("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(p)||V.isTypedArray(p)?d&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,y,j){let N=p;if(p&&!j&&typeof p=="object"){if(V.endsWith(y,"{}"))y=n?y:y.slice(0,-2),p=JSON.stringify(p);else if(V.isArray(p)&&U9(p)||(V.isFileList(p)||V.endsWith(y,"[]"))&&(N=V.toArray(p)))return y=UN(y),N.forEach(function(b,x){!(V.isUndefined(b)||b===null)&&t.append(o===!0?iy([y],x,i):o===null?y:y+"[]",c(b))}),!1}return Eh(p)?!0:(t.append(iy(j,y,i),c(p)),!1)}const m=[],h=Object.assign(z9,{defaultVisitor:u,convertValue:c,isVisitable:Eh});function f(p,y){if(!V.isUndefined(p)){if(m.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(p),V.forEach(p,function(N,v){(!(V.isUndefined(N)||N===null)&&a.call(t,N,V.isString(v)?v.trim():v,y,h))===!0&&f(N,y?y.concat(v):[v])}),m.pop()}}if(!V.isObject(e))throw new TypeError("data must be an object");return f(e),t}function oy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function $p(e,t){this._pairs=[],e&&Gd(e,this,t)}const zN=$p.prototype;zN.append=function(t,r){this._pairs.push([t,r])};zN.toString=function(t){const r=t?function(n){return t.call(this,n,oy)}:oy;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function V9(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function VN(e,t,r){if(!t)return e;const n=r&&r.encode||V9;V.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=V.isURLSearchParams(t)?t.toString():new $p(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class ly{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){V.forEach(this.handlers,function(n){n!==null&&t(n)})}}const qN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q9=typeof URLSearchParams<"u"?URLSearchParams:$p,H9=typeof FormData<"u"?FormData:null,W9=typeof Blob<"u"?Blob:null,Q9={isBrowser:!0,classes:{URLSearchParams:q9,FormData:H9,Blob:W9},protocols:["http","https","file","blob","url","data"]},Fp=typeof window<"u"&&typeof document<"u",Th=typeof navigator=="object"&&navigator||void 0,K9=Fp&&(!Th||["ReactNative","NativeScript","NS"].indexOf(Th.product)<0),G9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Y9=Fp&&window.location.href||"http://localhost",J9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fp,hasStandardBrowserEnv:K9,hasStandardBrowserWebWorkerEnv:G9,navigator:Th,origin:Y9},Symbol.toStringTag,{value:"Module"})),At={...J9,...Q9};function X9(e,t){return Gd(e,new At.classes.URLSearchParams,{visitor:function(r,n,a,i){return At.isNode&&V.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Z9(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function eM(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function HN(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),d=i>=r.length;return o=!o&&V.isArray(a)?a.length:o,d?(V.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!V.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&V.isArray(a[o])&&(a[o]=eM(a[o])),!l)}if(V.isFormData(e)&&V.isFunction(e.entries)){const r={};return V.forEachEntry(e,(n,a)=>{t(Z9(n),a,r,0)}),r}return null}function tM(e,t,r){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Do={transitional:qN,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=V.isObject(t);if(i&&V.isHTMLForm(t)&&(t=new FormData(t)),V.isFormData(t))return a?JSON.stringify(HN(t)):t;if(V.isArrayBuffer(t)||V.isBuffer(t)||V.isStream(t)||V.isFile(t)||V.isBlob(t)||V.isReadableStream(t))return t;if(V.isArrayBufferView(t))return t.buffer;if(V.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return X9(t,this.formSerializer).toString();if((l=V.isFileList(t))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Gd(l?{"files[]":t}:t,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),tM(t)):t}],transformResponse:[function(t){const r=this.transitional||Do.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(V.isResponse(t)||V.isReadableStream(t))return t;if(t&&V.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?ye.from(l,ye.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:At.classes.FormData,Blob:At.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{Do.headers[e]={}});const sM=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rM=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&sM[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},cy=Symbol("internals");function mi(e){return e&&String(e).trim().toLowerCase()}function Il(e){return e===!1||e==null?e:V.isArray(e)?e.map(Il):String(e)}function nM(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const aM=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Zu(e,t,r,n,a){if(V.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!V.isString(t)){if(V.isString(n))return t.indexOf(n)!==-1;if(V.isRegExp(n))return n.test(t)}}function iM(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function oM(e,t){const r=V.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let Yt=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,d,c){const u=mi(d);if(!u)throw new Error("header name must be a non-empty string");const m=V.findKey(a,u);(!m||a[m]===void 0||c===!0||c===void 0&&a[m]!==!1)&&(a[m||d]=Il(l))}const o=(l,d)=>V.forEach(l,(c,u)=>i(c,u,d));if(V.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(V.isString(t)&&(t=t.trim())&&!aM(t))o(rM(t),r);else if(V.isObject(t)&&V.isIterable(t)){let l={},d,c;for(const u of t){if(!V.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[c=u[0]]=(d=l[c])?V.isArray(d)?[...d,u[1]]:[d,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=mi(t),t){const n=V.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return nM(a);if(V.isFunction(r))return r.call(this,a,n);if(V.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=mi(t),t){const n=V.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Zu(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=mi(o),o){const l=V.findKey(n,o);l&&(!r||Zu(n,n[l],l,r))&&(delete n[l],a=!0)}}return V.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||Zu(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return V.forEach(this,(a,i)=>{const o=V.findKey(n,i);if(o){r[o]=Il(a),delete r[i];return}const l=t?iM(i):String(i).trim();l!==i&&delete r[i],r[l]=Il(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return V.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&V.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[cy]=this[cy]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=mi(o);n[l]||(oM(a,o),n[l]=!0)}return V.isArray(t)?t.forEach(i):i(t),this}};Yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Yt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});V.freezeMethods(Yt);function em(e,t){const r=this||Do,n=t||r,a=Yt.from(n.headers);let i=n.data;return V.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function WN(e){return!!(e&&e.__CANCEL__)}function Xa(e,t,r){ye.call(this,e??"canceled",ye.ERR_CANCELED,t,r),this.name="CanceledError"}V.inherits(Xa,ye,{__CANCEL__:!0});function QN(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ye("Request failed with status code "+r.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function lM(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function cM(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(d){const c=Date.now(),u=n[i];o||(o=c),r[a]=d,n[a]=c;let m=i,h=0;for(;m!==a;)h+=r[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),c-o<t)return;const f=u&&c-u;return f?Math.round(h*1e3/f):void 0}}function dM(e,t){let r=0,n=1e3/t,a,i;const o=(c,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const u=Date.now(),m=u-r;m>=n?o(c,u):(a=c,i||(i=setTimeout(()=>{i=null,o(a)},n-m)))},()=>a&&o(a)]}const Fc=(e,t,r=3)=>{let n=0;const a=cM(50,250);return dM(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,d=o-n,c=a(d),u=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:d,rate:c||void 0,estimated:c&&l&&u?(l-o)/c:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},r)},dy=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},uy=e=>(...t)=>V.asap(()=>e(...t)),uM=At.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,At.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(At.origin),At.navigator&&/(msie|trident)/i.test(At.navigator.userAgent)):()=>!0,mM=At.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];V.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),V.isString(n)&&o.push("path="+n),V.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hM(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fM(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function KN(e,t,r){let n=!hM(t);return e&&(n||r==!1)?fM(e,t):t}const my=e=>e instanceof Yt?{...e}:e;function In(e,t){t=t||{};const r={};function n(c,u,m,h){return V.isPlainObject(c)&&V.isPlainObject(u)?V.merge.call({caseless:h},c,u):V.isPlainObject(u)?V.merge({},u):V.isArray(u)?u.slice():u}function a(c,u,m,h){if(V.isUndefined(u)){if(!V.isUndefined(c))return n(void 0,c,m,h)}else return n(c,u,m,h)}function i(c,u){if(!V.isUndefined(u))return n(void 0,u)}function o(c,u){if(V.isUndefined(u)){if(!V.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function l(c,u,m){if(m in t)return n(c,u);if(m in e)return n(void 0,c)}const d={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u,m)=>a(my(c),my(u),m,!0)};return V.forEach(Object.keys({...e,...t}),function(u){const m=d[u]||a,h=m(e[u],t[u],u);V.isUndefined(h)&&m!==l||(r[u]=h)}),r}const GN=e=>{const t=In({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Yt.from(o),t.url=VN(KN(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),V.isFormData(r)){if(At.hasStandardBrowserEnv||At.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const d=r.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([u,m])=>{c.includes(u.toLowerCase())&&o.set(u,m)})}}if(At.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(t)),n||n!==!1&&uM(t.url))){const d=a&&i&&mM.read(i);d&&o.set(a,d)}return t},pM=typeof XMLHttpRequest<"u",xM=pM&&function(e){return new Promise(function(r,n){const a=GN(e);let i=a.data;const o=Yt.from(a.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:c}=a,u,m,h,f,p;function y(){f&&f(),p&&p(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function N(){if(!j)return;const b=Yt.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),g={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:b,config:e,request:j};QN(function(C){r(C),y()},function(C){n(C),y()},g),j=null}"onloadend"in j?j.onloadend=N:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(N)},j.onabort=function(){j&&(n(new ye("Request aborted",ye.ECONNABORTED,e,j)),j=null)},j.onerror=function(x){const g=x&&x.message?x.message:"Network Error",k=new ye(g,ye.ERR_NETWORK,e,j);k.event=x||null,n(k),j=null},j.ontimeout=function(){let x=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const g=a.transitional||qN;a.timeoutErrorMessage&&(x=a.timeoutErrorMessage),n(new ye(x,g.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,e,j)),j=null},i===void 0&&o.setContentType(null),"setRequestHeader"in j&&V.forEach(o.toJSON(),function(x,g){j.setRequestHeader(g,x)}),V.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),l&&l!=="json"&&(j.responseType=a.responseType),c&&([h,p]=Fc(c,!0),j.addEventListener("progress",h)),d&&j.upload&&([m,f]=Fc(d),j.upload.addEventListener("progress",m),j.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(u=b=>{j&&(n(!b||b.type?new Xa(null,e,j):b),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const v=lM(a.url);if(v&&At.protocols.indexOf(v)===-1){n(new ye("Unsupported protocol "+v+":",ye.ERR_BAD_REQUEST,e));return}j.send(i||null)})},gM=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(c){if(!a){a=!0,l();const u=c instanceof Error?c:this.reason;n.abort(u instanceof ye?u:new Xa(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new ye(`timeout ${t} of ms exceeded`,ye.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:d}=n;return d.unsubscribe=()=>V.asap(l),d}},yM=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},vM=async function*(e,t){for await(const r of bM(e))yield*yM(r,t)},bM=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},hy=(e,t,r,n)=>{const a=vM(e,t);let i=0,o,l=d=>{o||(o=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:c,value:u}=await a.next();if(c){l(),d.close();return}let m=u.byteLength;if(r){let h=i+=m;r(h)}d.enqueue(new Uint8Array(u))}catch(c){throw l(c),c}},cancel(d){return l(d),a.return()}},{highWaterMark:2})},fy=64*1024,{isFunction:hl}=V,jM=(({Request:e,Response:t})=>({Request:e,Response:t}))(V.global),{ReadableStream:py,TextEncoder:xy}=V.global,gy=(e,...t)=>{try{return!!e(...t)}catch{return!1}},wM=e=>{e=V.merge.call({skipUndefined:!0},jM,e);const{fetch:t,Request:r,Response:n}=e,a=t?hl(t):typeof fetch=="function",i=hl(r),o=hl(n);if(!a)return!1;const l=a&&hl(py),d=a&&(typeof xy=="function"?(p=>y=>p.encode(y))(new xy):async p=>new Uint8Array(await new r(p).arrayBuffer())),c=i&&l&&gy(()=>{let p=!1;const y=new r(At.origin,{body:new py,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!y}),u=o&&l&&gy(()=>V.isReadableStream(new n("").body)),m={stream:u&&(p=>p.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!m[p]&&(m[p]=(y,j)=>{let N=y&&y[p];if(N)return N.call(y);throw new ye(`Response type '${p}' is not supported`,ye.ERR_NOT_SUPPORT,j)})});const h=async p=>{if(p==null)return 0;if(V.isBlob(p))return p.size;if(V.isSpecCompliantForm(p))return(await new r(At.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(V.isArrayBufferView(p)||V.isArrayBuffer(p))return p.byteLength;if(V.isURLSearchParams(p)&&(p=p+""),V.isString(p))return(await d(p)).byteLength},f=async(p,y)=>{const j=V.toFiniteNumber(p.getContentLength());return j??h(y)};return async p=>{let{url:y,method:j,data:N,signal:v,cancelToken:b,timeout:x,onDownloadProgress:g,onUploadProgress:k,responseType:C,headers:S,withCredentials:A="same-origin",fetchOptions:E}=GN(p),T=t||fetch;C=C?(C+"").toLowerCase():"text";let M=gM([v,b&&b.toAbortSignal()],x),P=null;const O=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let R;try{if(k&&c&&j!=="get"&&j!=="head"&&(R=await f(S,N))!==0){let q=new r(y,{method:"POST",body:N,duplex:"half"}),W;if(V.isFormData(N)&&(W=q.headers.get("content-type"))&&S.setContentType(W),q.body){const[ie,se]=dy(R,Fc(uy(k)));N=hy(q.body,fy,ie,se)}}V.isString(A)||(A=A?"include":"omit");const L=i&&"credentials"in r.prototype,U={...E,signal:M,method:j.toUpperCase(),headers:S.normalize().toJSON(),body:N,duplex:"half",credentials:L?A:void 0};P=i&&new r(y,U);let D=await(i?T(P,E):T(y,U));const _=u&&(C==="stream"||C==="response");if(u&&(g||_&&O)){const q={};["status","statusText","headers"].forEach($=>{q[$]=D[$]});const W=V.toFiniteNumber(D.headers.get("content-length")),[ie,se]=g&&dy(W,Fc(uy(g),!0))||[];D=new n(hy(D.body,fy,ie,()=>{se&&se(),O&&O()}),q)}C=C||"text";let I=await m[V.findKey(m,C)||"text"](D,p);return!_&&O&&O(),await new Promise((q,W)=>{QN(q,W,{data:I,headers:Yt.from(D.headers),status:D.status,statusText:D.statusText,config:p,request:P})})}catch(L){throw O&&O(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,p,P),{cause:L.cause||L}):ye.from(L,L&&L.code,p,P)}}},NM=new Map,YN=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let o=i.length,l=o,d,c,u=NM;for(;l--;)d=i[l],c=u.get(d),c===void 0&&u.set(d,c=l?new Map:wM(t)),u=c;return c};YN();const Oh={http:B9,xhr:xM,fetch:{get:YN}};V.forEach(Oh,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const yy=e=>`- ${e}`,SM=e=>V.isFunction(e)||e===null||e===!1,JN={getAdapter:(e,t)=>{e=V.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let o=0;o<r;o++){n=e[o];let l;if(a=n,!SM(n)&&(a=Oh[(l=String(n)).toLowerCase()],a===void 0))throw new ye(`Unknown adapter '${l}'`);if(a&&(V.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(yy).join(`
`):" "+yy(o[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:Oh};function tm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xa(null,e)}function vy(e){return tm(e),e.headers=Yt.from(e.headers),e.data=em.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),JN.getAdapter(e.adapter||Do.adapter,e)(e).then(function(n){return tm(e),n.data=em.call(e,e.transformResponse,n),n.headers=Yt.from(n.headers),n},function(n){return WN(n)||(tm(e),n&&n.response&&(n.response.data=em.call(e,e.transformResponse,n.response),n.response.headers=Yt.from(n.response.headers))),Promise.reject(n)})}const XN="1.12.2",Yd={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Yd[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const by={};Yd.transitional=function(t,r,n){function a(i,o){return"[Axios v"+XN+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new ye(a(o," has been removed"+(r?" in "+r:"")),ye.ERR_DEPRECATED);return r&&!by[o]&&(by[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Yd.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function kM(e,t,r){if(typeof e!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],d=l===void 0||o(l,i,e);if(d!==!0)throw new ye("option "+i+" must be "+d,ye.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ye("Unknown option "+i,ye.ERR_BAD_OPTION)}}const $l={assertOptions:kM,validators:Yd},$s=$l.validators;let En=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ly,response:new ly}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=In(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&$l.assertOptions(n,{silentJSONParsing:$s.transitional($s.boolean),forcedJSONParsing:$s.transitional($s.boolean),clarifyTimeoutError:$s.transitional($s.boolean)},!1),a!=null&&(V.isFunction(a)?r.paramsSerializer={serialize:a}:$l.assertOptions(a,{encode:$s.function,serialize:$s.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),$l.assertOptions(r,{baseUrl:$s.spelling("baseURL"),withXsrfToken:$s.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&V.merge(i.common,i[r.method]);i&&V.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=Yt.concat(o,i);const l=[];let d=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(d=d&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,m=0,h;if(!d){const p=[vy.bind(this),void 0];for(p.unshift(...l),p.push(...c),h=p.length,u=Promise.resolve(r);m<h;)u=u.then(p[m++],p[m++]);return u}h=l.length;let f=r;for(;m<h;){const p=l[m++],y=l[m++];try{f=p(f)}catch(j){y.call(this,j);break}}try{u=vy.call(this,f)}catch(p){return Promise.reject(p)}for(m=0,h=c.length;m<h;)u=u.then(c[m++],c[m++]);return u}getUri(t){t=In(this.defaults,t);const r=KN(t.baseURL,t.url,t.allowAbsoluteUrls);return VN(r,t.params,t.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(t){En.prototype[t]=function(r,n){return this.request(In(n||{},{method:t,url:r,data:(n||{}).data}))}});V.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(In(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}En.prototype[t]=r(),En.prototype[t+"Form"]=r(!0)});let CM=class ZN{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Xa(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new ZN(function(a){t=a}),cancel:t}}};function PM(e){return function(r){return e.apply(null,r)}}function AM(e){return V.isObject(e)&&e.isAxiosError===!0}const Rh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rh).forEach(([e,t])=>{Rh[t]=e});function e1(e){const t=new En(e),r=ON(En.prototype.request,t);return V.extend(r,En.prototype,t,{allOwnKeys:!0}),V.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return e1(In(e,a))},r}const et=e1(Do);et.Axios=En;et.CanceledError=Xa;et.CancelToken=CM;et.isCancel=WN;et.VERSION=XN;et.toFormData=Gd;et.AxiosError=ye;et.Cancel=et.CanceledError;et.all=function(t){return Promise.all(t)};et.spread=PM;et.isAxiosError=AM;et.mergeConfig=In;et.AxiosHeaders=Yt;et.formToJSON=e=>HN(V.isHTMLForm(e)?new FormData(e):e);et.getAdapter=JN.getAdapter;et.HttpStatusCode=Rh;et.default=et;const{Axios:K_,AxiosError:G_,CanceledError:Y_,isCancel:J_,CancelToken:X_,VERSION:Z_,all:eD,Cancel:tD,isAxiosError:sD,spread:rD,toFormData:nD,AxiosHeaders:aD,HttpStatusCode:iD,formToJSON:oD,getAdapter:lD,mergeConfig:cD}=et,t1="http://localhost:5001",Bc=et.create({baseURL:t1,withCredentials:!0});Bc.interceptors.request.use(e=>{var n,a;const r=(a=(n=Cc.getState().auth)==null?void 0:n.tokens)==null?void 0:a.accessToken;return r&&(e.headers.Authorization=`Bearer ${r}`),e});Bc.interceptors.response.use(e=>e,async e=>{var t,r;if(((t=e==null?void 0:e.response)==null?void 0:t.status)===401)try{const n=await et.post(`${t1}/api/auth/refresh`);if((r=n.data)!=null&&r.accessToken)return Cc.dispatch({type:"auth/setTokens",payload:{accessToken:n.data.accessToken,refreshToken:n.data.refreshToken||null}}),e.config.headers.Authorization=`Bearer ${n.data.accessToken}`,Bc.request(e.config)}catch{console.log("Auto-logout: refresh token failed"),Cc.dispatch({type:"auth/logout"}),window.location.href="/login"}return Promise.reject(e)});function s1(){async function e(){var t;try{const r=await Bc.post("/api/auth/refresh");return(t=r.data)!=null&&t.accessToken?(localStorage.setItem("accessToken",r.data.accessToken),!0):!1}catch{return!1}}return{refreshToken:e}}const Mh={biscuit:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=",laddu:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=",chocolate:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=",default:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="},jy={biscuit:["#FF6B6B","#FF8E8E","#FFB1B1"],laddu:["#4ECDC4","#7EDDD6","#A8E6E1"],chocolate:["#8B4513","#A0522D","#CD853F"],default:["#95A5A6","#BDC3C7","#D5DBDB"]},Pe=(e="default",t="Product",r=300,n=300)=>{const a=jy[e]||jy.default,i=a[Math.floor(Math.random()*a.length)],o=`<svg xmlns="http://www.w3.org/2000/svg" width="${r}" height="${n}">
    <rect width="100%" height="100%" fill="${i}"/>
    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="16">${t}</text>
  </svg>`;return{src:`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(o)))}`,lqip:Mh[e]||Mh.default,alt:`${t} - ${e}`,width:r,height:n}};Pe("biscuit","Parle-G Original",300,300),Pe("biscuit","Monaco Salted",300,300),Pe("biscuit","Good Day Cashew",300,300),Pe("biscuit","Marie Gold",300,300),Pe("biscuit","Oreo Original",300,300),Pe("biscuit","Bourbon Chocolate",300,300),Pe("biscuit","Cream Biscuits",300,300),Pe("biscuit","Digestive Biscuits",300,300),Pe("biscuit","Coconut Biscuits",300,300),Pe("biscuit","Butter Biscuits",300,300),Pe("laddu","Besan Laddu",300,300),Pe("laddu","Rava Laddu",300,300),Pe("laddu","Coconut Laddu",300,300),Pe("laddu","Motichoor Laddu",300,300),Pe("laddu","Kaju Laddu",300,300),Pe("laddu","Badam Laddu",300,300),Pe("laddu","Pista Laddu",300,300),Pe("laddu","Dry Fruit Laddu",300,300),Pe("laddu","Til Laddu",300,300),Pe("laddu","Gur Laddu",300,300),Pe("chocolate","Milk Chocolate Bar",300,300),Pe("chocolate","Dark Chocolate Bar",300,300),Pe("chocolate","White Chocolate Bar",300,300),Pe("chocolate","Chocolate Truffles",300,300),Pe("chocolate","Chocolate Coins",300,300),Pe("chocolate","Chocolate Balls",300,300),Pe("chocolate","Chocolate Cookies",300,300),Pe("chocolate","Chocolate Biscuits",300,300),Pe("chocolate","Chocolate Wafers",300,300),Pe("chocolate","Chocolate Cream",300,300);const EM=(e="Image",t=300,r=300,n="FF6B6B",a="4ECDC4")=>{const i=`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${r}">
    <defs>
      <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#${n};stop-opacity:1" />
        <stop offset="100%" style="stop-color:#${a};stop-opacity:1" />
      </linearGradient>
    </defs>
    <rect width="100%" height="100%" fill="url(#grad)"/>
    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="16">${e}</text>
  </svg>`;return{src:`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(i)))}`,lqip:Mh.default}},wy=()=>{var b;const e=ce(),t=tt(),r=de(x=>x.auth),[n,a]=w.useState("all");console.log(" HomePage rendering - Auth state:",{isAuthenticated:r.isAuthenticated,user:r.user,hasTokens:!!(r.tokens.accessToken&&r.tokens.refreshToken)});const{data:i,isLoading:o,error:l,refetch:d}=rp({limit:100});w.useEffect(()=>{var x,g;if(console.log("[HomePage] productsData loaded:",(x=i==null?void 0:i.products)==null?void 0:x.length,"products"),((g=i==null?void 0:i.products)==null?void 0:g.length)>0){const k=i.products[0];if(console.log("[HomePage] first product sample:",k),console.log("[HomePage] first product images structure:",k.images),k.images&&k.images.length>0){const C=k.images[0];console.log("[HomePage] first image object:",C),console.log("[HomePage] first image keys:",Object.keys(C||{})),console.log("[HomePage] has variants:","variants"in C),console.log("[HomePage] has formats:","formats"in C),console.log("[HomePage] has metadata:","metadata"in C),C.variants&&(console.log("[HomePage] variants keys:",Object.keys(C.variants)),console.log("[HomePage] variants.small:",C.variants.small)),C.formats&&(console.log("[HomePage] formats keys:",Object.keys(C.formats)),console.log("[HomePage] formats.avif:",C.formats.avif)),C.metadata&&(console.log("[HomePage] metadata keys:",Object.keys(C.metadata)),console.log("[HomePage] metadata.aspectRatio:",C.metadata.aspectRatio))}}},[i]);const[c]=Md(),{success:u,error:m}=Ns(),{showOtpModal:h}=Id(),{refreshToken:f}=s1();w.useEffect(()=>{(async()=>{var g;if(r.isAuthenticated&&((g=r.tokens)!=null&&g.accessToken))try{const k=JSON.parse(atob(r.tokens.accessToken.split(".")[1])),C=Math.floor(Date.now()/1e3);k.exp<C&&(console.log(" Access token expired, attempting to refresh..."),await f()||console.log(" Token refresh failed, user will be logged out"))}catch{console.log(" Invalid token format, attempting to refresh..."),await f()||console.log(" Token refresh failed, user will be logged out")}})()},[r.isAuthenticated,(b=r.tokens)==null?void 0:b.accessToken,t,f]),w.useEffect(()=>{if(r.isAuthenticated)return;if(new URLSearchParams(window.location.search).get("showLogin")==="true"){h("/account/profile");const k=window.location.pathname;window.history.replaceState({},"",k)}},[h,r.isAuthenticated]);const p=w.useMemo(()=>!(i!=null&&i.products)||i.products.length===0?[]:[...i.products].sort(()=>Math.random()-.5).slice(0,8).map(g=>{var k,C,S,A,E,T,M,P,O,R;return{_id:g._id||g.id,id:g._id||g.id,name:g.name,image:((S=(C=(k=g.images)==null?void 0:k[0])==null?void 0:C.variants)==null?void 0:S.small)||((T=(E=(A=g.images)==null?void 0:A[0])==null?void 0:E.variants)==null?void 0:T.thumb)||((P=(M=g.images)==null?void 0:M[0])==null?void 0:P.thumb)||((R=(O=g.images)==null?void 0:O[0])==null?void 0:R.full)||"/placeholder-product.svg",category:g.category}}),[i==null?void 0:i.products]),y=w.useMemo(()=>!(i!=null&&i.products)||i.products.length===0?[]:[...i.products].sort(()=>Math.random()-.5).slice(0,6).map(g=>{var k,C,S,A,E,T,M,P,O,R;return{id:g._id||g.id,name:g.name,image:((S=(C=(k=g.images)==null?void 0:k[0])==null?void 0:C.variants)==null?void 0:S.small)||((T=(E=(A=g.images)==null?void 0:A[0])==null?void 0:E.variants)==null?void 0:T.thumb)||((P=(M=g.images)==null?void 0:M[0])==null?void 0:P.thumb)||((R=(O=g.images)==null?void 0:O[0])==null?void 0:R.full)||"/placeholder-product.svg",category:g.category,price:g.price,mrp:g.mrp||g.price*1.2,discountedPrice:g.price,originalPrice:g.mrp?g.mrp:g.price*1.2,discount:g.mrp?Math.round((g.mrp-g.price)/g.mrp*100):20}}),[i==null?void 0:i.products]),j=w.useMemo(()=>!(i!=null&&i.products)||i.products.length===0?[]:i.products.slice(0,12).map(x=>({...x,_id:x._id||x.id,id:x._id||x.id,mrp:x.mrp||0,discount:x.mrp&&x.mrp>x.price?Math.round((x.mrp-x.price)/x.mrp*100):0})),[i==null?void 0:i.products]);w.useEffect(()=>{const x=()=>{document.hidden||d()},g=()=>{d()};return document.addEventListener("visibilitychange",x),window.addEventListener("focus",g),()=>{document.removeEventListener("visibilitychange",x),window.removeEventListener("focus",g)}},[d]);const N=x=>{a(x)},v=async(x,g)=>{var k,C,S,A,E,T,M,P,O,R;if(g.stopPropagation(),!r.isAuthenticated){e("/login");return}try{t(Rd({id:x._id||x.id,name:x.name,price:x.price,quantity:1,image:((S=(C=(k=x.images)==null?void 0:k[0])==null?void 0:C.variants)==null?void 0:S.small)||((T=(E=(A=x.images)==null?void 0:A[0])==null?void 0:E.variants)==null?void 0:T.thumb)||((P=(M=x.images)==null?void 0:M[0])==null?void 0:P.thumb)||((R=(O=x.images)==null?void 0:O[0])==null?void 0:R.full)||"/placeholder-product.svg"}));const L=await c({productId:x._id||x.id,quantity:1});L&&"data"in L&&L.data&&t(Co({items:L.data.cart.items,total:L.data.cart.total,itemCount:L.data.cart.itemCount})),u("Added to Cart",`${x.name} has been added to your cart.`)}catch(L){console.error("Error adding to cart:",L),m("Failed to add to cart","Please try again.")}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]})}):l?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Products"}),s.jsx("p",{className:"text-gray-600 mb-4",children:l&&"message"in l?l.message:"Something went wrong while loading products."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):s.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[s.jsxs("div",{className:"sr-only",children:[s.jsx("h1",{children:"CS Store - Online Shopping for Electronics, Fashion & More"}),s.jsx("h2",{children:"Welcome to CS Store"}),s.jsx("p",{children:"CS Store is your one-stop destination for online shopping. Discover amazing deals on electronics, fashion, home & garden, and more. We offer fast delivery, secure payments, and excellent customer service."}),s.jsx("h3",{children:"Shop by Category"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Electronics - Latest smartphones, laptops, gadgets and more"}),s.jsx("li",{children:"Fashion - Trendy clothing, shoes, accessories for men and women"})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gradient-to-r from-secondary-50 via-orange-50 to-yellow-50 py-8 px-4 shadow-flipkart relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-orange-200 to-red-200 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-pink-200 to-orange-200 rounded-full blur-2xl"})]}),s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(e9,{products:p})})]}),!r.isAuthenticated&&s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Browse Categories"}),s.jsxs("div",{className:"grid grid-cols-3 gap-8 max-w-7xl mx-auto",children:[s.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N("chocolates"),className:`relative bg-gradient-to-br from-orange-500 to-red-600 rounded-lg p-8 text-white overflow-hidden group min-h-[200px] ${n==="chocolates"?"ring-4 ring-orange-300":""}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-base opacity-90 mb-3",children:"Premium chocolates & more"}),s.jsx("div",{className:"text-2xl font-bold mb-3",children:"Chocolates"}),s.jsx("div",{className:"text-lg opacity-90",children:"From 99"})]}),s.jsx("div",{className:"absolute -bottom-4 -right-4 text-8xl opacity-20 group-hover:opacity-30 transition-opacity",children:""})]}),s.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N("biscuits"),className:`relative bg-gradient-to-br from-orange-500 to-red-600 rounded-lg p-8 text-white overflow-hidden group min-h-[200px] ${n==="biscuits"?"ring-4 ring-orange-300":""}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-base opacity-90 mb-3",children:"Crunchy & crispy"}),s.jsx("div",{className:"text-2xl font-bold mb-3",children:"Biscuits"}),s.jsx("div",{className:"text-lg opacity-90",children:"From 49"})]}),s.jsx("div",{className:"absolute -bottom-4 -right-4 text-8xl opacity-20 group-hover:opacity-30 transition-opacity",children:""})]}),s.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N("ladoos"),className:`relative bg-gradient-to-br from-orange-500 to-red-600 rounded-lg p-8 text-white overflow-hidden group min-h-[200px] ${n==="ladoos"?"ring-4 ring-orange-300":""}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-base opacity-90 mb-3",children:"Traditional sweets"}),s.jsx("div",{className:"text-2xl font-bold mb-3",children:"Festive Ladoos"}),s.jsx("div",{className:"text-lg opacity-90",children:"From 199"})]}),s.jsx("div",{className:"absolute -bottom-4 -right-4 text-8xl opacity-20 group-hover:opacity-30 transition-opacity",children:""})]}),s.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N("cakes"),className:`relative bg-gradient-to-br from-orange-500 to-red-600 rounded-lg p-8 text-white overflow-hidden group min-h-[200px] ${n==="cakes"?"ring-4 ring-orange-300":""}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-base opacity-90 mb-3",children:"Fresh baked daily"}),s.jsx("div",{className:"text-2xl font-bold mb-3",children:"Birthday Cakes"}),s.jsx("div",{className:"text-lg opacity-90",children:"From 299"})]}),s.jsx("div",{className:"absolute -bottom-4 -right-4 text-8xl opacity-20 group-hover:opacity-30 transition-opacity",children:""})]}),s.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N("hot_snacks"),className:`relative bg-gradient-to-br from-orange-500 to-red-600 rounded-lg p-8 text-white overflow-hidden group min-h-[200px] ${n==="hot_snacks"?"ring-4 ring-orange-300":""}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-base opacity-90 mb-3",children:"Spicy & tangy"}),s.jsx("div",{className:"text-2xl font-bold mb-3",children:"Hot Snacks"}),s.jsx("div",{className:"text-lg opacity-90",children:"From 99"})]}),s.jsx("div",{className:"absolute -bottom-4 -right-4 text-8xl opacity-20 group-hover:opacity-30 transition-opacity",children:""})]}),s.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N("beverages"),className:`relative bg-gradient-to-br from-orange-500 to-red-600 rounded-lg p-8 text-white overflow-hidden group min-h-[200px] ${n==="beverages"?"ring-4 ring-orange-300":""}`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-base opacity-90 mb-3",children:"Refreshing drinks"}),s.jsx("div",{className:"text-2xl font-bold mb-3",children:"Beverages"}),s.jsx("div",{className:"text-lg opacity-90",children:"From 29"})]}),s.jsx("div",{className:"absolute -bottom-4 -right-4 text-8xl opacity-20 group-hover:opacity-30 transition-opacity",children:""})]})]})]})}),!r.isAuthenticated&&s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-8 text-gray-800",children:"Featured Products"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:j.map(x=>{var g;return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden group cursor-pointer",onClick:()=>e(`/product/${x._id||x.id}`),children:[s.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.jsx(an,{image:((g=x.images)==null?void 0:g[0])||{variants:{micro:"/placeholder-product.svg",thumb:"/placeholder-product.svg",small:"/placeholder-product.svg",medium:"/placeholder-product.svg",large:"/placeholder-product.svg",original:"/placeholder-product.svg"}},size:"small",alt:x.name,className:"w-full h-full group-hover:scale-105 transition-transform duration-300",productId:x._id||x.id,debug:!1}),x.discount>0&&s.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:[x.discount,"% OFF"]}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10 group-hover:bg-opacity-0 transition-opacity duration-300"})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 truncate",children:x.name}),s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:x.category}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",x.price.toFixed(2)]}),x.mrp&&x.mrp>x.price&&s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",x.mrp.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center text-yellow-500",children:[s.jsx(ct,{className:"h-4 w-4 fill-current"}),s.jsx("span",{className:"ml-1 text-sm text-gray-600",children:"4.5"})]})]}),s.jsx("button",{onClick:k=>{if(k.stopPropagation(),!r.isAuthenticated){e("/login");return}v(x,k)},className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg transition-colors duration-300 font-semibold",children:"Add to Cart"})]})]},x._id||x.id)})})]})}),!r.isAuthenticated&&s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gradient-to-r from-red-50 via-orange-50 to-yellow-50 py-8 px-4 shadow-lg relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-red-200 to-orange-200 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-yellow-200 to-red-200 rounded-full blur-2xl"})]}),s.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:" Top Deals"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Limited time offers - Don't miss out!"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map((x,g)=>{var k;return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:g*.1},className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 overflow-hidden group cursor-pointer",onClick:()=>e(`/product/${x.id}`),children:[s.jsxs("div",{className:"relative h-56 overflow-hidden",children:[s.jsx(an,{image:((k=x.images)==null?void 0:k[0])||{variants:{micro:"/placeholder-product.svg",thumb:"/placeholder-product.svg",small:"/placeholder-product.svg",medium:"/placeholder-product.svg",large:"/placeholder-product.svg",original:"/placeholder-product.svg"}},size:"small",alt:x.name,className:"w-full h-full",productId:x.id,debug:!1}),x.discount>0&&s.jsxs("span",{className:"absolute top-3 left-3 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:[x.discount,"% OFF"]})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2 truncate",children:x.name}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:x.category}),s.jsxs("div",{className:"flex items-baseline space-x-2 mb-4",children:[s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",x.discountedPrice.toFixed(2)]}),x.originalPrice>x.discountedPrice&&s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",x.originalPrice.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsxs("div",{className:"flex text-yellow-400",children:[s.jsx(ct,{className:"h-4 w-4 fill-current"}),s.jsx(ct,{className:"h-4 w-4 fill-current"}),s.jsx(ct,{className:"h-4 w-4 fill-current"}),s.jsx(ct,{className:"h-4 w-4 fill-current"}),s.jsx(ct,{className:"h-4 w-4 text-gray-300"})]}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"4.5"})]}),s.jsx("button",{onClick:C=>{if(C.stopPropagation(),!r.isAuthenticated){e("/login");return}v(x,C)},className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg transition-colors duration-300 font-semibold",children:"Add to Cart"})]})]},x.id)})})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"For better experience, download the CS Store now"}),s.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Get the best shopping experience with our mobile app"}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6",children:[s.jsx("button",{onClick:()=>e("/download-app"),className:"bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition-colors shadow-lg hover:shadow-xl transform hover:scale-105",children:"Download App"}),s.jsx("button",{onClick:()=>e("/download-app"),className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-white hover:text-blue-600 transition-colors",children:"Learn More"})]}),s.jsxs("div",{className:"mt-8 flex justify-center space-x-8 text-blue-100",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:"4.8"}),s.jsx("div",{className:"text-sm",children:"App Store Rating"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:"1M+"}),s.jsx("div",{className:"text-sm",children:"Downloads"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:"24/7"}),s.jsx("div",{className:"text-sm",children:"Support"})]})]})]})})}),s.jsxs("footer",{className:"bg-gray-900 text-white mt-16",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"ABOUT"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/contact-us",className:"hover:text-orange-400 transition-colors",children:"Contact Us"})}),s.jsx("li",{children:s.jsx(fe,{to:"/about-us",className:"hover:text-orange-400 transition-colors",children:"About Us"})}),s.jsx("li",{children:s.jsx(fe,{to:"/careers",className:"hover:text-orange-400 transition-colors",children:"Careers"})}),s.jsx("li",{children:s.jsx(fe,{to:"/cs-store-stories",className:"hover:text-orange-400 transition-colors",children:"CS Store Stories"})}),s.jsx("li",{children:s.jsx(fe,{to:"/corporate-information",className:"hover:text-orange-400 transition-colors",children:"Corporate Information"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"HELP"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/payment",className:"hover:text-orange-400 transition-colors",children:"Payments"})}),s.jsx("li",{children:s.jsx(fe,{to:"/shipping",className:"hover:text-orange-400 transition-colors",children:"Shipping"})}),s.jsx("li",{children:s.jsx(fe,{to:"/cancellation",className:"hover:text-orange-400 transition-colors",children:"Cancellation & Returns"})}),s.jsx("li",{children:s.jsx(fe,{to:"/faq",className:"hover:text-orange-400 transition-colors",children:"FAQ"})}),s.jsx("li",{children:s.jsx(fe,{to:"/report-infringement",className:"hover:text-orange-400 transition-colors",children:"Report Infringement"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"CONSUMER POLICY"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/terms",className:"hover:text-orange-400 transition-colors",children:"Terms Of Use"})}),s.jsx("li",{children:s.jsx(fe,{to:"/security",className:"hover:text-orange-400 transition-colors",children:"Security"})}),s.jsx("li",{children:s.jsx(fe,{to:"/privacy",className:"hover:text-orange-400 transition-colors",children:"Privacy"})}),s.jsx("li",{children:s.jsx(fe,{to:"/sitemap",className:"hover:text-orange-400 transition-colors",children:"Sitemap"})}),s.jsx("li",{children:s.jsx(fe,{to:"/grievance",className:"hover:text-orange-400 transition-colors",children:"Grievance Redressal"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"Mail Us:"}),s.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["CS Store Internet Private Limited,",s.jsx("br",{}),"Buildings Alyssa, Begonia & Clove Embassy Tech Village,",s.jsx("br",{}),"Outer Ring Road, Devarabeesanahalli Village,",s.jsx("br",{}),"Bengaluru, 560103,",s.jsx("br",{}),"Karnataka, India"]}),s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"Registered Office Address:"}),s.jsxs("p",{className:"text-sm text-gray-400",children:["CS Store Internet Private Limited,",s.jsx("br",{}),"Buildings Alyssa, Begonia & Clove Embassy Tech Village,",s.jsx("br",{}),"Outer Ring Road, Devarabeesanahalli Village,",s.jsx("br",{}),"Bengaluru, 560103,",s.jsx("br",{}),"Karnataka, India",s.jsx("br",{}),"CIN : U51109KA2012PTC066107",s.jsx("br",{}),"Telephone:"," ",s.jsx("a",{href:"tel:044-45614700",className:"hover:text-orange-400",children:"044-45614700"})]})]})]})}),s.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 pb-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center text-sm text-gray-400",children:[s.jsxs("div",{className:"flex space-x-6 mb-4 md:mb-0",children:[s.jsx(fe,{to:"/seller",className:"hover:text-orange-400",children:"Become a Seller"}),s.jsx(fe,{to:"/advertise",className:"hover:text-orange-400",children:"Advertise"}),s.jsx(fe,{to:"/gift-cards",className:"hover:text-orange-400",children:"Gift Cards"}),s.jsx(fe,{to:"/help",className:"hover:text-orange-400",children:"Help Center"})]}),s.jsx("div",{className:"mb-4 md:mb-0",children:" 2023-2024 CS Store.com"}),s.jsx("div",{children:s.jsx("img",{src:EM("Banner",1200,300).src,alt:"Payment Methods",className:"h-6"})})]})})]})]})};function Ny(e){return e?e!=null&&e.variants?e.variants.thumb||e.variants.small||e.variants.micro||e.variants.medium||e.variants.original||"/placeholder-product.svg":typeof e=="object"?e.thumb||e.full||"/placeholder-product.svg":typeof e=="string"?!e.startsWith("http")&&!e.startsWith("/")?`http://localhost:5001/uploads/${e}`:e.startsWith("/uploads")?`http://localhost:5001${e}`:e:"/placeholder-product.svg":"/placeholder-product.svg"}function Tn(e){var t;return((t=e==null?void 0:e.images)==null?void 0:t.length)>0?Ny(e.images[0]):e!=null&&e.image?Ny(e.image):"/placeholder-product.svg"}function r1(e,t="/placeholder-product.svg"){const r=e.currentTarget;r.src!==t&&(r.src=t)}function _t({width:e="100%",height:t="1rem",className:r=""}){return s.jsx("div",{className:`bg-gray-200 rounded-lg animate-pulse ${r}`,style:{width:typeof e=="number"?`${e}px`:e,height:typeof t=="number"?`${t}px`:t,backgroundImage:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})}const n1=document.createElement("style");n1.textContent=`
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
`;document.head.appendChild(n1);function TM(){return s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx(_t,{height:"200px",className:"w-full"}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsx(_t,{height:"1.25rem",className:"w-3/4"}),s.jsx(_t,{height:"1rem",className:"w-1/4"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(_t,{height:"0.75rem",className:"w-full"}),s.jsx(_t,{height:"0.75rem",className:"w-5/6"})]}),s.jsx(_t,{height:"2.5rem",className:"w-full mt-4"})]})]})}const OM=()=>{var b;const e=ce(),t=tt(),r=de(x=>x.auth),[n,a]=w.useState("all"),[i,o]=w.useState("price_low_high");console.log(" DashboardPage rendering - Auth state:",{isAuthenticated:r.isAuthenticated,user:r.user,hasTokens:!!(r.tokens.accessToken&&r.tokens.refreshToken)});const[l]=Md(),{success:d,error:c}=Ns(),{refreshToken:u}=s1(),{triggerGlobalConfirmation:m}=Dp();w.useEffect(()=>{(async()=>{var g;if(r.isAuthenticated&&((g=r.tokens)!=null&&g.accessToken))try{const k=JSON.parse(atob(r.tokens.accessToken.split(".")[1])),C=Math.floor(Date.now()/1e3);k.exp<C&&(console.log(" Access token expired, attempting to refresh..."),await u()||console.log(" Token refresh failed, user will be logged out"))}catch{console.log(" Invalid token format, attempting to refresh..."),await u()||console.log(" Token refresh failed, user will be logged out")}})()},[r.isAuthenticated,(b=r.tokens)==null?void 0:b.accessToken,t,u]);const{data:h,isLoading:f,error:p,refetch:y}=rp({limit:100}),j=w.useMemo(()=>{if(!(h!=null&&h.products)||h.products.length===0)return[];let x=h.products;return n!=="all"&&(x=h.products.filter(k=>k.category===n)),x=[...x].sort(()=>Math.random()-.5),[...x].sort((k,C)=>{switch(i){case"price_low_high":return k.price-C.price;case"price_high_low":return C.price-k.price;case"name_a_z":return k.name.localeCompare(C.name);case"name_z_a":return C.name.localeCompare(k.name);case"newest":return new Date(C.createdAt).getTime()-new Date(k.createdAt).getTime();case"oldest":return new Date(k.createdAt).getTime()-new Date(C.createdAt).getTime();default:return 0}}).map(k=>({...k,mrp:k.mrp||0,discount:k.mrp&&k.mrp>k.price?Math.round((k.mrp-k.price)/k.mrp*100):0}))},[h==null?void 0:h.products,n,i]),N=[{id:"all",name:"For You"},{id:"chocolates",name:"Chocolates"},{id:"biscuits",name:"Biscuits"},{id:"ladoos",name:"Ladoos"},{id:"cakes",name:"Cakes"},{id:"hot_snacks",name:"Hot Snacks"}];w.useEffect(()=>{const x=()=>{document.hidden||y()},g=()=>{y()};return document.addEventListener("visibilitychange",x),window.addEventListener("focus",g),()=>{document.removeEventListener("visibilitychange",x),window.removeEventListener("focus",g)}},[y]);const v=async(x,g)=>{if(g.stopPropagation(),!r.isAuthenticated){e("/login");return}try{t(Rd({id:x._id||x.id,name:x.name,price:x.price,quantity:1,image:Tn(x)}));const k=await l({productId:x._id||x.id,quantity:1});k&&"data"in k&&k.data&&t(Co({items:k.data.cart.items,total:k.data.cart.total,itemCount:k.data.cart.itemCount}));const C=Tn(x),S=k&&"data"in k&&k.data?k.data.cart.itemCount:1,A=k&&"data"in k&&k.data?k.data.cart.total:x.price;m(x.name,C,S,A),d("Added to Cart",`${x.name} has been added to your cart.`)}catch(k){console.error("Error adding to cart:",k),c("Failed to add to cart","Please try again.")}};return f?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]})}):p?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Products"}),s.jsx("p",{className:"text-gray-600 mb-4",children:p&&"message"in p?p.message:"Something went wrong while loading products."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):s.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[s.jsxs("div",{className:"sr-only",children:[s.jsx("h1",{children:"CS Store - Online Shopping for Electronics, Fashion & More"}),s.jsx("h2",{children:"Welcome to CS Store"}),s.jsx("p",{children:"CS Store is your one-stop destination for online shopping. Discover amazing deals on electronics, fashion, home & garden, and more. We offer fast delivery, secure payments, and excellent customer service."}),s.jsx("h3",{children:"Shop by Category"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Electronics - Latest smartphones, laptops, gadgets and more"}),s.jsx("li",{children:"Fashion - Trendy clothing, shoes, accessories for men and women"})]})]}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"py-8 px-4 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-8",children:[s.jsx("div",{className:"flex flex-wrap gap-4",children:N.map(x=>s.jsx("button",{onClick:()=>a(x.id),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${n===x.id?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x.name},x.id))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),s.jsxs("select",{value:i,onChange:x=>o(x.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"price_low_high",children:"Price: Low to High"}),s.jsx("option",{value:"price_high_low",children:"Price: High to Low"}),s.jsx("option",{value:"name_a_z",children:"Name: A to Z"}),s.jsx("option",{value:"name_z_a",children:"Name: Z to A"}),s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"oldest",children:"Oldest First"})]})]})]}),f?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:Array.from({length:8}).map((x,g)=>s.jsx(TM,{},g))}):j.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:j.map(x=>s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onClick:()=>e(`/product/${x._id||x.id}`),className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden group cursor-pointer",children:[s.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.jsx("img",{src:Tn(x),alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:g=>r1(g)}),x.mrp&&x.mrp>x.price&&s.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:[Math.round((x.mrp-x.price)/x.mrp*100),"% OFF"]}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10 group-hover:bg-opacity-0 transition-opacity duration-300"})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1 truncate",children:x.name}),s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:x.category}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",x.price.toFixed(2)]}),x.mrp&&x.mrp>x.price&&s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",x.mrp.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center text-yellow-500",children:[s.jsx(ct,{className:"h-4 w-4 fill-current"}),s.jsx("span",{className:"ml-1 text-sm text-gray-600",children:"4.5"})]})]}),s.jsx("button",{onClick:g=>{if(g.stopPropagation(),!r.isAuthenticated){e("/login");return}v(x,g)},className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg transition-colors duration-300 font-semibold",children:"Add to Cart"})]})]},x._id||x.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Products Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:n!=="all"?"Try adjusting your filter criteria.":"No products are available at the moment."}),n!=="all"&&s.jsx("button",{onClick:()=>a("all"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Filters"})]})]})}),s.jsxs("footer",{className:"bg-gray-900 text-white mt-16",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"ABOUT"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/contact-us",className:"hover:text-orange-400 transition-colors",children:"Contact Us"})}),s.jsx("li",{children:s.jsx(fe,{to:"/about-us",className:"hover:text-orange-400 transition-colors",children:"About Us"})}),s.jsx("li",{children:s.jsx(fe,{to:"/careers",className:"hover:text-orange-400 transition-colors",children:"Careers"})}),s.jsx("li",{children:s.jsx(fe,{to:"/cs-store-stories",className:"hover:text-orange-400 transition-colors",children:"CS Store Stories"})}),s.jsx("li",{children:s.jsx(fe,{to:"/corporate-information",className:"hover:text-orange-400 transition-colors",children:"Corporate Information"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"HELP"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/payment",className:"hover:text-orange-400 transition-colors",children:"Payments"})}),s.jsx("li",{children:s.jsx(fe,{to:"/shipping",className:"hover:text-orange-400 transition-colors",children:"Shipping"})}),s.jsx("li",{children:s.jsx(fe,{to:"/cancellation",className:"hover:text-orange-400 transition-colors",children:"Cancellation & Returns"})}),s.jsx("li",{children:s.jsx(fe,{to:"/faq",className:"hover:text-orange-400 transition-colors",children:"FAQ"})}),s.jsx("li",{children:s.jsx(fe,{to:"/report-infringement",className:"hover:text-orange-400 transition-colors",children:"Report Infringement"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"CONSUMER POLICY"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/terms",className:"hover:text-orange-400 transition-colors",children:"Terms Of Use"})}),s.jsx("li",{children:s.jsx(fe,{to:"/security",className:"hover:text-orange-400 transition-colors",children:"Security"})}),s.jsx("li",{children:s.jsx(fe,{to:"/privacy",className:"hover:text-orange-400 transition-colors",children:"Privacy"})}),s.jsx("li",{children:s.jsx(fe,{to:"/sitemap",className:"hover:text-orange-400 transition-colors",children:"Sitemap"})}),s.jsx("li",{children:s.jsx(fe,{to:"/grievance",className:"hover:text-orange-400 transition-colors",children:"Grievance Redressal"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"Mail Us:"}),s.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["CS Store Internet Private Limited,",s.jsx("br",{}),"Buildings Alyssa, Begonia & Clove Embassy Tech Village,",s.jsx("br",{}),"Outer Ring Road, Devarabeesanahalli Village,",s.jsx("br",{}),"Bengaluru, 560103,",s.jsx("br",{}),"Karnataka, India"]}),s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"Registered Office Address:"}),s.jsxs("p",{className:"text-sm text-gray-400",children:["CS Store Internet Private Limited,",s.jsx("br",{}),"Buildings Alyssa, Begonia & Clove Embassy Tech Village,",s.jsx("br",{}),"Outer Ring Road, Devarabeesanahalli Village,",s.jsx("br",{}),"Bengaluru, 560103,",s.jsx("br",{}),"Karnataka, India",s.jsx("br",{}),"CIN : U51109KA2012PTC066107",s.jsx("br",{}),"Telephone:"," ",s.jsx("a",{href:"tel:044-45614700",className:"hover:text-orange-400",children:"044-45614700"})]})]})]})}),s.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 pb-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center text-sm text-gray-400",children:[s.jsxs("div",{className:"flex space-x-6 mb-4 md:mb-0",children:[s.jsx(fe,{to:"/seller",className:"hover:text-orange-400",children:"Become a Seller"}),s.jsx(fe,{to:"/advertise",className:"hover:text-orange-400",children:"Advertise"}),s.jsx(fe,{to:"/gift-cards",className:"hover:text-orange-400",children:"Gift Cards"}),s.jsx(fe,{to:"/help",className:"hover:text-orange-400",children:"Help Center"})]}),s.jsx("div",{className:"mb-4 md:mb-0",children:" 2023-2024 CS Store.com"}),s.jsx("div",{children:s.jsx("div",{className:"text-sm text-gray-400",children:"Secure Payments Available"})})]})})]})]})},RM=w.memo(({product:e,onQuickView:t})=>{var p;const r=tt(),n=ce(),a=de(y=>y.auth),[i,{isLoading:o}]=Md(),{success:l,error:d}=Ns(),[c,u]=w.useState(!1),{triggerGlobalConfirmation:m}=Dp(),h=async()=>{var y,j,N,v,b,x,g,k,C,S,A,E,T,M,P,O,R,L;if(e.stock!==0){if(!a.isAuthenticated){u(!0);return}try{r(Rd({id:e._id,name:e.name,price:e.price,image:((N=(j=(y=e.images)==null?void 0:y[0])==null?void 0:j.variants)==null?void 0:N.small)||((x=(b=(v=e.images)==null?void 0:v[0])==null?void 0:b.variants)==null?void 0:x.thumb)||"/placeholder-product.svg",quantity:1}));const U=await i({productId:e._id,quantity:1}).unwrap();U.cart&&r(Co({items:U.cart.items,total:U.cart.total,itemCount:U.cart.itemCount}));const D=((C=(k=(g=e.images)==null?void 0:g[0])==null?void 0:k.variants)==null?void 0:C.small)||((E=(A=(S=e.images)==null?void 0:S[0])==null?void 0:A.variants)==null?void 0:E.thumb)||"/placeholder-product.svg",_=((T=U.cart)==null?void 0:T.itemCount)||1,I=((M=U.cart)==null?void 0:M.total)||e.price;m(e.name,D,_,I),l(` Successfully added ${e.name} to cart`)}catch(U){console.error("Failed to add to cart:",U),((P=U==null?void 0:U.data)==null?void 0:P.error)==="Access token required"||(U==null?void 0:U.status)===401?u(!0):((O=U==null?void 0:U.data)==null?void 0:O.error)==="Product not found"||(U==null?void 0:U.status)===404?d("Product Not Found","This product is no longer available."):((R=U==null?void 0:U.data)==null?void 0:R.error)==="Insufficient stock"||((L=U==null?void 0:U.data)==null?void 0:L.error)==="Insufficient stock available"?d("Out of Stock","This item is currently out of stock."):(U==null?void 0:U.status)===403?d("Access Denied","You don't have permission to perform this action."):d("Unable to add to cart","Please try again.")}}},f=e.mrp?Math.round((e.mrp-e.price)/e.mrp*100):0;return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[s.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[s.jsx(an,{image:((p=e.images)==null?void 0:p[0])||{variants:{micro:"/placeholder-product.svg",thumb:"/placeholder-product.svg",small:"/placeholder-product.svg",medium:"/placeholder-product.svg",large:"/placeholder-product.svg",original:"/placeholder-product.svg"}},size:"small",alt:e.name,className:"w-full h-full",productId:e._id,debug:!1}),f>0&&s.jsxs("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:[f,"% OFF"]}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10 group-hover:bg-opacity-0 transition-opacity duration-300"}),e.stock===0&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-semibold",children:"Out of Stock"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2 line-clamp-2",children:e.name}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",e.price]}),e.mrp&&e.mrp>e.price&&s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",e.mrp]})]}),e.weight>0&&s.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[s.jsx("span",{className:"font-medium",children:"Weight:"})," ",e.weight,"g"]}),s.jsx("div",{className:"text-sm text-gray-600 mb-3",children:e.stock>0?s.jsxs("span",{className:"text-green-600",children:[e.stock," in stock"]}):s.jsx("span",{className:"text-red-600",children:"Out of stock"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:h,disabled:e.stock===0||o,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:o?"Adding...":"Add to Cart"}),t&&s.jsx("button",{onClick:()=>t(e),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Quick View"})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Login Required"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to add items to your cart."}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>{u(!1),n("/login")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Login"})]})]})})})]})}),MM=[{value:"",label:"All Categories"},{value:"groceries",label:"Groceries"},{value:"vegetables",label:"Vegetables"},{value:"fruits",label:"Fruits"},{value:"dairy",label:"Dairy"},{value:"meat",label:"Meat"},{value:"beverages",label:"Beverages"},{value:"snacks",label:"Snacks"},{value:"household",label:"Household"},{value:"personal_care",label:"Personal Care"},{value:"medicines",label:"Medicines"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"other",label:"Other"}],LM=[{value:"createdAt",label:"Newest First"},{value:"price",label:"Price: Low to High"},{value:"-price",label:"Price: High to Low"},{value:"name",label:"Name: A to Z"},{value:"-name",label:"Name: Z to A"}],_M=({filters:e,onFiltersChange:t})=>{if(!e)return null;const r=(n,a)=>{t({...e,[n]:a})};return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:e.search,onChange:n=>r("search",n.target.value),placeholder:"Search products...",className:"w-full px-3 py-2 pl-10 pr-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsx("select",{value:e.category,onChange:n=>r("category",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:MM.map(n=>s.jsx("option",{value:n.value,children:n.label},n.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Price ()"}),s.jsx("input",{type:"number",value:e.minPrice,onChange:n=>r("minPrice",n.target.value),placeholder:"0",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Price ()"}),s.jsx("input",{type:"number",value:e.maxPrice,onChange:n=>r("maxPrice",n.target.value),placeholder:"10000",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),s.jsx("select",{value:e.sortBy,onChange:n=>r("sortBy",n.target.value),className:"w-full md:w-auto px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:LM.map(n=>s.jsx("option",{value:n.value,children:n.label},n.value))})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:()=>t({category:"",minPrice:"",maxPrice:"",search:"",sortBy:"createdAt",sortOrder:"desc"}),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Clear All Filters"})})]})},DM=({currentSort:e,onSortChange:t,className:r=""})=>{var c;const[n,a]=w.useState(!1),{t:i}=Ya(),o=[{value:"price_low_high",label:i("sort.price_low_high")},{value:"price_high_low",label:i("sort.price_high_low")},{value:"popularity",label:i("sort.popularity")},{value:"newest",label:i("sort.newest")},{value:"best_selling",label:i("sort.best_selling")}],l=((c=o.find(u=>u.value===e))==null?void 0:c.label)||i("sort.price_low_high"),d=u=>{t(u),a(!1)};return s.jsxs("div",{className:`relative ${r}`,children:[s.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(!n),className:"flex items-center space-x-2 bg-white border border-neutral-300 rounded-lg px-4 py-3 text-sm font-medium text-neutral-700 hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 shadow-flipkart hover:shadow-flipkart-hover","aria-label":`${i("sort.title")}: ${l}`,"aria-expanded":n,"aria-haspopup":"listbox",children:[s.jsx(xP,{className:"h-4 w-4 text-gray-500"}),s.jsxs("span",{className:"hidden sm:inline",children:[i("sort.title"),":"]}),s.jsx("span",{className:"font-semibold",children:l}),s.jsx(B.div,{animate:{rotate:n?180:0},transition:{duration:.2},children:s.jsx(Sa,{className:"h-4 w-4 text-gray-500"})})]}),s.jsx(Ua,{children:n&&s.jsx(B.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute top-full left-0 right-0 mt-2 bg-white border border-neutral-200 rounded-lg shadow-flipkart-hover z-50",role:"listbox",children:o.map(u=>s.jsx(B.button,{whileHover:{backgroundColor:"#f3f4f6"},onClick:()=>d(u.value),className:`w-full text-left px-4 py-3 text-sm transition-all duration-200 first:rounded-t-lg last:rounded-b-lg ${e===u.value?"bg-gradient-to-r from-primary-50 to-blue-50 text-primary-700 font-semibold":"text-neutral-700 hover:bg-neutral-50"}`,role:"option","aria-selected":e===u.value,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:u.label}),e===u.value&&s.jsx(B.div,{initial:{scale:0},animate:{scale:1},className:"w-2 h-2 bg-blue-600 rounded-full"})]})},u.value))})}),n&&s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1),"aria-hidden":"true"})]})},ms=({className:e="",variant:t="rectangular",width:r,height:n,lines:a=1,animate:i=!0})=>{const o="bg-secondary-200 rounded animate-pulse",l=()=>{switch(t){case"text":return"h-4 w-full";case"circular":return"rounded-full";case"card":return"h-48 w-full";case"list":return"h-16 w-full";default:return"h-4 w-full"}},d=()=>{const c={};return r&&(c.width=typeof r=="number"?`${r}px`:r),n&&(c.height=typeof n=="number"?`${n}px`:n),c};return t==="text"&&a>1?s.jsx("div",{className:`space-y-2 ${e}`,children:Array.from({length:a}).map((c,u)=>s.jsx(B.div,{className:`${o} ${l()}`,style:d(),initial:i?{opacity:.6}:{},animate:i?{opacity:[.6,1,.6]}:{},transition:i?{duration:1.5,repeat:1/0}:{}},u))}):s.jsx(B.div,{className:`${o} ${l()} ${e}`,style:d(),initial:i?{opacity:.6}:{},animate:i?{opacity:[.6,1,.6]}:{},transition:i?{duration:1.5,repeat:1/0}:{}})},IM=()=>{const[e,t]=w.useState("newest"),[r,n]=w.useState({category:"",minPrice:"",maxPrice:"",search:"",sortBy:"createdAt",sortOrder:"desc"}),[a,i]=w.useState("grid"),{data:o,error:l,isLoading:d,refetch:c}=rp({search:r.search||"",category:r.category||"",sortBy:r.sortBy||"createdAt",minPrice:r.minPrice||"",maxPrice:r.maxPrice||"",page:1,limit:100}),u=(o==null?void 0:o.products)||[],m=h=>{n(h)};return l?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 text-lg font-medium mb-4",children:"Failed to load products"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"There was an error loading the products. Please try again."}),s.jsx("button",{onClick:()=>c(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Products"}),s.jsx("p",{className:"text-gray-600",children:"Discover our wide range of products"})]}),s.jsx("div",{className:"mb-8",children:s.jsx(_M,{filters:r,onFiltersChange:m})}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsx("div",{className:"mb-4 sm:mb-0",children:s.jsx("p",{className:"text-sm text-gray-600",children:d?"Loading...":`${u.length} products found`})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(DM,{currentSort:e,onSortChange:t}),s.jsxs("div",{className:"flex border border-gray-300 rounded-lg",children:[s.jsx("button",{onClick:()=>i("grid"),className:`p-2 ${a==="grid"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),s.jsx("button",{onClick:()=>i("list"),className:`p-2 ${a==="list"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]})]}),d?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((h,f)=>s.jsx(ms,{},f))}):u.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:r.search||r.category||r.minPrice||r.maxPrice?"Try adjusting your search or filter criteria.":"No products are available at the moment."}),(r.search||r.category||r.minPrice||r.maxPrice)&&s.jsx("button",{onClick:()=>{n({category:"",minPrice:"",maxPrice:"",search:"",sortBy:"createdAt",sortOrder:"desc"})},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Filters"})]}):s.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:a==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:u.map(h=>s.jsx(RM,{product:h},h._id))})]})})};function $M(){return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(_t,{height:"400px",className:"w-full rounded-xl"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:4}).map((e,t)=>s.jsx(_t,{height:"80px",className:"rounded-lg"},t))})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(_t,{height:"2rem",className:"w-3/4"}),s.jsx(_t,{height:"1.5rem",className:"w-1/3"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(_t,{height:"1rem",className:"w-full"}),s.jsx(_t,{height:"1rem",className:"w-5/6"}),s.jsx(_t,{height:"1rem",className:"w-4/5"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(_t,{height:"3rem",className:"w-full"}),s.jsx(_t,{height:"3rem",className:"w-full"})]})]})]})})})}const FM=()=>{const{id:e}=No(),t=ce(),r=tt(),n=de(_=>_.cart),a=de(_=>_.auth),[i,{isLoading:o}]=Md(),{success:l,error:d}=Ns(),[c,u]=w.useState(1),[m,h]=w.useState(!1),{triggerGlobalConfirmation:f}=Dp(),[p,y]=w.useState([{id:1,customerName:"Rajesh Kumar",rating:5,text:"Excellent product! Very good quality and fast delivery.",images:["https://dummyimage.com/200x200/4ade80/ffffff&text=Review+1"],date:"2024-01-15"},{id:2,customerName:"Priya Sharma",rating:4,text:"Good product, but delivery was a bit slow.",images:[],date:"2024-01-10"}]),[j,N]=w.useState({customerName:"",rating:0,text:"",images:[]}),[v,b]=w.useState(!1),x=(e==null?void 0:e.startsWith("fallback-"))||!1;console.log("ProductDetailPage - Product ID:",e),console.log("ProductDetailPage - Is fallback product:",x);const{data:g,isLoading:k,error:C}=J5(e,{skip:!e});w.useEffect(()=>{var _;console.log("[ProductDetailPage] product payload:",g),g&&(!g.name||!g.images||g.images.length===0)&&console.warn("[ProductDetailPage] Missing critical product data:",{hasName:!!(g!=null&&g.name),hasImages:!!(g!=null&&g.images),imageCount:(_=g==null?void 0:g.images)==null?void 0:_.length,productId:e})},[g,e]),console.log("ProductDetailPage - API Response:",{product:g,isLoading:k,error:C});const{data:S,isLoading:A,error:E}=X5({id:e||"",limit:4},{skip:!e||x}),T=(S==null?void 0:S.products)||[],M=async()=>{var _,I,q,W,ie,se,$,H,J,oe;if(g){if((g.stock||0)<=0){d("Out of Stock","This item is currently out of stock.");return}if(!a.isAuthenticated){t("/login");return}try{r(Rd({id:(g==null?void 0:g._id)||(g==null?void 0:g.id)||"",name:(g==null?void 0:g.name)||"Unknown Product",price:(g==null?void 0:g.price)||0,quantity:c,image:((I=(_=g==null?void 0:g.images)==null?void 0:_[0])==null?void 0:I.thumb)||"/placeholder-product.svg"}));const ee=await i({productId:(g==null?void 0:g._id)||(g==null?void 0:g.id)||"",quantity:c}).unwrap();ee.cart&&r(Co({items:ee.cart.items,total:ee.cart.total,itemCount:ee.cart.itemCount}));const ge=((W=(q=g==null?void 0:g.images)==null?void 0:q[0])==null?void 0:W.thumb)||"/placeholder-product.svg",pe=((ie=ee.cart)==null?void 0:ie.itemCount)||n.itemCount+c,Ne=((se=ee.cart)==null?void 0:se.total)||n.total+((g==null?void 0:g.price)||0)*c;f((g==null?void 0:g.name)||"Product",ge,pe,Ne),l(` Successfully added ${(g==null?void 0:g.name)||"item"} to cart`),console.log(`Successfully added ${c} ${(g==null?void 0:g.name)||"item"} to cart`)}catch(ee){console.error("Failed to add to cart:",ee),(($=ee==null?void 0:ee.data)==null?void 0:$.error)==="Access token required"||(ee==null?void 0:ee.status)===401?h(!0):((H=ee==null?void 0:ee.data)==null?void 0:H.error)==="Product not found"||(ee==null?void 0:ee.status)===404?d("Product Not Found","This product is no longer available."):((J=ee==null?void 0:ee.data)==null?void 0:J.error)==="Insufficient stock"||((oe=ee==null?void 0:ee.data)==null?void 0:oe.error)==="Insufficient stock available"?d("Out of Stock","This item is currently out of stock."):(ee==null?void 0:ee.status)===403?d("Access Denied","You don't have permission to perform this action."):d("Unable to add to cart","Please try again.")}}},P=()=>{console.log(`Added ${g==null?void 0:g.name} to favorites`)},O=()=>{console.log(`Sharing ${g==null?void 0:g.name}!`),navigator.share?navigator.share({title:g==null?void 0:g.name,text:`Check out this ${g==null?void 0:g.name} from CS Store!`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},R=_=>{const I=_.target.files;if(I){const q=Array.from(I).map(W=>URL.createObjectURL(W));N(W=>({...W,images:[...W.images,...q]}))}},L=_=>{N(I=>({...I,images:I.images.filter((q,W)=>W!==_)}))},U=async()=>{if(!j.customerName.trim()||!j.text.trim()||j.rating===0){alert("Please fill in all required fields and select a rating.");return}b(!0);try{const _={id:Date.now(),customerName:j.customerName,rating:j.rating,text:j.text,images:j.images,date:new Date().toISOString().split("T")[0]};y(I=>[_,...I]),N({customerName:"",rating:0,text:"",images:[]}),console.log("Review submitted:",_)}catch(_){console.error("Error submitting review:",_)}finally{b(!1)}},D=_=>{const I=_.id||_._id;I&&t(`/product/${I}`)};return k?s.jsx($M,{}):x?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-4xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Product Not Available"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"This product is currently unavailable. Please check out our other amazing products."})]}),s.jsx("button",{onClick:()=>t("/products"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Products"})]})}):k?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading product..."})]})}):C||!g?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600",children:"Product not found or failed to load."}),s.jsx("button",{onClick:()=>t("/"),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Go Back Home"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Ce,{className:"h-6 w-6 text-gray-600"})}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Product Details"})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[(()=>{var I;const _=(I=g==null?void 0:g.images)==null?void 0:I[0];return _?s.jsx(an,{image:_,size:"large",alt:(g==null?void 0:g.name)??(g==null?void 0:g._id)??"Product image",className:"w-full aspect-square rounded-xl",priority:!0,productId:g==null?void 0:g._id,debug:!1}):s.jsx("div",{className:"aspect-square bg-gray-200 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500",children:"No Image Available"})})})(),s.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[s.jsx(B.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:P,className:"p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:bg-white transition-colors",children:s.jsx(sw,{className:"h-5 w-5 text-gray-600 hover:text-red-500 transition-colors"})}),s.jsx(B.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:O,className:"p-2 bg-white/80 backdrop-blur-sm rounded-full shadow-lg hover:bg-white transition-colors",children:s.jsx(rw,{className:"h-5 w-5 text-gray-600 hover:text-blue-500 transition-colors"})})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),s.jsx("input",{type:"number",min:"1",value:c,onChange:_=>{const I=parseInt(_.target.value)||1;u(Math.max(1,I))},className:"w-16 px-3 py-2 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:s.jsxs("button",{onClick:M,disabled:((g==null?void 0:g.stock)||0)<=0||o,className:"bg-blue-600 text-white py-4 px-8 rounded-xl hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-3 shadow-lg hover:shadow-xl font-semibold text-lg flex-1",children:[s.jsx(Kt,{className:"h-6 w-6"}),s.jsx("span",{children:((g==null?void 0:g.stock)||0)<=0?"Out of Stock":o?"Adding...":"Add to Cart"})]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(g==null?void 0:g.name)||"Product"}),s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"flex items-center",children:[...Array(5)].map((_,I)=>s.jsx(ct,{className:`h-5 w-5 ${I<Math.floor((g==null?void 0:g.rating)||4.5)?"text-yellow-400 fill-current":"text-gray-300"}`},I))}),s.jsxs("span",{className:"text-sm text-gray-600",children:[(g==null?void 0:g.rating)||4.5," (",(g==null?void 0:g.reviews)||128," reviews)"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["",(g==null?void 0:g.price)||0]}),((g==null?void 0:g.mrp)||0)>((g==null?void 0:g.price)||0)&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-xl text-gray-500 line-through",children:["",(g==null?void 0:g.mrp)||0]}),s.jsxs("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:["Save ",((g==null?void 0:g.mrp)||0)-((g==null?void 0:g.price)||0)]})]})]}),((g==null?void 0:g.weight)||0)>0&&s.jsxs("div",{className:"text-lg text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Weight:"})," ",(g==null?void 0:g.weight)||0,"g"]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:(g==null?void 0:g.description)||"No description available"})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(dr,{className:"h-6 w-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-900",children:"Free Delivery"}),s.jsxs("p",{className:"text-sm text-green-700",children:["Estimated delivery: ",(g==null?void 0:g.deliveryDate)||"2-3 days"]})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(M3,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"text-gray-700",children:"No Return"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ys,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"text-gray-700",children:"Cash on Delivery"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xt,{className:"h-5 w-5 text-blue-500"}),s.jsx("span",{className:"text-gray-700 font-medium",children:"CS Store Assured"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${((g==null?void 0:g.stock)||0)>0?"bg-green-500":"bg-red-500"}`}),s.jsx("span",{className:`text-sm font-medium ${((g==null?void 0:g.stock)||0)>0?"text-green-700":"text-red-700"}`,children:((g==null?void 0:g.stock)||0)>0?"In Stock":"Out of Stock"})]})]})]}),s.jsxs("div",{className:"mt-16",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customer Reviews"}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Write a Review"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name *"}),s.jsx("input",{type:"text",value:j.customerName,onChange:_=>N(I=>({...I,customerName:_.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating *"}),s.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(_=>s.jsx("button",{onClick:()=>N(I=>({...I,rating:_})),className:"p-1",children:s.jsx(ct,{className:`h-6 w-6 ${_<=j.rating?"text-yellow-400 fill-current":"text-gray-300"}`})},_))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review *"}),s.jsx("textarea",{value:j.text,onChange:_=>N(I=>({...I,text:_.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",rows:4,placeholder:"Share your experience with this product..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Images (Optional)"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:R,className:"hidden",id:"review-images"}),s.jsxs("label",{htmlFor:"review-images",className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg cursor-pointer transition-colors",children:[s.jsx(co,{className:"h-4 w-4"}),s.jsx("span",{children:"Choose Images"})]})]}),j.images.length>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:j.images.map((_,I)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:_,alt:`Review image ${I+1}`,className:"w-20 h-20 object-cover rounded-lg"}),s.jsx("button",{onClick:()=>L(I),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(pt,{className:"h-3 w-3"})})]},I))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:U,disabled:v,className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[s.jsx(D3,{className:"h-4 w-4"}),s.jsx("span",{children:v?"Submitting...":"Submit Review"})]})})]})]}),s.jsx("div",{className:"space-y-6",children:p.map(_=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:_.customerName}),s.jsx("div",{className:"flex items-center space-x-1 mt-1",children:[1,2,3,4,5].map(I=>s.jsx(ct,{className:`h-4 w-4 ${I<=_.rating?"text-yellow-400 fill-current":"text-gray-300"}`},I))})]}),s.jsx("span",{className:"text-sm text-gray-500",children:_.date})]}),s.jsx("p",{className:"text-gray-700 mb-4",children:_.text}),_.images.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:_.images.map((I,q)=>s.jsx("img",{src:I,alt:`Review image ${q+1}`,className:"w-20 h-20 object-cover rounded-lg"},q))})]},_.id))})]}),s.jsxs("div",{className:"mt-16",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Similar Products"}),A?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((_,I)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden animate-pulse",children:[s.jsx("div",{className:"aspect-square bg-gray-200"}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},I))}):E?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500 text-lg",children:"Failed to load similar products. Please try again later."})}):T.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500 text-lg",children:"No similar products found."})}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:T.map(_=>{var I;return s.jsxs(B.div,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},onClick:()=>D(_),className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden group",children:[s.jsx("div",{className:"aspect-square bg-gray-200 overflow-hidden",children:s.jsx(an,{image:((I=_.images)==null?void 0:I[0])||{variants:{micro:"/placeholder-product.svg",thumb:"/placeholder-product.svg",small:"/placeholder-product.svg",medium:"/placeholder-product.svg",large:"/placeholder-product.svg",original:"/placeholder-product.svg"}},size:"small",alt:_.name||"Product",className:"w-full h-full",productId:_.id||_._id,debug:!1})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-sm line-clamp-2 group-hover:text-blue-600 transition-colors",children:_.name||"Unknown Product"}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["",_.price||0]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ct,{className:"h-4 w-4 text-yellow-400 fill-current"}),s.jsx("span",{className:"text-sm text-gray-600 ml-1",children:_.rating||4})]})]})]})]},_.id||_._id)})})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Login Required"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to add items to your cart."}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>{h(!1),t("/login")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Login"})]})]})})})]})},hi={addressLine:"Boya Bazar, Tiruvuru, Krishna District, Andhra Pradesh - 521235",lat:17.0956,lng:80.6089},hn={FREE_DELIVERY_THRESHOLD:2e3,BASE_FEE_0_2_KM:25,BASE_FEE_2_6_KM_MIN:35,BASE_FEE_2_6_KM_MAX:60,BASE_FEE_BEYOND_6_KM:60,EXTRA_KM_RATE:8};function BM(e,t,r,n){const i=(r-e)*(Math.PI/180),o=(n-t)*(Math.PI/180),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*(Math.PI/180))*Math.cos(r*(Math.PI/180))*Math.sin(o/2)*Math.sin(o/2),c=6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)));return Math.round(c*100)/100}function Bp(e,t){if(!e)return{deliveryFee:null,distance:null,requiresAddress:!0,baseFee:0,distanceFee:0,totalFee:0,isFreeDelivery:!1,finalFee:0};if(!e.lat||!e.lng||e.lat===0||e.lng===0||isNaN(e.lat)||isNaN(e.lng))return console.error(" [Frontend] Invalid user address coordinates - cannot calculate delivery fee"),{deliveryFee:0,distance:0,requiresAddress:!1,baseFee:0,distanceFee:0,totalFee:0,isFreeDelivery:!1,finalFee:0};const r=BM(hi.lat,hi.lng,e.lat,e.lng);if(console.log(" Delivery Fee Calculation:",{warehouseCoords:{lat:hi.lat,lng:hi.lng,location:hi.addressLine},userCoords:{lat:e.lat,lng:e.lng,location:`${e.city}, ${e.state}`},calculatedDistance:`${r.toFixed(2)} km`,orderAmount:`${t}`}),isNaN(r)||r<0){console.error(" CRITICAL: Invalid distance calculated! Address may have invalid coordinates.");const o=500;return{deliveryFee:o,distance:0,requiresAddress:!1,baseFee:o,distanceFee:0,totalFee:o,isFreeDelivery:!1,finalFee:o}}if(t>=hn.FREE_DELIVERY_THRESHOLD)return console.log(" Free Delivery Applied! (Order  2000)"),{deliveryFee:0,distance:Math.round(r*100)/100,requiresAddress:!1,baseFee:0,distanceFee:0,totalFee:0,isFreeDelivery:!0,finalFee:0};let a;if(r<=2)a=hn.BASE_FEE_0_2_KM,console.log(` Distance: ${r.toFixed(2)} km (2 km)  Base Fee: ${a}`);else if(r<=6){const o=(r-2)/4;a=hn.BASE_FEE_2_6_KM_MIN+o*(hn.BASE_FEE_2_6_KM_MAX-hn.BASE_FEE_2_6_KM_MIN),a=Math.round(a),console.log(` Distance: ${r.toFixed(2)} km (2-6 km)  Progressive Fee: ${a}`)}else{const o=r-6;a=hn.BASE_FEE_BEYOND_6_KM+o*hn.EXTRA_KM_RATE,a=Math.round(a),console.log(` Distance: ${r.toFixed(2)} km (>6 km)  60 + (${o.toFixed(2)} km  8) = ${a}`)}const i=a;return console.log(` Final Delivery Fee: ${i}`),{deliveryFee:i,distance:Math.round(r*100)/100,requiresAddress:!1,baseFee:a,distanceFee:0,totalFee:a,isFreeDelivery:!1,finalFee:a}}function UM(e){return!0}function zM(e){return/^\d{6}$/.test(e)}function VM(e,t){return t?"FREE":`${e.toFixed(2)}`}async function qM(e,t){return{...Bp({city:"Unknown",state:"Unknown",lat:17.385,lng:78.4867},t),isDeliveryAvailable:UM()}}const a1=(e,t)=>{const r=e.reduce((c,u)=>c+u.price*u.quantity,0),n=e.reduce((c,u)=>c+u.quantity,0),a=Math.round(r*.1),i=(t==null?void 0:t.finalFee)||0,o=(t==null?void 0:t.isFreeDelivery)||!1,l=r+i-a;return{subtotal:r,discount:a,deliveryFee:i,total:l,itemCount:n,isFreeDelivery:o,savings:a}},ts=e=>`${e.toFixed(2)}`,HM=e=>e?e.isFreeDelivery?"FREE":ts(e.finalFee):"Calculating...",WM=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="Delete",cancelText:o="Cancel",confirmButtonColor:l="bg-red-600 hover:bg-red-700"})=>{const d=()=>{r(),t()},c=u=>{u.target===u.currentTarget&&t()};return s.jsx(Ua,{children:e&&s.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:c,children:s.jsxs(B.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",onClick:u=>u.stopPropagation(),children:[s.jsx("div",{className:"p-6 pb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n})})]})}),s.jsx("div",{className:"px-6 pb-4",children:s.jsx("p",{className:"text-gray-600",children:a})}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex space-x-3",children:[s.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:o}),s.jsx("button",{onClick:d,className:`flex-1 px-4 py-2 text-sm font-medium text-white ${l} rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors`,children:i})]})]})})})},QM=()=>{const e=de(g=>g.cart),t=de(g=>g.auth),r=tt(),[n,a]=w.useState(null),[i,o]=w.useState(0),[l,d]=w.useState({isOpen:!1,itemId:null,itemName:""}),c=ce(),[u]=s6(),[m]=r6(),{data:h}=Ld(void 0,{skip:!t.isAuthenticated}),f=w.useMemo(()=>{var C,S;const g=(h==null?void 0:h.addresses)||[],k=h==null?void 0:h.defaultAddressId;if(k&&g.length>0){const A=g.find(E=>E._id===k);if(A)return{_id:A._id,label:A.label||"",pincode:A.pincode||"",city:A.city||"",state:A.state||"",addressLine:A.addressLine||"",lat:((C=A.location)==null?void 0:C.lat)??A.lat??0,lng:((S=A.location)==null?void 0:S.lng)??A.lng??0,isDefault:!0}}return null},[h,i]),p=Bp(f||void 0,e.total),y=a1(e.items,p);w.useEffect(()=>{!t.isAuthenticated&&e.items.length>0&&r(UC())},[t.isAuthenticated,e.items.length,r]),w.useEffect(()=>{const g=()=>{o(k=>k+1)};return window.addEventListener("addressesUpdated",g),()=>window.removeEventListener("addressesUpdated",g)},[]);const j=async(g,k)=>{if(!(k<1)){a(g);try{r(Ex({id:g,quantity:k})),t.isAuthenticated&&await u({productId:g,quantity:k}).unwrap()}catch(C){console.error("Failed to update quantity:",C);const S=e.items.find(A=>A.id===g);S&&r(Ex({id:g,quantity:S.quantity}))}finally{a(null)}}},N=async g=>{try{r(FC(g)),t.isAuthenticated&&await m(g).unwrap()}catch(k){console.error("Failed to remove item:",k)}},v=(g,k)=>{d({isOpen:!0,itemId:g,itemName:k})},b=()=>{l.itemId&&N(l.itemId)},x=()=>{d({isOpen:!1,itemId:null,itemName:""})};return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50 pt-2 px-4 pb-4",children:[s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"}),e.items.length>0&&s.jsx("div",{className:"flex-1 flex justify-center",children:s.jsx("div",{className:"ml-16",children:s.jsxs(fe,{to:"/addresses",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2 text-sm font-medium",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Enter Address"})]})})})]}),t.isAuthenticated?e.items.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Add some products to get started"}),s.jsx("button",{onClick:()=>c("/"),className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Cart Items (",e.items.length,")"]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:e.items.map((g,k)=>{const C=g.price===0;return s.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"p-4 flex items-center space-x-4 border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 border border-gray-200",children:s.jsx("img",{src:Tn(g),alt:g.name,className:"w-full h-full object-cover",onError:S=>r1(S)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate text-sm",children:g.name}),C?s.jsx("p",{className:"text-xs mt-1 text-red-600",children:"Out of stock"}):s.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:["",g.price.toFixed(2)," each"]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Seller:"}),s.jsx("span",{className:"text-xs font-medium text-blue-600",children:"CS Store"}),s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Assured"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:C?s.jsx("span",{className:"text-xs font-medium text-gray-400",children:"--"}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>j(g.id,g.quantity-1),disabled:n===g.id||g.quantity<=1,className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",children:"-"}),s.jsx("span",{className:"w-12 text-center font-medium text-sm",children:n===g.id?"...":g.quantity}),s.jsx("button",{onClick:()=>j(g.id,g.quantity+1),disabled:n===g.id,className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",children:"+"})]})}),s.jsx("div",{className:"text-right",children:C?s.jsx("div",{className:"text-sm font-medium text-red-500",children:"Out of stock"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["",(g.price*g.quantity).toFixed(2)]}),g.price>0&&s.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["",(g.price*1.2*g.quantity).toFixed(2)]})]})}),s.jsx("div",{className:"flex items-center",children:s.jsx("button",{onClick:()=>v(g.id,g.name),className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-50 transition-colors duration-200",title:"Delete item",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},g.id||`deleted-${k}`)})})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx("div",{className:"sticky top-8",children:s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"PRICE DETAILS"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Price (",y.itemCount," items)"]}),s.jsx("span",{className:"font-medium",children:ts(y.subtotal)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Discount"}),s.jsxs("span",{className:"font-medium text-green-600",children:["- ",ts(y.discount)]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-3",children:s.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[s.jsx("span",{children:"Total Amount"}),s.jsx("span",{children:ts(y.total)})]})})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:"Safe and Secure Payments. Easy returns. 100% Authentic products."})]})}),(f==null?void 0:f.lat)&&(f==null?void 0:f.lng)&&f.lat!==0&&f.lng!==0&&f.coordsSource==="pincode"&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-400 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("svg",{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsx("div",{className:"flex-1",children:s.jsxs("p",{className:"text-xs text-yellow-900",children:[s.jsx("strong",{children:"Estimated Delivery Fee:"})," Using pincode centroid. Update your address with exact location for accurate fee calculation."]})})]})}),s.jsx("div",{className:"mt-4",children:f?!(f!=null&&f.lat)||!(f!=null&&f.lng)||f.lat===0||f.lng===0?s.jsx("button",{disabled:!0,className:"w-full py-3 px-4 rounded-lg font-medium text-center bg-gray-400 text-gray-700 cursor-not-allowed text-lg",children:"CANNOT PLACE ORDER - INVALID ADDRESS"}):s.jsx(fe,{to:"/checkout",className:"w-full py-3 px-4 rounded-lg font-medium text-center transition-colors bg-orange-500 text-white hover:bg-orange-600 text-lg block",children:"PLACE ORDER"}):s.jsx("button",{disabled:!0,className:"w-full py-3 px-4 rounded-lg font-medium text-center bg-amber-400 text-amber-800 cursor-not-allowed text-lg",children:"ADD DELIVERY ADDRESS TO PLACE ORDER"})})]})})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please Sign In"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to view your cart and place orders."}),s.jsxs("div",{className:"space-x-4",children:[s.jsx(fe,{to:"/login",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Sign In"}),s.jsx(fe,{to:"/signup",className:"inline-block bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors",children:"Sign Up"})]})]})]}),s.jsx(WM,{isOpen:l.isOpen,onClose:x,onConfirm:b,title:"Remove Item",message:`Are you sure you want to remove "${l.itemName}" from your cart?`,confirmText:"Remove",cancelText:"Cancel",confirmButtonColor:"bg-red-600 hover:bg-red-700"})]})};var KM={},i1={};const GM=KM.VITE_RAZORPAY_KEY_ID||"rzp_test_RREROYUEXDmjIA",YM=()=>new Promise(e=>{const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>{e(window.Razorpay)},t.onerror=()=>{e(null)},document.body.appendChild(t)}),JM=async(e,t="INR",r)=>{try{const n=await fetch(`${i1.REACT_APP_API_URL||"http://localhost:5001"}/api/payment/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e,currency:t,receipt:r||`receipt_${Date.now()}`,notes:{source:"frontend"}})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();if(!a.success)throw new Error(a.message||"Failed to create order");return a.order}catch(n){throw console.error("Error creating Razorpay order:",n),n}},o1=async(e,t,r)=>{try{const n=localStorage.getItem("accessToken"),a=await fetch("http://localhost:5001/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.message||"Payment verification failed");return i}catch(n){throw console.error("Error verifying payment:",n),n}},l1=async(e,t,r,n)=>{try{const a=await YM();if(!a)throw new Error("Failed to load Razorpay");const i={key:GM,amount:e.amount,currency:e.currency,name:"CPS Store",description:"Payment for your order",order_id:e.id,prefill:{name:t.name,email:t.email,contact:t.phone},theme:{color:"#2563eb"},method:{netbanking:!0,wallet:!0,upi:!0,card:!0,emi:!0,paylater:!0},modal:{ondismiss:function(){n("Payment cancelled by user")},escape:!0,handleback:!0},retry:{enabled:!0,max_count:3},callback_url:`${i1.REACT_APP_API_URL||"http://localhost:5001"}/api/payment/callback`,handler:async function(l){try{(await o1(l.razorpay_order_id,l.razorpay_payment_id,l.razorpay_signature)).success?r(l.razorpay_payment_id,l.razorpay_order_id):n("Payment verification failed")}catch(d){console.error("Payment verification error:",d),n("Payment verification failed")}}};new a(i).open()}catch(a){console.error("Error opening Razorpay checkout:",a),n("Failed to open payment gateway")}},XM=()=>{const e=ce(),t=Jt(),{success:r,error:n}=Ns(),{user:a}=de(y=>y.auth),{items:i}=de(y=>y.cart),[o,l]=w.useState(null),[d,c]=w.useState(!1),[u,m]=w.useState("idle"),h=(o==null?void 0:o.priceBreakdown)||null;w.useEffect(()=>{var y;(y=t.state)!=null&&y.paymentData?l(t.state.paymentData):(n("Invalid Payment Data","Please complete the address selection first."),e("/checkout"))},[t.state,e,n]);const f=async()=>{if(!o||!a){n("Authentication required","Please log in to proceed with payment.");return}c(!0),m("processing");try{const y=await JM(o.cartTotal,"INR",`order_${Date.now()}`);await l1(y,o.userInfo,(j,N)=>{m("success"),r("Payment Successful!","Your order has been placed successfully."),c(!1),setTimeout(()=>{e("/orders",{state:{paymentId:j,orderId:N,orderDetails:o.orderDetails}})},2e3)},j=>{m("failed"),n("Payment Failed",j),c(!1)})}catch(y){console.error("Payment error:",y),m("failed"),n("Payment Error","Failed to process payment. Please try again."),c(!1)}},p=y=>y?`${y.houseNo}, ${y.landmark||""}, ${y.city}, ${y.state} - ${y.pincode}`.replace(/, ,/g,",").replace(/^,|,$/g,""):"";return o?s.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-50  py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e("/checkout"),className:"flex items-center space-x-2 text-gray-600  hover:text-gray-900  mb-4",children:[s.jsx(Ce,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Checkout"})]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 ",children:"Complete Your Payment"}),s.jsx("p",{className:"text-gray-600  mt-2",children:"Secure payment powered by Razorpay"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white  rounded-lg shadow-sm border border-gray-200  p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900  mb-6",children:"Choose Payment Method"}),u==="success"&&s.jsx("div",{className:"mb-6 p-4 bg-green-50  border border-green-200  rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ee,{className:"h-5 w-5 text-green-600  mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-green-800  font-medium",children:"Payment Successful!"}),s.jsx("p",{className:"text-green-700  text-sm",children:"Your order has been confirmed. Redirecting to order details..."})]})]})}),u==="failed"&&s.jsx("div",{className:"mb-6 p-4 bg-red-50  border border-red-200  rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(tn,{className:"h-5 w-5 text-red-600  mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-red-800  font-medium",children:"Payment Failed"}),s.jsx("p",{className:"text-red-700  text-sm",children:"Please try again or choose a different payment method."})]})]})}),s.jsxs("button",{onClick:f,disabled:d||u==="success",className:"w-full flex items-center justify-center space-x-3 p-4 border-2 border-blue-500 bg-blue-50  rounded-lg hover:bg-blue-100  transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?s.jsx(ho,{className:"h-5 w-5 animate-spin text-blue-600 "}):s.jsx(ys,{className:"h-5 w-5 text-blue-600 "}),s.jsx("span",{className:"text-blue-900  font-medium text-lg",children:d?"Processing Payment...":u==="success"?"Payment Successful":"Pay with Razorpay"})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50  rounded-lg",children:[s.jsx("p",{className:"text-sm text-blue-800  font-medium mb-3",children:"Available Payment Methods:"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 ",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:"Cards"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 ",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:"UPI"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 ",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:"Net Banking"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 ",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:"Wallets"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 ",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:"EMI"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 ",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{children:"Pay Later"})]})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50  rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xt,{className:"h-5 w-5 text-green-600 "}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 ",children:"Secure Payment"}),s.jsx("p",{className:"text-xs text-gray-600 ",children:"Your payment is secured by Razorpay with 256-bit SSL encryption"})]})]})})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white  rounded-lg shadow-sm border border-gray-200  p-6 sticky top-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900  mb-4",children:"Order Summary"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900  mb-2",children:"Delivery Address"}),s.jsx("p",{className:"text-sm text-gray-600 ",children:p(o.orderDetails.address)})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900  mb-3",children:["Items (",o.orderDetails.items.length,")"]}),s.jsx("div",{className:"space-y-2",children:o.orderDetails.items.map(y=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600 ",children:[y.name," x ",y.quantity]}),s.jsx("span",{className:"text-gray-900 ",children:ts(y.price*y.quantity)})]},y.id))})]}),h&&s.jsxs("div",{className:"mb-6 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{className:"text-gray-900",children:ts(h.subtotal)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Discount:"}),s.jsxs("span",{className:"text-green-600",children:["- ",ts(h.discount)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery:"}),s.jsx("span",{className:"text-gray-900",children:h.isFreeDelivery?"FREE":ts(h.deliveryFee)})]})]}),s.jsx("div",{className:"border-t border-gray-200  pt-4",children:s.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[s.jsx("span",{className:"text-gray-900 ",children:"Total"}),s.jsx("span",{className:"text-gray-900 ",children:ts(h?h.total:o.cartTotal)})]})}),s.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2 text-xs text-gray-500 ",children:[s.jsx(Ia,{className:"h-4 w-4"}),s.jsx("span",{children:"Secured by Razorpay"})]})]})})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50  flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ho,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 ",children:"Loading payment details..."})]})})};var ZM={VITE_API_URL:"http://localhost:5001",VITE_CLOUDINARY_CLOUD_NAME:"your_cloud_name_here",VITE_CLOUDINARY_UPLOAD_PRESET:"your_unsigned_upload_preset",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const e8=({orderData:e,onSuccess:t,onError:r})=>{const[n,a]=w.useState(!1),i=tt(),{user:o,tokens:l}=de(m=>m.auth),[d]=qj(),c=async()=>{try{if(!(l!=null&&l.refreshToken))return console.log(" No refresh token available"),null;console.log(" Attempting to refresh token...");const m=await d(l.refreshToken).unwrap();return m.accessToken?(console.log(" Token refreshed successfully"),i(Ks(o)),i(Vn({accessToken:m.accessToken,refreshToken:m.refreshToken||l.refreshToken})),m.accessToken):null}catch(m){return console.error(" Token refresh failed:",m),i(en()),null}},u=async()=>{try{if(a(!0),!o||!(l!=null&&l.accessToken)){ae.error("Please log in to continue"),r("User not authenticated");return}if(!e.address){ae.error("Please select a delivery address"),r("Delivery address required");return}let m=l.accessToken;try{const y=JSON.parse(atob(m.split(".")[1])),j=Math.floor(Date.now()/1e3);if(y.exp<j){console.log(" Token expired, refreshing...");const N=await c();if(!N)throw new Error("Failed to refresh token");m=N}}catch{console.log(" Invalid token, refreshing...");const j=await c();if(!j)throw new Error("Failed to refresh token");m=j}const h=await fetch("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({items:e.items,address:e.address,totalAmount:e.totalAmount})});if(!h.ok){const y=await h.json();throw new Error(y.error||"Failed to create order")}const f=await h.json(),p={key:ZM.VITE_RAZORPAY_KEY_ID||"rzp_test_RREROYUEXDmjIA",amount:e.totalAmount*100,currency:"INR",name:"CS Store",description:"Secure Payment for Your Order",order_id:f.razorpayOrderId,prefill:{name:(o==null?void 0:o.name)||"",email:(o==null?void 0:o.email)||"",contact:(o==null?void 0:o.phone)||""},theme:{color:"#2E86DE"},method:{upi:!0,card:!0,netbanking:!0,wallet:!0,emi:!0,paylater:!0},modal:{ondismiss:function(){ae.error("Payment cancelled by user"),r("Payment cancelled by user")},escape:!0,handleback:!0},retry:{enabled:!0,max_count:3},callback_url:"http://localhost:5001/api/payment/callback",handler:async y=>{try{const j=await o1(y.razorpay_order_id,y.razorpay_payment_id,y.razorpay_signature);ae.success("Payment Successful "),t(j.payment)}catch(j){console.error("Payment verification failed:",j),ae.error("Payment Failed  Please try again"),r("Payment verification failed")}}};await l1(p,{name:(o==null?void 0:o.name)||"User",email:(o==null?void 0:o.email)||"",phone:(o==null?void 0:o.phone)||""},(y,j)=>{ae.success("Payment successful!"),t({paymentId:y,orderId:j})},y=>{ae.error(y),r(y)})}catch(m){console.error("Payment error:",m),ae.error(m.message||"Payment failed"),r(m.message||"Payment failed")}finally{a(!1)}};return s.jsx("button",{onClick:u,disabled:n,className:`w-full py-3 px-6 rounded-lg font-semibold text-white transition-colors ${n?"bg-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"}`,children:n?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):`Pay ${e.totalAmount}`})},Ys=Object.create(null);Ys.open="0";Ys.close="1";Ys.ping="2";Ys.pong="3";Ys.message="4";Ys.upgrade="5";Ys.noop="6";const Fl=Object.create(null);Object.keys(Ys).forEach(e=>{Fl[Ys[e]]=e});const t8={type:"error",data:"parser error"},s8=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",r8=typeof ArrayBuffer=="function",n8=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,c1=({type:e,data:t},r,n)=>s8&&t instanceof Blob?r?n(t):Sy(t,n):r8&&(t instanceof ArrayBuffer||n8(t))?r?n(t):Sy(new Blob([t]),n):n(Ys[e]+(t||"")),Sy=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)},ky="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ky.length;e++)wi[ky.charCodeAt(e)]=e;const a8=e=>{let t=e.length*.75,r=e.length,n,a=0,i,o,l,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<r;n+=4)i=wi[e.charCodeAt(n)],o=wi[e.charCodeAt(n+1)],l=wi[e.charCodeAt(n+2)],d=wi[e.charCodeAt(n+3)],u[a++]=i<<2|o>>4,u[a++]=(o&15)<<4|l>>2,u[a++]=(l&3)<<6|d&63;return c},i8=typeof ArrayBuffer=="function",d1=(e,t)=>{if(typeof e!="string")return{type:"message",data:u1(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:o8(e.substring(1),t)}:Fl[r]?e.length>1?{type:Fl[r],data:e.substring(1)}:{type:Fl[r]}:t8},o8=(e,t)=>{if(i8){const r=a8(e);return u1(r,t)}else return{base64:!0,data:e}},u1=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}},m1="",l8=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((i,o)=>{c1(i,!1,l=>{n[o]=l,++a===r&&t(n.join(m1))})})},c8=(e,t)=>{const r=e.split(m1),n=[];for(let a=0;a<r.length;a++){const i=d1(r[a],t);if(n.push(i),i.type==="error")break}return n},h1=4;function it(e){if(e)return d8(e)}function d8(e){for(var t in it.prototype)e[t]=it.prototype[t];return e}it.prototype.on=it.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};it.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};it.prototype.off=it.prototype.removeListener=it.prototype.removeAllListeners=it.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};it.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};it.prototype.emitReserved=it.prototype.emit;it.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};it.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ps=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function f1(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const u8=ps.setTimeout,m8=ps.clearTimeout;function Jd(e,t){t.useNativeTimers?(e.setTimeoutFn=u8.bind(ps),e.clearTimeoutFn=m8.bind(ps)):(e.setTimeoutFn=ps.setTimeout.bind(ps),e.clearTimeoutFn=ps.clearTimeout.bind(ps))}const h8=1.33;function f8(e){return typeof e=="string"?p8(e):Math.ceil((e.byteLength||e.size)*h8)}function p8(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}class x8 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class p1 extends it{constructor(t){super(),this.writable=!1,Jd(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,r,n){return super.emitReserved("error",new x8(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=d1(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}}const x1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Lh=64,g8={};let Cy=0,fl=0,Py;function Ay(e){let t="";do t=x1[e%Lh]+t,e=Math.floor(e/Lh);while(e>0);return t}function g1(){const e=Ay(+new Date);return e!==Py?(Cy=0,Py=e):e+"."+Ay(Cy++)}for(;fl<Lh;fl++)g8[x1[fl]]=fl;function y1(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function y8(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}let v1=!1;try{v1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const v8=v1;function b1(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||v8))return new XMLHttpRequest}catch{}if(!t)try{return new ps[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function b8(){}const j8=function(){return new b1({xdomain:!1}).responseType!=null}();class w8 extends p1{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let a=location.port;a||(a=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port,this.xs=t.secure!==n}const r=t&&t.forceBase64;this.supportsBinary=j8&&!r}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};c8(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,l8(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const r=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=g1()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const a=y1(t),i=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(a.length?"?"+a:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Ca(this.uri(),t)}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let Ca=class Bl extends it{constructor(t,r){super(),Jd(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){const t=f1(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const r=this.xhr=new b1(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=Bl.requestsCount++,Bl.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=b8,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Bl.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Ca.requestsCount=0;Ca.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ey);else if(typeof addEventListener=="function"){const e="onpagehide"in ps?"pagehide":"unload";addEventListener(e,Ey,!1)}}function Ey(){for(let e in Ca.requests)Ca.requests.hasOwnProperty(e)&&Ca.requests[e].abort()}const j1=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),pl=ps.WebSocket||ps.MozWebSocket,Ty=!0,N8="arraybuffer",Oy=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class S8 extends p1{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),r=this.opts.protocols,n=Oy?{}:f1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Ty&&!Oy?r?new pl(t,r):new pl(t):new pl(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType||N8,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;c1(n,this.supportsBinary,i=>{const o={};try{Ty&&this.ws.send(i)}catch{}a&&j1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const r=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=g1()),this.supportsBinary||(t.b64=1);const a=y1(t),i=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(a.length?"?"+a:"")}check(){return!!pl}}const k8={websocket:S8,polling:w8},C8=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,P8=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _h(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=C8.exec(e||""),i={},o=14;for(;o--;)i[P8[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=A8(i,i.path),i.queryKey=E8(i,i.query),i}function A8(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function E8(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}let w1=class Xn extends it{constructor(t,r={}){super(),this.writeBuffer=[],t&&typeof t=="object"&&(r=t,t=null),t?(t=_h(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=_h(r.host).host),Jd(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=y8(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=h1,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new k8[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Xn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),n=!1;Xn.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Xn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,u(),r.close(),r=null)}const o=m=>{const h=new Error("probe error: "+m);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function d(){o("socket closed")}function c(m){r&&m.name!==r.name&&i()}const u=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",l),this.off("close",d),this.off("upgrading",c)};r.once("open",a),r.once("error",o),r.once("close",l),this.once("close",d),this.once("upgrading",c),r.open()}onOpen(){if(this.readyState="open",Xn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=f8(a)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){Xn.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let n=0;const a=t.length;for(;n<a;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}};w1.protocol=h1;function T8(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=_h(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const O8=typeof ArrayBuffer=="function",R8=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,N1=Object.prototype.toString,M8=typeof Blob=="function"||typeof Blob<"u"&&N1.call(Blob)==="[object BlobConstructor]",L8=typeof File=="function"||typeof File<"u"&&N1.call(File)==="[object FileConstructor]";function Up(e){return O8&&(e instanceof ArrayBuffer||R8(e))||M8&&e instanceof Blob||L8&&e instanceof File}function Ul(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Ul(e[r]))return!0;return!1}if(Up(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ul(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Ul(e[r]))return!0;return!1}function _8(e){const t=[],r=e.data,n=e;return n.data=Dh(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Dh(e,t){if(!e)return e;if(Up(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Dh(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Dh(e[n],t));return r}return e}function D8(e,t){return e.data=Ih(e.data,t),delete e.attachments,e}function Ih(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Ih(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Ih(e[r],t));return e}const I8=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$8=5;var we;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(we||(we={}));class F8{constructor(t){this.replacer=t}encode(t){return(t.type===we.EVENT||t.type===we.ACK)&&Ul(t)?this.encodeAsBinary({type:t.type===we.EVENT?we.BINARY_EVENT:we.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===we.BINARY_EVENT||t.type===we.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=_8(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function Ry(e){return Object.prototype.toString.call(e)==="[object Object]"}class zp extends it{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===we.BINARY_EVENT;n||r.type===we.BINARY_ACK?(r.type=n?we.EVENT:we.ACK,this.reconstructor=new B8(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Up(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(we[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===we.BINARY_EVENT||n.type===we.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(zp.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case we.CONNECT:return Ry(r);case we.DISCONNECT:return r===void 0;case we.CONNECT_ERROR:return typeof r=="string"||Ry(r);case we.EVENT:case we.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&I8.indexOf(r[0])===-1);case we.ACK:case we.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class B8{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=D8(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const U8=Object.freeze(Object.defineProperty({__proto__:null,Decoder:zp,Encoder:F8,get PacketType(){return we},protocol:$8},Symbol.toStringTag,{value:"Module"}));function Ps(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const z8=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class S1 extends it{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ps(t,"open",this.onopen.bind(this)),Ps(t,"packet",this.onpacket.bind(this)),Ps(t,"error",this.onerror.bind(this)),Ps(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){if(z8.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const n={type:we.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const o=this.ids++,l=r.pop();this._registerAckCallback(o,l),n.id=o}const a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},a);this.acks[t]=(...o)=>{this.io.clearTimeoutFn(i),r.apply(this,[null,...o])}}emitWithAck(t,...r){const n=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((a,i)=>{r.push((o,l)=>n?o?i(o):a(l):a(o)),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:we.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case we.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case we.EVENT:case we.BINARY_EVENT:this.onevent(t);break;case we.ACK:case we.BINARY_ACK:this.onack(t);break;case we.DISCONNECT:this.ondisconnect();break;case we.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:we.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(r.apply(this,t.data),delete this.acks[t.id])}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:we.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Za(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Za.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Za.prototype.reset=function(){this.attempts=0};Za.prototype.setMin=function(e){this.ms=e};Za.prototype.setMax=function(e){this.max=e};Za.prototype.setJitter=function(e){this.jitter=e};class $h extends it{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Jd(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Za({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||U8;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new w1(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Ps(r,"open",function(){n.onopen(),t&&t()}),i=Ps(r,"error",o=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",o),t?t(o):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&a();const l=this.setTimeoutFn(()=>{a(),r.close(),r.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(a),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ps(t,"ping",this.onping.bind(this)),Ps(t,"data",this.ondata.bind(this)),Ps(t,"error",this.onerror.bind(this)),Ps(t,"close",this.onclose.bind(this)),Ps(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){j1(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new S1(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fi={};function Qr(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=T8(e,t.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=fi[a]&&i in fi[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let d;return l?d=new $h(n,t):(fi[a]||(fi[a]=new $h(n,t)),d=fi[a]),r.query&&!t.query&&(t.query=r.queryKey),d.socket(r.path,t)}Object.assign(Qr,{Manager:$h,Socket:S1,io:Qr,connect:Qr});const V8=({isOpen:e,onClose:t,onSuccess:r,orderId:n,cardNumber:a,cardHolderName:i,expiryDate:o,cvv:l,amount:d})=>{const[c,u]=w.useState(""),[m,h]=w.useState(600),[f,p]=w.useState(!1),[y,j]=w.useState(!1),[N,v]=w.useState(""),[b,x]=w.useState(!1),[g,k]=w.useState(!1),[C,S]=w.useState(!1),[A,E]=w.useState(""),T=w.useRef(null),M=w.useRef(null);w.useEffect(()=>{if(e){const D=localStorage.getItem("accessToken");if(!D){K.error("Authentication required"),t();return}T.current=Qr("http://localhost:5001",{auth:{token:D},transports:["websocket","polling"]}),T.current.on("connect",()=>{console.log(" Connected to WebSocket server"),x(!0),P()}),T.current.on("disconnect",()=>{console.log(" Disconnected from WebSocket server"),x(!1)}),T.current.on("connect_error",_=>{console.error("WebSocket connection error:",_),x(!1),K.error("Real-time connection failed. Using SMS fallback."),P()}),T.current.on("otp_generated",_=>{console.log(" OTP received via WebSocket:",_),k(!0),S(!0),E(_.data.otp||"Real-time OTP received"),K.success("OTP received in real-time! Check the input field.")}),T.current.on("otp_verification_result",_=>{console.log(" OTP verification result:",_),_.data.success?(K.success("Payment verified successfully!"),r(_.data.paymentId),t()):K.error(_.data.message||"OTP verification failed")}),T.current.on("payment_status_update",_=>{console.log(" Payment status update:",_),K.success(`Payment ${_.data.status} successfully!`)}),T.current.on("notification",_=>{console.log(" Notification received:",_),K(_.data.message,{duration:4e3})})}return()=>{T.current&&(T.current.disconnect(),T.current=null)}},[e]),w.useEffect(()=>{if(!(!e||m<=0))return M.current=setInterval(()=>{h(D=>D-1)},1e3),()=>{M.current&&clearInterval(M.current)}},[e,m]);const P=async()=>{try{p(!0);const D=localStorage.getItem("accessToken"),_=await fetch("/api/otp/payment/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({orderId:n,cardNumber:a.replace(/\s/g,""),cardHolderName:i,expiryDate:o,cvv:l})}),I=await _.json();_.ok?(v(I.paymentId),h(600),k(I.realTimeDelivered||!1),I.realTimeDelivered?K.success("OTP sent in real-time! Check the input field."):K.success("OTP sent via SMS to your registered mobile number")):K.error(I.message||"Failed to generate OTP")}catch(D){console.error("Generate OTP error:",D),K.error("Failed to generate OTP")}finally{p(!1)}},O=async()=>{if(!c||c.length!==6){K.error("Please enter a valid 6-digit OTP");return}try{p(!0);const D=localStorage.getItem("accessToken"),_=await fetch("/api/otp/payment/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({paymentId:N,otp:c})}),I=await _.json();_.ok?(K.success("Payment verified successfully!"),r(N),t()):K.error(I.message||"Invalid OTP")}catch(D){console.error("Verify OTP error:",D),K.error("Failed to verify OTP")}finally{p(!1)}},R=async()=>{try{j(!0);const D=localStorage.getItem("accessToken"),_=await fetch("/api/otp/payment/resend",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({paymentId:N})}),I=await _.json();_.ok?(h(600),k(I.realTimeDelivered||!1),I.realTimeDelivered?K.success("OTP resent in real-time!"):K.success("OTP resent via SMS")):K.error(I.message||"Failed to resend OTP")}catch(D){console.error("Resend OTP error:",D),K.error("Failed to resend OTP")}finally{j(!1)}},L=D=>{const _=Math.floor(D/60),I=D%60;return`${_}:${I.toString().padStart(2,"0")}`},U=D=>{const _=D.replace(/\D/g,"").slice(0,6);u(_),_.length===6&&g&&A&&_===A&&O()};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:s.jsx(pt,{className:"h-6 w-6"})}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(He,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Real-time OTP Verification"}),s.jsx("p",{className:"text-gray-600",children:g?"OTP will appear automatically in the input field":"Enter the 6-digit OTP sent to your mobile number"})]}),s.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:b?s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(gA,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Real-time Connected"})]}):s.jsxs("div",{className:"flex items-center space-x-1 text-orange-600",children:[s.jsx(pA,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"SMS Mode"})]})}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Card ending in"}),s.jsxs("span",{className:"font-medium",children:["****",a.slice(-4)]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Amount"}),s.jsxs("span",{className:"font-bold text-lg",children:["",d]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Card Holder"}),s.jsx("span",{className:"font-medium",children:i})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Enter OTP",g&&s.jsx("span",{className:"ml-2 text-green-600 text-xs",children:"(Real-time)"})]}),s.jsx("input",{type:"text",value:c,onChange:D=>U(D.target.value),placeholder:g?"Auto-filling...":"000000",className:`w-full px-4 py-3 text-center text-2xl font-mono border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${g&&C?"border-green-500 bg-green-50":"border-gray-300"}`,maxLength:6}),g&&C&&s.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-2 text-green-600",children:[s.jsx(Ee,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"OTP received in real-time!"})]})]}),s.jsx("div",{className:"text-center mb-6",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-600",children:[s.jsx(He,{className:"h-4 w-4"}),s.jsxs("span",{children:["OTP expires in"," ",s.jsx("span",{className:"font-bold text-red-600",children:L(m)})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:O,disabled:f||c.length!==6||m<=0,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:f?"Verifying...":"Verify & Pay"}),s.jsxs("button",{onClick:R,disabled:y||m>540,className:"w-full py-2 px-4 text-blue-600 font-medium rounded-lg hover:bg-blue-50 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:[s.jsx(Dd,{className:`h-4 w-4 ${y?"animate-spin":""}`}),s.jsx("span",{children:y?"Resending...":"Resend OTP"})]})]}),s.jsx("div",{className:"mt-6 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:s.jsxs("p",{className:"text-xs text-yellow-800 text-center",children:[" This is a secure payment. Never share your OTP with anyone.",g&&" Real-time delivery is active."]})})]})}):null},q8=({pincode:e,cartValue:t,onFeeChange:r,className:n=""})=>{const[a,i]=w.useState(null),[o,l]=w.useState(!1),[d,c]=w.useState(null);if(w.useEffect(()=>{(async()=>{if(!e||!zM(e)){i(null),c("Please enter a valid 6-digit pincode"),r==null||r(0,!1,!1);return}l(!0),c(null);try{const h=await qM(e,t);i(h),r==null||r(h.totalFee,h.isFreeDelivery,h.isDeliveryAvailable)}catch(h){console.error("Error calculating delivery fee:",h),c("Error calculating delivery fee"),r==null||r(0,!1,!1)}finally{l(!1)}})()},[e,t,r]),!e)return s.jsx("div",{className:`bg-gray-50 rounded-lg p-4 ${n}`,children:s.jsxs("div",{className:"flex items-center text-gray-500",children:[s.jsx(ut,{className:"h-5 w-5 mr-2"}),s.jsx("span",{children:"Enter delivery pincode to calculate delivery fee"})]})});if(o)return s.jsx("div",{className:`bg-gray-50 rounded-lg p-4 ${n}`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Calculating delivery fee..."})]})});if(d)return s.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${n}`,children:s.jsxs("div",{className:"flex items-center text-red-600",children:[s.jsx(tn,{className:"h-5 w-5 mr-2"}),s.jsx("span",{children:d})]})});if(!a)return null;const u=[`Base Fee: ${a.baseFee}`,`Distance Fee: ${a.distanceFee}`,`Total: ${a.totalFee}`];return s.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`bg-white border border-gray-200 rounded-lg p-4 ${n}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(dr,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("span",{className:"font-medium text-gray-900",children:"Delivery Fee"})]}),s.jsx("div",{className:"flex items-center",children:a.isFreeDelivery?s.jsxs("div",{className:"flex items-center text-green-600",children:[s.jsx(Ee,{className:"h-5 w-5 mr-1"}),s.jsx("span",{className:"font-semibold",children:"Free Delivery"})]}):a.isDeliveryAvailable?s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:VM(a.totalFee,a.isFreeDelivery)}),a.distance!==null&&a.distance>0&&s.jsxs("div",{className:"text-xs text-gray-500",children:[a.distance,"km from warehouse"]})]}):s.jsxs("div",{className:"flex items-center text-red-600",children:[s.jsx(tn,{className:"h-5 w-5 mr-1"}),s.jsx("span",{className:"font-semibold",children:"Not Available"})]})})]}),a.isDeliveryAvailable&&!a.isFreeDelivery&&s.jsx("div",{className:"space-y-1 text-sm text-gray-600",children:u.map((m,h)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[m.split(":")[0],":"]}),s.jsx("span",{children:m.split(":")[1]})]},h))}),a.isFreeDelivery&&s.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[s.jsx(He,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:"Orders above 500 qualify for free delivery"})]}),!a.isDeliveryAvailable&&a.error&&s.jsx("div",{className:"text-sm text-red-600",children:a.error})]})},H8=[{name:"Visa",pattern:/^4/,length:[13,16,19],cvvLength:3,icon:""},{name:"MasterCard",pattern:/^5[1-5]/,length:[16],cvvLength:3,icon:""},{name:"American Express",pattern:/^3[47]/,length:[15],cvvLength:4,icon:""},{name:"Discover",pattern:/^6(?:011|5)/,length:[16],cvvLength:3,icon:""},{name:"RuPay",pattern:/^6[0-9]/,length:[16],cvvLength:3,icon:""}],W8=e=>{const t=e.replace(/\D/g,"");let r=0,n=!1;for(let a=t.length-1;a>=0;a--){let i=parseInt(t[a]);n&&(i*=2,i>9&&(i-=9)),r+=i,n=!n}return r%10===0},k1=e=>{const t=e.replace(/\D/g,"");for(const r of H8)if(r.pattern.test(t))return r;return null},Q8=(e,t)=>{if(!t)return!1;const r=e.replace(/\D/g,"");return t.length.includes(r.length)},K8=e=>{if(!/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(e))return!1;const[r,n]=e.split("/"),a=new Date,i=a.getFullYear()%100,o=a.getMonth()+1,l=parseInt(r),d=parseInt(n);return!(d<i||d===i&&l<o||l<1||l>12)},G8=(e,t)=>!t||!/^\d+$/.test(e)?!1:e.length===t.cvvLength,Y8=e=>/^[a-zA-Z\s]+$/.test(e.trim())&&e.trim().length>=2,J8=(e,t,r,n)=>{const a=[],i=e.replace(/\D/g,""),o=k1(i);return Q8(i,o)||a.push("Enter a valid card number"),i.length>0&&!Z8(i)&&!W8(i)&&a.push("Enter a valid card number"),K8(t)||a.push("Enter valid month/year"),G8(r,o)||a.push("Enter valid CVV"),Y8(n)||a.push("Enter valid card holder name"),{isValid:a.length===0,cardType:(o==null?void 0:o.name)||"Unknown",errors:a}},X8=e=>(e.replace(/\D/g,"").match(/.{1,4}/g)||[]).join(" ").substring(0,19),Z8=e=>{const t=e.replace(/\D/g,"");return["4687796308081910","4687796308011910","4000000000000002","4000000000000069","4000000000000119","5555555555554444","2223003122003222","378282246310005","6011111111111117","6011000990139424"].includes(t)},eL=()=>new Promise(e=>{if(window.Razorpay){e(!0);return}const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}),tL=async(e,t,r,n,a)=>{try{if(!await eL()){ae.error("Failed to load payment gateway. Please try again."),a();return}const o={};switch(e){case"card":o.card=!0,o.netbanking=!1,o.wallet=!1,o.upi=!1;break;case"upi":o.upi=!0,o.card=!1,o.netbanking=!1,o.wallet=!1;break;case"netbanking":o.netbanking=!0,o.card=!1,o.wallet=!1,o.upi=!1;break}const l={key:t.key,amount:t.amount,currency:t.currency,name:"CS Store",description:"Payment for your order",order_id:t.orderId,method:o,prefill:{name:r.name||"",email:r.email||"",contact:r.contact||""},theme:{color:"#2563eb"},handler:c=>{console.log("Payment successful:",c),n(c)},modal:{ondismiss:()=>{console.log("Payment cancelled by user"),ae.error("Payment cancelled"),a()}}};new window.Razorpay(l).open()}catch(i){console.error("Razorpay checkout error:",i),ae.error("Failed to open payment gateway. Please try again."),a()}},sL=async(e,t)=>{try{const r=await fetch("http://localhost:5001/api/razorpay/verify-payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)}),n=await r.json();return r.ok?{success:!0,orderId:n.orderId}:{success:!1,error:n.error||"Payment verification failed"}}catch(r){return console.error("Payment verification error:",r),{success:!1,error:r.message||"Network error occurred"}}},rL=()=>{const e=de(z=>z.cart),{user:t,isAuthenticated:r,tokens:n}=de(z=>z.auth),a=tt(),i=ce(),[o]=n6(),[l,d]=w.useState(!1),{data:c,refetch:u}=Ld(void 0,{skip:!r}),[m]=np(),[h,f]=w.useState("razorpay"),[p,y]=w.useState(!1),[j,N]=w.useState(!1),[v,b]=w.useState(!1),[x,g]=w.useState(!1),[k,C]=w.useState(!1),[S,A]=w.useState(!1),[E,T]=w.useState(""),[M,P]=w.useState(!1),[O,R]=w.useState(null),[L,U]=w.useState({cardNumber:"",expiryDate:"",cvv:"",cardHolderName:"",saveCard:!1}),[D,_]=w.useState({isValid:!1,cardType:"Unknown",errors:[]}),[I,q]=w.useState(null),[W,ie]=w.useState({cardNumber:"",expiryDate:"",cvv:"",cardHolderName:""}),se=async()=>{try{a(BC()),r&&(await o(void 0).unwrap(),console.log(" Backend MongoDB cart cleared successfully"))}catch(z){console.error("Error clearing backend cart:",z)}},$=()=>{const z=J8(L.cardNumber,L.expiryDate,L.cvv,L.cardHolderName);_(z);const G={cardNumber:"",expiryDate:"",cvv:"",cardHolderName:""};z.errors.forEach(Z=>{Z.toLowerCase().includes("card number")?G.cardNumber=Z:Z.toLowerCase().includes("month/year")?G.expiryDate=Z:Z.toLowerCase().includes("cvv")?G.cvv=Z:Z.toLowerCase().includes("card holder")&&(G.cardHolderName=Z)}),ie(G)},H=z=>X8(z),J=z=>{const G=z.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return G.length>=2?G.substring(0,2)+"/"+G.substring(2,4):G},oe=(z,G)=>{U(Z=>({...Z,[z]:G})),z==="cardHolderName"&&setTimeout($,100)},ee=z=>{const G=H(z);oe("cardNumber",G);const Z=k1(G);q(Z),setTimeout($,100)},ge=z=>{const G=J(z);oe("expiryDate",G),setTimeout($,100)},pe=z=>{const G=z.replace(/[^0-9]/gi,"").substring(0,4);oe("cvv",G),setTimeout($,100)},Ne=async()=>{try{if($(),!D.isValid){ae.error("Please fix the card details before proceeding");return}if(!L.cardNumber||!L.expiryDate||!L.cvv||!L.cardHolderName){ae.error("Please fill in all card details");return}const z=L.cardNumber.replace(/\s/g,"");if(z.length<13||z.length>19){ae.error("Please enter a valid card number");return}if(L.expiryDate.length!==5){ae.error("Please enter a valid expiry date (MM/YY)");return}if(L.cvv.length<3){ae.error("Please enter a valid CVV");return}const G={items:e.items.map(te=>({product:te.id||te.productId,quantity:te.quantity,price:te.price})),address:F,totalAmount:ke.total,paymentMethod:"card",paymentStatus:"pending"},Z={_id:`temp_${Date.now()}`,...G};R(Z),await We(),A(!0)}catch(z){console.error("Card payment error:",z),ae.error("Payment failed. Please try again.")}},We=async()=>{try{const z=localStorage.getItem("token"),G=await fetch("http://localhost:5001/api/otp/payment/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify({orderId:(O==null?void 0:O._id)||`temp_${Date.now()}`,cardNumber:L.cardNumber.replace(/\s/g,""),cardHolderName:L.cardHolderName,expiryDate:L.expiryDate,cvv:L.cvv})}),Z=await G.json();G.ok?ae.success("OTP sent to your registered mobile number"):ae.error(Z.message||"Failed to send OTP")}catch(z){console.error("OTP generation error:",z),ae.error("Failed to send OTP. Please try again.")}},Tt=async()=>{if(!E||E.length!==6){ae.error("Please enter a valid 6-digit OTP");return}P(!0);try{const z=localStorage.getItem("token"),G=await fetch("http://localhost:5001/api/otp/payment/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify({orderId:O==null?void 0:O._id,otp:E})}),Z=await G.json();G.ok?(ae.success("Payment verified successfully!"),U({cardNumber:"",expiryDate:"",cvv:"",cardHolderName:"",saveCard:!1}),g(!1),A(!1),T(""),await se(),i("/order-success")):ae.error(Z.message||"Invalid OTP. Please try again.")}catch(z){console.error("OTP verification error:",z),ae.error("OTP verification failed. Please try again.")}finally{P(!1)}},Ot=async z=>{ae.success("Payment verified successfully!"),U({cardNumber:"",expiryDate:"",cvv:"",cardHolderName:"",saveCard:!1}),g(!1),C(!1),A(!1),T(""),await se(),i("/order-success")},F=Ae.useMemo(()=>{const z=te=>({...te,lat:te.lat||17.385,lng:te.lng||78.4867}),G=(c==null?void 0:c.addresses)||[],Z=(c==null?void 0:c.defaultAddressId)||null;if(Z&&G.length>0){const te=G.find(he=>he._id===Z||he.id===Z);if(te)return z(te)}return null},[c]),X=Bp(F||void 0,e.total),le=async z=>{await se(),ae.success("Order placed successfully!"),i(`/orders/${z._id}`)},xe=z=>{ae.error(z)},ke=a1(e.items,X),Re=X.requiresAddress,Ie=async()=>{try{if(!F||Re||!F.pincode){ae.error("Please select a delivery address");return}const z=n==null?void 0:n.accessToken;if(!z){ae.error("Please log in to continue"),i("/login");return}const G=e.items.map(ve=>({productId:ve.id||ve.productId||ve._id,name:ve.name,price:ve.price,qty:ve.quantity})),Z=F,te={label:Z.label||Z.address||"Delivery Address",pincode:Z.pincode||"500001",city:Z.city||"Hyderabad",state:Z.state||"Telangana",addressLine:Z.addressLine||Z.address||`${Z.city||"Hyderabad"}, ${Z.state||"Telangana"} - ${Z.pincode||"500001"}`,lat:Z.lat||17.385,lng:Z.lng||78.4867},he=await fetch("/api/orders/cod",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify({items:G,address:te,totalAmount:ke.total})});if(!he.ok){const ve=await he.json().catch(()=>({}));throw new Error(ve.error||"Failed to place order")}await se(),ae.success("Order placed with Cash on Delivery"),i("/orders")}catch(z){console.error("COD order error:",z),ae.error(z.message||"Failed to place order")}},zt=async z=>{try{if(!F||!F.pincode){ae.error("Please select a delivery address");return}const G=n==null?void 0:n.accessToken;if(!G){ae.error("Please log in to continue"),i("/login");return}const Z=e.items.map($e=>({productId:$e.id||$e.productId||$e._id,name:$e.name,price:$e.price,qty:$e.quantity})),te=F,he={label:te.label||te.address||"Delivery Address",pincode:te.pincode||"500001",city:te.city||"Hyderabad",state:te.state||"Telangana",addressLine:te.addressLine||te.address||`${te.city||"Hyderabad"}, ${te.state||"Telangana"} - ${te.pincode||"500001"}`,lat:te.lat||17.385,lng:te.lng||78.4867},ve=await fetch("http://localhost:5001/api/razorpay/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${G}`},body:JSON.stringify({amount:ke.total,items:Z,address:he,paymentMethod:z})});if(!ve.ok){const $e=await ve.json().catch(()=>({}));throw new Error($e.error||"Failed to create order")}const Rt=await ve.json();await tL(z,{orderId:Rt.orderId,amount:Rt.amount,currency:Rt.currency,key:Rt.key},{name:t==null?void 0:t.name,email:t==null?void 0:t.email,contact:t==null?void 0:t.phone},async $e=>{const Js=await sL($e,G);Js.success?(await se(),ae.success("Payment successful!"),i("/order-success")):ae.error(Js.error||"Payment verification failed")},()=>{ae.error("Payment cancelled or failed")})}catch(G){console.error("Razorpay payment error:",G),ae.error(G.message||"Failed to process payment")}};return e.items.length===0?s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Add some products to checkout"}),s.jsx(fe,{to:"/products",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Continue Shopping"})]})]})}):s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Secure checkout"})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-orange-500"}),"Delivery Address"]})}),s.jsxs("div",{className:"py-4",children:[s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-orange-500 mt-1 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:F.label||"Delivery Address"}),s.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[s.jsx("p",{className:"font-medium",children:F.addressLine||`${F.city}, ${F.state}`}),s.jsxs("p",{children:[F.city,", ",F.state," -",F.pincode]})]})]})]})}),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:()=>d(!0),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:"Change Address"}),s.jsx("button",{className:"text-orange-500 hover:text-orange-600 text-sm font-medium",children:"Add delivery instructions"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment method"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 hover:border-orange-300 transition-colors cursor-pointer",onClick:()=>{f("razorpay"),y(!p),N(!1),b(!1)},children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",name:"payment",value:"razorpay",checked:h==="razorpay",onChange:z=>f(z.target.value),className:"h-4 w-4 text-orange-500 focus:ring-orange-500"}),s.jsx(ys,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Credit or debit card"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Visa, Mastercard, American Express"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:"Visa"}),s.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:"MC"}),s.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:"AMEX"})]})]}),p&&s.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:s.jsxs("div",{className:"mt-4 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("img",{src:"https://img.icons8.com/color/24/000000/visa.png",alt:"Visa",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/mastercard.png",alt:"Mastercard",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/amex.png",alt:"American Express",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/diners-club.png",alt:"Diners Club",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/maestro.png",alt:"Maestro",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/rupay.png",alt:"RuPay",className:"h-6"})]})})}),s.jsxs("button",{onClick:()=>g(!x),className:"w-full flex items-center justify-center space-x-2 py-3 px-4 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(ys,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:"Add a new credit or debit card"}),s.jsx("span",{className:"text-blue-600 text-xl",children:"+"})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center",children:"CS Store accepts all major credit & debit cards"})]})}),x&&s.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:s.jsxs("div",{className:"mt-4 p-4 bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," Please ensure your card can be used for online transactions. ","",s.jsx("span",{className:"text-blue-600 cursor-pointer underline",children:"Learn More"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"XXXX XXXX XXXX XXXX",value:L.cardNumber,onChange:z=>ee(z.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${W.cardNumber?"border-red-500 bg-red-50":L.cardNumber&&!W.cardNumber?"border-green-500 bg-green-50":"border-gray-300"}`,maxLength:19}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsxs("div",{className:"flex space-x-1",children:[I&&s.jsx("span",{className:"text-blue-600 font-bold text-lg",children:I.icon}),!I&&L.cardNumber&&s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("img",{src:"https://img.icons8.com/color/16/000000/visa.png",alt:"Visa",className:"h-4 opacity-30"}),s.jsx("img",{src:"https://img.icons8.com/color/16/000000/mastercard.png",alt:"Mastercard",className:"h-4 opacity-30"})]})]})})]}),W.cardNumber&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.cardNumber})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Holder Name"}),s.jsx("input",{type:"text",placeholder:"Enter card holder name",value:L.cardHolderName,onChange:z=>oe("cardHolderName",z.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${W.cardHolderName?"border-red-500 bg-red-50":L.cardHolderName&&!W.cardHolderName?"border-green-500 bg-green-50":"border-gray-300"}`}),W.cardHolderName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.cardHolderName})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valid Thru"}),s.jsx("input",{type:"text",placeholder:"MM/YY",value:L.expiryDate,onChange:z=>ge(z.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${W.expiryDate?"border-red-500 bg-red-50":L.expiryDate&&!W.expiryDate?"border-green-500 bg-green-50":"border-gray-300"}`,maxLength:5}),W.expiryDate&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.expiryDate})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CVV",s.jsx("span",{className:"ml-1 text-gray-400 cursor-help",title:"3 or 4 digit security code",children:"?"})]}),s.jsx("input",{type:"text",placeholder:"CVV",value:L.cvv,onChange:z=>pe(z.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${W.cvv?"border-red-500 bg-red-50":L.cvv&&!W.cvv?"border-green-500 bg-green-50":"border-gray-300"}`,maxLength:4}),W.cvv&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:W.cvv})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"saveCard",checked:L.saveCard,onChange:z=>oe("saveCard",z.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"saveCard",className:"ml-2 text-sm text-gray-700",children:"Save this card for future payments"})]}),S&&s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h3",{className:"text-base font-medium text-gray-800 mb-1",children:"Enter OTP"}),s.jsx("p",{className:"text-sm text-gray-600",children:"OTP sent to your mobile number"})]}),s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("input",{type:"text",value:E,onChange:z=>T(z.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-20 h-10 text-center text-lg font-medium border border-gray-300 rounded-md focus:border-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400",maxLength:6})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:Tt,disabled:M||E.length!==6,className:"flex-1 py-2 px-4 bg-gray-800 text-white text-sm font-medium rounded-md hover:bg-gray-900 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:M?"Verifying...":"Verify"}),s.jsx("button",{onClick:We,className:"px-4 py-2 text-gray-600 border border-gray-300 text-sm rounded-md hover:bg-gray-100 transition-colors",children:"Resend"})]})]}),s.jsx("button",{onClick:Ne,disabled:S||!D.isValid,className:`w-full py-3 px-4 font-medium rounded-lg transition-colors ${S||!D.isValid?"bg-gray-400 text-gray-500 cursor-not-allowed":"bg-yellow-500 text-white hover:bg-yellow-600"}`,children:S?"OTP Sent - Check Above":D.isValid?`Pay ${ke.total}`:"Please fix card details"})]})]})})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"flex items-center justify-between p-4 hover:border-orange-300 transition-colors cursor-pointer",onClick:()=>{f("upi"),N(!j),y(!1),b(!1)},children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",name:"payment",value:"upi",checked:h==="upi",onChange:z=>f(z.target.value),className:"h-4 w-4 text-orange-500 focus:ring-orange-500"}),s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"UPI"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Pay by any UPI app"})]})]})}),j&&s.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx("img",{src:"https://img.icons8.com/color/48/000000/google-pay.png",alt:"Google Pay",className:"h-8"}),s.jsx("img",{src:"https://img.icons8.com/color/48/000000/phonepe.png",alt:"PhonePe",className:"h-8"}),s.jsx("img",{src:"https://img.icons8.com/color/48/000000/paytm.png",alt:"Paytm",className:"h-8"}),s.jsx("img",{src:"https://img.icons8.com/color/48/000000/bhim.png",alt:"BHIM",className:"h-8"})]}),s.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Pay with any UPI app"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:" Enter UPI ID or scan QR code"}),s.jsx("li",{children:" Pay via Google Pay, PhonePe, Paytm, BHIM"}),s.jsx("li",{children:" Instant payment confirmation"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Click "Use this payment method" below to proceed with UPI payment'})]})]})})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"flex items-center justify-between p-4 hover:border-orange-300 transition-colors cursor-pointer",onClick:()=>{f("netbanking"),b(!v),y(!1),N(!1)},children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",name:"payment",value:"netbanking",checked:h==="netbanking",onChange:z=>f(z.target.value),className:"h-4 w-4 text-orange-500 focus:ring-orange-500"}),s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Net Banking"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Choose an Option"})]})]})}),v&&s.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:s.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("img",{src:"https://img.icons8.com/color/24/000000/sbi.png",alt:"SBI",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/hdfc.png",alt:"HDFC",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/icici.png",alt:"ICICI",className:"h-6"}),s.jsx("img",{src:"https://img.icons8.com/color/24/000000/axis-bank.png",alt:"Axis Bank",className:"h-6"})]})})}),s.jsxs("button",{className:"w-full flex items-center justify-center space-x-2 py-3 px-4 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsx("span",{className:"font-medium text-gray-900",children:"Choose Bank"})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center",children:"Pay using your bank's net banking facility"})]})})]}),s.jsx("div",{className:"border border-gray-200 rounded-lg",children:s.jsx("div",{className:"flex items-center justify-between p-4 hover:border-orange-300 transition-colors cursor-pointer",onClick:()=>{f("emi"),y(!1),N(!1),b(!1)},children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",name:"payment",value:"emi",checked:h==="emi",onChange:z=>f(z.target.value),className:"h-4 w-4 text-orange-500 focus:ring-orange-500"}),s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"EMI Unavailable"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Why?"})]})]})})}),s.jsx("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-orange-300 transition-colors",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",name:"payment",value:"cod",checked:h==="cod",onChange:z=>f(z.target.value),className:"h-4 w-4 text-orange-500 focus:ring-orange-500"}),s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Cash on Delivery/Pay on Delivery"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Cash, UPI and Cards accepted."," ",s.jsx("span",{className:"text-orange-500 cursor-pointer",children:"Know more"})]})]})]})})]}),h&&s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>{h==="cod"?Ie():h==="razorpay"&&p?zt("card"):h==="upi"?zt("upi"):h==="netbanking"&&zt("netbanking")},className:"w-full py-3 px-4 bg-amber-500 text-white font-medium rounded-lg hover:bg-amber-600 transition-colors",children:h==="cod"?"Place Order":`Pay ${ke.total}`})}),!Re&&X.distance!==null&&s.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-bold text-yellow-900 mb-3 flex items-center",children:" Delivery Fee Debug Information"}),s.jsxs("div",{className:"space-y-2 text-xs text-gray-800",children:[s.jsxs("div",{className:"bg-white p-2 rounded",children:[s.jsx("p",{className:"font-semibold text-blue-700",children:" Admin Warehouse:"}),s.jsx("p",{className:"ml-4",children:"Location: Tiruvuru (Boya Bazar), Andhra Pradesh"}),s.jsx("p",{className:"ml-4",children:"Coordinates: 17.0956, 80.6089"}),s.jsx("p",{className:"ml-4",children:"Pincode: 521235"})]}),s.jsxs("div",{className:"bg-white p-2 rounded",children:[s.jsx("p",{className:"font-semibold text-green-700",children:" Your Default Address:"}),s.jsxs("p",{className:"ml-4",children:["Location: ",F==null?void 0:F.city,", ",F==null?void 0:F.state]}),s.jsxs("p",{className:"ml-4",children:["Coordinates: ",(F==null?void 0:F.lat)||"N/A",", ",(F==null?void 0:F.lng)||"N/A"]}),s.jsxs("p",{className:"ml-4",children:["Pincode: ",F==null?void 0:F.pincode]})]}),s.jsxs("div",{className:"bg-white p-2 rounded",children:[s.jsx("p",{className:"font-semibold text-purple-700",children:" Distance Calculation:"}),s.jsxs("p",{className:"ml-4",children:["Distance: ",X.distance.toFixed(2)," km"]}),s.jsx("p",{className:"ml-4",children:"Method: Haversine Formula (straight-line)"})]}),s.jsxs("div",{className:"bg-white p-2 rounded",children:[s.jsx("p",{className:"font-semibold text-orange-700",children:" Pricing Breakdown:"}),s.jsxs("p",{className:"ml-4",children:["Cart Subtotal: ",e.total.toFixed(2)]}),s.jsx("p",{className:"ml-4",children:!(F!=null&&F.lat)||!(F!=null&&F.lng)||F.lat===0||F.lng===0?s.jsx("span",{className:"text-red-600 font-bold",children:" CANNOT CALCULATE (Invalid coordinates)"}):X.isFreeDelivery?s.jsx("span",{className:"text-green-600 font-bold",children:" FREE DELIVERY (Cart  2000)"}):X.distance<=2?s.jsx(s.Fragment,{children:"Pricing Tier: Up to 2 km  25"}):X.distance<=6?s.jsxs(s.Fragment,{children:["Pricing Tier: 2-6 km  ",Math.round(35+(X.distance-2)/4*25)," (progressive)"]}):s.jsxs(s.Fragment,{children:["Pricing Tier: Beyond 6 km  60 + (",(X.distance-6).toFixed(2)," km  8) = ",Math.round(60+(X.distance-6)*8)]})}),s.jsxs("p",{className:"ml-4 font-bold text-red-600 text-base mt-1",children:["Final Delivery Fee: ",X.finalFee]})]}),s.jsxs("div",{className:"bg-red-50 p-2 rounded border border-red-200",children:[s.jsx("p",{className:"font-semibold text-red-700",children:" Issue Detection:"}),!(F!=null&&F.lat)||!(F!=null&&F.lng)||X.distance===0?s.jsxs("div",{className:"ml-4 text-red-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:" CRITICAL ERROR:"})," Your address has invalid GPS coordinates!"]}),s.jsxs("p",{className:"text-xs",children:[" Coordinates: ",(F==null?void 0:F.lat)||"N/A",", ",(F==null?void 0:F.lng)||"N/A"]}),s.jsx("p",{className:"text-xs",children:" This causes incorrect delivery fee calculation"}),s.jsx("p",{className:"text-xs font-bold",children:" Charging penalty fee of 500"}),s.jsxs("p",{className:"text-xs bg-yellow-100 p-1 rounded mt-1",children:[" ",s.jsx("strong",{children:"Fix:"})," Delete this address and create a new one with complete details (street name, landmark, area) so the system can locate it accurately"]})]}):(F==null?void 0:F.pincode)==="521235"&&X.finalFee>100?s.jsxs("p",{className:"ml-4 text-red-600",children:[s.jsx("strong",{children:" WARNING:"})," Your address pincode matches warehouse (521235) but distance is ",X.distance.toFixed(2)," km. This suggests incorrect coordinates are stored for your address!"]}):s.jsx("p",{className:"ml-4 text-green-600",children:" Calculation looks normal"})]})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xt,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Secure Payment"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Your payment is secured with 256-bit SSL encryption"})]})]})})]}),F&&F.pincode&&!Re&&s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsx(q8,{pincode:F.pincode,cartValue:e.total})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review items and shipping"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Need help? Check our"," ",s.jsx("span",{className:"text-orange-500 cursor-pointer",children:"help pages"})," ","or"," ",s.jsx("span",{className:"text-orange-500 cursor-pointer",children:"contact us 24x7"}),"."]}),s.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"When your order is placed, we'll send you an e-mail message acknowledging receipt of your order. If you choose to pay using an electronic payment method (credit card, debit card or net banking), you will be directed to your bank's website to complete your payment. Your contract to purchase an item will not be complete until we receive your electronic payment and dispatch your item. If you choose to pay using Pay on Delivery (POD), you can pay using cash/card/net banking when you receive your item."}),s.jsxs("div",{className:"mt-4 space-x-4",children:[s.jsx("span",{className:"text-orange-500 cursor-pointer text-sm",children:"See CS Store's Return Policy."}),s.jsx("span",{className:"text-orange-500 cursor-pointer text-sm",children:"Back to cart"})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx("div",{className:"sticky top-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx(e8,{orderData:{items:e.items,totalAmount:ke.total,address:F},onSuccess:le,onError:xe}),s.jsxs("div",{className:"mt-8 space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Price (",ke.itemCount," items):"]}),s.jsx("span",{className:"font-medium",children:ts(ke.subtotal)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Discount:"}),s.jsxs("span",{className:"font-medium text-green-600",children:["- ",ts(ke.discount)]})]}),Re?s.jsx("div",{className:"text-sm text-amber-700",children:"Add delivery address to calculate delivery fee"}):s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery:"}),s.jsx("span",{className:"font-medium",children:HM(X)})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[s.jsx("span",{children:"Order Total:"}),s.jsx("span",{children:ts(ke.total)})]})})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2 text-xs text-gray-500",children:[s.jsx(Xt,{className:"h-4 w-4"}),s.jsx("span",{children:"Secured by CS Store"})]})]})})})]}),s.jsx(EN,{isOpen:l,onClose:()=>d(!1),onAddressSelect:async z=>{try{await m(z).unwrap(),await u(),ae.success("Default address updated"),d(!1)}catch(G){console.error("Failed to update default address:",G),ae.error("Failed to update address")}},addresses:(c==null?void 0:c.addresses)||[],defaultAddressId:(c==null?void 0:c.defaultAddressId)||null}),k&&s.jsx(V8,{isOpen:k,onClose:()=>C(!1),onSuccess:Ot,orderId:(O==null?void 0:O._id)||"",cardNumber:L.cardNumber,cardHolderName:L.cardHolderName,expiryDate:L.expiryDate,cvv:L.cvv,amount:ke.total})]})})},nL=()=>{const e=ce(),{tokens:t,isAuthenticated:r,user:n}=de(x=>x.auth),[a,i]=w.useState([]),[o,l]=w.useState(!0),[d,c]=w.useState(null),[u,m]=w.useState(""),[h,f]=w.useState(null);w.useEffect(()=>{if(!r){l(!1);return}p()},[r]),w.useEffect(()=>{if(!r||!(t!=null&&t.accessToken)||!(n!=null&&n.id))return;const x=Qr("http://localhost:5001",{auth:{token:t.accessToken}});return x.on("connect",()=>{console.log("[ORDERS] Socket connected"),x.emit("join_room",{room:`user_${n.id}`,userId:n.id,userRole:"user"})}),x.on("order:statusUpdate",g=>{console.log("[ORDERS] Received status update:",g),ae.success(`Order status updated: ${g.message||g.status}`),p()}),x.on("disconnect",()=>{console.log("[ORDERS] Socket disconnected")}),f(x),()=>{x.disconnect()}},[r,t,n]);const p=async()=>{try{l(!0),c(null);const x=await fetch("/api/orders",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t==null?void 0:t.accessToken}`}});if(!x.ok)throw new Error("Failed to fetch orders");const g=await x.json();i(g.orders||[])}catch(x){console.error("Error fetching orders:",x),c("Failed to load orders. Please try again later.")}finally{l(!1)}},y=x=>({created:"Pending",pending:"Pending",assigned:"Processing",picked_up:"Shipped",in_transit:"Shipped",delivered:"Delivered",cancelled:"Cancelled"})[x.toLowerCase()]||x,j=a.filter(x=>{if(!u)return!0;const g=x.orderStatus||x.status||"";return y(g).toLowerCase()===u.toLowerCase()}),N=x=>{switch(y(x)){case"Pending":return s.jsx(He,{className:"h-5 w-5 text-yellow-600"});case"Processing":return s.jsx(ze,{className:"h-5 w-5 text-blue-600"});case"Shipped":return s.jsx(ze,{className:"h-5 w-5 text-purple-600"});case"Delivered":return s.jsx(Ee,{className:"h-5 w-5 text-green-600"});case"Cancelled":return s.jsx(tn,{className:"h-5 w-5 text-red-600"});default:return s.jsx(He,{className:"h-5 w-5 text-gray-600"})}},v=x=>{switch(y(x)){case"Pending":return"bg-yellow-100 text-yellow-800";case"Processing":return"bg-blue-100 text-blue-800";case"Shipped":return"bg-purple-100 text-purple-800";case"Delivered":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=x=>{const g=x.paymentMethod||"cod",k=x.paymentStatus||"pending";return k==="paid"&&x.paymentReceivedAt?g==="cod"?`Paid via UPI on ${new Date(x.paymentReceivedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:`Paid via Razorpay on ${new Date(x.paymentReceivedAt||x.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:k==="paid"?g==="cod"?"Paid via UPI":"Paid via Razorpay":"Payment Pending"};return r?o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading your orders..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Orders"}),s.jsx("p",{className:"text-gray-600",children:"Track and manage your order history"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("select",{value:u,onChange:x=>m(x.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Orders"}),s.jsx("option",{value:"Pending",children:"Pending"}),s.jsx("option",{value:"Processing",children:"Processing"}),s.jsx("option",{value:"Shipped",children:"Shipped"}),s.jsx("option",{value:"Delivered",children:"Delivered"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),d?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 text-lg font-medium mb-2",children:"Error Loading Orders"}),s.jsx("p",{className:"text-gray-600 mb-4",children:d}),s.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"})]}):j.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Kt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:u?"No orders with this status":"No orders found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:u?"Try selecting a different status or view all orders.":"You haven't placed any orders yet. Start shopping to see your orders here."}),u&&s.jsx("button",{onClick:()=>m(""),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"View All Orders"}),!u&&s.jsx("a",{href:"/products",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-block",children:"Start Shopping"})]}):s.jsx("div",{className:"space-y-6",children:j.map(x=>{var g,k,C,S,A;return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[y(x.orderStatus||x.status||"")==="Cancelled"&&s.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 font-semibold text-center",children:"Order has been cancelled by the seller"})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Items (",x.items.length,")"]}),s.jsx("div",{className:"space-y-2",children:x.items.map((E,T)=>{var D,_,I,q,W,ie,se;const M=typeof E.productId=="object"?E.productId:null,P=E.name||(M==null?void 0:M.name)||((D=E.product)==null?void 0:D.name)||"Product",O=E.price||(M==null?void 0:M.price)||((_=E.product)==null?void 0:_.price)||0,R=E.qty||E.quantity||1;let L="/placeholder-product.png";if(M!=null&&M.images&&M.images.length>0){const $=M.images[0];typeof $=="object"&&$!==null&&(L=$.thumb||$.full)}else if((I=E.product)!=null&&I.images&&E.product.images.length>0){const $=E.product.images[0];typeof $=="object"&&$!==null&&(L=$.thumb||$.full)}else(q=E.product)!=null&&q.imageUrl?L=E.product.imageUrl:P!=="Product"&&(L=Tn(M||E.product));L&&L.includes("via.placeholder.com")&&(L="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZTVlN2ViIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM5Y2EzYWYiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiI+Tm8gSW1hZ2U8L3RleHQ+PC9zdmc+");const U=(typeof E.productId=="object"?(W=E.productId)==null?void 0:W._id:E.productId)||((ie=E.product)==null?void 0:ie._id)||((se=E.product)==null?void 0:se.id);return s.jsxs("div",{className:"flex items-center space-x-3 py-2 cursor-pointer hover:bg-gray-50 rounded-lg transition-colors",onClick:()=>U&&e(`/product/${U}`),children:[s.jsx("img",{src:L,alt:P,className:"w-12 h-12 rounded-lg object-cover",onError:$=>{$.target.src!=="/placeholder-product.png"&&($.target.src="/placeholder-product.png")}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:P}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",R,"  ",O]})]}),s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",(R*O).toLocaleString()]})]},T)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),s.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",x.totalAmount.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),s.jsx("p",{className:"text-sm text-gray-900 mb-1",children:x.paymentStatus==="paid"?"Paid":"Pending"}),s.jsx("p",{className:"text-xs text-gray-600",children:b(x)})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Delivery Address"}),s.jsxs("p",{className:"text-sm text-gray-900",children:[((g=x.address)==null?void 0:g.addressLine)||((k=x.address)==null?void 0:k.label)||((C=x.shippingAddress)==null?void 0:C.street)||"N/A",", "," ",((S=x.address)==null?void 0:S.city)||((A=x.shippingAddress)==null?void 0:A.city)||"N/A"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[N(x.orderStatus||x.status||""),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${v(x.orderStatus||x.status||"")}`,children:y(x.orderStatus||x.status||"")})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),s.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["",x.totalAmount.toLocaleString()]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex space-x-3",children:[y(x.orderStatus||x.status||"")!=="Cancelled"&&s.jsxs("button",{onClick:()=>e(`/orders/${x._id}`),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[s.jsx(or,{className:"h-4 w-4 mr-1"}),"View Details"]}),y(x.orderStatus||x.status||"")==="Delivered"&&s.jsx("button",{className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Reorder"})]}),s.jsx("div",{className:"mt-2 sm:mt-0",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated:"," ",new Date(x.updatedAt).toLocaleDateString()]})})]})]},x._id)})})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Login Required"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to view your orders."})]}),s.jsx("a",{href:"/login",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-block",children:"Go to Login"})]})})},aL=()=>{var E,T,M;const{orderId:e}=No(),t=ce(),{tokens:r,isAuthenticated:n}=de(P=>P.auth),[a,i]=w.useState(null),[o,l]=w.useState(!0),[d,c]=w.useState(null),[u,m]=w.useState(null);w.useEffect(()=>{if(!n){t("/login");return}h()},[n,e]),w.useEffect(()=>{if(!n||!(r!=null&&r.accessToken)||!a)return;const P=Qr("http://localhost:5001",{auth:{token:r.accessToken}});return P.on("connect",()=>{var R;console.log("[ORDER_DETAILS] Socket connected");const O=((R=a.userId)==null?void 0:R._id)||a.userId;O&&(P.emit("join_room",{room:`user_${O}`,userId:O,userRole:"user"}),console.log(`[ORDER_DETAILS] Joined room: user_${O}`)),P.emit("join_room",{room:`order_${e}`,userId:O,userRole:"user"}),console.log(`[ORDER_DETAILS] Joined room: order_${e}`)}),P.on("order:statusUpdate",O=>{console.log("[ORDER_DETAILS] Received status update:",O),(O.orderId===e||O.orderId===a._id)&&(ae.success(O.message||`Order status updated: ${O.status}`),h())}),P.on("order:delivered",O=>{console.log("[ORDER_DETAILS] Order delivered:",O),(O.orderId===e||O.orderId===a._id)&&(ae.success(O.message||"Your order has been delivered!"),h())}),P.on("disconnect",()=>{console.log("[ORDER_DETAILS] Socket disconnected")}),m(P),()=>{P.disconnect()}},[n,r,e,a==null?void 0:a._id]);const h=async()=>{try{l(!0),c(null);const P=await fetch(`/api/orders/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r==null?void 0:r.accessToken}`}});if(!P.ok)throw new Error("Failed to fetch order details");const O=await P.json();i(O)}catch(P){console.error("Error fetching order details:",P),c("Failed to load order details. Please try again later.")}finally{l(!1)}},f=P=>{const O=[{key:"created",label:"Order Confirmed",icon:Ee},{key:"picked_up",label:"Picked Up",icon:ze},{key:"in_transit",label:"In Transit",icon:ze},{key:"delivered",label:"Delivered",icon:Ee}],R=O.findIndex(L=>L.key===P);return O.map((L,U)=>({...L,completed:U<=R}))};if(o)return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})})});if(d||!a)return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 text-lg font-medium mb-2",children:d||"Order not found"}),s.jsx("button",{onClick:()=>t("/orders"),className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Back to Orders"})]})})});const p=f(a.orderStatus||"created"),j=(()=>{let P=0,O=0;a.items.forEach(U=>{const D=typeof U.productId=="object"?U.productId:U.product,_=U.qty||U.quantity||1,I=(D==null?void 0:D.mrp)||0,q=U.price||(D==null?void 0:D.price)||0;P+=(I>0?I:q)*_,O+=q*_});const R=Math.max(0,a.totalAmount-O),L=P>O?P-O:0;return{listingPrice:P,sellingPrice:O,discount:L,deliveryFee:R,totalAmount:a.totalAmount}})(),N=P=>{const O=P.paymentMethod||"cod",R=P.paymentStatus||"pending";return R==="paid"&&P.paymentReceivedAt?O==="cod"?`Paid via UPI on ${new Date(P.paymentReceivedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:`Paid via Razorpay on ${new Date(P.paymentReceivedAt||P.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:R==="paid"?O==="cod"?"Paid via UPI":"Paid via Razorpay":"Payment Pending"},v=a.address,b=(E=v==null?void 0:v.addressLine)==null?void 0:E.trim(),x=[v==null?void 0:v.city,v==null?void 0:v.state].filter(Boolean).join(", "),g=[x,v==null?void 0:v.pincode].filter(Boolean).join(" "),k=b==null?void 0:b.toLowerCase(),C=x&&k?k.includes(x.toLowerCase()):!1,S=v!=null&&v.pincode&&b?b.includes(String(v.pincode)):!1,A=!!(x||v!=null&&v.pincode)&&(!b||x&&!C||(v==null?void 0:v.pincode)&&!S);return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("button",{onClick:()=>t("/orders"),className:"flex items-center text-blue-600 hover:text-blue-800 mb-6",children:[s.jsx(Ce,{className:"h-5 w-5 mr-2"}),"Back to Orders"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.orderStatus==="cancelled"&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 font-semibold text-center",children:"Order has been cancelled by the seller"})}),a.items.map((P,O)=>{var q,W;const R=typeof P.productId=="object"?P.productId:P.product,L=P.name||(R==null?void 0:R.name)||"Product",U=P.price||(R==null?void 0:R.price)||0,D=P.qty||P.quantity||1;let _=R!=null&&R.images&&R.images.length>0?typeof R.images[0]=="string"?R.images[0]:((q=R.images[0])==null?void 0:q.full)||R.images[0]:"/placeholder-product.png";_&&_.includes("via.placeholder.com")&&(_="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZTVlN2ViIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM5Y2EzYWYiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiI+Tm8gSW1hZ2U8L3RleHQ+PC9zdmc+");const I=(typeof P.productId=="object"?(W=P.productId)==null?void 0:W._id:P.productId)||(R==null?void 0:R._id)||(R==null?void 0:R.id);return s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>I&&t(`/product/${I}`),children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("img",{src:_,alt:L,className:"w-24 h-24 object-cover rounded-lg",onError:ie=>{ie.target.src="/placeholder-product.png"}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:L}),s.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[(R==null?void 0:R.mrp)&&R.mrp>U&&s.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["",R.mrp]}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",U]})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",D]})]})]})},O)}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Status"}),s.jsx("div",{className:"space-y-3",children:p.map((P,O)=>{const R=P.icon,L=O===p.length-1,U=p[O+1];return s.jsxs("div",{className:"relative flex items-start",children:[s.jsxs("div",{className:"relative flex flex-col items-center",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${P.completed?"bg-green-500":"bg-gray-200"}`,children:P.completed?s.jsx(Ee,{className:"h-5 w-5 text-white"}):s.jsx(R,{className:"h-5 w-5 text-gray-400"})}),!L&&s.jsx("div",{className:`w-0.5 h-6 mt-1 ${P.completed&&(U!=null&&U.completed)?"bg-green-500":"bg-gray-300"}`})]}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsx("p",{className:`text-sm font-medium ${P.completed?"text-gray-900":"text-gray-500"}`,children:P.label}),P.key===a.orderStatus&&s.jsx("p",{className:"text-xs text-blue-600 mt-0.5",children:"Current Status"})]})]},P.key)})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delivery Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:((T=a.address)==null?void 0:T.label)||"Home"}),b&&s.jsx("p",{className:"text-sm text-gray-600",children:b}),A&&s.jsx("p",{className:"text-sm text-gray-600",children:g})]})]}),((M=a.userId)==null?void 0:M.name)&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(De,{className:"h-5 w-5 text-gray-500"}),s.jsx("p",{className:"text-sm text-gray-900",children:a.userId.name})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Price Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Listing price"}),s.jsxs("span",{className:"text-gray-500 line-through",children:["",j.listingPrice]})]}),j.discount>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-green-600",children:"Discount"}),s.jsxs("span",{className:"text-green-600",children:["-",j.discount]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600 flex items-center",children:["Selling price",s.jsx(Ee,{className:"h-4 w-4 text-green-500 ml-1"})]}),s.jsxs("span",{className:"text-gray-900",children:["",j.sellingPrice]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery fees"}),s.jsx("span",{className:"text-gray-900",children:j.deliveryFee>0?`${j.deliveryFee}`:"FREE"})]}),s.jsx("div",{className:"border-t border-gray-200 pt-3",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:"Total amount"}),s.jsxs("span",{className:"font-bold text-xl text-gray-900",children:["",j.totalAmount]})]})}),s.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Status"}),s.jsx("span",{className:"text-gray-900 font-medium",children:a.paymentStatus==="paid"?"Paid":"Pending"})]}),a.paymentMethod==="cod"&&a.paymentReceivedAt&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Payment received on"}),s.jsx("span",{className:"text-green-600 font-medium",children:new Date(a.paymentReceivedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Payment method"}),s.jsx("span",{className:"text-gray-900 font-medium",children:N(a)})]})]})]})]})]})]})]})})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function iL(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(m){o(m)}}function d(u){try{c(n.throw(u))}catch(m){o(m)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,[])).next())})}var oL=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!==0;){var o=i[a];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};const My="__googleMapsScriptId";var pa;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(pa||(pa={}));class vn{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:i=My,language:o,libraries:l=[],mapIds:d,nonce:c,region:u,retries:m=3,url:h="https://maps.googleapis.com/maps/api/js",version:f}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=i||My,this.language=o,this.libraries=l,this.mapIds=d,this.nonce=c,this.region=u,this.retries=m,this.url=h,this.version=f,vn.instance){if(!oL(this.options,vn.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(vn.instance.options)}`);return vn.instance}vn.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?pa.FAILURE:this.done?pa.SUCCESS:this.loading?pa.LOADING:pa.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+="?callback=__googleMapsCallback",this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}importLibrary(t){return this.execute(),google.maps.importLibrary(t)}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){var t,r;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(i=>!n[i]&&delete n[i]),!((r=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.maps)===null||r===void 0)&&r.importLibrary||(i=>{let o,l,d,c="The Google Maps JavaScript API",u="google",m="importLibrary",h="__ib__",f=document,p=window;p=p[u]||(p[u]={});const y=p.maps||(p.maps={}),j=new Set,N=new URLSearchParams,v=()=>o||(o=new Promise((b,x)=>iL(this,void 0,void 0,function*(){var g;yield l=f.createElement("script"),l.id=this.id,N.set("libraries",[...j]+"");for(d in i)N.set(d.replace(/[A-Z]/g,k=>"_"+k[0].toLowerCase()),i[d]);N.set("callback",u+".maps."+h),l.src=this.url+"?"+N,y[h]=b,l.onerror=()=>o=x(Error(c+" could not load.")),l.nonce=this.nonce||((g=f.querySelector("script[nonce]"))===null||g===void 0?void 0:g.nonce)||"",f.head.append(l)})));y[m]?console.warn(c+" only loads once. Ignoring:",i):y[m]=(b,...x)=>j.add(b)&&v().then(()=>y[m](b,...x))})(n);const a=this.libraries.map(i=>this.importLibrary(i));a.length||a.push(this.importLibrary("core")),Promise.all(a).then(()=>this.callback(),i=>{const o=new ErrorEvent("error",{error:i});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}var lL={VITE_API_URL:"http://localhost:5001",VITE_CLOUDINARY_CLOUD_NAME:"your_cloud_name_here",VITE_CLOUDINARY_UPLOAD_PRESET:"your_unsigned_upload_preset",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const cL=({center:e,zoom:t=15,markers:r=[],polylines:n=[],onMarkerClick:a,className:i=""})=>{const o=w.useRef(null),[l,d]=w.useState(null),[c,u]=w.useState([]),[m,h]=w.useState([]),[f,p]=w.useState(!0),[y,j]=w.useState(null);return w.useEffect(()=>{(async()=>{try{p(!0),j(null);const b=await new vn({apiKey:lL.VITE_GOOGLE_MAPS_API_KEY||"",version:"weekly",libraries:["places","geometry"]}).load();if(!o.current)return;const x=new b.maps.Map(o.current,{center:e,zoom:t,mapTypeId:b.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});d(x)}catch(v){console.error("Error loading Google Maps:",v),j("Failed to load map")}finally{p(!1)}})()},[]),w.useEffect(()=>{if(!l)return;c.forEach(v=>v.setMap(null)),u([]);const N=r.map(v=>{const b=new google.maps.Marker({position:v.position,map:l,title:v.title,icon:v.icon?{url:v.icon,scaledSize:new google.maps.Size(32,32)}:void 0});if(v.info){const x=new google.maps.InfoWindow({content:v.info});b.addListener("click",()=>{x.open(l,b),a&&a(v.id)})}return b});u(N)},[l,r,a]),w.useEffect(()=>{if(!l)return;m.forEach(v=>v.setMap(null)),h([]);const N=n.map(v=>new google.maps.Polyline({path:v.path,geodesic:!0,strokeColor:v.color||"#0ea5e9",strokeOpacity:1,strokeWeight:v.weight||3,map:l}));h(N)},[l,n]),w.useEffect(()=>{l&&l.setCenter(e)},[l,e]),y?s.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${i}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:y})]})}):s.jsxs("div",{className:`relative ${i}`,children:[f&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})}),s.jsx("div",{ref:o,className:"w-full h-full"})]})},dL=({order:e,onStatusUpdate:t,showActions:r=!1})=>{const n=i=>{switch(i){case"created":return"bg-gray-100 text-gray-800";case"assigned":return"bg-blue-100 text-blue-800";case"picked_up":return"bg-yellow-100 text-yellow-800";case"in_transit":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},a=i=>{switch(i){case"created":return"Order Created";case"assigned":return"Assigned to Driver";case"picked_up":return"Picked Up";case"in_transit":return"In Transit";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return i}};return s.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900",children:["Order #",e._id.slice(-8)]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString()})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n(e.orderStatus)}`,children:a(e.orderStatus)})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Items:"}),s.jsx("div",{className:"space-y-1",children:e.items.map((i,o)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[i.name,"  ",i.qty]}),s.jsxs("span",{className:"font-medium",children:["",(i.price*i.qty).toFixed(2)]})]},o))}),s.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:"Total:"}),s.jsxs("span",{className:"font-bold text-lg",children:["",e.totalAmount.toFixed(2)]})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Delivery Address:"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[e.address.label,": ",e.address.addressLine,","," ",e.address.city," - ",e.address.pincode]})]}),e.deliveryBoy&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Delivery Boy:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-semibold text-primary-600",children:e.deliveryBoy.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.deliveryBoy.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:[e.deliveryBoy.vehicleType,"  ",e.deliveryBoy.phone]})]})]})]}),r&&t&&s.jsxs("div",{className:"flex space-x-2 pt-3 border-t",children:[e.orderStatus==="assigned"&&s.jsx("button",{onClick:()=>t(e._id,"picked_up"),className:"flex-1 py-2 px-3 bg-yellow-600 text-white rounded-lg text-sm font-medium hover:bg-yellow-700 transition-colors",children:"Mark as Picked Up"}),e.orderStatus==="picked_up"&&s.jsx("button",{onClick:()=>t(e._id,"in_transit"),className:"flex-1 py-2 px-3 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors",children:"Start Delivery"}),e.orderStatus==="in_transit"&&s.jsx("button",{onClick:()=>t(e._id,"delivered"),className:"flex-1 py-2 px-3 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"Mark as Delivered"})]})]})},C1=()=>{const[e,t]=w.useState(null),[r,n]=w.useState(!1);return w.useEffect(()=>{const a=Qr("http://localhost:5001",{transports:["websocket"]});return a.on("connect",()=>{console.log("Connected to server"),n(!0)}),a.on("disconnect",()=>{console.log("Disconnected from server"),n(!1)}),t(a),()=>{a.disconnect()}},[]),{socket:e,isConnected:r}},uL=e=>{const{socket:t}=C1(),[r,n]=w.useState("created"),[a,i]=w.useState("pending");return w.useEffect(()=>{if(!(!t||!e))return t.emit("join_room",{room:`order_${e}`,userId:"user"}),t.on("order:status:update",o=>{o.orderId===e&&n(o.status)}),t.on("order:payment:success",o=>{o.orderId===e&&i("paid")}),t.on("order:payment:failed",o=>{o.orderId===e&&i("failed")}),()=>{t.off("order:status:update"),t.off("order:payment:success"),t.off("order:payment:failed")}},[t,e]),{orderStatus:r,paymentStatus:a}},mL=()=>{var h,f;const{id:e}=No(),[t,r]=w.useState(null),[n,a]=w.useState(null),[i,o]=w.useState(!0),{orderStatus:l,paymentStatus:d}=uL(e||""),{socket:c}=C1();if(w.useEffect(()=>{(async()=>{try{const y=await fetch(`/api/orders/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(y.ok){const j=await y.json();r(j)}else{const j={_id:e,items:[{name:"Rice 1kg",qty:2,price:50},{name:"Dal 500g",qty:1,price:80}],totalAmount:180,address:{label:"Home",addressLine:"123 Main Street",city:"Hyderabad",pincode:"500001",lat:17.385,lng:78.4867},orderStatus:"in_transit",paymentStatus:"paid",createdAt:new Date().toISOString(),deliveryBoy:{name:"Rajesh Kumar",phone:"9876543210",vehicleType:"bike"}};r(j)}}catch(y){console.error("Failed to fetch order:",y)}finally{o(!1)}})(),a({lat:17.39,lng:78.49})},[e]),w.useEffect(()=>{t&&l&&l!==t.orderStatus&&(r(p=>({...p,orderStatus:l})),ae.success(`Order status updated: ${l}`))},[l,t]),w.useEffect(()=>{t&&d&&d!==t.paymentStatus&&(r(p=>({...p,paymentStatus:d})),d==="paid"?ae.success("Payment confirmed!"):d==="failed"&&ae.error("Payment failed"))},[d,t]),w.useEffect(()=>{if(c&&(t!=null&&t.deliveryBoyId))return c.emit("join_room",{room:`order_${e}`,userId:"customer",userRole:"customer"}),c.on("driver:location:update",p=>{p.driverId===t.deliveryBoyId&&a({lat:p.lat,lng:p.lng})}),()=>{c.off("driver:location:update")}},[c,t,e]),i)return s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})})});if(!t)return s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Order Tracking"}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order not found"}),s.jsx("p",{className:"text-gray-600",children:"The order you're looking for doesn't exist."})]})]})});const u=[{id:"destination",position:{lat:t.address.lat,lng:t.address.lng},title:"Delivery Address",icon:"",info:`${t.address.label}: ${t.address.addressLine}`}];n&&u.push({id:"driver",position:n,title:"Delivery Boy",icon:"",info:`${(h=t.deliveryBoy)==null?void 0:h.name} - ${(f=t.deliveryBoy)==null?void 0:f.vehicleType}`});const m=n?[{path:[{lat:n.lat,lng:n.lng},{lat:t.address.lat,lng:t.address.lng}],color:"#0ea5e9",weight:3}]:[];return s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Order Tracking"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Live Tracking"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Real-time delivery location"})]}),s.jsx("div",{className:"h-96",children:s.jsx(cL,{center:t.address,zoom:13,markers:u,polylines:m,className:"h-full"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(dL,{order:t}),t.orderStatus==="cancelled"&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 font-semibold text-center",children:"Order has been cancelled by the seller"})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Status"}),s.jsx("div",{className:"space-y-4",children:[{status:"created",label:"Order Created",completed:!0},{status:"assigned",label:"Assigned to Driver",completed:!0},{status:"picked_up",label:"Picked Up",completed:t.orderStatus==="picked_up"||t.orderStatus==="in_transit"||t.orderStatus==="delivered"},{status:"in_transit",label:"In Transit",completed:t.orderStatus==="in_transit"||t.orderStatus==="delivered"},{status:"delivered",label:"Delivered",completed:t.orderStatus==="delivered"}].map((p,y)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${p.completed?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:p.completed?"":y+1}),s.jsxs("div",{children:[s.jsx("p",{className:`font-medium ${p.completed?"text-green-700":"text-gray-600"}`,children:p.label}),p.status===t.orderStatus&&s.jsx("p",{className:"text-sm text-primary-600",children:"Current Status"})]})]},p.status))})]}),t.orderStatus==="in_transit"&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-blue-900",children:"Estimated Delivery"}),s.jsx("p",{className:"text-blue-700",children:"15-20 minutes"})]})]})})]})]})]})})},hL=()=>{var d,c,u;const e=ce(),{data:t,isLoading:r,isFetching:n,error:a,refetch:i}=qn(void 0),o=r||n,l=async()=>{try{await i(),ae.success("Profile refreshed successfully")}catch{ae.error("Failed to refresh profile")}};return a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx("div",{className:"mb-4",children:s.jsx(fo,{className:"h-12 w-12 text-red-600 mx-auto"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Failed to Load Profile"}),s.jsx("p",{className:"text-gray-600 mb-4",children:((d=a==null?void 0:a.data)==null?void 0:d.error)||"Unable to load your profile information"}),s.jsxs("button",{onClick:l,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 mx-auto",children:[s.jsx(Dd,{className:"h-4 w-4"}),s.jsx("span",{children:"Retry"})]})]})}):o?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Profile"}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-8",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Personal Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ms,{variant:"text",width:"50%"}),s.jsx(ms,{variant:"text",width:"40%"}),s.jsx(ms,{variant:"text",width:"60%"}),s.jsx(ms,{variant:"rectangular",height:80})]})]})})]})}):s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Profile"}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-8",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((u=(c=t==null?void 0:t.name)==null?void 0:c.charAt(0))==null?void 0:u.toUpperCase())||"U"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:(t==null?void 0:t.name)||"User"}),s.jsx("p",{className:"text-gray-600",children:(t==null?void 0:t.email)||"No email"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Personal Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx(De,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Full Name"}),s.jsx("p",{className:"font-medium",children:(t==null?void 0:t.name)||"Not set"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx(Ft,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email Address"}),s.jsx("p",{className:"font-medium",children:(t==null?void 0:t.email)||"Not set"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx(mt,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone Number"}),s.jsx("p",{className:"font-medium",children:(t==null?void 0:t.phone)||"Not set"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>e("/account/profile/edit"),className:"flex-1 flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors","data-testid":"edit-profile-button",children:[s.jsx(up,{className:"h-4 w-4"}),s.jsx("span",{children:"Edit Profile"})]}),s.jsxs("button",{onClick:()=>e("/settings"),className:"flex-1 flex items-center justify-center space-x-2 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors",children:[s.jsx(Ao,{className:"h-4 w-4"}),s.jsx("span",{children:"Settings"})]}),s.jsxs("button",{onClick:()=>e("/orders"),className:"flex-1 flex items-center justify-center space-x-2 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors",children:[s.jsx(ze,{className:"h-4 w-4"}),s.jsx("span",{children:"My Orders"})]})]})]}),s.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(fo,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Account Status"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Your account is active and secure"})]})]})})]})})},fL=()=>{const e=tt(),t=ce(),{error:r,success:n}=Ns(),a=de(P=>P.auth);w.useEffect(()=>{a.isAuthenticated||(r("Please log in to manage your addresses"),t("/login",{replace:!0}))},[a.isAuthenticated,t,r]);const{data:i,isLoading:o,error:l,refetch:d}=Ld(void 0,{skip:!a.isAuthenticated}),[c]=a6(),[u]=i6(),[m]=o6(),[h]=np(),[f,p]=w.useState([]);w.useEffect(()=>{if(a.isAuthenticated){const P=(i==null?void 0:i.addresses)||[];if(P.length>0){const O=P.map(R=>({id:R._id||R.id,name:R.name||"User",address:R.addressLine,city:R.city,state:R.state,pincode:R.pincode,phone:R.phone||"",label:R.label,isDefault:R.isDefault}));p(O)}else p([])}},[i,a.isAuthenticated]),w.useEffect(()=>{const P=()=>{d()};return window.addEventListener("addressesUpdated",P),()=>{window.removeEventListener("addressesUpdated",P)}},[d]);const[y,j]=w.useState(!1),[N,v]=w.useState(null),[b,x]=w.useState(null);w.useEffect(()=>{const P=localStorage.getItem("autofillAddress");if(P)try{const O=JSON.parse(P);x({address:O.addressLine||"",city:O.city||"",state:O.state||"",pincode:O.pincode||""}),j(!0),localStorage.removeItem("autofillAddress")}catch(O){console.error("Failed to parse autofill data:",O)}},[]);const g=async P=>{try{if(await h(P).unwrap(),await d(),a.user){const O={...a.user,addresses:f.map(R=>({...R,isDefault:R.id===P}))};e(Ks(O))}window.dispatchEvent(new CustomEvent("addressesUpdated")),n("Default address updated successfully!")}catch(O){console.error("Error setting default address:",O),r("Failed to set default address")}},k=P=>{v(P),j(!0)},C=async P=>{try{const O=await m(P).unwrap();await d(),window.dispatchEvent(new CustomEvent("addressesUpdated")),O.defaultUpdated?n("Address removed successfully. Default address updated."):n("Address removed successfully!")}catch(O){console.error("Error deleting address:",O),r("Failed to delete address")}},S=()=>{v(null),x(null),j(!0)},A=P=>{x(P),v(null),j(!0)},E=f||[],T=E.find(P=>P.isDefault)||null,M=E.filter(P=>!P.isDefault);return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"flex gap-8",children:[s.jsxs("div",{className:"w-64 bg-white rounded-lg shadow-sm p-6 h-fit",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Account"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Overview"}),s.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"ORDERS"}),s.jsx("div",{className:"ml-4 space-y-1",children:s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Orders & Returns"})}),s.jsx("div",{className:"text-sm text-gray-600 mb-2 mt-4",children:"CREDITS"}),s.jsxs("div",{className:"ml-4 space-y-1",children:[s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Coupons"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"CS Store Credit"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"CS Store Cash"})]}),s.jsx("div",{className:"text-sm text-gray-600 mb-2 mt-4",children:"ACCOUNT"}),s.jsxs("div",{className:"ml-4 space-y-1",children:[s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Profile"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Saved Cards"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Saved UPI"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Saved Wallets/BNPL"}),s.jsx("div",{className:"text-sm text-blue-600 font-medium py-1",children:"Addresses"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"CS Store Insider"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Delete Account"})]}),s.jsx("div",{className:"text-sm text-gray-600 mb-2 mt-4",children:"LEGAL"}),s.jsxs("div",{className:"ml-4 space-y-1",children:[s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Terms of Use"}),s.jsx("div",{className:"text-sm text-gray-700 hover:text-blue-600 cursor-pointer py-1",children:"Privacy Center"})]})]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Saved Addresses"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:async()=>{try{if(!navigator.geolocation){r("Geolocation is not supported by your browser");return}navigator.geolocation.getCurrentPosition(async P=>{const{latitude:O,longitude:R}=P.coords;try{const U=await(await fetch(`/api/location/reverse-geocode?lat=${O}&lng=${R}`)).json();if(U.success&&U.data){const D=U.data.state||"",_=U.data.pincode||"";console.log("Detected State:",D),console.log("Detected Pincode:",_),A({name:"",address:U.data.address||"",city:U.data.city||"",state:D,pincode:_,phone:"",label:"Home"}),n("Location detected successfully!")}else r("Could not determine your location")}catch(L){console.error("Reverse geocoding failed:",L),r("Could not determine your location")}},P=>{let O="Could not access your location";P.code===P.PERMISSION_DENIED&&(O="Please allow location access and try again"),r(O)})}catch{r("Could not access your location")}},className:"flex items-center gap-2 bg-white text-gray-700 px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[s.jsx(ut,{className:"w-4 h-4"}),"USE CURRENT LOCATION"]}),s.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Tc,{className:"w-4 h-4"}),"ADD NEW ADDRESS"]})]})]}),o&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Loading addresses..."})]}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-red-800",children:"Failed to load addresses. Please try again."})}),T&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4 uppercase",children:"Default Address"}),s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(De,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:T.name})]}),s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[s.jsx(ut,{className:"w-4 h-4 text-gray-600 mt-0.5"}),s.jsxs("div",{className:"text-gray-700",children:[s.jsx("div",{children:T.address}),s.jsxs("div",{children:[T.city," - ",T.pincode,","," ",T.state]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mt,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-gray-700",children:T.phone})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>k(T),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"EDIT"}),s.jsx("div",{className:"w-px bg-gray-300"}),s.jsx("button",{onClick:()=>C(T.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"REMOVE"})]})]})})]}),M.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4 uppercase",children:"Other Addresses"}),s.jsx("div",{className:"space-y-4",children:M.map(P=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(De,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:P.name}),s.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:P.label})]}),s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[s.jsx(ut,{className:"w-4 h-4 text-gray-600 mt-0.5"}),s.jsxs("div",{className:"text-gray-700",children:[s.jsx("div",{children:P.address}),s.jsxs("div",{children:[P.city," - ",P.pincode,","," ",P.state]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mt,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-gray-700",children:P.phone})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>g(P.id),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"SET AS DEFAULT"}),s.jsx("button",{onClick:()=>k(P),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"EDIT"}),s.jsx("div",{className:"w-px bg-gray-300"}),s.jsx("button",{onClick:()=>C(P.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"REMOVE"})]})]})},P.id))})]}),y&&s.jsx(pL,{address:N,autoFillData:b,onClose:()=>{j(!1),v(null),x(null)},onSave:async P=>{var O;try{const R={name:P.name,label:P.label,pincode:P.pincode,city:P.city,state:P.state,addressLine:P.address,phone:P.phone,isDefault:f.length===0};N?await u({addressId:N.id,...R}).unwrap():await c(R).unwrap(),await d(),window.dispatchEvent(new CustomEvent("addressesUpdated")),j(!1),v(null),n(N?"Address updated successfully!":"Address added successfully!")}catch(R){console.error(" Error saving address to backend:",R),r(((O=R==null?void 0:R.data)==null?void 0:O.message)||(R==null?void 0:R.message)||"Failed to save address. Please try again.")}}})]})})]})})})},pL=({address:e,autoFillData:t,onClose:r,onSave:n})=>{const a="http://localhost:5001/api",[i,o]=w.useState({name:(e==null?void 0:e.name)||(t==null?void 0:t.name)||"",address:(e==null?void 0:e.address)||(t==null?void 0:t.address)||"",city:(e==null?void 0:e.city)||(t==null?void 0:t.city)||"",state:(e==null?void 0:e.state)||(t==null?void 0:t.state)||"",pincode:(e==null?void 0:e.pincode)||(t==null?void 0:t.pincode)||"",phone:(e==null?void 0:e.phone)||(t==null?void 0:t.phone)||"",label:(e==null?void 0:e.label)||(t==null?void 0:t.label)||"HOME"}),[l,d]=w.useState({message:"",isChecking:!1,isResolved:!1,isDeliverable:!1}),c=async h=>{d({message:"Checking pincode...",isChecking:!0,isResolved:!1,isDeliverable:!1});try{const f=await fetch(`${a}/pincode/check/${h}`,{credentials:"include"});if(!(f.headers.get("content-type")||"").includes("application/json"))throw new Error("Non-JSON response from pincode endpoint");const y=await f.json();if(f.ok&&(y!=null&&y.deliverable)&&(y!=null&&y.state)){const j=y.district||y.taluka||"",N=y.state||"";if(!j||!N){o(v=>({...v,city:"",state:""})),d({message:"Enter a valid pincode to continue",isChecking:!1,isResolved:!1,isDeliverable:!1});return}o(v=>({...v,city:j,state:N})),d({message:"City and State are auto-selected based on pincode",isChecking:!1,isResolved:!0,isDeliverable:!0});return}o(j=>({...j,city:"",state:""})),d({message:"Enter a valid pincode to continue",isChecking:!1,isResolved:!1,isDeliverable:!1})}catch(f){console.error("Error validating pincode:",f),o(p=>({...p,city:"",state:""})),d({message:"Enter a valid pincode to continue",isChecking:!1,isResolved:!1,isDeliverable:!1})}};w.useEffect(()=>{const h=(i.pincode||"").replace(/\D/g,"");h.length===6?c(h):(d({message:"",isChecking:!1,isResolved:!1,isDeliverable:!1}),o(f=>({...f,city:"",state:""})))},[]);const u=async h=>{const p=h.target.value.replace(/\D/g,"").slice(0,6);o(y=>({...y,pincode:p})),d({message:"",isChecking:!1,isResolved:!1,isDeliverable:!1}),o(y=>({...y,city:"",state:""})),p.length===6&&await c(p)},m=h=>{h.preventDefault(),!(!l.isResolved||l.isChecking||!l.isDeliverable)&&n(i)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e?"Edit Address":"Add New Address"}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.name,onChange:h=>o({...i,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pincode ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i.pincode,onChange:u,maxLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),l.message&&s.jsx("p",{className:"text-sm mt-1 text-gray-600",children:l.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),s.jsx("input",{type:"text",value:i.city,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-700"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),s.jsx("input",{type:"text",value:i.state,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-700"})]})]}),s.jsx("div",{className:"text-xs text-gray-500",children:"City and State are auto-selected based on pincode"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:i.address,onChange:h=>o({...i,address:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:i.phone,onChange:h=>o({...i,phone:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Label ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:i.label,onChange:h=>o({...i,label:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[s.jsx("option",{value:"HOME",children:"Home"}),s.jsx("option",{value:"OFFICE",children:"Office"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:l.isChecking||!l.isResolved||!l.isDeliverable,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${l.isChecking||!l.isResolved||!l.isDeliverable?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:e?"Update Address":"Add Address"})]})]})]})})})},xL=({prefilledCredentials:e})=>{const t=tt(),r=ce(),[n,a]=w.useState({name:"",email:"",phone:"",password:"",confirmPassword:""}),[i,o]=w.useState({}),[l,d]=w.useState(!1),[c,u]=w.useState(null),[m,h]=w.useState(!1),[f,p]=w.useState(""),[y,j]=w.useState(!1),[N,v]=w.useState(""),[b,x]=w.useState(!1),[g,k]=w.useState(30),[C,S]=w.useState(!1),A=L=>{const U=/^[0-9]{10,12}$/,D=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return U.test(L)?"phone":(D.test(L),"email")};w.useEffect(()=>{if(e!=null&&e.emailOrPhone){console.log(" SIGNUP FORM: Pre-filling credentials:",e.emailOrPhone);const L=A(e.emailOrPhone);a(U=>({...U,[L]:e.emailOrPhone||""})),console.log(` SIGNUP FORM: Pre-filled ${L} field with:`,e.emailOrPhone)}},[e]);const E=L=>/^[6-9]\d{9}$/.test(L),T=L=>{const{name:U,value:D}=L.target;if(U==="phone"){const _=D.replace(/\D/g,"").slice(0,10);h(!1),p(""),x(!1),v(""),a(I=>({...I,[U]:_})),i.phone&&o(I=>({...I,phone:""}))}else a(_=>({..._,[U]:D}))},M=()=>{const L={};return n.name.trim()||(L.name="Name is required"),n.email.trim()||(L.email="Email is required"),n.phone.trim()?E(n.phone)||(L.phone="Invalid number. Enter a 10-digit number starting with 69."):L.phone="Please enter your mobile number",n.password||(L.password="Password is required"),n.password!==n.confirmPassword&&(L.confirmPassword="Passwords do not match"),o(L),Object.keys(L).length===0},P=async()=>{if(!n.phone||!E(n.phone)){v("Please enter a valid 10-digit mobile number");return}try{j(!0),v("");const L=await fetch("http://localhost:5001/api/auth/send-otp?mode=signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:n.phone.replace(/\D/g,"")})}),U=await L.json();if(!L.ok)throw new Error(U.error||U.message||"Failed to send OTP");h(!0),v(""),k(30),S(!1);const D=setInterval(()=>{k(_=>_<=1?(clearInterval(D),S(!0),0):_-1)},1e3)}catch(L){v(L instanceof Error?L.message:"Failed to send OTP"),h(!1)}finally{j(!1)}},O=async()=>{if(!f||f.length!==6){v("Please enter a valid 6-digit OTP");return}try{j(!0),v("");const L=await fetch("http://localhost:5001/api/auth/verify-otp?mode=signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({otp:f,phone:n.phone.replace(/\D/g,"")})}),U=await L.json();if(!L.ok)throw new Error(U.error||U.message||"OTP verification failed");x(!0),v("")}catch(L){x(!1),v(L instanceof Error?L.message:"OTP verification failed")}finally{j(!1)}},R=async L=>{if(L.preventDefault(),!!M()){if(n.phone&&!b){v("Please verify your mobile number with OTP first");return}d(!0);try{const U=await fetch(`http://localhost:5001/api/auth/signup?t=${Date.now()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,email:n.email,phone:n.phone,password:n.password})}),D=await U.json();if(U.ok){const _=D.accessToken||D.token||null,I=D.refreshToken||D.refresh_token||null;if(_){t(Ks(D.user)),t(Vn({accessToken:_,refreshToken:I})),localStorage.setItem("accessToken",_),I&&localStorage.setItem("refreshToken",I);try{await fetch("http://localhost:5001/api/otp/verification/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({phone:n.phone})})}catch{}o({}),u("Signup successful! Your account has been created."),setTimeout(()=>{r("/dashboard")},1500)}else o({}),u("Account created successfully. Please log in to continue.")}else{const _=D.error||D.message||"Signup failed";_.toLowerCase().includes("email")&&_.toLowerCase().includes("exists")?o({email:"An account with this email already exists"}):_.toLowerCase().includes("phone")&&_.toLowerCase().includes("exists")?o({phone:"An account with this phone number already exists"}):o({general:_})}}catch{o({general:"Network error. Please try again."})}finally{d(!1)}}};return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Create Account"}),c&&s.jsx("p",{className:"text-blue-600 text-sm mb-3",children:c}),s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",name:"name",value:n.name,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your name"}),i.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:n.email,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email"}),i.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),s.jsxs("div",{className:"flex gap-2 mt-1 items-center",children:[s.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:T,className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${i.phone?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"Enter your 10-digit mobile number",maxLength:10}),b?s.jsx("div",{"aria-live":"polite",className:"inline-flex items-center px-3 py-2 bg-green-50 border border-green-200 text-green-700 rounded-md text-sm",children:" Verified"}):s.jsx("button",{type:"button",onClick:P,disabled:!n.phone||n.phone.length!==10||y,className:"inline-flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-md text-sm transition-colors",children:y&&!m?"Sending...":"Verify"})]}),i.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.phone}),m&&!b&&s.jsxs("div",{className:"flex gap-2 mt-3 items-center",children:[s.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:L=>p(L.target.value.replace(/\D/g,"").slice(0,6)),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter 6-digit OTP",maxLength:6}),s.jsx("button",{type:"button",onClick:O,disabled:f.length!==6||y,className:"px-3 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors",children:y?"Submitting...":"Submit"})]}),m&&!b&&s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsx("button",{type:"button",disabled:!C,onClick:P,className:`text-sm font-medium transition-colors ${C?"text-blue-600 hover:text-blue-700 cursor-pointer":"text-gray-400 cursor-not-allowed"}`,style:{background:"none",border:"none",padding:0},children:"Resend OTP"}),s.jsx("span",{className:"text-sm text-gray-500",children:C?"":`Resend in ${g}s`})]}),b&&s.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-green-700 text-sm font-medium",children:" Mobile number verified successfully"})}),N&&!b&&s.jsx("p",{className:"text-red-500 text-sm mt-2",children:N})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx("input",{type:"password",name:"password",value:n.password,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password"}),i.password&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),s.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your password"}),i.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.confirmPassword})]}),i.general&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.general}),s.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Creating account...":"Create Account"})]})]})},gL=()=>{const e=Jt(),t=ce(),{isAuthenticated:r,user:n}=de(d=>d.auth);w.useEffect(()=>{if(r){if(n!=null&&n.isAdmin||(n==null?void 0:n.role)==="admin"){t("/admin",{replace:!0});return}t("/dashboard",{replace:!0})}},[r,n,t]);const a=new URLSearchParams(e.search),i=a.get("prefill"),o=a.get("fromLogin")==="true",l=i?{emailOrPhone:decodeURIComponent(i),fromLogin:o}:null;return r?null:s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:s.jsx("h1",{className:"text-center text-3xl font-extrabold text-gray-900",children:"CS Store"})}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsx(xL,{prefilledCredentials:l})})]})},yL=()=>s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Menu"}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Menu Page"}),s.jsx("p",{className:"text-gray-600",children:"Coming soon..."})]})]})}),vL=()=>{const e=ce(),{tokens:t,isAuthenticated:r}=de(u=>u.auth),[n,a]=w.useState({totalProducts:0,totalUsers:0,totalOrders:0,totalDeliveryBoys:0,recentOrders:0,totalRevenue:0}),[i,o]=w.useState(!0),[l,d]=w.useState(null);w.useEffect(()=>{let u=!0,m=!1;return(async()=>{try{if(!u||m)return;if(o(!0),d(null),!(t!=null&&t.accessToken)||!r){console.log("AdminDashboard: No access token or not authenticated, skipping fetch"),u&&o(!1);return}const f=await fetch("http://localhost:5001/api/admin/dashboard-stats",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!f.ok){const y=await f.json();if(console.error("API error response:",y),f.status===401||f.status===403){console.log("AdminDashboard: Token expired/revoked, redirecting to home"),m||(m=!0,localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/");return}throw new Error(`Failed to fetch stats: ${y.error||f.statusText}`)}const p=await f.json();u&&a(p)}catch(f){console.error("Error fetching dashboard stats:",f),u&&d("Failed to load dashboard stats. Please try again later.")}finally{u&&o(!1)}})(),()=>{u=!1}},[t,r]);const c=[{id:"products",title:"Products Management",description:"Create, edit, and manage products",icon:ze,color:"bg-blue-500",hoverColor:"hover:bg-blue-600",path:"/admin/products"},{id:"users",title:"Users Management",description:"View and manage user accounts",icon:ns,color:"bg-green-500",hoverColor:"hover:bg-green-600",path:"/admin/users"},{id:"orders",title:"Orders Management",description:"View and manage customer orders",icon:Kt,color:"bg-yellow-500",hoverColor:"hover:bg-yellow-600",path:"/admin/orders"},{id:"delivery-boys",title:"Delivery Boy Management",description:"Manage delivery personnel and operations",icon:dr,color:"bg-purple-500",hoverColor:"hover:bg-purple-600",path:"/admin/delivery-boys"},{id:"analytics",title:"Sales Analytics",description:"View sales reports and analytics",icon:uo,color:"bg-indigo-500",hoverColor:"hover:bg-indigo-600",path:"/admin/analytics"},{id:"payments",title:"Payment Logs",description:"Monitor all payment transactions",icon:ys,color:"bg-emerald-500",hoverColor:"hover:bg-emerald-600",path:"/admin/payments"}];return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"w-full",children:s.jsxs("main",{className:"p-6",children:[l&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),s.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[s.jsx("p",{children:l}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 text-sm font-medium text-red-800 hover:text-red-900 underline",children:"Refresh Page"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(ze,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i?"...":n.totalProducts})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(ns,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i?"...":n.totalUsers})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(Kt,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i?"...":n.totalOrders})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(dr,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Delivery Boys"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i?"...":n.totalDeliveryBoys})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(u=>{const m=u.icon;return s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(u.path),children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`p-3 ${u.color} rounded-lg`,children:s.jsx(m,{className:"h-6 w-6 text-white"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 ml-4",children:u.title})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:u.description}),s.jsx("button",{className:`w-full py-2 px-4 ${u.color} ${u.hoverColor} text-white rounded-md transition-colors`,children:"Manage"})]},u.id)})})]})})})};function bL({images:e,onChange:t}){const r=w.useRef(null),[n,a]=w.useState(!1),[i,o]=w.useState(!1),l=p=>new Promise((y,j)=>{const N=new FileReader;N.onload=()=>{const b=N.result.split(",")[1];y(b)},N.onerror=j,N.readAsDataURL(p)}),d=async p=>{const y=await l(p),j=await fetch("/api/uploads/cloudinary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:y})});if(!j.ok)throw new Error(`Upload failed: ${j.statusText}`);return await j.json()},c=async p=>{if(!(!p||p.length===0)){a(!0);try{const y=Array.from(p).map(async v=>await d(v)),j=await Promise.all(y),N=[...e,...j];t(N)}catch(y){console.error("Upload failed:",y),alert("Failed to upload images. Please try again.")}finally{a(!1)}}},u=async p=>{await c(p.target.files),p.target&&(p.target.value="")},m=p=>{p.preventDefault(),p.stopPropagation(),p.type==="dragenter"||p.type==="dragover"?o(!0):p.type==="dragleave"&&o(!1)},h=async p=>{p.preventDefault(),p.stopPropagation(),o(!1),await c(p.dataTransfer.files)},f=p=>{const y=e.filter((j,N)=>N!==p);t(y)};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:`
          relative border-2 border-dashed rounded-lg p-8 text-center transition-colors
          ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${n?"opacity-50 pointer-events-none":""}
        `,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:h,children:[s.jsx("input",{ref:r,type:"file",multiple:!0,accept:"image/*",onChange:u,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed",disabled:n}),s.jsx("div",{className:"pointer-events-none",children:n?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"text-gray-600",children:"Uploading images..."})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsxs("p",{className:"text-gray-600",children:["Drop images here or"," ",s.jsx("button",{type:"button",className:"text-blue-500 hover:text-blue-600 font-medium",onClick:()=>{var p;return(p=r.current)==null?void 0:p.click()},children:"browse"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Supports: JPG, PNG, GIF, WebP (Max 5MB per file)"})]})})]}),e.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Uploaded Images (",e.length,"/5)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:e.map((p,y)=>s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:s.jsx("img",{src:p.thumb,alt:`Upload ${y+1}`,className:"w-full h-full object-cover"})}),s.jsx("button",{type:"button",onClick:()=>f(y),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:y+1})]},y))})]})]})}const jL=()=>{const e=ce(),{tokens:t,isAuthenticated:r,user:n}=de(P=>P.auth),[a]=h6(),[i]=f6(),[o,l]=w.useState([]),[d,c]=w.useState(!0),[u,m]=w.useState(null),[h,f]=w.useState(""),[p,y]=w.useState(""),[j,N]=w.useState(null),[v,b]=w.useState(!1),[x,g]=w.useState({name:"",description:"",price:0,mrp:0,category:"",stock:0,weight:0,images:[]});w.useEffect(()=>{if(!r||!(n!=null&&n.isAdmin)){e("/login");return}k()},[r,n,e]);const k=async()=>{try{if(c(!0),m(null),!(t!=null&&t.accessToken))throw new Error("No authentication token available");const P=await fetch("/api/admin/products",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!P.ok){const R=await P.json();if(console.error("API error response:",R),P.status===401||P.status===403){localStorage.removeItem("auth"),window.location.href="/login";return}throw new Error(R.error||"Failed to fetch products")}const O=await P.json();l(O.products||[])}catch(P){console.error("Error fetching products:",P),m(P instanceof Error?P.message:"Failed to load products. Please try again later.")}finally{c(!1)}},C=async P=>{if(window.confirm("Are you sure you want to delete this product?"))try{await i(P).unwrap(),l(o.filter(O=>O._id!==P))}catch(O){console.error("Error deleting product:",O),alert("Failed to delete product. Please try again.")}},S=P=>{N(P);let O=[];P.images&&P.images.length>0&&(typeof P.images[0]=="string"?O=P.images.map(R=>({full:R,thumb:R})):O=P.images),g({name:P.name,description:P.description,price:P.price,mrp:P.mrp||0,category:P.category,stock:P.stock,weight:P.weight||0,images:O}),b(!0)},A=async P=>{if(P.preventDefault(),!!j)try{await a({id:j._id,...x,images:x.images}).unwrap(),k(),b(!1),N(null),g({name:"",description:"",price:0,mrp:0,category:"",stock:0,weight:0,images:[]})}catch(O){console.error("Error updating product:",O),alert("Failed to update product. Please try again.")}},E=()=>{b(!1),N(null),g({name:"",description:"",price:0,mrp:0,category:"",stock:0,weight:0,images:[]})},T=o.filter(P=>{const O=P.name.toLowerCase().includes(h.toLowerCase())||P.description.toLowerCase().includes(h.toLowerCase())||P.category.toLowerCase().includes(h.toLowerCase()),R=!p||P.category===p;return O&&R}),M=[...new Set(o.map(P=>P.category).filter(Boolean))];return d?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("button",{onClick:()=>e("/admin"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:s.jsx(Ce,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Products Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage your product catalog"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:h,onChange:P=>f(P.target.value),placeholder:"Search products...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-64"})]}),s.jsxs("select",{value:p,onChange:P=>y(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Categories"}),M.map(P=>s.jsx("option",{value:P,children:P},P))]})]}),s.jsxs("button",{onClick:()=>e("/admin/products/new"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(Tc,{className:"h-4 w-4"}),"Add Product"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:u?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 text-lg font-medium mb-2",children:"Error Loading Products"}),s.jsx("p",{className:"text-gray-600 mb-4",children:u}),s.jsxs("div",{className:"space-x-3",children:[s.jsx("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"}),s.jsx("button",{onClick:()=>{localStorage.removeItem("auth"),window.location.href="/login"},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Login Again"})]})]}):T.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Products Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:h||p?"No products match your current filters.":"No products available. Add your first product to get started."}),s.jsxs("button",{onClick:()=>e("/admin/products/new"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto",children:[s.jsx(Tc,{className:"h-4 w-4"}),"Add Product"]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weight"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:Tn(P)?s.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:Tn(P),alt:P.name}):s.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-200 flex items-center justify-center",children:s.jsx(ze,{className:"h-6 w-6 text-gray-400"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),s.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:P.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:P.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(js,{className:"h-4 w-4 text-gray-400"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[P.mrp&&P.mrp>0&&s.jsxs("span",{className:"text-gray-500 line-through text-xs",children:["",P.mrp.toLocaleString()]}),s.jsxs("span",{className:"font-semibold",children:["",P.price.toLocaleString()]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P.stock>10?"bg-green-100 text-green-800":P.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[P.stock," units"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.weight?`${P.weight}g`:"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>S(P),className:"text-blue-600 hover:text-blue-900 p-1",children:s.jsx(up,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>C(P._id),className:"text-red-600 hover:text-red-900 p-1",children:s.jsx(mp,{className:"h-4 w-4"})})]})})]},P._id))})]})})}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(a3,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(ze,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"In Stock"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.filter(P=>P.stock>0).length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(js,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Categories"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.length})]})]})})]}),v&&j&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Product"}),s.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:A,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),s.jsx("input",{type:"text",value:x.name,onChange:P=>g({...x,name:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:x.description,onChange:P=>g({...x,description:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRP ()"}),s.jsx("input",{type:"number",value:x.mrp,onChange:P=>g({...x,mrp:Number(P.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Maximum Retail Price"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Price ()"}),s.jsx("input",{type:"number",value:x.price,onChange:P=>g({...x,price:Number(P.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),s.jsx("input",{type:"number",value:x.stock,onChange:P=>g({...x,stock:Number(P.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),s.jsx("input",{type:"text",value:x.category,onChange:P=>g({...x,category:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (g)"}),s.jsx("input",{type:"number",value:x.weight,onChange:P=>g({...x,weight:Number(P.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Images"}),s.jsx(bL,{images:x.images,onChange:P=>g({...x,images:P})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Update Product"})]})]})]})})})]})})};function wL({images:e,onChange:t}){const r=w.useRef(null),[n,a]=w.useState(!1),i=m=>{if(!m||m.length===0)return;const h=Array.from(m).filter(p=>p.type.startsWith("image/")),f=[...e,...h].slice(0,5);t(f)},o=m=>{i(m.target.files),m.target&&(m.target.value="")},l=m=>{m.preventDefault(),m.stopPropagation(),m.type==="dragenter"||m.type==="dragover"?a(!0):m.type==="dragleave"&&a(!1)},d=m=>{m.preventDefault(),m.stopPropagation(),a(!1),i(m.dataTransfer.files)},c=m=>{const h=e.filter((f,p)=>p!==m);t(h)},u=m=>{if(m===0)return"0 Bytes";const h=1024,f=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(m)/Math.log(h));return parseFloat((m/Math.pow(h,p)).toFixed(2))+" "+f[p]};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:`
          relative border-2 border-dashed rounded-lg p-8 text-center transition-colors
          ${n?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${e.length>=5?"opacity-50 pointer-events-none":""}
        `,onDragEnter:l,onDragLeave:l,onDragOver:l,onDrop:d,children:[s.jsx("input",{ref:r,type:"file",multiple:!0,accept:"image/*",onChange:o,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed",disabled:e.length>=5}),s.jsx("div",{className:"pointer-events-none",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsxs("p",{className:"text-gray-600",children:["Drop images here or"," ",s.jsx("button",{type:"button",className:"text-blue-500 hover:text-blue-600 font-medium",onClick:()=>{var m;return(m=r.current)==null?void 0:m.click()},children:"browse"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Supports: JPG, PNG, GIF, WebP (Max 5MB per file)"}),s.jsxs("p",{className:"text-xs text-gray-400",children:[e.length,"/5 images selected"]})]})})]}),e.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Selected Images (",e.length,"/5)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:e.map((m,h)=>s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:s.jsx("img",{src:URL.createObjectURL(m),alt:`Upload ${h+1}`,className:"w-full h-full object-cover"})}),s.jsx("button",{type:"button",onClick:()=>c(h),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:h+1}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:[m.name," (",u(m.size),")"]})]},h))})]})]})}const NL=()=>{const e=ce(),{isAuthenticated:t}=de(d=>d.auth),[r,{isLoading:n}]=m6(),[a,i]=w.useState([]);Ae.useEffect(()=>{t||e("/login")},[t,e]);const o=async d=>{d.preventDefault();const c=d.target,u=new FormData;u.append("name",c.elements.namedItem("name").value),u.append("description",c.elements.namedItem("description").value),u.append("category",c.elements.namedItem("category").value),u.append("price",c.elements.namedItem("price").value),u.append("stock",c.elements.namedItem("stock").value),u.append("mrp",c.elements.namedItem("mrp").value),u.append("weight",c.elements.namedItem("weight").value),u.append("tags",c.elements.namedItem("tags").value),a.forEach(m=>{u.append("images",m)});try{await r(u).unwrap(),ae.success("Product created successfully!"),e("/admin/products")}catch(m){ae.error(m.message||"Failed to create product")}},l=()=>{e("/admin/products")};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-6xl mx-auto px-6",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Ce,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Back"})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Add New Product"})]}),s.jsx("button",{form:"product-form",type:"submit",disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):"Save Product"})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:s.jsxs("form",{id:"product-form",onSubmit:o,className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-8 py-6 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:s.jsx(ze,{className:"h-5 w-5 text-blue-600"})}),"Basic Information"]})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Product Name"}),s.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter product name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Category"}),s.jsxs("select",{name:"category",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"Select category"}),s.jsx("option",{value:"groceries",children:"Groceries"}),s.jsx("option",{value:"vegetables",children:"Vegetables"}),s.jsx("option",{value:"fruits",children:"Fruits"}),s.jsx("option",{value:"dairy",children:"Dairy"}),s.jsx("option",{value:"meat",children:"Meat"}),s.jsx("option",{value:"beverages",children:"Beverages"}),s.jsx("option",{value:"snacks",children:"Snacks"}),s.jsx("option",{value:"household",children:"Household"}),s.jsx("option",{value:"personal_care",children:"Personal Care"}),s.jsx("option",{value:"medicines",children:"Medicines"}),s.jsx("option",{value:"electronics",children:"Electronics"}),s.jsx("option",{value:"clothing",children:"Clothing"}),s.jsx("option",{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"SKU"}),s.jsx("input",{type:"text",name:"sku",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Auto-generated if empty"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Tags"}),s.jsx("input",{type:"text",name:"tags",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter tags separated by commas"})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Description"}),s.jsx("textarea",{name:"description",required:!0,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",placeholder:"Enter product description"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-8 py-6 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:s.jsx(js,{className:"h-5 w-5 text-green-600"})}),"Pricing & Inventory"]})}),s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Selling Price"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),s.jsx("input",{type:"number",name:"price",required:!0,min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"0.00"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Stock Quantity"}),s.jsx("input",{type:"number",name:"stock",required:!0,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"MRP (Maximum Retail Price)"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),s.jsx("input",{type:"number",name:"mrp",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"0.00"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Weight (grams)"}),s.jsx("input",{type:"number",name:"weight",min:"0",step:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"0"})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-8 py-6 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:s.jsx(d3,{className:"h-5 w-5 text-purple-600"})}),"Product Images"]})}),s.jsx("div",{className:"p-8",children:s.jsx(wL,{images:a,onChange:i})})]})]})})]})},SL=()=>{const e=ce(),{tokens:t,isAuthenticated:r,user:n}=de(M=>M.auth),[a,i]=w.useState([]),[o,l]=w.useState(!0),[d,c]=w.useState(null),[u,m]=w.useState(""),[h,f]=w.useState(""),[p,y]=w.useState(null);w.useEffect(()=>{if(!r||!(n!=null&&n.isAdmin)){e("/login");return}j()},[r,n,e]);const j=async()=>{try{if(l(!0),c(null),!(t!=null&&t.accessToken))throw new Error("No authentication token available");const M=await fetch("/api/admin/users",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!M.ok){const O=await M.json();if(console.error("API error response:",O),M.status===401||M.status===403){localStorage.removeItem("auth"),window.location.href="/login";return}throw new Error(`Failed to fetch users: ${O.error||M.statusText}`)}const P=await M.json();i(P.users||[])}catch(M){console.error("Error fetching users:",M),c("Failed to load users. Please try again later.")}finally{l(!1)}},N=a.filter(M=>{if(M.role==="delivery")return!1;const P=M.name.toLowerCase().includes(u.toLowerCase())||M.email.toLowerCase().includes(u.toLowerCase())||M.phone&&M.phone.includes(u),O=!h||M.role===h;return P&&O}),v=a.filter(M=>M.role!=="delivery"),b=[...new Set(v.map(M=>M.role).filter(Boolean))],x=v.length,g=v.filter(M=>M.role==="customer").length,k=v.filter(M=>M.role==="admin").length,C=0,S=M=>{switch(M){case"admin":return s.jsx(Xt,{className:"h-4 w-4 text-red-600"});case"delivery":return s.jsx(Fu,{className:"h-4 w-4 text-blue-600"});default:return s.jsx(ns,{className:"h-4 w-4 text-gray-600"})}},A=M=>{switch(M){case"admin":return"bg-red-100 text-red-800";case"delivery":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},E=(M,P)=>{y({type:M,message:P}),setTimeout(()=>y(null),5e3)},T=async M=>{if(!(t!=null&&t.accessToken)){E("error","No authentication token available");return}if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const O=await fetch(`/api/admin/users/${M}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!O.ok){const R=await O.json().catch(()=>({}));E("error",R.error||"Failed to delete user. Please try again.");return}E("success","User deleted successfully"),j()}catch(O){console.error("Error deleting user:",O),E("error","Failed to delete user. Please try again.")}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("button",{onClick:()=>e("/admin"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:s.jsx(Ce,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users Management"}),s.jsx("p",{className:"text-gray-600",children:"View and manage customer and admin accounts (Delivery boys are managed separately)"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:u,onChange:M=>m(M.target.value),placeholder:"Search users...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-64"})]}),s.jsxs("select",{value:h,onChange:M=>f(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Roles"}),b.map(M=>s.jsx("option",{value:M,children:M.charAt(0).toUpperCase()+M.slice(1)},M))]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(ns,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Fu,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Customers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(cA,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Delivery"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:d?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 text-lg font-medium mb-2",children:"Error Loading Users"}),s.jsx("p",{className:"text-gray-600 mb-4",children:d}),s.jsxs("div",{className:"space-x-3",children:[s.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"}),s.jsx("button",{onClick:()=>{localStorage.removeItem("auth"),window.location.href="/login"},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Login Again"})]})]}):N.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:u||h?"No users match your current filters.":"No users available."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(M=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-700",children:M.name.charAt(0).toUpperCase()})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",M._id.substring(0,8),"..."]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[s.jsx(Ft,{className:"h-4 w-4 text-gray-400 mr-2"}),M.email]}),M.phone&&s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(mt,{className:"h-4 w-4 text-gray-400 mr-2"}),M.phone]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[S(M.role),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(M.role)}`,children:M.role.charAt(0).toUpperCase()+M.role.slice(1)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Dn,{className:"h-4 w-4 text-gray-400 mr-2"}),new Date(M.createdAt).toLocaleDateString()]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.lastLogin?new Date(M.lastLogin).toLocaleDateString():"Never"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:()=>T(M._id),className:"inline-flex items-center px-3 py-1 border border-red-600 text-xs font-medium rounded-full text-red-600 hover:bg-red-50",children:"Delete"})})})]},M._id))})]})})}),p&&s.jsx("div",{className:"fixed top-4 right-4 z-50",children:s.jsxs("div",{className:`px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 ${p.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[p.type==="success"?s.jsx(Fu,{className:"h-5 w-5"}):s.jsx($a,{className:"h-5 w-5"}),s.jsx("span",{children:p.message}),s.jsx("button",{onClick:()=>y(null),className:"ml-2 text-white hover:text-gray-200",children:""})]})})]})})},kL=()=>{const e=ce(),{tokens:t,isAuthenticated:r,user:n}=de(F=>F.auth),[a,i]=w.useState([]),[o,l]=w.useState(!0),[d,c]=w.useState(null),[u,m]=w.useState(""),[h,f]=w.useState(""),[p,y]=w.useState(!1),[j,N]=w.useState(!1),[v,b]=w.useState(!1),[x,g]=w.useState(!1),[k,C]=w.useState(null),[S,A]=w.useState(""),[E,T]=w.useState(!1),[M,P]=w.useState([]),[O,R]=w.useState(""),[L,U]=w.useState(!1);w.useEffect(()=>{if(!r||!(n!=null&&n.isAdmin)){e("/login");return}D()},[r,n,e]);const D=async()=>{try{l(!0),c(null);const F=await fetch("/api/admin/orders",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t==null?void 0:t.accessToken}`}});if(!F.ok)throw new Error("Failed to fetch orders");const X=await F.json();i(X.orders||[])}catch(F){console.error("Error fetching orders:",F),c("Failed to load orders. Please try again later.")}finally{l(!1)}},_=async()=>{try{y(!0);const F=await fetch("/api/admin/assign-deliveries",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t==null?void 0:t.accessToken}`}});if(!F.ok){const le=await F.json();throw new Error(le.error||"Failed to assign deliveries")}const X=await F.json();K.success(`Successfully assigned ${X.data.assignedCount} orders to delivery partners!`),X.data.details&&X.data.details.length>0&&X.data.details.forEach(le=>{console.log(`Pincode ${le.pincode}: ${le.ordersAssigned} orders  ${le.deliveryBoys.join(", ")}`)}),X.data.errors&&X.data.errors.length>0&&X.data.errors.forEach(le=>{K.error(le)}),D()}catch(F){console.error("Auto-assign error:",F),K.error(F.message||"Failed to auto-assign deliveries")}finally{y(!1)}},I=(F,X)=>{X.stopPropagation(),C(F),N(!0)},q=(F,X)=>{X.stopPropagation(),C(F),b(!0)},W=async()=>{try{U(!0);const F=await fetch("/api/admin/delivery-boys-list?status=active",{headers:{Authorization:`Bearer ${t==null?void 0:t.accessToken}`}});if(!F.ok)throw new Error("Failed to fetch delivery partners");const X=await F.json();P(X.deliveryBoys||[])}catch(F){console.error("Fetch delivery boys error:",F),K.error("Failed to load delivery partners")}finally{U(!1)}},ie=async()=>{if(k)try{T(!0);const F=await fetch(`/api/admin/orders/${k._id}/accept`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t==null?void 0:t.accessToken}`}});if(!F.ok){const le=await F.json();throw new Error(le.error||"Failed to accept order")}const X=await F.json();K.success(X.message),X.order&&i(le=>le.map(xe=>xe._id===X.order._id?{...X.order}:xe)),N(!1),C(null)}catch(F){console.error("Accept order error:",F),K.error(F.message||"Failed to accept order"),T(!1)}finally{T(!1)}},se=async()=>{if(!k||!O){K.error("Please select a delivery partner");return}try{T(!0);const F=await fetch(`/api/admin/orders/${k._id}/assign`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t==null?void 0:t.accessToken}`},body:JSON.stringify({deliveryBoyId:O})});if(!F.ok){const le=await F.json();throw new Error(le.error||"Failed to assign delivery partner")}const X=await F.json();if(K.success(X.message),X.order){console.log(" Assignment successful - updating UI with:",{orderId:X.order._id,deliveryBoy:X.order.deliveryBoyId,fullOrder:X.order});const le=M.find(ke=>ke._id===O),xe={...X.order,deliveryBoyId:le?{_id:le._id,name:le.name,phone:le.phone}:X.order.deliveryBoyId};console.log(" Populating deliveryBoyId with full details:",xe.deliveryBoyId),i(ke=>{var Ie;const Re=ke.map(zt=>zt._id===X.order._id?(console.log(" Replacing order:",zt._id,"with populated deliveryBoyId:",xe.deliveryBoyId),xe):zt);return console.log(" New orders state:",(Ie=Re.find(zt=>zt._id===X.order._id))==null?void 0:Ie.deliveryBoyId),[...Re]})}g(!1),C(null),R("")}catch(F){console.error("Assign delivery boy error:",F),K.error(F.message||"Failed to assign delivery partner")}finally{T(!1)}},$=async()=>{if(k)try{T(!0);const F=await fetch(`/api/admin/orders/${k._id}/decline`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t==null?void 0:t.accessToken}`},body:JSON.stringify({reason:S})});if(!F.ok){const le=await F.json();throw new Error(le.error||"Failed to decline order")}const X=await F.json();K.success(X.message),b(!1),C(null),A(""),D()}catch(F){console.error("Decline order error:",F),K.error(F.message||"Failed to decline order")}finally{T(!1)}},H=a.filter(F=>{var ke,Re,Ie;const X=((ke=F.orderNumber)==null?void 0:ke.toLowerCase().includes(u.toLowerCase()))||(((Re=F.userId)==null?void 0:Re.name)||"").toLowerCase().includes(u.toLowerCase())||(((Ie=F.userId)==null?void 0:Ie.email)||"").toLowerCase().includes(u.toLowerCase())||F._id.toLowerCase().includes(u.toLowerCase()),le=F.status||F.orderStatus||"",xe=!h||le.toLowerCase()===h.toLowerCase();return X&&xe}),J=[...new Set(a.map(F=>F.status||F.orderStatus||"").filter(Boolean))],oe=a.length,ee=a.filter(F=>{const X=F.status||F.orderStatus||"";return X.toLowerCase()==="pending"||X.toLowerCase()==="created"}).length,ge=a.filter(F=>(F.status||F.orderStatus||"").toLowerCase()==="delivered").length,pe=a.reduce((F,X)=>F+X.totalAmount,0),Ne=F=>({created:"Pending",pending:"Pending",confirmed:"Processing",assigned:"Assigned",picked_up:"Picked Up",in_transit:"In Transit",arrived:"Arrived",delivered:"Delivered",cancelled:"Cancelled"})[F.toLowerCase()]||F,We=F=>{switch(F.toLowerCase()){case"created":case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"assigned":return"bg-indigo-100 text-indigo-800";case"picked_up":case"in_transit":return"bg-purple-100 text-purple-800";case"arrived":return"bg-teal-100 text-teal-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Tt=F=>{switch(F.toLowerCase()){case"pending":return s.jsx(He,{className:"h-4 w-4"});case"processing":return s.jsx(ze,{className:"h-4 w-4"});case"shipped":return s.jsx(ze,{className:"h-4 w-4"});case"delivered":return s.jsx(Ee,{className:"h-4 w-4"});case"cancelled":return s.jsx(He,{className:"h-4 w-4"});default:return s.jsx(He,{className:"h-4 w-4"})}},Ot=F=>{const X=F.paymentMethod||"cod",le=F.paymentStatus||"pending";return le==="paid"&&F.paymentReceivedAt?X==="cod"?`Paid via UPI on ${new Date(F.paymentReceivedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:`Paid via Razorpay on ${new Date(F.paymentReceivedAt||F.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:le==="paid"?X==="cod"?"Paid via UPI":"Paid via Razorpay":"Payment Pending"};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading orders..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("button",{onClick:()=>e("/admin"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:s.jsx(Ce,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders Management"}),s.jsx("p",{className:"text-gray-600",children:"View and manage all orders"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:u,onChange:F=>m(F.target.value),placeholder:"Search orders...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-64"})]}),s.jsxs("select",{value:h,onChange:F=>f(F.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Statuses"}),J.map(F=>s.jsx("option",{value:F,children:F.charAt(0).toUpperCase()+F.slice(1)},F))]}),s.jsxs("button",{onClick:_,disabled:p||ee===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[s.jsx(dr,{className:"h-4 w-4"}),p?"Assigning...":"Auto Assign Deliveries"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Kt,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:oe})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(He,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ee})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Ee,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ge})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(js,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",pe.toLocaleString()]})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:d?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 text-lg font-medium mb-2",children:"Error Loading Orders"}),s.jsx("p",{className:"text-gray-600 mb-4",children:d}),s.jsxs("div",{className:"space-x-3",children:[s.jsx("button",{onClick:D,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"}),s.jsx("button",{onClick:()=>{localStorage.removeItem("auth"),window.location.href="/login"},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Login Again"})]})]}):H.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Kt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:u||h?"No orders match your current filters.":"No orders available."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delivery Boy"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(F=>{var X,le;return s.jsxs("tr",{onClick:()=>e(`/admin/orders/${F._id}`),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",F.orderNumber||F._id.substring(0,8)]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",F._id.substring(0,12),"..."]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:s.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx(De,{className:"h-4 w-4 text-gray-600"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((X=F.userId)==null?void 0:X.name)||"Unknown User"}),s.jsx("div",{className:"text-sm text-gray-500",children:((le=F.userId)==null?void 0:le.email)||"No email"})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[F.items.length," item",F.items.length!==1?"s":""]}),s.jsx("div",{className:"text-sm text-gray-500",children:(()=>{var Re,Ie;const xe=F.items[0];return`${(xe==null?void 0:xe.name)||(typeof(xe==null?void 0:xe.productId)=="object"?(Re=xe.productId)==null?void 0:Re.name:null)||((Ie=xe==null?void 0:xe.product)==null?void 0:Ie.name)||"Product"}${F.items.length>1?` +${F.items.length-1} more`:""}`})()})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(js,{className:"h-4 w-4 text-gray-400 mr-1"}),"",F.totalAmount.toLocaleString()]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[Tt(F.status||F.orderStatus||"pending"),s.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${We(F.status||F.orderStatus||"pending")}`,children:Ne(F.status||F.orderStatus||"pending")})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("div",{className:"max-w-32",children:F.deliveryBoyId?s.jsxs("div",{onClick:xe=>xe.stopPropagation(),children:[typeof F.deliveryBoyId=="object"&&F.deliveryBoyId.name?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs font-medium text-gray-900 mb-1",children:F.deliveryBoyId.name}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:F.deliveryBoyId.phone||"No phone"})]}):s.jsx("p",{className:"text-xs font-medium text-gray-900 mb-2",children:"Assigned"}),!["delivered","cancelled"].includes((F.status||F.orderStatus||"").toLowerCase())&&s.jsxs("button",{onClick:xe=>{xe.stopPropagation(),C(F),W(),g(!0)},className:"inline-flex items-center px-2 py-1 border border-orange-300 text-xs font-medium rounded text-orange-700 bg-orange-50 hover:bg-orange-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:[s.jsx(dr,{className:"h-3 w-3 mr-1"}),"Reassign"]})]}):s.jsx("div",{onClick:xe=>xe.stopPropagation(),children:["confirmed","processing","assigned","accepted"].includes((F.status||F.orderStatus||"").toLowerCase())?s.jsxs("button",{onClick:xe=>{xe.stopPropagation(),C(F),W(),g(!0)},className:"inline-flex items-center px-2 py-1 border border-blue-300 text-xs font-medium rounded text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(dr,{className:"h-3 w-3 mr-1"}),"Assign"]}):s.jsx("span",{className:"text-xs text-gray-400",children:"Not assigned"})})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{className:"max-w-32",children:[s.jsx("p",{className:"text-xs font-medium text-gray-900 mb-1",children:F.paymentStatus==="paid"?"Paid":"Pending"}),s.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ot(F)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Dn,{className:"h-4 w-4 text-gray-400 mr-2"}),new Date(F.createdAt).toLocaleDateString()]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:["pending","created","placed","confirmed","processing"].includes((F.status||F.orderStatus||"").toLowerCase())?s.jsxs("div",{className:"flex gap-2",onClick:xe=>xe.stopPropagation(),children:[s.jsx("button",{onClick:xe=>I(F,xe),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Accept"}),s.jsx("button",{onClick:xe=>q(F,xe),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Decline"})]}):s.jsx("span",{className:"text-gray-400 text-xs",children:""})})]},F._id)})})]})})}),j&&k&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accept Order"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Accept order #",k.orderNumber||k._id.substring(0,8)," and assign for delivery?",s.jsx("br",{}),s.jsx("span",{className:"text-sm text-gray-500 mt-2 block",children:"The system will automatically try to assign this order to an available delivery partner."})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{N(!1),C(null)},disabled:E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:ie,disabled:E,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md disabled:opacity-50",children:E?"Processing...":"Confirm Accept"})]})]})}),v&&k&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Decline Order"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Decline order #",k.orderNumber||k._id.substring(0,8),"?",s.jsx("br",{}),s.jsx("span",{className:"text-sm text-gray-500 mt-1 block",children:"This will cancel the order and trigger refund if payment was made."})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),s.jsx("textarea",{value:S,onChange:F=>A(F.target.value),placeholder:"Enter reason for declining...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",rows:3})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{b(!1),C(null),A("")},disabled:E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:$,disabled:E,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md disabled:opacity-50",children:E?"Processing...":"Confirm Decline"})]})]})}),x&&k&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assign Delivery Partner"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Order #",k.orderNumber||k._id.substring(0,8)," has been accepted.",s.jsx("br",{}),s.jsx("span",{className:"text-sm text-gray-500 mt-1 block",children:"Select a delivery partner to assign this order."})]}),L?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Loading delivery partners..."})]}):M.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No active delivery partners available."})}):s.jsx("div",{className:"space-y-2 mb-6",children:M.map(F=>{var xe;const X=F.user,le=F.deliveryBoy;return s.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer transition-colors ${O===(le==null?void 0:le._id)?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300 hover:bg-gray-50"}`,children:[s.jsx("input",{type:"radio",name:"deliveryBoy",value:le==null?void 0:le._id,checked:O===(le==null?void 0:le._id),onChange:ke=>R(ke.target.value),className:"h-4 w-4 text-green-600 focus:ring-green-500"}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:X.name||"Unknown Name"}),s.jsx("p",{className:"text-xs text-gray-500",children:X.phone||"No Phone"})]}),s.jsxs("div",{className:"text-right",children:[(le==null?void 0:le.vehicleType)&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:le.vehicleType}),((xe=X.deliveryProfile)==null?void 0:xe.assignedAreas)&&X.deliveryProfile.assignedAreas.length>0&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Areas: ",X.deliveryProfile.assignedAreas.slice(0,3).join(", "),X.deliveryProfile.assignedAreas.length>3&&` +${X.deliveryProfile.assignedAreas.length-3}`]})]})]})})]},(le==null?void 0:le._id)||X._id)})}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{g(!1),C(null),R(""),D()},disabled:E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:se,disabled:E||!O,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md disabled:opacity-50",children:E?"Assigning...":"Assign Delivery Partner"})]})]})})]})})},CL=()=>{const e=ce(),{orderId:t}=No(),{tokens:r,isAuthenticated:n,user:a}=de(A=>A.auth),[i,o]=w.useState(null),[l,d]=w.useState(!0),[c,u]=w.useState(null),[m,h]=w.useState(!1),[f,p]=w.useState("");w.useEffect(()=>{if(!n||!(a!=null&&a.isAdmin)){e("/login");return}t&&y()},[n,a,e,t]);const y=async()=>{try{d(!0),u(null);const A=await fetch("/api/admin/orders",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r==null?void 0:r.accessToken}`}});if(!A.ok)throw new Error("Failed to fetch order details");const T=(await A.json()).orders.find(M=>M._id===t);if(!T)throw new Error("Order not found");o(T)}catch(A){console.error("Error fetching order details:",A),u("Failed to load order details. Please try again later.")}finally{d(!1)}},j=A=>({created:"pending",assigned:"accepted",picked_up:"in_progress",in_transit:"in_progress",delivered:"completed",cancelled:"cancelled"})[A.toLowerCase()]||A,N=A=>{const E=A.toLowerCase();return E==="created"||E==="pending"?[{value:"assigned",label:"Accept Order",color:"bg-green-600 hover:bg-green-700"},{value:"cancelled",label:"Cancel Order",color:"bg-red-600 hover:bg-red-700"}]:[]},v=async A=>{if(i)try{h(!0),u(null);const E=await fetch(`/api/admin/orders/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r==null?void 0:r.accessToken}`},body:JSON.stringify({status:A})});if(!E.ok)throw new Error("Failed to update order status");const T=await E.json();o(T.order),p("Order status updated successfully!"),setTimeout(()=>p(""),3e3),await y()}catch(E){console.error("Error updating order status:",E),u("Failed to update order status. Please try again.")}finally{h(!1)}},b=A=>{switch(j(A).toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"accepted":return"bg-blue-100 text-blue-800 border-blue-300";case"in_progress":return"bg-purple-100 text-purple-800 border-purple-300";case"completed":return"bg-green-100 text-green-800 border-green-300";case"cancelled":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},x=A=>{var E,T;return A.name?A.name:typeof A.productId=="object"&&((E=A.productId)!=null&&E.name)?A.productId.name:(T=A.product)!=null&&T.name?A.product.name:"Product"},g=A=>A.price,k=A=>A.qty||A.quantity||1,C=A=>{const E=A.paymentMethod||"cod",T=A.paymentStatus||"pending";return T==="paid"&&A.paymentReceivedAt?E==="cod"?`Paid via UPI on ${new Date(A.paymentReceivedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:`Paid via Razorpay on ${new Date(A.paymentReceivedAt||A.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:T==="paid"?E==="cod"?"Paid via UPI":"Paid via Razorpay":"Payment Pending"};if(l)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ho,{className:"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})});if(c&&!i)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx(tn,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600 mb-6",children:c}),s.jsxs("div",{className:"space-x-3",children:[s.jsx("button",{onClick:y,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"}),s.jsx("button",{onClick:()=>e("/admin/orders"),className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700",children:"Back to Orders"})]})]})});if(!i)return null;const S=i.status||i.orderStatus||"pending";return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("button",{onClick:()=>e("/admin/orders"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[s.jsx(Ce,{className:"h-5 w-5 mr-2"}),"Back to Orders"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",i.orderNumber||i._id.substring(0,8)]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Order ID: ",i._id]})]}),s.jsx("span",{className:`px-4 py-2 text-sm font-semibold rounded-full border ${b(S)}`,children:j(S).toUpperCase()})]})]}),f&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center",children:[s.jsx(Ee,{className:"h-5 w-5 text-green-600 mr-3"}),s.jsx("span",{className:"text-green-800",children:f})]}),c&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center",children:[s.jsx(Da,{className:"h-5 w-5 text-red-600 mr-3"}),s.jsx("span",{className:"text-red-800",children:c})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx(ze,{className:"h-5 w-5 mr-2"}),"Order Items"]}),s.jsx("div",{className:"space-y-4",children:i.items.map((A,E)=>{const T=x(A),M=g(A),P=k(A),O=M*P;return s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-4 last:border-0 last:pb-0",children:[s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:"h-16 w-16 bg-gray-100 rounded-lg flex items-center justify-center mr-4",children:s.jsx(ze,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:T}),s.jsxs("p",{className:"text-sm text-gray-500",children:["",M.toLocaleString(),"  ",P]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"font-bold text-gray-900",children:["",O.toLocaleString()]})})]},E)})}),s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 space-y-3",children:[i.earnings&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[s.jsx("span",{children:"Items Subtotal"}),s.jsxs("span",{children:["",(i.totalAmount-(i.earnings.deliveryFee||0)).toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(ze,{className:"h-4 w-4 mr-2 text-blue-500"}),"Delivery Fee"]}),s.jsx("span",{children:i.earnings.deliveryFee>0?`${i.earnings.deliveryFee.toLocaleString()}`:s.jsx("span",{className:"text-green-600 font-semibold",children:"FREE"})})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Amount"}),s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",i.totalAmount.toLocaleString()]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx(De,{className:"h-5 w-5 mr-2"}),"Customer Details"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(De,{className:"h-5 w-5 text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),s.jsx("p",{className:"font-semibold text-gray-900",children:i.userId.name})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ft,{className:"h-5 w-5 text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-semibold text-gray-900",children:i.userId.email})]})]}),i.userId.phone&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-semibold text-gray-900",children:i.userId.phone})]})]})]})]}),i.address&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2"}),"Delivery Address"]}),s.jsxs("div",{className:"text-gray-700 space-y-2",children:[i.address.name&&s.jsx("p",{className:"font-semibold text-lg",children:i.address.name}),i.address.phone&&s.jsxs("p",{className:"text-gray-600",children:[" ",i.address.phone]}),i.address.label&&s.jsx("p",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium mt-1",children:i.address.label}),i.address.addressLine&&s.jsx("p",{className:"mt-2",children:i.address.addressLine}),i.address.landmark&&s.jsxs("p",{className:"text-gray-600",children:["Landmark: ",i.address.landmark]}),s.jsxs("p",{className:"font-medium",children:[i.address.city,", ",i.address.state]}),i.address.pincode&&s.jsxs("p",{className:"text-gray-600",children:["Pincode: ",i.address.pincode]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Actions"}),(()=>{const A=N(S);return A.length===0?s.jsxs("div",{className:"text-center py-6",children:[s.jsx(Ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600 text-sm",children:S==="delivered"||S==="completed"?"This order has been completed.":S==="cancelled"?"This order has been cancelled.":"Order has been accepted and assigned to delivery partner."}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:S==="assigned"?"Delivery partner will update the status.":"No further changes will be made."})]}):s.jsxs("div",{className:"space-y-3",children:[A.map(E=>s.jsx("button",{onClick:()=>v(E.value),disabled:m,className:`w-full text-white px-4 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors ${E.color}`,children:m?s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"animate-spin h-5 w-5 mr-2"}),"Processing..."]}):E.label},E.value)),S!=="cancelled"&&S!=="delivered"&&s.jsx("div",{className:"pt-3 border-t border-gray-200",children:s.jsx("p",{className:"text-xs text-gray-500 text-center",children:S==="created"||S==="pending"?"Accept to process the order or decline to cancel it.":S==="assigned"?"Move to In Progress when delivery starts.":"Mark as completed when delivery is done."})})]})})()]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Payment Status"}),s.jsx("p",{className:"font-semibold text-gray-900 capitalize mb-1",children:i.paymentStatus==="paid"?"Paid":"Pending"}),s.jsx("p",{className:"text-sm text-gray-600",children:C(i)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Order Date"}),s.jsx("p",{className:"font-semibold text-gray-900",children:new Date(i.createdAt).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated"}),s.jsx("p",{className:"font-semibold text-gray-900",children:new Date(i.updatedAt).toLocaleString()})]}),i.deliveryBoyId&&typeof i.deliveryBoyId=="object"&&i.deliveryBoyId!==null&&i.deliveryBoyId.name&&s.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Delivery Boy"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:i.deliveryBoyId.name}),s.jsx("p",{className:"text-sm text-gray-600",children:i.deliveryBoyId.phone})]})]})]})]})]})]})]})})},PL=()=>{var C;const{tokens:e}=de(S=>S.auth),[t,r]=w.useState([]),[n,a]=w.useState([]),[i,o]=w.useState(!1),[l,d]=w.useState("all"),[c,u]=w.useState(""),[m,h]=w.useState(null),[f,p]=w.useState(!1),[y,j]=w.useState("");w.useEffect(()=>{N()},[]),w.useEffect(()=>{v()},[l,c,t]);const N=async()=>{try{if(o(!0),!(e!=null&&e.accessToken))throw new Error("No authentication token available");const S=await fetch("/api/admin/delivery-boys-list",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`}});if(!S.ok){const E=await S.json();throw new Error(E.error||"Failed to fetch delivery partners")}const A=await S.json();r(A.deliveryBoys||[])}catch(S){console.error("Error fetching delivery boys:",S),K.error(S.message||"Failed to load delivery partners")}finally{o(!1)}},v=()=>{let S=[...t];if(l!=="all"&&(S=S.filter(A=>A.user.status===l)),c){const A=c.toLowerCase();S=S.filter(E=>E.user.name.toLowerCase().includes(A)||E.user.email.toLowerCase().includes(A)||E.user.phone.includes(A))}a(S)},b=async(S,A)=>{try{if(!(e!=null&&e.accessToken))throw new Error("No authentication token available");const E=await fetch(`/api/admin/delivery-boys/${S}/approve`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({assignedAreas:A||[]})});if(!E.ok){const T=await E.json();throw new Error(T.error||"Failed to approve delivery partner")}K.success("Delivery partner approved successfully!"),p(!1),h(null),j(""),N()}catch(E){console.error("Error approving delivery boy:",E),K.error(E.message||"Failed to approve delivery partner")}},x=async S=>{if(window.confirm("Are you sure you want to suspend this delivery partner?"))try{if(!(e!=null&&e.accessToken))throw new Error("No authentication token available");const A=await fetch(`/api/admin/delivery-boys/${S}/suspend`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({reason:"Suspended by admin"})});if(!A.ok){const E=await A.json();throw new Error(E.error||"Failed to suspend delivery partner")}K.success("Delivery partner suspended"),N()}catch(A){console.error("Error suspending delivery boy:",A),K.error(A.message||"Failed to suspend delivery partner")}},g=S=>{switch(S){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=S=>{switch(S){case"available":return"bg-green-500";case"busy":return"bg-orange-500";case"offline":return"bg-gray-400";default:return"bg-gray-400"}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Delivery Partners Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage and monitor all delivery partners"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Partners"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),s.jsx(ns,{className:"h-8 w-8 text-blue-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pending Approval"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(S=>S.user.status==="pending").length})]}),s.jsx(He,{className:"h-8 w-8 text-yellow-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Partners"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(S=>S.user.status==="active").length})]}),s.jsx(Ee,{className:"h-8 w-8 text-green-600"})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(JP,{className:"h-4 w-4 inline mr-1"}),"Filter by Status"]}),s.jsxs("select",{value:l,onChange:S=>d(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Partners"}),s.jsx("option",{value:"pending",children:"Pending Approval"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"suspended",children:"Suspended"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(sn,{className:"h-4 w-4 inline mr-1"}),"Search"]}),s.jsx("input",{type:"text",value:c,onChange:S=>u(S.target.value),placeholder:"Search by name, email, or phone",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),i?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading delivery partners..."})]}):n.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[s.jsx($a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Delivery Partners Found"}),s.jsx("p",{className:"text-gray-600",children:c||l!=="all"?"Try adjusting your filters":"No delivery partners have signed up yet"})]}):s.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.map(S=>{var A,E;return s.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:S.user.name}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${g(S.user.status)}`,children:S.user.status.toUpperCase()}),S.deliveryBoy&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${k(S.deliveryBoy.availability)}`}),s.jsx("span",{className:"text-xs text-gray-600 capitalize",children:S.deliveryBoy.availability})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Ft,{className:"h-4 w-4 mr-2 text-blue-600"}),S.user.email]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-green-600"}),S.user.phone]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(ze,{className:"h-4 w-4 mr-2 text-purple-600"}),"Vehicle: ",((A=S.user.deliveryProfile)==null?void 0:A.vehicleType)||"N/A"]}),((E=S.user.deliveryProfile)==null?void 0:E.assignedAreas)&&S.user.deliveryProfile.assignedAreas.length>0&&s.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[s.jsx(ut,{className:"h-4 w-4 mr-2 text-red-600 mt-0.5"}),s.jsxs("span",{children:["Areas: ",S.user.deliveryProfile.assignedAreas.join(", ")]})]})]}),S.deliveryBoy&&s.jsxs("div",{className:"flex gap-6 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Completed:"}),s.jsx("span",{className:"font-semibold text-gray-900 ml-2",children:S.deliveryBoy.completedOrdersCount})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Earnings:"}),s.jsxs("span",{className:"font-semibold text-gray-900 ml-2",children:["",S.deliveryBoy.earnings]})]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Joined: ",new Date(S.user.createdAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[S.user.status==="pending"&&s.jsxs("button",{onClick:()=>{h(S),p(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[s.jsx(Ee,{className:"h-4 w-4"}),"Approve"]}),S.user.status==="active"&&s.jsxs("button",{onClick:()=>x(S.user._id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[s.jsx(tn,{className:"h-4 w-4"}),"Suspend"]}),S.user.status==="suspended"&&s.jsx("button",{onClick:()=>b(S.user._id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Reactivate"})]})]})},S.user._id)})})]}),f&&m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Approve Delivery Partner"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s.jsx("strong",{children:"Name:"})," ",m.user.name]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[s.jsx("strong",{children:"Email:"})," ",m.user.email]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[s.jsx("strong",{children:"Vehicle:"})," ",(C=m.user.deliveryProfile)==null?void 0:C.vehicleType]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Delivery Areas (Pincodes)"}),s.jsx("input",{type:"text",value:y,onChange:S=>j(S.target.value),placeholder:"e.g., 500001, 500002, 500003",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter comma-separated pincodes"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{const S=y.split(",").map(A=>A.trim()).filter(A=>A);b(m.user._id,S)},className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Approve & Activate"}),s.jsx("button",{onClick:()=>{p(!1),h(null),j("")},className:"flex-1 py-3 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})},AL=()=>{const e=ce(),{isAuthenticated:t,user:r,tokens:n}=de(c=>c.auth),[a,i]=w.useState({totalRevenue:0,totalOrders:0,totalUsers:0,totalProducts:0,monthlyRevenue:[],topProducts:[],recentOrders:[]}),[o,l]=w.useState(!0);w.useEffect(()=>{if(!t||!(r!=null&&r.isAdmin)){e("/login");return}d()},[t,r,e]);const d=async()=>{try{l(!0);const c=await fetch("/api/admin/analytics",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n==null?void 0:n.accessToken}`}});if(!c.ok)throw new Error("Failed to fetch analytics");const u=await c.json();i({totalRevenue:u.totalRevenue||0,totalOrders:u.totalOrders||0,totalUsers:u.totalUsers||0,totalProducts:u.totalProducts||0,monthlyRevenue:u.monthlyRevenue||[],topProducts:u.topProducts||[],recentOrders:u.recentOrders||[]})}catch(c){console.error("Error fetching analytics:",c),ae.error("Failed to load analytics data")}finally{l(!1)}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>e("/admin"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:s.jsx(Ce,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales Analytics"}),s.jsx("p",{className:"text-gray-600",children:"View sales reports and performance metrics"})]})]}),s.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(ap,{className:"h-4 w-4"}),"Export Report"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(js,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",a.totalRevenue.toLocaleString()]}),s.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(rr,{className:"h-4 w-4 mr-1"}),"0% from last month"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Kt,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalOrders}),s.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(rr,{className:"h-4 w-4 mr-1"}),"0% from last month"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(ns,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalUsers}),s.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(rr,{className:"h-4 w-4 mr-1"}),"0% from last month"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(ze,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalProducts}),s.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(rr,{className:"h-4 w-4 mr-1"}),"0 new this month"]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6 border border-gray-200",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Monthly Revenue"}),s.jsx("div",{className:"space-y-3 sm:space-y-4",children:a.monthlyRevenue.length>0?a.monthlyRevenue.map(c=>{const u=Math.max(...a.monthlyRevenue.map(h=>h.revenue),1),m=c.revenue/u*100;return s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-600 min-w-[60px]",children:c.month}),s.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[s.jsx("div",{className:"flex-1 sm:w-32 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})}),s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-900 min-w-[80px] text-right",children:["",c.revenue.toLocaleString()]})]})]},c.month)}):s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No revenue data available"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6 border border-gray-200",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Top Selling Products"}),s.jsx("div",{className:"space-y-3 sm:space-y-4",children:a.topProducts.length>0?a.topProducts.map((c,u)=>s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-1 min-w-0",children:[s.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-900 flex-shrink-0",children:["#",u+1]}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-600 truncate",children:c.name})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:[c.sales," sales"]}),s.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["",c.revenue.toLocaleString()]})]})]},c.name)):s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No product data available"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Recent Orders"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.recentOrders.map(c=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.id}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.customer}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",c.amount.toLocaleString()]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c.status==="Delivered"?"bg-green-100 text-green-800":c.status==="Processing"?"bg-blue-100 text-blue-800":c.status==="Shipped"?"bg-purple-100 text-purple-800":c.status==="No data"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:c.status})})]},c.id))})]})})]}),s.jsxs("div",{className:"mt-6 sm:mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(uo,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average Order Value"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Dn,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Orders This Month"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(rr,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Growth Rate"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0%"})]})]})})]})]})})},EL=()=>{const e=ce(),{user:t,tokens:r}=de(x=>x.auth),{success:n,error:a}=Ns(),[i,o]=w.useState(!1),[l,d]=w.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,u]=w.useState({current:!1,new:!1,confirm:!1}),[m,h]=w.useState(!1),f=()=>{e("/admin")},p=()=>{console.log("Edit profile clicked")},y=x=>{const{name:g,value:k}=x.target;d(C=>({...C,[g]:k}))},j=x=>{u(g=>({...g,[x]:!g[x]}))},N=()=>!l.currentPassword||!l.newPassword||!l.confirmPassword?(a("All fields are required"),!1):l.newPassword.length<6?(a("New password must be at least 6 characters long"),!1):l.newPassword!==l.confirmPassword?(a("New password and confirm password do not match"),!1):!0,v=async x=>{if(x.preventDefault(),!!N())try{h(!0);const g=await fetch("http://localhost:5001/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r==null?void 0:r.accessToken}`},body:JSON.stringify({currentPassword:l.currentPassword,newPassword:l.newPassword})}),k=await g.json();g.ok?(n("Password changed successfully"),d({currentPassword:"",newPassword:"",confirmPassword:""}),o(!1)):a(k.error||"Failed to change password")}catch(g){console.error("Password change error:",g),a("Network error. Please try again.")}finally{h(!1)}},b=()=>{d({currentPassword:"",newPassword:"",confirmPassword:""}),o(!1)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:f,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Ce,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Admin Profile"})]}),s.jsxs("button",{onClick:p,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(up,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Edit Profile"})]})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-20 w-20 bg-white rounded-full flex items-center justify-center shadow-lg",children:s.jsx(De,{className:"h-10 w-10 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:(t==null?void 0:t.name)||"Admin User"}),s.jsx("p",{className:"text-blue-100 text-lg",children:(t==null?void 0:t.email)||"admin@example.com"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(Xt,{className:"h-4 w-4 text-blue-200"}),s.jsx("span",{className:"text-blue-200 text-sm font-medium",children:"Administrator"})]})]})]})}),s.jsxs("div",{className:"px-6 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Personal Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(De,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),s.jsx("p",{className:"text-gray-900",children:(t==null?void 0:t.name)||"Not provided"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ft,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),s.jsx("p",{className:"text-gray-900",children:(t==null?void 0:t.email)||"Not provided"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mt,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),s.jsx("p",{className:"text-gray-900",children:(t==null?void 0:t.phone)||"Not provided"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Account Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xt,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Role"}),s.jsx("p",{className:"text-gray-900",children:t!=null&&t.isAdmin?"Administrator":"User"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-5 w-5 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),s.jsx("p",{className:"text-green-600 font-medium",children:"Active"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-5 w-5 text-gray-400",children:s.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Member Since"}),s.jsx("p",{className:"text-gray-900",children:t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString():"Not available"})]})]})]})]})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),!i&&s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ia,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Change Password"})]})]}),i&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Change Password"}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:c.current?"text":"password",name:"currentPassword",value:l.currentPassword,onChange:y,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password",required:!0}),s.jsx("button",{type:"button",onClick:()=>j("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.current?s.jsx(ka,{className:"h-4 w-4"}):s.jsx(or,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:c.new?"text":"password",name:"newPassword",value:l.newPassword,onChange:y,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",required:!0}),s.jsx("button",{type:"button",onClick:()=>j("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.new?s.jsx(ka,{className:"h-4 w-4"}):s.jsx(or,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:c.confirm?"text":"password",name:"confirmPassword",value:l.confirmPassword,onChange:y,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password",required:!0}),s.jsx("button",{type:"button",onClick:()=>j("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.confirm?s.jsx(ka,{className:"h-4 w-4"}):s.jsx(or,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"submit",disabled:m,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Changing...":"Change Password"}),s.jsx("button",{type:"button",onClick:b,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Admin Actions"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>e("/admin/products"),className:"p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left",children:[s.jsx("h4",{className:"font-medium text-blue-900",children:"Manage Products"}),s.jsx("p",{className:"text-sm text-blue-600",children:"Add, edit, or remove products"})]}),s.jsxs("button",{onClick:()=>e("/admin/users"),className:"p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-left",children:[s.jsx("h4",{className:"font-medium text-green-900",children:"Manage Users"}),s.jsx("p",{className:"text-sm text-green-600",children:"View and manage user accounts"})]}),s.jsxs("button",{onClick:()=>e("/admin/orders"),className:"p-4 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors text-left",children:[s.jsx("h4",{className:"font-medium text-yellow-900",children:"Manage Orders"}),s.jsx("p",{className:"text-sm text-yellow-600",children:"Track and update orders"})]})]})]})]})]})})]})},TL=()=>{var C;const[e,t]=w.useState([]),[r,n]=w.useState(null),[a,i]=w.useState(!0),[o,l]=w.useState(""),[d,c]=w.useState(""),[u,m]=w.useState(""),[h,f]=w.useState(1),[p,y]=w.useState(1),j=async()=>{try{i(!0);const S=localStorage.getItem("accessToken"),A=new URLSearchParams({page:h.toString(),limit:"10",...o&&{search:o},...d&&{status:d},...u&&{method:u}}),E=await fetch(`/api/payment?${A}`,{headers:{Authorization:`Bearer ${S}`}});if(E.ok){const T=await E.json();t(T.payments),y(T.pagination.totalPages)}}catch(S){console.error("Error fetching payments:",S)}finally{i(!1)}},N=async()=>{try{const S=localStorage.getItem("accessToken"),A=await fetch("/api/payment/stats/overview",{headers:{Authorization:`Bearer ${S}`}});if(A.ok){const E=await A.json();n(E.stats)}}catch(S){console.error("Error fetching payment stats:",S)}};w.useEffect(()=>{j(),N()},[h,o,d,u]);const v=S=>{switch(S){case"upi":return s.jsx(dp,{className:"h-4 w-4"});case"card":return s.jsx(ys,{className:"h-4 w-4"});case"netbanking":return s.jsx(jP,{className:"h-4 w-4"});case"wallet":return s.jsx(hA,{className:"h-4 w-4"});default:return s.jsx(ys,{className:"h-4 w-4"})}},b=S=>{switch(S){case"captured":return s.jsx(Ee,{className:"h-4 w-4 text-green-500"});case"failed":return s.jsx(tn,{className:"h-4 w-4 text-red-500"});case"pending":return s.jsx(He,{className:"h-4 w-4 text-yellow-500"});case"refunded":return s.jsx(Dd,{className:"h-4 w-4 text-blue-500"});default:return s.jsx(He,{className:"h-4 w-4 text-gray-500"})}},x=S=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(S),g=S=>new Date(S).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=S=>{var T,M,P,O;const{method:A,methodDetails:E}=S;return A==="upi"&&((T=E==null?void 0:E.upi)!=null&&T.vpa)?`UPI (${E.upi.vpa})`:A==="card"&&((M=E==null?void 0:E.card)!=null&&M.last4)?`Card (****${E.card.last4})`:A==="netbanking"&&((P=E==null?void 0:E.netbanking)!=null&&P.bank)?`Net Banking (${E.netbanking.bank})`:A==="wallet"&&((O=E==null?void 0:E.wallet)!=null&&O.wallet_name)?`Wallet (${E.wallet.wallet_name})`:A.charAt(0).toUpperCase()+A.slice(1)};return s.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Payment Logs"}),s.jsx("p",{className:"text-gray-600",children:"Monitor all payment transactions and their status"})]}),r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Payments"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.totalPayments})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:s.jsx(rr,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x(r.totalAmount)})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:s.jsx(ys,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((C=r.statusStats.find(S=>S._id==="captured"))==null?void 0:C.count)||0," ","/ ",r.totalPayments]})]}),s.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:s.jsx(Ee,{className:"h-6 w-6 text-yellow-600"})})]})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Order Value"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x(r.totalAmount/Math.max(r.totalPayments,1))})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:s.jsx(rr,{className:"h-6 w-6 text-purple-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by payment ID, user name, or email...",value:o,onChange:S=>l(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("select",{value:d,onChange:S=>c(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"captured",children:"Captured"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"failed",children:"Failed"}),s.jsx("option",{value:"refunded",children:"Refunded"})]}),s.jsxs("select",{value:u,onChange:S=>m(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Methods"}),s.jsx("option",{value:"upi",children:"UPI"}),s.jsx("option",{value:"card",children:"Card"}),s.jsx("option",{value:"netbanking",children:"Net Banking"}),s.jsx("option",{value:"wallet",children:"Wallet"}),s.jsx("option",{value:"emi",children:"EMI"}),s.jsx("option",{value:"paylater",children:"Pay Later"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading payments..."})]})})}):e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No payments found"})}):e.map(S=>s.jsxs(B.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.paymentId}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Order: ",S.orderId._id.slice(-8)]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.userDetails.name}),s.jsx("div",{className:"text-sm text-gray-500",children:S.userDetails.email})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[v(S.method),s.jsx("span",{className:"ml-2 text-sm text-gray-900",children:k(S)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(S.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[b(S.status),s.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:S.status})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(S.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("button",{className:"text-blue-600 hover:text-blue-900 flex items-center",children:[s.jsx(or,{className:"h-4 w-4 mr-1"}),"View"]})})]},S._id))})]})}),p>1&&s.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx("button",{onClick:()=>f(Math.max(1,h-1)),disabled:h===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsx("button",{onClick:()=>f(Math.min(p,h+1)),disabled:h===p,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page"," ",s.jsx("span",{className:"font-medium",children:h})," of"," ",s.jsx("span",{className:"font-medium",children:p})]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[s.jsx("button",{onClick:()=>f(Math.max(1,h-1)),disabled:h===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsx("button",{onClick:()=>f(Math.min(p,h+1)),disabled:h===p,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]})]})})},Fs=({children:e})=>{const t=ce(),{user:r,isAuthenticated:n,tokens:a}=de(i=>i.auth);return w.useEffect(()=>{if(!n||!(r!=null&&r.isAdmin)||!(a!=null&&a.accessToken)){localStorage.removeItem("auth"),t("/login");return}},[n,r,t,a]),!n||!(r!=null&&r.isAdmin)||!(a!=null&&a.accessToken)?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Checking permissions..."})]})}):s.jsx(s.Fragment,{children:e})},OL=({activeTab:e,setActiveTab:t})=>{const r=[{id:"home",label:"Home",icon:op,ariaLabel:"Delivery dashboard home"},{id:"earnings",label:"Earnings",icon:js,ariaLabel:"View earnings and payments"},{id:"notifications",label:"Notifications",icon:Dt,ariaLabel:"View notifications"},{id:"more",label:"More",icon:WP,ariaLabel:"More options"}];return s.jsx(B.nav,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg flex justify-around py-2 border-t border-gray-200 z-50",role:"navigation","aria-label":"Delivery navigation",children:r.map(n=>{const a=e===n.id,i=n.icon;return s.jsxs("button",{onClick:()=>t(n.id),className:`flex flex-col items-center py-2 px-3 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${a?"text-blue-600":"text-gray-600 hover:text-blue-600"}`,"aria-label":n.ariaLabel,"aria-current":a?"page":void 0,children:[s.jsx(i,{className:`h-6 w-6 ${a?"text-blue-600":"text-gray-600"}`,"aria-hidden":"true"}),s.jsx("span",{className:"text-xs font-medium mt-1",children:n.label})]},n.id)})})},RL=()=>{const e=ce(),{user:t,isAuthenticated:r}=de(a=>a.auth),{data:n}=qn(void 0,{skip:!r});return s.jsx("div",{className:"bg-gradient-to-r from-purple-900 via-purple-800 to-indigo-900 text-white",children:s.jsxs("div",{className:"flex justify-between items-center px-4 py-2 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/20 rounded-lg",children:s.jsx(Kt,{className:"h-5 w-5 text-white"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-white font-bold text-sm leading-tight",children:"CS"}),s.jsx("span",{className:"text-white font-bold text-xs leading-tight",children:"STORE"})]})]}),((n==null?void 0:n.name)||(t==null?void 0:t.email))&&s.jsxs("div",{className:"flex items-center space-x-2 ml-4 bg-white/10 px-3 py-1.5 rounded-lg",children:[s.jsx(De,{className:"h-4 w-4 text-white"}),s.jsx("span",{className:"text-white font-medium text-sm",children:(n==null?void 0:n.name)||(t==null?void 0:t.email)})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{className:"p-1 bg-white/10 hover:bg-white/20 rounded transition-colors",children:s.jsx(ut,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>e("/delivery/help-center"),className:"p-1 bg-white/10 hover:bg-white/20 rounded transition-colors","aria-label":"Help Center",children:s.jsx(tw,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>e("/delivery/emergency"),className:"p-1 bg-white/10 hover:bg-white/20 rounded transition-colors",children:s.jsx($a,{className:"h-4 w-4"})})]})]})})};var ML=Object.defineProperty,Uc=Object.getOwnPropertySymbols,P1=Object.prototype.hasOwnProperty,A1=Object.prototype.propertyIsEnumerable,Ly=(e,t,r)=>t in e?ML(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fh=(e,t)=>{for(var r in t||(t={}))P1.call(t,r)&&Ly(e,r,t[r]);if(Uc)for(var r of Uc(t))A1.call(t,r)&&Ly(e,r,t[r]);return e},Bh=(e,t)=>{var r={};for(var n in e)P1.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Uc)for(var n of Uc(e))t.indexOf(n)<0&&A1.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var $n;(e=>{const t=class be{constructor(d,c,u,m){if(this.version=d,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],d<be.MIN_VERSION||d>be.MAX_VERSION)throw new RangeError("Version value out of range");if(m<-1||m>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let h=[];for(let p=0;p<this.size;p++)h.push(!1);for(let p=0;p<this.size;p++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),m==-1){let p=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const j=this.getPenaltyScore();j<p&&(m=y,p=j),this.applyMask(y)}}a(0<=m&&m<=7),this.mask=m,this.applyMask(m),this.drawFormatBits(m),this.isFunction=[]}static encodeText(d,c){const u=e.QrSegment.makeSegments(d);return be.encodeSegments(u,c)}static encodeBinary(d,c){const u=e.QrSegment.makeBytes(d);return be.encodeSegments([u],c)}static encodeSegments(d,c,u=1,m=40,h=-1,f=!0){if(!(be.MIN_VERSION<=u&&u<=m&&m<=be.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let p,y;for(p=u;;p++){const b=be.getNumDataCodewords(p,c)*8,x=o.getTotalBits(d,p);if(x<=b){y=x;break}if(p>=m)throw new RangeError("Data too long")}for(const b of[be.Ecc.MEDIUM,be.Ecc.QUARTILE,be.Ecc.HIGH])f&&y<=be.getNumDataCodewords(p,b)*8&&(c=b);let j=[];for(const b of d){r(b.mode.modeBits,4,j),r(b.numChars,b.mode.numCharCountBits(p),j);for(const x of b.getData())j.push(x)}a(j.length==y);const N=be.getNumDataCodewords(p,c)*8;a(j.length<=N),r(0,Math.min(4,N-j.length),j),r(0,(8-j.length%8)%8,j),a(j.length%8==0);for(let b=236;j.length<N;b^=253)r(b,8,j);let v=[];for(;v.length*8<j.length;)v.push(0);return j.forEach((b,x)=>v[x>>>3]|=b<<7-(x&7)),new be(p,c,v,h)}getModule(d,c){return 0<=d&&d<this.size&&0<=c&&c<this.size&&this.modules[c][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),c=d.length;for(let u=0;u<c;u++)for(let m=0;m<c;m++)u==0&&m==0||u==0&&m==c-1||u==c-1&&m==0||this.drawAlignmentPattern(d[u],d[m]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const c=this.errorCorrectionLevel.formatBits<<3|d;let u=c;for(let h=0;h<10;h++)u=u<<1^(u>>>9)*1335;const m=(c<<10|u)^21522;a(m>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,n(m,h));this.setFunctionModule(8,7,n(m,6)),this.setFunctionModule(8,8,n(m,7)),this.setFunctionModule(7,8,n(m,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,n(m,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,n(m,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,n(m,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let u=0;u<12;u++)d=d<<1^(d>>>11)*7973;const c=this.version<<12|d;a(c>>>18==0);for(let u=0;u<18;u++){const m=n(c,u),h=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(h,f,m),this.setFunctionModule(f,h,m)}}drawFinderPattern(d,c){for(let u=-4;u<=4;u++)for(let m=-4;m<=4;m++){const h=Math.max(Math.abs(m),Math.abs(u)),f=d+m,p=c+u;0<=f&&f<this.size&&0<=p&&p<this.size&&this.setFunctionModule(f,p,h!=2&&h!=4)}}drawAlignmentPattern(d,c){for(let u=-2;u<=2;u++)for(let m=-2;m<=2;m++)this.setFunctionModule(d+m,c+u,Math.max(Math.abs(m),Math.abs(u))!=1)}setFunctionModule(d,c,u){this.modules[c][d]=u,this.isFunction[c][d]=!0}addEccAndInterleave(d){const c=this.version,u=this.errorCorrectionLevel;if(d.length!=be.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const m=be.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],h=be.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],f=Math.floor(be.getNumRawDataModules(c)/8),p=m-f%m,y=Math.floor(f/m);let j=[];const N=be.reedSolomonComputeDivisor(h);for(let b=0,x=0;b<m;b++){let g=d.slice(x,x+y-h+(b<p?0:1));x+=g.length;const k=be.reedSolomonComputeRemainder(g,N);b<p&&g.push(0),j.push(g.concat(k))}let v=[];for(let b=0;b<j[0].length;b++)j.forEach((x,g)=>{(b!=y-h||g>=p)&&v.push(x[b])});return a(v.length==f),v}drawCodewords(d){if(d.length!=Math.floor(be.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let m=0;m<this.size;m++)for(let h=0;h<2;h++){const f=u-h,y=(u+1&2)==0?this.size-1-m:m;!this.isFunction[y][f]&&c<d.length*8&&(this.modules[y][f]=n(d[c>>>3],7-(c&7)),c++)}}a(c==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let m;switch(d){case 0:m=(u+c)%2==0;break;case 1:m=c%2==0;break;case 2:m=u%3==0;break;case 3:m=(u+c)%3==0;break;case 4:m=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:m=u*c%2+u*c%3==0;break;case 6:m=(u*c%2+u*c%3)%2==0;break;case 7:m=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&m&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let d=0;for(let h=0;h<this.size;h++){let f=!1,p=0,y=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[h][j]==f?(p++,p==5?d+=be.PENALTY_N1:p>5&&d++):(this.finderPenaltyAddHistory(p,y),f||(d+=this.finderPenaltyCountPatterns(y)*be.PENALTY_N3),f=this.modules[h][j],p=1);d+=this.finderPenaltyTerminateAndCount(f,p,y)*be.PENALTY_N3}for(let h=0;h<this.size;h++){let f=!1,p=0,y=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][h]==f?(p++,p==5?d+=be.PENALTY_N1:p>5&&d++):(this.finderPenaltyAddHistory(p,y),f||(d+=this.finderPenaltyCountPatterns(y)*be.PENALTY_N3),f=this.modules[j][h],p=1);d+=this.finderPenaltyTerminateAndCount(f,p,y)*be.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let f=0;f<this.size-1;f++){const p=this.modules[h][f];p==this.modules[h][f+1]&&p==this.modules[h+1][f]&&p==this.modules[h+1][f+1]&&(d+=be.PENALTY_N2)}let c=0;for(const h of this.modules)c=h.reduce((f,p)=>f+(p?1:0),c);const u=this.size*this.size,m=Math.ceil(Math.abs(c*20-u*10)/u)-1;return a(0<=m&&m<=9),d+=m*be.PENALTY_N4,a(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let u=[6];for(let m=this.size-7;u.length<d;m-=c)u.splice(1,0,m);return u}}static getNumRawDataModules(d){if(d<be.MIN_VERSION||d>be.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*d+128)*d+64;if(d>=2){const u=Math.floor(d/7)+2;c-=(25*u-10)*u-55,d>=7&&(c-=36)}return a(208<=c&&c<=29648),c}static getNumDataCodewords(d,c){return Math.floor(be.getNumRawDataModules(d)/8)-be.ECC_CODEWORDS_PER_BLOCK[c.ordinal][d]*be.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let c=[];for(let m=0;m<d-1;m++)c.push(0);c.push(1);let u=1;for(let m=0;m<d;m++){for(let h=0;h<c.length;h++)c[h]=be.reedSolomonMultiply(c[h],u),h+1<c.length&&(c[h]^=c[h+1]);u=be.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(d,c){let u=c.map(m=>0);for(const m of d){const h=m^u.shift();u.push(0),c.forEach((f,p)=>u[p]^=be.reedSolomonMultiply(f,h))}return u}static reedSolomonMultiply(d,c){if(d>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let m=7;m>=0;m--)u=u<<1^(u>>>7)*285,u^=(c>>>m&1)*d;return a(u>>>8==0),u}finderPenaltyCountPatterns(d){const c=d[1];a(c<=this.size*3);const u=c>0&&d[2]==c&&d[3]==c*3&&d[4]==c&&d[5]==c;return(u&&d[0]>=c*4&&d[6]>=c?1:0)+(u&&d[6]>=c*4&&d[0]>=c?1:0)}finderPenaltyTerminateAndCount(d,c,u){return d&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(d,c){c[0]==0&&(d+=this.size),c.pop(),c.unshift(d)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(l,d,c){if(d<0||d>31||l>>>d)throw new RangeError("Value out of range");for(let u=d-1;u>=0;u--)c.push(l>>>u&1)}function n(l,d){return(l>>>d&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const i=class Je{constructor(d,c,u){if(this.mode=d,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(d){let c=[];for(const u of d)r(u,8,c);return new Je(Je.Mode.BYTE,d.length,c)}static makeNumeric(d){if(!Je.isNumeric(d))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<d.length;){const m=Math.min(d.length-u,3);r(parseInt(d.substring(u,u+m),10),m*3+1,c),u+=m}return new Je(Je.Mode.NUMERIC,d.length,c)}static makeAlphanumeric(d){if(!Je.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=d.length;u+=2){let m=Je.ALPHANUMERIC_CHARSET.indexOf(d.charAt(u))*45;m+=Je.ALPHANUMERIC_CHARSET.indexOf(d.charAt(u+1)),r(m,11,c)}return u<d.length&&r(Je.ALPHANUMERIC_CHARSET.indexOf(d.charAt(u)),6,c),new Je(Je.Mode.ALPHANUMERIC,d.length,c)}static makeSegments(d){return d==""?[]:Je.isNumeric(d)?[Je.makeNumeric(d)]:Je.isAlphanumeric(d)?[Je.makeAlphanumeric(d)]:[Je.makeBytes(Je.toUtf8ByteArray(d))]}static makeEci(d){let c=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)r(d,8,c);else if(d<16384)r(2,2,c),r(d,14,c);else if(d<1e6)r(6,3,c),r(d,21,c);else throw new RangeError("ECI assignment value out of range");return new Je(Je.Mode.ECI,0,c)}static isNumeric(d){return Je.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return Je.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,c){let u=0;for(const m of d){const h=m.mode.numCharCountBits(c);if(m.numChars>=1<<h)return 1/0;u+=4+h+m.bitData.length}return u}static toUtf8ByteArray(d){d=encodeURI(d);let c=[];for(let u=0;u<d.length;u++)d.charAt(u)!="%"?c.push(d.charCodeAt(u)):(c.push(parseInt(d.substring(u+1,u+3),16)),u+=2);return c}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})($n||($n={}));(e=>{(t=>{const r=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})($n||($n={}));(e=>{(t=>{const r=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})($n||($n={}));var xa=$n;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var LL={L:xa.QrCode.Ecc.LOW,M:xa.QrCode.Ecc.MEDIUM,Q:xa.QrCode.Ecc.QUARTILE,H:xa.QrCode.Ecc.HIGH},E1=128,T1="L",O1="#FFFFFF",R1="#000000",M1=!1,L1=1,_L=4,DL=0,IL=.1;function _1(e,t=0){const r=[];return e.forEach(function(n,a){let i=null;n.forEach(function(o,l){if(!o&&i!==null){r.push(`M${i+t} ${a+t}h${l-i}v1H${i+t}z`),i=null;return}if(l===n.length-1){if(!o)return;i===null?r.push(`M${l+t},${a+t} h1v1H${l+t}z`):r.push(`M${i+t},${a+t} h${l+1-i}v1H${i+t}z`);return}o&&i===null&&(i=l)})}),r.join("")}function D1(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,i)=>i<t.x||i>=t.x+t.w?a:!1))}function $L(e,t,r,n){if(n==null)return null;const a=e.length+r*2,i=Math.floor(t*IL),o=a/t,l=(n.width||i)*o,d=(n.height||i)*o,c=n.x==null?e.length/2-l/2:n.x*o,u=n.y==null?e.length/2-d/2:n.y*o,m=n.opacity==null?1:n.opacity;let h=null;if(n.excavate){let p=Math.floor(c),y=Math.floor(u),j=Math.ceil(l+c-p),N=Math.ceil(d+u-y);h={x:p,y,w:j,h:N}}const f=n.crossOrigin;return{x:c,y:u,h:d,w:l,excavation:h,opacity:m,crossOrigin:f}}function FL(e,t){return t!=null?Math.max(Math.floor(t),0):e?_L:DL}function I1({value:e,level:t,minVersion:r,includeMargin:n,marginSize:a,imageSettings:i,size:o,boostLevel:l}){let d=Ae.useMemo(()=>{const p=(Array.isArray(e)?e:[e]).reduce((y,j)=>(y.push(...xa.QrSegment.makeSegments(j)),y),[]);return xa.QrCode.encodeSegments(p,LL[t],r,void 0,void 0,l)},[e,t,r,l]);const{cells:c,margin:u,numCells:m,calculatedImageSettings:h}=Ae.useMemo(()=>{let f=d.getModules();const p=FL(n,a),y=f.length+p*2,j=$L(f,o,p,i);return{cells:f,margin:p,numCells:y,calculatedImageSettings:j}},[d,o,i,n,a]);return{qrcode:d,margin:u,cells:c,numCells:m,calculatedImageSettings:h}}var BL=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),UL=Ae.forwardRef(function(t,r){const n=t,{value:a,size:i=E1,level:o=T1,bgColor:l=O1,fgColor:d=R1,includeMargin:c=M1,minVersion:u=L1,boostLevel:m,marginSize:h,imageSettings:f}=n,y=Bh(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=y,N=Bh(y,["style"]),v=f==null?void 0:f.src,b=Ae.useRef(null),x=Ae.useRef(null),g=Ae.useCallback(O=>{b.current=O,typeof r=="function"?r(O):r&&(r.current=O)},[r]),[k,C]=Ae.useState(!1),{margin:S,cells:A,numCells:E,calculatedImageSettings:T}=I1({value:a,level:o,minVersion:u,boostLevel:m,includeMargin:c,marginSize:h,imageSettings:f,size:i});Ae.useEffect(()=>{if(b.current!=null){const O=b.current,R=O.getContext("2d");if(!R)return;let L=A;const U=x.current,D=T!=null&&U!==null&&U.complete&&U.naturalHeight!==0&&U.naturalWidth!==0;D&&T.excavation!=null&&(L=D1(A,T.excavation));const _=window.devicePixelRatio||1;O.height=O.width=i*_;const I=i/E*_;R.scale(I,I),R.fillStyle=l,R.fillRect(0,0,E,E),R.fillStyle=d,BL?R.fill(new Path2D(_1(L,S))):A.forEach(function(q,W){q.forEach(function(ie,se){ie&&R.fillRect(se+S,W+S,1,1)})}),T&&(R.globalAlpha=T.opacity),D&&R.drawImage(U,T.x+S,T.y+S,T.w,T.h)}}),Ae.useEffect(()=>{C(!1)},[v]);const M=Fh({height:i,width:i},j);let P=null;return v!=null&&(P=Ae.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{C(!0)},ref:x,crossOrigin:T==null?void 0:T.crossOrigin})),Ae.createElement(Ae.Fragment,null,Ae.createElement("canvas",Fh({style:M,height:i,width:i,ref:g,role:"img"},N)),P)});UL.displayName="QRCodeCanvas";var $1=Ae.forwardRef(function(t,r){const n=t,{value:a,size:i=E1,level:o=T1,bgColor:l=O1,fgColor:d=R1,includeMargin:c=M1,minVersion:u=L1,boostLevel:m,title:h,marginSize:f,imageSettings:p}=n,y=Bh(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:N,numCells:v,calculatedImageSettings:b}=I1({value:a,level:o,minVersion:u,boostLevel:m,includeMargin:c,marginSize:f,imageSettings:p,size:i});let x=N,g=null;p!=null&&b!=null&&(b.excavation!=null&&(x=D1(N,b.excavation)),g=Ae.createElement("image",{href:p.src,height:b.h,width:b.w,x:b.x+j,y:b.y+j,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const k=_1(x,j);return Ae.createElement("svg",Fh({height:i,width:i,viewBox:`0 0 ${v} ${v}`,ref:r,role:"img"},y),!!h&&Ae.createElement("title",null,h),Ae.createElement("path",{fill:l,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),Ae.createElement("path",{fill:d,d:k,shapeRendering:"crispEdges"}),g)});$1.displayName="QRCodeSVG";const zL=({isOpen:e,onClose:t,orderId:r,amount:n,onPaymentConfirmed:a})=>{const[i,o]=Ae.useState(!1),[l,d]=Ae.useState(!1),[c,u]=Ae.useState(!1);Ae.useEffect(()=>{const p=y=>{y.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[e,t]);const m=`upi://pay?pa=9391795162@ibl&pn=CS Store&am=${n}&cu=INR&tn=Payment for Order #${r.slice(-6)}`,h=()=>{navigator.clipboard.writeText(m),K.success("UPI link copied to clipboard!")},f=Ae.useCallback(async p=>{var y,j;if(!p){o(!1);return}d(!0);try{const N=localStorage.getItem("auth"),v=N?(j=(y=JSON.parse(N))==null?void 0:y.tokens)==null?void 0:j.accessToken:null;if(!v){K.error("Authentication required");return}const b=await fetch(`/api/orders/${r}/payment-status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}});if(!b.ok){const x=await b.json();throw new Error(x.error||"Failed to update payment status")}await b.json(),o(!0),K.success("Payment marked as received successfully "),a&&a()}catch(N){console.error("Payment confirmation error:",N),K.error(N.message||"Failed to confirm payment"),o(!1)}finally{d(!1)}},[r,a]);return Ae.useEffect(()=>{if(!e||i)return;const p=async()=>{var j,N;try{u(!0);const v=localStorage.getItem("auth"),b=v?(N=(j=JSON.parse(v))==null?void 0:j.tokens)==null?void 0:N.accessToken:null;if(!b)return;const x=await fetch(`/api/orders/${r}/payment-status`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`}});x.ok&&(await x.json()).paymentStatus==="paid"&&!i&&await f(!0)}catch(v){console.error("Payment status check error:",v)}finally{u(!1)}},y=setInterval(p,3e3);return p(),()=>{clearInterval(y)}},[e,i,r,f]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:s.jsxs(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto max-h-[90vh] md:max-h-[85vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between px-12 sm:px-16 py-4 sm:py-6 border-b border-gray-200 relative bg-white rounded-t-2xl",children:[s.jsx("button",{onClick:t,className:"p-2 hover:bg-blue-50 hover:text-blue-600 rounded-full transition-colors border border-gray-200 hover:border-blue-200 absolute left-4 top-1/2 transform -translate-y-1/2",title:"Go Back",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-700 hover:text-blue-600"})}),s.jsx("h3",{className:"text-lg font-bold text-gray-900 flex-1 text-center",children:"Payment QR Code"}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-red-50 hover:text-red-600 rounded-full transition-colors border border-gray-200 hover:border-red-200 absolute right-4 top-1/2 transform -translate-y-1/2",title:"Close Payment Modal",children:s.jsx(pt,{className:"h-5 w-5 text-gray-700 hover:text-red-600"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 scroll-smooth",children:s.jsxs("div",{className:"p-4 sm:p-6 text-center",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Order #",r.slice(-6)]}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",n]})]}),s.jsx("div",{className:"bg-white p-6 rounded-xl border-2 border-gray-200 mb-6 inline-block",children:s.jsx($1,{value:m,size:200,level:"M",includeMargin:!0,bgColor:"#FFFFFF",fgColor:"#000000"})}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx(Ee,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("p",{className:"text-sm font-semibold text-blue-800",children:"Ask customer to scan and pay the exact amount"})]}),s.jsx("p",{className:"text-xs text-blue-600",children:"Compatible with Google Pay, PhonePe, Paytm, BHIM & all UPI apps"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"UPI ID:"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-mono font-semibold text-gray-800",children:"9391795162@ibl"}),s.jsx("button",{onClick:h,className:"text-blue-600 hover:text-blue-700 p-1",title:"Copy UPI link",children:s.jsx(Zj,{className:"h-4 w-4"})})]})]})]})}),s.jsx("div",{className:"flex-shrink-0 p-4 sm:p-6 border-t border-gray-200 bg-white rounded-b-2xl",children:s.jsxs("button",{onClick:t,className:"w-full py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition-colors flex items-center justify-center",children:[s.jsx(pt,{className:"h-4 w-4 mr-2"}),"Close Payment Modal"]})})]})}):null},_y=()=>{const{user:e,tokens:t}=de($=>$.auth),[r,n]=w.useState([]),[a,i]=w.useState([]),[o,l]=w.useState(null),[d,c]=w.useState(!1),[u,m]=w.useState(null),[h,f]=w.useState(null),[p,y]=w.useState({}),[j,N]=w.useState({}),[v,b]=w.useState({}),[x,g]=w.useState({}),[k,C]=w.useState(!1),[S,A]=w.useState(null),[E,T]=w.useState({});w.useEffect(()=>(O(),()=>{h&&h.disconnect()}),[]),w.useEffect(()=>{const $=setInterval(()=>{g(H=>{const J={...H};return Object.keys(J).forEach(oe=>{J[oe]>0&&(J[oe]-=1)}),J})},1e3);return()=>clearInterval($)},[]),w.useEffect(()=>{o&&!h&&P()},[o]),w.useEffect(()=>{if(!a||a.length===0)return;const $=a.filter(J=>J.paymentMethod==="cod"&&J.paymentStatus!=="paid"&&(J.orderStatus==="arrived"||J.orderStatus==="in_transit"));if($.length===0)return;const H=async J=>{try{if(!(t!=null&&t.accessToken))return;const oe=await fetch(`http://localhost:5001/api/orders/${J}/payment-status`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});oe.ok&&(await oe.json()).paymentStatus==="paid"&&(T(ge=>({...ge,[J]:!1})),await M(J))}catch(oe){console.error("Payment monitoring error:",oe)}};$.forEach(J=>{if(!E[J._id]){T(ee=>({...ee,[J._id]:!0}));const oe=setInterval(()=>{H(J._id)},3e3);return setTimeout(()=>{clearInterval(oe),T(ee=>({...ee,[J._id]:!1}))},30*60*1e3),()=>clearInterval(oe)}})},[a,t,E]);const M=async $=>{try{if(!(t!=null&&t.accessToken))return;const H=await fetch(`http://localhost:5001/api/delivery/orders/${$}/complete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify({})});if(!H.ok)throw new Error("Failed to auto-complete delivery");const J=await H.json();K.success(`Payment Received  Order Completed Successfully! Earned ${J.earnings||0}`,{duration:4e3,icon:""}),O()}catch(H){console.error("Auto-completion error:",H),K.error("Payment detected but failed to complete delivery automatically")}},P=()=>{const $=Qr("http://localhost:5001",{auth:{token:t==null?void 0:t.accessToken}});$.on("connect",()=>{if(console.log("Socket connected"),o){const H=`driver_${o.id}`;console.log(`[SOCKET] Joining room: ${H}`),$.emit("join_room",{room:H,userId:e==null?void 0:e.id,userRole:"delivery"}),console.log(`[SOCKET] Join room emitted for ${H}`)}else console.warn("[SOCKET] deliveryInfo not available yet")}),$.on("order:assigned",H=>{console.log("[SOCKET] New order assigned:",H),K.success("New order assigned to you!"),O()}),$.on("refresh_orders",()=>{console.log("[SOCKET] Received refresh_orders signal"),O()}),$.on("order:cancelled",H=>{console.log("[SOCKET] Order cancelled:",H),K.error("Order was cancelled"),O()}),$.on("order:statusUpdate",H=>{console.log("[SOCKET] Order status update:",H),O()}),f($)},O=async()=>{var $;try{if(c(!0),m(null),!(t!=null&&t.accessToken))throw new Error("No authentication token available");const H=await fetch("http://localhost:5001/api/delivery/orders",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!H.ok){if(H.status===403||H.status===401){console.log("Authentication failed, redirecting to login"),localStorage.removeItem("auth"),window.location.href="/delivery/login";return}const pe=await H.json();throw new Error(pe.message||"Failed to fetch orders")}const J=await H.json();console.log(`[FETCH_ORDERS] Received ${(($=J.orders)==null?void 0:$.length)||0} orders from API`),l(J.deliveryBoy);const oe=J.orders||[],ee=oe.filter(pe=>pe.orderStatus==="created"),ge=oe.filter(pe=>["assigned","picked_up","in_transit","arrived"].includes(pe.orderStatus));console.log(`[FETCH_ORDERS] Available: ${ee.length}, Active: ${ge.length}`),ge.forEach(pe=>{console.log(`  - Order ${pe._id}: ${pe.orderStatus}/${pe.deliveryStatus}`)}),n(ee),i(ge)}catch(H){console.error("Error fetching orders:",H),m(H instanceof Error?H.message:"Failed to load orders")}finally{c(!1)}},R=async $=>{try{if(!(t!=null&&t.accessToken))throw new Error("No authentication token available");const H=await fetch(`http://localhost:5001/api/delivery/orders/${$}/accept`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!H.ok){const oe=await H.json();throw new Error(oe.message||"Failed to accept order")}const J=await H.json();K.success("Order accepted! OTP: "+J.order.deliveryOtp),O()}catch(H){console.error("Error accepting order:",H),K.error(H instanceof Error?H.message:"Failed to accept order")}},L=async $=>{try{if(!(t!=null&&t.accessToken))throw new Error("No authentication token available");const H=await fetch(`http://localhost:5001/api/delivery/orders/${$}/reject`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify({reason:"Not available"})});if(!H.ok){const J=await H.json();throw new Error(J.message||"Failed to reject order")}K.success("Order rejected"),O()}catch(H){console.error("Error rejecting order:",H),K.error(H instanceof Error?H.message:"Failed to reject order")}},U=async $=>{var H;try{if(!(t!=null&&t.accessToken))throw new Error("No authentication token available");K.loading("Verifying order status...",{id:"pickup-loading"});const J=await fetch("http://localhost:5001/api/delivery/orders",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!J.ok)throw new Error("Failed to fetch order details");const ee=(H=(await J.json()).orders)==null?void 0:H.find(pe=>pe._id===$);if(!ee){K.dismiss("pickup-loading"),K.error("Order not found or not assigned to you"),O();return}if(ee.deliveryStatus!=="assigned"){K.dismiss("pickup-loading"),K.error(`Order is not ready for pickup. Current status: ${ee.deliveryStatus}. Please refresh or wait.`),O();return}if(ee.orderStatus!=="assigned"){K.dismiss("pickup-loading"),K.error(`Order must be assigned before pickup. Current order status: ${ee.orderStatus}`),O();return}K.dismiss("pickup-loading"),K.loading("Marking as picked up...",{id:"pickup-processing"});const ge=await fetch(`http://localhost:5001/api/delivery/orders/${$}/pickup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!ge.ok){const pe=await ge.json();throw K.dismiss("pickup-processing"),new Error(pe.error||"Failed to mark as picked up")}K.dismiss("pickup-processing"),K.success(" Pickup recorded successfully!"),O()}catch(J){console.error("Error picking up order:",J),K.error(J instanceof Error?J.message:"Failed to pick up order")}},D=async $=>{try{if(!(t!=null&&t.accessToken))throw new Error("No authentication token available");const H=await fetch(`http://localhost:5001/api/delivery/orders/${$}/start-delivery`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!H.ok){const J=await H.json();throw new Error(J.error||"Failed to start delivery")}K.success("Delivery started - You're on the way!"),O()}catch(H){console.error("Error starting delivery:",H),K.error(H instanceof Error?H.message:"Failed to start delivery")}},_=async $=>{try{if(!(t!=null&&t.accessToken))throw new Error("No authentication token available");const H=await fetch(`http://localhost:5001/api/delivery/orders/${$}/arrived`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!H.ok){const J=await H.json();throw new Error(J.error||"Failed to mark as arrived")}K.success("Marked as arrived. OTP sent to customer!"),b(J=>({...J,[$]:Date.now()})),g(J=>({...J,[$]:30})),O()}catch(H){console.error("Error marking arrived:",H),K.error(H instanceof Error?H.message:"Failed to mark as arrived")}},I=async $=>{try{const H=a.find(Ne=>Ne._id===$),J=(H==null?void 0:H.paymentMethod)==="cod",oe=p[$];if(!J&&(!oe||oe.length!==4)){K.error("Please enter valid 4-digit OTP");return}if(!(t!=null&&t.accessToken))throw new Error("No authentication token available");const ee=J?{}:{otp:oe},ge=await fetch(`http://localhost:5001/api/delivery/orders/${$}/complete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify(ee)});if(!ge.ok){const Ne=await ge.json();throw new Error(Ne.message||"Failed to complete delivery")}const pe=await ge.json();K.success(`Delivery completed! Earned ${pe.earnings||0}`),y(Ne=>({...Ne,[$]:""})),O()}catch(H){console.error("Error completing delivery:",H),K.error(H instanceof Error?H.message:"Failed to complete delivery")}},q=($,H)=>{if(!$||!H||$===0||H===0||isNaN($)||isNaN(H)){K.error("Address location not available. Please ask user to update address."),console.error(" Cannot navigate: Invalid coordinates",{lat:$,lng:H});return}const J=`https://www.google.com/maps/dir/?api=1&destination=${$},${H}`;window.open(J,"_blank"),K.success("Opening navigation...")},W=$=>{A($),C(!0),K.success("QR code generated for payment collection")},ie=()=>{C(!1),A(null)},se=()=>{O(),K.success("Payment status updated in the system")};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 p-4 pb-24",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-6 shadow-xl mb-6 text-white",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 opacity-90",children:"Today's Progress"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4",children:[s.jsx(js,{className:"h-6 w-6 mb-2"}),s.jsxs("p",{className:"text-2xl font-bold",children:["",(o==null?void 0:o.earnings)||0]}),s.jsx("p",{className:"text-sm opacity-80",children:"Earnings"})]}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4",children:[s.jsx(ze,{className:"h-6 w-6 mb-2"}),s.jsx("p",{className:"text-2xl font-bold",children:a.length}),s.jsx("p",{className:"text-sm opacity-80",children:"Active Orders"})]})]})]}),r.length>0&&s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"New Requests"}),s.jsx("span",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-semibold",children:r.length})]}),s.jsx("div",{className:"space-y-4",children:r.map($=>s.jsxs(B.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"border-2 border-blue-200 rounded-xl p-4 bg-gradient-to-br from-blue-50 to-purple-50",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["Order #",$._id.slice(-6)]}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",$.totalAmount]})]}),s.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-semibold",children:"NEW"})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(De,{className:"h-4 w-4 mr-2 text-blue-600"}),s.jsx("span",{className:"font-medium",children:$.userId.name})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-green-600"}),s.jsx("span",{children:$.userId.phone})]}),s.jsxs("div",{className:"flex items-start text-sm",children:[s.jsx(ut,{className:"h-4 w-4 mr-2 text-red-600 mt-0.5"}),s.jsxs("span",{className:"flex-1",children:[$.address.addressLine,", ",$.address.city]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>R($._id),className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all flex items-center justify-center",children:[s.jsx(Ee,{className:"h-5 w-5 mr-2"}),"Accept"]}),s.jsxs("button",{onClick:()=>L($._id),className:"flex-1 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all flex items-center justify-center",children:[s.jsx(tn,{className:"h-5 w-5 mr-2"}),"Decline"]})]})]},$._id))})]}),a.length>0?s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Active Deliveries"}),s.jsx("div",{className:"space-y-4",children:a.map($=>s.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 bg-gray-50",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-lg",children:["Order #",$._id.slice(-6)]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",$.totalAmount]}),$.paymentStatus==="paid"&&s.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded-full flex items-center",children:[s.jsx(Ee,{className:"h-3 w-3 mr-1"}),"PAID "]})]}),$.paymentMethod==="cod"&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Payment: ",$.paymentMethod.toUpperCase(),$.paymentReceivedAt&&s.jsxs("span",{className:"text-green-600 ml-2",children:[" Received ",new Date($.paymentReceivedAt).toLocaleTimeString()]})]})]}),s.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-semibold ${$.orderStatus==="assigned"?"bg-blue-100 text-blue-800":$.orderStatus==="picked_up"?"bg-purple-100 text-purple-800":$.orderStatus==="in_transit"?"bg-orange-100 text-orange-800":$.orderStatus==="arrived"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:$.orderStatus.replace("_"," ").toUpperCase()})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:`flex-1 h-2 rounded-l-full ${["assigned","picked_up","in_transit","delivered"].includes($.orderStatus)?"bg-blue-600":"bg-gray-300"}`}),s.jsx("div",{className:`flex-1 h-2 ${["picked_up","in_transit","delivered"].includes($.orderStatus)?"bg-purple-600":"bg-gray-300"}`}),s.jsx("div",{className:`flex-1 h-2 rounded-r-full ${["in_transit","delivered"].includes($.orderStatus)?"bg-orange-600":"bg-gray-300"}`})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[s.jsx("span",{className:$.orderStatus==="assigned"?"font-bold text-blue-600":"",children:"Assigned"}),s.jsx("span",{className:$.orderStatus==="picked_up"?"font-bold text-purple-600":"",children:"Picked Up"}),s.jsx("span",{className:$.orderStatus==="in_transit"?"font-bold text-orange-600":"",children:"In Transit"})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(De,{className:"h-4 w-4 mr-2 text-blue-600"}),s.jsx("span",{className:"font-medium",children:$.userId.name})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-green-600"}),s.jsx("a",{href:`tel:${$.userId.phone}`,className:"text-blue-600 underline",children:$.userId.phone})]}),s.jsxs("div",{className:"flex items-start text-sm",children:[s.jsx(ut,{className:"h-4 w-4 mr-2 text-red-600 mt-0.5"}),s.jsxs("span",{className:"flex-1",children:[$.address.addressLine,", ",$.address.city]})]})]}),s.jsxs("button",{onClick:()=>q($.address.lat,$.address.lng),className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold mb-3 flex items-center justify-center hover:bg-blue-700 transition-colors",children:[s.jsx(hh,{className:"h-5 w-5 mr-2"}),"Navigate to Location"]}),s.jsxs("div",{className:"space-y-2",children:[$.orderStatus==="assigned"&&s.jsxs("button",{onClick:()=>U($._id),className:"w-full py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors",children:[s.jsx(W3,{className:"h-5 w-5 inline mr-2"}),"Mark as Picked Up"]}),$.orderStatus==="picked_up"&&s.jsxs("button",{onClick:()=>D($._id),className:"w-full py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 transition-colors",children:[s.jsx(hh,{className:"h-5 w-5 inline mr-2"}),"Start Delivery"]}),$.orderStatus==="in_transit"&&s.jsx(s.Fragment,{children:s.jsxs("button",{onClick:()=>_($._id),className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors mb-2",children:[s.jsx(ut,{className:"h-5 w-5 inline mr-2"}),"Mark as Arrived"]})}),($.orderStatus==="in_transit"||$.orderStatus==="arrived")&&s.jsxs("div",{className:"space-y-2",children:[$.paymentMethod!=="cod"&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"Enter Customer OTP to Complete"}),s.jsx("input",{type:"text",maxLength:4,placeholder:"4-digit OTP",value:p[$._id]||"",onChange:H=>y(J=>({...J,[$._id]:H.target.value.replace(/\D/g,"")})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-center text-2xl font-bold tracking-widest"}),$.orderStatus==="arrived"&&s.jsx("div",{className:"mt-3",children:x[$._id]>0?s.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["Resend OTP available in ",x[$._id]," seconds"]}):s.jsx("button",{onClick:()=>_($._id),className:"w-full py-2 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-semibold",children:"Resend OTP"})})]}),$.paymentMethod==="cod"&&$.paymentStatus==="paid"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Cash on Delivery Order"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Ready to complete - No OTP verification required"})]}),$.paymentMethod==="cod"&&$.paymentStatus!=="paid"&&s.jsx(s.Fragment,{children:s.jsxs("button",{onClick:()=>W($),className:"w-full py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all mb-2",children:[s.jsx(T3,{className:"h-5 w-5 inline mr-2"}),"Generate QR for Payment"]})}),$.paymentMethod==="cod"&&$.paymentStatus==="paid"&&s.jsxs("div",{className:"w-full py-3 bg-green-50 border border-green-200 text-green-800 rounded-lg font-semibold mb-2 flex items-center justify-center",children:[s.jsx(Ee,{className:"h-5 w-5 inline mr-2"}),"Payment Received "]}),s.jsxs("button",{onClick:()=>I($._id),disabled:$.paymentMethod==="cod"&&$.paymentStatus!=="paid"||$.paymentMethod!=="cod"&&(!p[$._id]||p[$._id].length!==4),className:`w-full py-3 rounded-lg font-semibold transition-all ${$.paymentMethod==="cod"&&$.paymentStatus!=="paid"||$.paymentMethod!=="cod"&&(!p[$._id]||p[$._id].length!==4)?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-green-600 text-white hover:shadow-lg"}`,children:[s.jsx(Ee,{className:"h-5 w-5 inline mr-2"}),$.paymentMethod!=="cod"&&(!p[$._id]||p[$._id].length!==4)?"Enter OTP First":"Complete Delivery"]})]})]})]},$._id))})]}):r.length===0?s.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[s.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-fit mx-auto mb-4",children:s.jsx(ze,{className:"h-12 w-12 text-gray-400"})}),s.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Active Orders"}),s.jsx("p",{className:"text-gray-600",children:(o==null?void 0:o.availability)==="available"?"Stay online to receive delivery requests":"Go online to start receiving orders"})]}):null,d&&s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}),u&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center",children:[s.jsx($a,{className:"h-5 w-5 text-red-600 mr-3"}),s.jsx("p",{className:"text-red-800",children:u})]}),S&&s.jsx(zL,{isOpen:k,onClose:ie,orderId:S._id,amount:S.totalAmount,onPaymentConfirmed:se})]})},VL=()=>{const{tokens:e}=de(j=>j.auth),[t,r]=w.useState(null),[n,a]=w.useState([]),[i,o]=w.useState([]),[l,d]=w.useState("today"),[c,u]=w.useState(!1);w.useEffect(()=>{h()},[l]);const m=()=>{const j=new Date;let N;switch(l){case"today":N=new Date(j.setHours(0,0,0,0));break;case"week":N=new Date(j.setDate(j.getDate()-7));break;case"month":N=new Date(j.setMonth(j.getMonth()-1));break;default:N=void 0}return N?N.toISOString():void 0},h=async()=>{try{if(u(!0),!(e!=null&&e.accessToken))throw new Error("No authentication token available");const j=m(),N=j?`/api/delivery/earnings?from=${j}`:"/api/delivery/earnings",v=await fetch(N,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`}});if(!v.ok){const x=await v.json();throw new Error(x.error||"Failed to fetch earnings")}const b=await v.json();r(b.earnings),a(b.orders||[]),f(b.orders||[])}catch(j){console.error("Error fetching earnings:",j),K.error(j.message||"Failed to load earnings")}finally{u(!1)}},f=j=>{const N={};j.forEach(b=>{const x=new Date(b.createdAt).toLocaleDateString();N[x]||(N[x]={amount:0,orders:0}),N[x].amount+=b.deliveryFee+b.tip,N[x].orders+=1});const v=Object.entries(N).map(([b,x])=>({date:b,amount:x.amount,orders:x.orders})).sort((b,x)=>new Date(b.date).getTime()-new Date(x.date).getTime()).slice(-7);o(v)},p=()=>!t||t.completedOrders===0?0:(t.deliveryFees+t.tips)/t.completedOrders,y=Math.max(...i.map(j=>j.amount),1);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 p-4 pb-24",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:s.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:["today","week","month","all"].map(j=>s.jsx("button",{onClick:()=>d(j),className:`px-4 py-2 rounded-lg font-semibold whitespace-nowrap transition-colors ${l===j?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:j.charAt(0).toUpperCase()+j.slice(1)},j))})}),c?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading earnings..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-xl p-6 mb-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Earnings"}),s.jsxs("p",{className:"text-4xl font-bold",children:["",(t==null?void 0:t.total.toLocaleString())||0]})]}),s.jsx("div",{className:"bg-white/20 p-4 rounded-full backdrop-blur-sm",children:s.jsx(js,{className:"h-8 w-8"})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-90",children:[s.jsx(rr,{className:"h-4 w-4"}),s.jsxs("span",{children:[(t==null?void 0:t.completedOrders)||0," deliveries completed"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(ze,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Delivery Fees"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",(t==null?void 0:t.deliveryFees)||0]})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:s.jsx(Ac,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Tips Received"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",(t==null?void 0:t.tips)||0]})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(uo,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Avg per Order"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",p().toFixed(0)]})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:s.jsx(ze,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Orders"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:(t==null?void 0:t.completedOrders)||0})]})]})})]}),i.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(uo,{className:"h-5 w-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Earnings Trend"})]}),s.jsx("div",{className:"space-y-3",children:i.map((j,N)=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:j.date}),s.jsxs("span",{className:"font-semibold text-gray-900",children:["",j.amount.toFixed(0)]})]}),s.jsx("div",{className:"relative h-8 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500 flex items-center justify-end pr-3",style:{width:`${j.amount/y*100}%`},children:s.jsxs("span",{className:"text-xs text-white font-semibold",children:[j.orders," orders"]})})})]},N))})]}),n.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(He,{className:"h-5 w-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Recent Deliveries"})]}),s.jsx("div",{className:"space-y-3",children:n.slice(0,10).map((j,N)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-gray-900",children:["Order #",j._id.slice(-6)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[j.address.city," - ",j.address.pincode]}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(j.createdAt).toLocaleString()})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["",j.deliveryFee+j.tip]}),j.tip>0&&s.jsxs("p",{className:"text-xs text-purple-600",children:["+",j.tip," tip"]})]})]},N))})]}),n.length===0&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[s.jsx(Dn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Earnings Yet"}),s.jsx("p",{className:"text-gray-600",children:"Complete deliveries to start earning"})]})]})]})},qL=()=>{const{tokens:e}=de(d=>d.auth),[t,r]=w.useState([]),[n,a]=w.useState(!0);w.useEffect(()=>{i()},[]);const i=async()=>{try{if(a(!0),!(e!=null&&e.accessToken))throw new Error("No authentication token available");const d=await fetch("/api/delivery/notifications",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`}});if(!d.ok){const u=[{_id:"1",type:"order_assigned",title:"New Order Assigned",message:"You have been assigned Order #12345 for delivery",isRead:!1,createdAt:new Date().toISOString(),orderId:"12345"},{_id:"2",type:"payment_received",title:"Payment Received",message:"150 has been credited to your account for Order #12344",isRead:!0,createdAt:new Date(Date.now()-36e5).toISOString()},{_id:"3",type:"system",title:"System Update",message:"New features have been added to the delivery app",isRead:!0,createdAt:new Date(Date.now()-72e5).toISOString()}];r(u);return}const c=await d.json();r(c.notifications||[])}catch(d){console.error("Error fetching notifications:",d);const c=[{_id:"1",type:"order_assigned",title:"New Order Assigned",message:"You have been assigned Order #12345 for delivery",isRead:!1,createdAt:new Date().toISOString(),orderId:"12345"}];r(c)}finally{a(!1)}},o=d=>{switch(d){case"order_assigned":return s.jsx(ze,{className:"h-5 w-5 text-blue-600"});case"order_completed":return s.jsx(Ee,{className:"h-5 w-5 text-green-600"});case"payment_received":return s.jsx(Dt,{className:"h-5 w-5 text-yellow-600"});case"system":return s.jsx(Da,{className:"h-5 w-5 text-purple-600"});default:return s.jsx(Dt,{className:"h-5 w-5 text-gray-600"})}},l=d=>{r(c=>c.map(u=>u._id===d?{...u,isRead:!0}:u))};return n?s.jsx("div",{className:"p-4 pb-20",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading notifications..."})]})}):s.jsx("div",{className:"p-4 pb-20",children:s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s.jsx(Dt,{className:"h-6 w-6 mr-2 text-blue-600"}),"Notifications"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Stay updated with your delivery assignments and earnings"})]}),s.jsx("div",{className:"divide-y divide-gray-200",children:t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Dt,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600",children:"No notifications yet"})]}):t.map(d=>s.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${d.isRead?"":"bg-blue-50"}`,onClick:()=>l(d._id),children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:o(d.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:`font-medium ${d.isRead?"text-gray-700":"text-gray-900"}`,children:d.title}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[s.jsx(He,{className:"h-3 w-3 mr-1"}),new Date(d.createdAt).toLocaleTimeString()]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.message}),!d.isRead&&s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-block w-2 h-2 bg-blue-600 rounded-full"})})]})]})},d._id))})]})})},HL=()=>{const e=ce(),t=tt(),r=()=>{t(en()),e("/login")},n=[{icon:De,label:"Profile",description:"Manage your personal information and password",action:()=>e("/delivery-profile"),color:"text-blue-600",bgColor:"bg-blue-50"},{icon:js,label:"Ways to Earn",description:"Tips, bonuses, and performance incentives",action:()=>e("/ways-to-earn"),color:"text-green-600",bgColor:"bg-green-50"},{icon:ns,label:"Refer and Earn",description:"Invite new delivery partners and earn rewards",action:()=>e("/refer-and-earn"),color:"text-purple-600",bgColor:"bg-purple-50"},{icon:yr,label:"Help & Support",description:"FAQs, support resources, and contact info",action:()=>e("/help-support"),color:"text-orange-600",bgColor:"bg-orange-50"},{icon:Ec,label:"Message Center",description:"Updates, alerts, and admin messages",action:()=>e("/message-center"),color:"text-indigo-600",bgColor:"bg-indigo-50"},{icon:Ao,label:"Settings",description:"Notification preferences and app settings",action:()=>e("/delivery-settings"),color:"text-gray-600",bgColor:"bg-gray-50"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 p-4 pb-20",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"More"}),s.jsx("p",{className:"text-gray-600",children:"Manage your account and preferences"})]}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg border border-gray-100 mb-6 overflow-hidden",children:s.jsx("div",{className:"divide-y divide-gray-100",children:n.map((a,i)=>s.jsx(B.button,{onClick:a.action,className:"w-full p-4 hover:bg-gray-50 transition-all duration-200 text-left group",whileHover:{x:4},children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${a.bgColor} group-hover:scale-110 transition-transform duration-200`,children:s.jsx(a.icon,{className:`h-6 w-6 ${a.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-gray-900 text-lg",children:a.label}),s.jsx("p",{className:"text-sm text-gray-600",children:a.description})]}),s.jsx(Lr,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600 transition-colors"})]})},i))})}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(ew,{className:"h-5 w-5 mr-2 text-gray-600"}),"App Information"]}),s.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"font-medium",children:"Version"}),s.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded-full text-xs",children:"1.0.0"})]}),s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"font-medium",children:"Last Updated"}),s.jsx("span",{className:"text-gray-500",children:new Date().toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"font-medium",children:"Platform"}),s.jsx("span",{className:"text-gray-500",children:"Web App"})]})]})]}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:s.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center space-x-3 p-4 bg-gradient-to-r from-red-50 to-red-100 hover:from-red-100 hover:to-red-200 text-red-600 rounded-xl transition-all duration-200 font-semibold group",children:[s.jsx(lp,{className:"h-5 w-5 group-hover:scale-110 transition-transform"}),s.jsx("span",{children:"Logout"})]})})]})},Dy=()=>{const e=ce(),{tokens:t,isAuthenticated:r,user:n}=de(h=>h.auth),[a,i]=w.useState(null),[o,l]=w.useState(!0),[d,c]=w.useState("home");w.useEffect(()=>{if(!r||(n==null?void 0:n.role)!=="delivery"){e("/login");return}u()},[r,n,e]);const u=async()=>{try{if(l(!0),!(t!=null&&t.accessToken))throw new Error("No authentication token available");const h=await fetch("http://localhost:5001/api/delivery/orders",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`}});if(!h.ok){if(h.status===403||h.status===401){console.log("Authentication failed, redirecting to login"),localStorage.removeItem("auth"),window.location.href="/login";return}const p=await h.json();throw new Error(p.message||"Failed to fetch delivery info")}const f=await h.json();i(f.deliveryBoy)}catch(h){console.error("Error fetching delivery boy info:",h)}finally{l(!1)}},m=()=>{switch(d){case"home":return s.jsx(_y,{});case"earnings":return s.jsx(VL,{});case"notifications":return s.jsx(qL,{});case"more":return s.jsx(HL,{});default:return s.jsx(_y,{})}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(RL,{}),m(),s.jsx(OL,{activeTab:d,setActiveTab:c})]})},WL=()=>{const e=ce(),[t,r]=w.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",vehicleType:"bike"}),[n,a]=w.useState(!1),i=l=>{r({...t,[l.target.name]:l.target.value})},o=async l=>{if(l.preventDefault(),t.password!==t.confirmPassword){K.error("Passwords do not match");return}if(t.password.length<6){K.error("Password must be at least 6 characters");return}if(!/^[6-9]\d{9}$/.test(t.phone)){K.error("Please enter a valid 10-digit phone number");return}a(!0);try{const d=await fetch("/api/delivery/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,phone:t.phone,password:t.password,vehicleType:t.vehicleType})}),c=await d.json();if(!d.ok)throw new Error(c.error||"Signup failed");K.success("Account submitted for approval! Admin will activate your account soon."),setTimeout(()=>{e("/delivery/login")},2e3)}catch(d){console.error("Signup error:",d),K.error(d.message||"Failed to create account")}finally{a(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-blue-600 p-3 rounded-full",children:s.jsx(ze,{className:"w-8 h-8 text-white"})})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Join as Delivery Partner"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Start earning by delivering orders"})]}),s.jsxs("form",{onSubmit:o,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(De,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",name:"name",value:t.name,onChange:i,required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"email",name:"email",value:t.email,onChange:i,required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your@email.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:i,required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10-digit mobile number",maxLength:10})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Type"}),s.jsxs("select",{name:"vehicleType",value:t.vehicleType,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"bike",children:"Bike"}),s.jsx("option",{value:"scooter",children:"Scooter"}),s.jsx("option",{value:"car",children:"Car"}),s.jsx("option",{value:"cycle",children:"Bicycle"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"password",name:"password",value:t.password,onChange:i,required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"At least 6 characters",minLength:6})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:i,required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm your password"})]})]}),s.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed mt-2 relative z-10",children:n?"Creating Account...":"Sign Up as Delivery Partner"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",s.jsx("button",{onClick:()=>e("/delivery/login"),className:"text-blue-600 font-semibold hover:underline",children:"Login here"})]})}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("strong",{children:"Note:"})," Your account will be reviewed by our admin team. You'll be notified once approved to start delivering."]})})]})})},QL=()=>{const e=ce(),t=tt(),[r,n]=w.useState({email:"",password:""}),[a,i]=w.useState(!1),[o,l]=w.useState(""),d=u=>{n({...r,[u.target.name]:u.target.value}),l("")},c=async u=>{u.preventDefault(),i(!0),l("");try{const m=await fetch("/api/delivery/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),h=await m.json();if(!m.ok){h.status==="pending"?l("Your account is awaiting admin approval. You'll be notified once approved."):h.status==="suspended"?l("Your account has been suspended. Please contact support."):l(h.error||"Login failed");return}t(Ks(h.user)),t(Vn(h.tokens)),K.success("Login successful!"),e("/delivery/dashboard")}catch(m){console.error("Login error:",m),l(m.message||"Failed to login. Please try again.")}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-blue-600 p-3 rounded-full",children:s.jsx(ze,{className:"w-8 h-8 text-white"})})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Delivery Partner Login"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to start delivering"})]}),o&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start",children:[s.jsx(Da,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-800",children:o})]}),s.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"email",name:"email",value:r.email,onChange:d,required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your@email.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"password",name:"password",value:r.password,onChange:d,required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password"})]})]}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",children:a?"Logging in...":"Login"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["New to delivery?"," ",s.jsx("button",{onClick:()=>e("/delivery/signup"),className:"text-blue-600 font-semibold hover:underline",children:"Sign up here"})]})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Not a delivery partner?"," ",s.jsx("button",{onClick:()=>e("/login"),className:"text-gray-700 font-semibold hover:underline",children:"Customer Login"})]})})]})})},KL=()=>{var zt;const e=ce(),t=tt(),{user:r,tokens:n}=de(z=>z.auth),[a]=qj(),[i,o]=w.useState(null),[l,d]=w.useState(!0),[c,u]=w.useState(null),[m,h]=w.useState(!1),[f,p]=w.useState(null),[y,j]=w.useState(null),[N,v]=w.useState(null),[b,x]=w.useState({phone:"",joiningDate:"",city:"",zone:""}),[g,k]=w.useState(!1),[C,S]=w.useState(!1),[A,E]=w.useState(""),[T,M]=w.useState(null),[P,O]=w.useState(!1),[R,L]=w.useState(!1),[U,D]=w.useState("English"),[_,I]=w.useState("English"),[q,W]=w.useState(!1),[ie,se]=w.useState("app"),[$,H]=w.useState(!1),J=[{code:"en",name:"English",flag:""},{code:"hi",name:"Hindi",flag:""},{code:"es",name:"Spanish",flag:""},{code:"fr",name:"French",flag:""},{code:"de",name:"German",flag:""},{code:"it",name:"Italian",flag:""},{code:"pt",name:"Portuguese",flag:""},{code:"ru",name:"Russian",flag:""},{code:"ja",name:"Japanese",flag:""},{code:"ko",name:"Korean",flag:""},{code:"zh",name:"Chinese",flag:""},{code:"ar",name:"Arabic",flag:""}],oe=async()=>{try{if(!(n!=null&&n.refreshToken))return console.error("No refresh token available"),null;console.log("Attempting to refresh token...");const z=await a(n.refreshToken).unwrap();return z.accessToken?(console.log("Token refreshed successfully"),t(Ks(r)),t(Vn({accessToken:z.accessToken,refreshToken:z.refreshToken||n.refreshToken})),z.accessToken):null}catch(z){return console.error("Token refresh failed:",z),t(en()),e("/login"),null}},ee=async(z,G={})=>{let Z=n==null?void 0:n.accessToken;if(!Z)throw new Error("No access token available");let te=await fetch(z,{...G,headers:{...G.headers,Authorization:`Bearer ${Z}`}});if(te.status===403){console.log("Received 403, attempting token refresh...");const he=await oe();if(he)te=await fetch(z,{...G,headers:{...G.headers,Authorization:`Bearer ${he}`}});else throw new Error("Token refresh failed")}return te},ge={id:"1",name:"JOHN DOE",email:"john.doe@example.com",phone:"+91 98765 43210",role:"delivery",createdAt:"2024-01-15",updatedAt:"2024-01-15",city:"Mumbai",zone:"Zone A",orderCategory:"Food & Grocery",rating:4.8,deId:"DE123456"};w.useEffect(()=>{if(console.log("DeliveryProfilePage useEffect - user:",r),console.log("DeliveryProfilePage useEffect - tokens:",n),!r||r.role!=="delivery"){console.log("User not authenticated or not delivery role, redirecting to login"),e("/login");return}if(!(n!=null&&n.accessToken)){console.log("No access token found, using mock data"),o(ge),d(!1);return}pe(),Ne()},[r,e,n]);const pe=async()=>{try{if(d(!0),j(null),!(n!=null&&n.accessToken)){console.log("No access token for profile fetch, using mock data"),o(ge);return}console.log("Fetching profile with token:",n.accessToken.substring(0,20)+"...");const z=await ee("/api/delivery/profile",{headers:{"Content-Type":"application/json"}});if(console.log("Profile response status:",z.status),!z.ok){let te=`Server error: ${z.status}`;try{const he=await z.text();if(he){const ve=JSON.parse(he);te=ve.message||ve.error||te}}catch(he){console.warn("Could not parse error response:",he)}console.error("Profile fetch failed:",te),j(`Failed to load profile: ${te}`),o(ge);return}const G=z.headers.get("content-type");if(!G||!G.includes("application/json")){console.warn("Profile response is not JSON, content-type:",G),j("Invalid response format from server"),o(ge);return}const Z=await z.json();console.log("Profile data:",Z),o(Z),Z.appLanguage&&D(Z.appLanguage),Z.preferredLanguage&&I(Z.preferredLanguage)}catch(z){console.error("Error fetching profile:",z),j(`Failed to load profile: ${z instanceof Error?z.message:"Unknown error"}`),o(ge)}finally{d(!1)}},Ne=async()=>{try{if(!(n!=null&&n.accessToken)){console.log("No access token for selfie URL fetch");return}console.log("Fetching selfie URL with token:",n.accessToken.substring(0,20)+"...");const z=await ee("/api/delivery/selfie-url",{headers:{"Content-Type":"application/json"}});if(console.log("Selfie URL response status:",z.status),!z.ok){let te=`Server error: ${z.status}`;try{const he=await z.text();if(he){const ve=JSON.parse(he);te=ve.message||ve.error||te}}catch(he){console.warn("Could not parse error response for selfie URL:",he)}console.error(`Selfie URL fetch failed: ${te}`);return}const G=z.headers.get("content-type");if(!G||!G.includes("application/json")){console.warn("Selfie URL response is not JSON, content-type:",G);return}const Z=await z.json();console.log("Selfie URL data:",Z),u(Z.selfieUrl)}catch(z){console.error("Error fetching selfie URL:",z)}},We=(z,G)=>{v(z),x(Z=>({...Z,[z]:G}))},Tt=()=>{v(null),x({phone:"",joiningDate:"",city:"",zone:""})},Ot=async z=>{if(n!=null&&n.accessToken){k(!0);try{const G={};switch(z){case"phone":G.mobile=b.phone.replace(/\D/g,"");break;case"joiningDate":G.joiningDate=b.joiningDate;break;case"city":G.city=b.city;break;case"zone":G.zone=b.zone;break}const Z=await ee("/api/delivery/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!Z.ok){let te=`Server error: ${Z.status}`;try{const he=await Z.text();if(he){const ve=JSON.parse(he);te=ve.message||ve.error||te}}catch(he){console.warn("Could not parse error response:",he)}throw new Error(te)}o(te=>te?{...te,[z==="phone"?"phone":z]:b[z],[z==="joiningDate"?"createdAt":z]:b[z]}:null),v(null),x({phone:"",joiningDate:"",city:"",zone:""})}catch(G){console.error("Update error:",G),alert(G instanceof Error?G.message:"Update failed")}finally{k(!1)}}},F=z=>{z==="App Language"?(se("app"),W(!0)):z==="Preferred Language"?(se("preferred"),W(!0)):alert(`${z} feature coming soon!`)},X=()=>{W(!1)},le=async z=>{if(!(n!=null&&n.accessToken)){alert("Please log in to update language preferences");return}H(!0);try{const G={[ie==="app"?"appLanguage":"preferredLanguage"]:z},Z=await ee("/api/delivery/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!Z.ok){let he=`Server error: ${Z.status}`;try{const ve=await Z.text();if(ve){const Rt=JSON.parse(ve);he=Rt.message||Rt.error||he}}catch(ve){console.warn("Could not parse error response:",ve)}throw new Error(he)}const te=Z.headers.get("content-type");(!te||!te.includes("application/json"))&&console.warn("Language update response is not JSON, content-type:",te),ie==="app"?D(z):I(z),alert(`${ie==="app"?"App":"Preferred"} language updated to ${z}!`),X()}catch(G){console.error("Language update error:",G),alert(`Failed to update language: ${G instanceof Error?G.message:"Unknown error"}`)}finally{H(!1)}},xe=()=>{E((i==null?void 0:i.name)||"JOHN DOE"),M(c),S(!0)},ke=()=>{S(!1),E(""),M(null)},Re=async z=>{var he;const G=(he=z.target.files)==null?void 0:he[0];if(!G)return;if(G.size>5*1024*1024){alert("File size must be less than 5MB");return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(G.type)){alert("Please upload a valid image file (JPEG, JPG, PNG, WEBP)");return}const te=new FileReader;te.onload=ve=>{var Rt;M((Rt=ve.target)==null?void 0:Rt.result)},te.readAsDataURL(G)},Ie=async()=>{var G;if(!(n!=null&&n.accessToken)){alert("Please log in to update your profile");return}L(!0);const z=[];try{if(A!==(i==null?void 0:i.name)){console.log("Updating profile name...");try{const Z=await ee("/api/delivery/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:A})});if(!Z.ok){let te=`Server error: ${Z.status}`;try{const he=await Z.text();if(he){const ve=JSON.parse(he);te=ve.message||ve.error||te}}catch(he){console.warn("Could not parse error response:",he)}throw new Error(te)}o(te=>te?{...te,name:A}:null),console.log(" Profile name updated successfully")}catch(Z){console.error(" Failed to update profile name:",Z),z.push(`Name update failed: ${Z instanceof Error?Z.message:"Unknown error"}`)}}if(T&&T!==c){const Z=document.getElementById("modal-selfie-upload"),te=(G=Z==null?void 0:Z.files)==null?void 0:G[0];if(te)if(console.log("Uploading selfie file:",te.name,"Size:",te.size),te.size>5*1024*1024)z.push("Selfie file size must be less than 5MB");else try{const he=new FormData;he.append("selfie",te),console.log("Sending selfie upload request...");const ve=await ee("/api/delivery/update-selfie",{method:"PUT",body:he});if(console.log("Selfie upload response status:",ve.status),!ve.ok){let $e=`Server error: ${ve.status}`;try{const Js=await ve.text();if(Js){const Kn=JSON.parse(Js);$e=Kn.message||Kn.error||$e}}catch(Js){console.warn("Could not parse error response:",Js)}throw new Error($e)}const Rt=await ve.json();console.log(" Selfie uploaded successfully:",Rt),u(Rt.selfieUrl)}catch(he){console.error(" Failed to upload selfie:",he),z.push(`Selfie upload failed: ${he instanceof Error?he.message:"Unknown error"}`)}}z.length===0?(alert("Profile updated successfully!"),ke()):z.length===1&&A===(i==null?void 0:i.name)?(alert(`Profile updated with warnings:
${z.join(`
`)}`),ke()):alert(`Profile update failed:
${z.join(`
`)}`)}catch(Z){console.error(" Unexpected error updating profile:",Z),alert(`Failed to update profile: ${Z instanceof Error?Z.message:"Unknown error"}`)}finally{L(!1)}};return l?s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):y?s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx($a,{className:"h-8 w-8 text-red-600"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Profile"}),s.jsx("p",{className:"text-gray-600 mb-4",children:y}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>{j(null),pe()},className:"w-full px-4 py-2 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors",children:"Try Again"}),s.jsx("button",{onClick:()=>e("/delivery"),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors",children:"Back to Dashboard"})]})]})}):s.jsxs("div",{className:"min-h-screen bg-white",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>e("/delivery"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-2",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Profile"})]})})}),s.jsxs("div",{className:"px-3 py-4",children:[s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-3 mb-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center flex-shrink-0 cursor-pointer hover:from-orange-500 hover:to-orange-700 transition-all duration-200",onClick:xe,children:c?s.jsx("img",{src:c,alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}):s.jsx("span",{className:"text-xl font-bold text-white",children:((zt=i==null?void 0:i.name)==null?void 0:zt.charAt(0))||"J"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Your ratings  "}),s.jsx(ct,{className:"h-3 w-3 text-yellow-400 ml-1"}),s.jsx("span",{className:"text-xs font-medium text-gray-900 ml-1",children:(i==null?void 0:i.rating)||"4.8"})]}),s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:(i==null?void 0:i.name)||"JOHN DOE"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["DE ID: ",(i==null?void 0:i.deId)||"DE123456"]})]})]})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"border-b border-gray-100 pb-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Mobile Number"}),N==="phone"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"tel",value:b.phone,onChange:z=>x(G=>({...G,phone:z.target.value})),className:"text-sm font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-full",placeholder:"Enter mobile number"}),s.jsx("button",{onClick:()=>Ot("phone"),disabled:g,className:"text-green-600 hover:text-green-700 disabled:opacity-50",children:g?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):s.jsx(Es,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Tt(),className:"text-red-600 hover:text-red-700",children:s.jsx(pt,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:(i==null?void 0:i.phone)||"+91 98765 43210"}),s.jsx("button",{onClick:()=>We("phone",(i==null?void 0:i.phone)||"+91 98765 43210"),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ol,{className:"h-3 w-3"})})]})]})})}),s.jsx("div",{className:"border-b border-gray-100 pb-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Joining Date"}),N==="joiningDate"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"date",value:b.joiningDate,onChange:z=>x(G=>({...G,joiningDate:z.target.value})),className:"text-sm font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-full"}),s.jsx("button",{onClick:()=>Ot("joiningDate"),disabled:g,className:"text-green-600 hover:text-green-700 disabled:opacity-50",children:g?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):s.jsx(Es,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Tt(),className:"text-red-600 hover:text-red-700",children:s.jsx(pt,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:i!=null&&i.createdAt?new Date(i.createdAt).toLocaleDateString("en-GB"):"15/01/2024"}),s.jsx("button",{onClick:()=>We("joiningDate",i!=null&&i.createdAt?new Date(i.createdAt).toISOString().split("T")[0]:"2024-01-15"),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ol,{className:"h-3 w-3"})})]})]})})}),s.jsx("div",{className:"pb-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Order Category"}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Food & Grocery"})})]})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"border-b border-gray-100 pb-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"City"}),N==="city"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:b.city,onChange:z=>x(G=>({...G,city:z.target.value})),className:"text-sm font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-full",placeholder:"Enter city"}),s.jsx("button",{onClick:()=>Ot("city"),disabled:g,className:"text-green-600 hover:text-green-700 disabled:opacity-50",children:g?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):s.jsx(Es,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Tt(),className:"text-red-600 hover:text-red-700",children:s.jsx(pt,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:(i==null?void 0:i.city)||"Mumbai"}),s.jsx("button",{onClick:()=>We("city",(i==null?void 0:i.city)||"Mumbai"),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ol,{className:"h-3 w-3"})})]})]})})}),s.jsx("div",{className:"border-b border-gray-100 pb-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Zone"}),N==="zone"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:b.zone,onChange:z=>x(G=>({...G,zone:z.target.value})),className:"text-sm font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-full",placeholder:"Enter zone"}),s.jsx("button",{onClick:()=>Ot("zone"),disabled:g,className:"text-green-600 hover:text-green-700 disabled:opacity-50",children:g?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):s.jsx(Es,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Tt(),className:"text-red-600 hover:text-red-700",children:s.jsx(pt,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:(i==null?void 0:i.zone)||"Zone A"}),s.jsx("button",{onClick:()=>We("zone",(i==null?void 0:i.zone)||"Zone A"),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ol,{className:"h-3 w-3"})})]})]})})})]})]})}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-0.5",children:[s.jsxs("button",{onClick:()=>F("Emergency Details"),className:"w-full bg-white rounded-xl shadow-sm border border-gray-100 p-2.5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-1.5 bg-red-100 rounded-lg mr-3",children:s.jsx($a,{className:"h-4 w-4 text-red-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Emergency details"})]}),s.jsx(Lr,{className:"h-4 w-4 text-gray-400"})]}),s.jsxs("button",{onClick:()=>F("Bank Details"),className:"w-full bg-white rounded-xl shadow-sm border border-gray-100 p-2.5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg mr-3",children:s.jsx(ys,{className:"h-4 w-4 text-blue-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Bank details"})]}),s.jsx(Lr,{className:"h-4 w-4 text-gray-400"})]}),s.jsxs("button",{onClick:()=>F("App Language"),className:"w-full bg-white rounded-xl shadow-sm border border-gray-100 p-2.5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg mr-3",children:s.jsx(cp,{className:"h-4 w-4 text-purple-600"})}),s.jsxs("div",{className:"flex items-center justify-between flex-1",children:[s.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"App language"}),s.jsx("span",{className:"text-xs text-gray-500",children:U})]})]}),s.jsx(Lr,{className:"h-4 w-4 text-gray-400"})]}),s.jsxs("button",{onClick:()=>F("Preferred Language"),className:"w-full bg-white rounded-xl shadow-sm border border-gray-100 p-2.5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg mr-3",children:s.jsx(tw,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{className:"flex items-center justify-between flex-1",children:[s.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Preferred Language"}),s.jsx("span",{className:"text-xs text-gray-500",children:_})]})]}),s.jsx(Lr,{className:"h-4 w-4 text-gray-400"})]})]})]}),C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs(B.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Profile"}),s.jsx("button",{onClick:ke,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(pt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Selfie"}),s.jsxs("div",{className:"text-center",children:[T?s.jsx("div",{className:"relative inline-block",children:s.jsx("img",{src:T,alt:"Profile preview",className:"w-24 h-24 object-cover rounded-full border-2 border-gray-200"})}):s.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:s.jsx(co,{className:"h-8 w-8 text-gray-400"})}),s.jsx("p",{className:"text-sm text-gray-500 mt-2 mb-3",children:T?"Selfie uploaded":"No selfie uploaded yet"}),s.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors cursor-pointer font-semibold",children:[s.jsx(co,{className:"h-4 w-4 mr-2"}),T?"Change Selfie":"Upload Selfie",s.jsx("input",{id:"modal-selfie-upload",type:"file",accept:"image/*",onChange:Re,className:"hidden"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),s.jsx("input",{type:"text",value:A,onChange:z=>E(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your name"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:ke,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{onClick:Ie,disabled:R,className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:R?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Changes"})]})]})}),q&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs(B.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select ",ie==="app"?"App":"Preferred"," Language"]}),s.jsx("button",{onClick:X,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(pt,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto p-4",children:s.jsx("div",{className:"space-y-2",children:J.map(z=>s.jsxs("button",{onClick:()=>le(z.name),disabled:$,className:`w-full flex items-center justify-between p-3 rounded-xl border transition-colors ${(ie==="app"?U:_)===z.name?"bg-blue-50 border-blue-200 text-blue-900":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900"} ${$?"opacity-50 cursor-not-allowed":""}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:z.flag}),s.jsx("span",{className:"font-medium",children:z.name})]}),(ie==="app"?U:_)===z.name&&s.jsx(Ee,{className:"h-5 w-5 text-blue-600"})]},z.code))})}),s.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200",children:s.jsx("button",{onClick:X,disabled:$,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors font-semibold disabled:opacity-50",children:"Cancel"})})]})})]})},GL=()=>{const e=ce(),{user:t,tokens:r}=de(A=>A.auth),[n,a]=w.useState(!1),[i,o]=w.useState(null),[l,d]=w.useState(!1),[c,u]=w.useState(null),[m,h]=w.useState(!1),[f,p]=w.useState(null),y=w.useRef(null),j=w.useRef(null),N=w.useRef(null),v=w.useRef(null);w.useEffect(()=>{if(!t||t.role!=="delivery"){e("/login");return}},[t,e]);const b=async()=>{try{p(null);const A=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});j.current&&(j.current.srcObject=A,v.current=A,h(!0))}catch(A){console.error("Camera error:",A),p("Camera access denied. Please use file upload instead.")}},x=()=>{v.current&&(v.current.getTracks().forEach(A=>A.stop()),v.current=null),h(!1)},g=()=>{if(j.current&&N.current){const A=N.current,E=j.current,T=A.getContext("2d");if(T){A.width=E.videoWidth,A.height=E.videoHeight,T.drawImage(E,0,0);const M=A.toDataURL("image/jpeg",.8);u(M),x()}}},k=A=>{var T;const E=(T=A.target.files)==null?void 0:T[0];if(E){if(E.size>5*1024*1024){o("File size must be less than 5MB");return}const M=new FileReader;M.onload=P=>{var O;u((O=P.target)==null?void 0:O.result)},M.readAsDataURL(E)}},C=async()=>{if(!c){o("Please capture or select a selfie first");return}try{a(!0),o(null);const E=await(await fetch(c)).blob(),T=new FormData;T.append("selfie",E,"selfie.jpg");const M=await fetch("/api/delivery/upload-selfie",{method:"POST",headers:{Authorization:`Bearer ${r==null?void 0:r.accessToken}`},body:T});if(!M.ok){const P=await M.json();throw new Error(P.message||"Upload failed")}d(!0),setTimeout(()=>{e("/delivery")},2e3)}catch(A){console.error("Upload error:",A),o(A instanceof Error?A.message:"Upload failed")}finally{a(!1)}},S=()=>{u(null),o(null),d(!1)};return l?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 flex items-center justify-center p-4",children:s.jsxs(B.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-xl p-8 text-center max-w-md w-full",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Es,{className:"h-8 w-8 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Selfie Uploaded!"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Your selfie has been successfully uploaded. Redirecting to dashboard..."}),s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600 mx-auto"})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Selfie Verification"}),s.jsx("p",{className:"text-gray-600",children:"Please capture or upload a clear selfie for verification"})]}),m&&s.jsxs(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("video",{ref:j,autoPlay:!0,playsInline:!0,className:"w-full h-64 object-cover rounded-xl"}),s.jsx("canvas",{ref:N,className:"hidden"}),s.jsx("button",{onClick:x,className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:s.jsx(pt,{className:"h-4 w-4"})})]}),s.jsxs("button",{onClick:g,className:"w-full mt-4 flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-semibold",children:[s.jsx(co,{className:"h-5 w-5 mr-2"}),"Capture Photo"]})]}),c&&!m&&s.jsxs(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:[s.jsx("div",{className:"relative",children:s.jsx("img",{src:c,alt:"Selfie preview",className:"w-full h-64 object-cover rounded-xl"})}),s.jsxs("div",{className:"flex space-x-3 mt-4",children:[s.jsxs("button",{onClick:S,className:"flex-1 flex items-center justify-center px-4 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors font-semibold",children:[s.jsx(pt,{className:"h-5 w-5 mr-2"}),"Retake"]}),s.jsxs("button",{onClick:C,disabled:n,className:"flex-1 flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors font-semibold disabled:opacity-50",children:[n?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):s.jsx(Es,{className:"h-5 w-5 mr-2"}),n?"Uploading...":"Upload Selfie"]})]})]}),!c&&!m&&s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[s.jsxs("button",{onClick:b,className:"w-full flex items-center justify-center px-4 py-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-semibold text-lg",children:[s.jsx(co,{className:"h-6 w-6 mr-3"}),"Open Camera"]}),s.jsxs("button",{onClick:()=>{var A;return(A=y.current)==null?void 0:A.click()},className:"w-full flex items-center justify-center px-4 py-4 bg-gray-600 text-white rounded-xl hover:bg-gray-700 transition-colors font-semibold text-lg",children:[s.jsx(iA,{className:"h-6 w-6 mr-3"}),"Upload from Gallery"]}),s.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:k,className:"hidden"})]}),(i||f)&&s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Da,{className:"h-5 w-5 text-red-600 mr-3"}),s.jsx("p",{className:"text-red-800",children:i||f})]})}),!c&&!m&&s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg p-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Instructions:"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 mr-3 flex-shrink-0"}),"Ensure good lighting and clear visibility of your face"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 mr-3 flex-shrink-0"}),"Look directly at the camera with a neutral expression"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 mr-3 flex-shrink-0"}),"Make sure your entire face is visible in the frame"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 mr-3 flex-shrink-0"}),"File size should be less than 5MB"]})]})]})]})})},YL=()=>{const e=ce(),t=r=>{const n={helpline:"9391795162",police:"100",ambulance:"108"},a={helpline:"CS Store Helpline",police:"Police",ambulance:"Ambulance"};navigator.userAgent.includes("Mobile")?window.location.href=`tel:${n[r]}`:alert(`Calling ${a[r]}: ${n[r]}`)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e("/delivery"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Back to Dashboard",children:[s.jsx(Ce,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(yr,{className:"h-6 w-6 text-blue-600"}),s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Emergency Assistance"})]}),s.jsx("div",{className:"w-20"})," "]})}),s.jsxs("div",{className:"p-6 pb-20",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg p-8 mb-6 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"p-4 bg-blue-50 rounded-full w-fit mx-auto mb-6",children:s.jsx(yr,{className:"h-12 w-12 text-blue-600"})}),s.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-4",children:"Emergency Assistance"}),s.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"If you're facing an emergency or need urgent help, please contact support immediately."})]}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("button",{onClick:()=>t("helpline"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-8 rounded-xl transition-colors duration-200 shadow-lg hover:shadow-xl flex items-center justify-center mx-auto space-x-3","aria-label":"Call Support Now",children:[s.jsx(mt,{className:"h-6 w-6"}),s.jsx("span",{className:"text-lg",children:"Call Support Now"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"9391795162  24/7 Available"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 text-center",children:"Other Emergency Contacts"}),s.jsxs("button",{onClick:()=>t("police"),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-gray-600 rounded-lg mr-3",children:s.jsx(Xt,{className:"h-5 w-5 text-white"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Police Emergency"}),s.jsx("span",{className:"text-sm text-gray-600 block",children:"Immediate Police Assistance"})]})]}),s.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"100"})]}),s.jsxs("button",{onClick:()=>t("ambulance"),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-gray-600 rounded-lg mr-3",children:s.jsx(mt,{className:"h-5 w-5 text-white"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Medical Emergency"}),s.jsx("span",{className:"text-sm text-gray-600 block",children:"Ambulance Service"})]})]}),s.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"108"})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-lg p-6 max-w-2xl mx-auto",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(He,{className:"h-5 w-5 mr-2 text-blue-600"}),"Important Information"]}),s.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Stay Calm:"})," In case of emergency, try to remain calm and assess the situation carefully."]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," Make sure you know your current location to provide accurate information to emergency services."]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Safety First:"})," Your safety is our top priority. Do not take unnecessary risks."]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Report:"})," Always report any incidents to CS Store support for proper documentation and follow-up."]})]})]})]})]})]})},JL=()=>{const e=ce(),t=[{id:"order-earning",title:"Order Earning Issue",description:"Problems with order payments and earnings",icon:js,color:"bg-green-50 text-green-600",hoverColor:"hover:bg-green-100"},{id:"daily-incentive",title:"Daily Incentive Issue",description:"Issues with daily bonuses and incentives",icon:Dn,color:"bg-blue-50 text-blue-600",hoverColor:"hover:bg-blue-100"},{id:"incentives-payout",title:"Incentives & Payout Issue",description:"Problems with incentives and payment processing",icon:ys,color:"bg-purple-50 text-purple-600",hoverColor:"hover:bg-purple-100"},{id:"leave-cs-store",title:"I Want to Leave CS Store",description:"Information about leaving the delivery partner program",icon:lp,color:"bg-red-50 text-red-600",hoverColor:"hover:bg-red-100"}],r=n=>{const a=t.find(i=>i.id===n);alert(`Opening ${a==null?void 0:a.title} form. This feature will be available soon!`)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e("/delivery"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Back to Dashboard",children:[s.jsx(Ce,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(yr,{className:"h-6 w-6 text-blue-600"}),s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Help Center"})]}),s.jsx("div",{className:"w-20"})," "]})}),s.jsx("div",{className:"p-6 pb-20",children:s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Delivery Partner Help Center"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Get help with your delivery partner account and resolve issues quickly"})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-lg p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"p-4 bg-blue-50 rounded-full w-fit mx-auto mb-4",children:s.jsx(yr,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Raise a New Issue"}),s.jsx("p",{className:"text-gray-600",children:"Select the type of issue you're experiencing to get the right help"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((n,a)=>{const i=n.icon;return s.jsx(B.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+a*.1},onClick:()=>r(n.id),className:`p-6 rounded-xl border-2 border-gray-100 ${n.hoverColor} transition-all duration-200 text-left group hover:shadow-lg hover:border-gray-200`,children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${n.color} group-hover:scale-110 transition-transform duration-200`,children:s.jsx(i,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-gray-700",children:n.title}),s.jsx("p",{className:"text-sm text-gray-600 group-hover:text-gray-500",children:n.description})]})]})},n.id)})})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-8 bg-white rounded-2xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 text-center",children:"Need Immediate Help?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Emergency Support"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"For urgent safety or emergency issues"}),s.jsx("button",{onClick:()=>e("/delivery/emergency"),className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Go to Emergency Page"})]}),s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Contact Support"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Call our support team directly"}),s.jsx("a",{href:"tel:9391795162",className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"+91 9391795162"})]})]})]})]})})]})},XL=()=>{const e=ce(),t=[{icon:js,title:"Base Delivery Fee",description:"Earn 25-50 per delivery based on distance",amount:"25-50",color:"text-green-600",bgColor:"bg-green-50"},{icon:ct,title:"Peak Hours Bonus",description:"Extra 15 during rush hours (6-9 PM)",amount:"+15",color:"text-orange-600",bgColor:"bg-orange-50"},{icon:rr,title:"Performance Bonus",description:"100 bonus for 95%+ on-time delivery rate",amount:"+100",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:mo,title:"Customer Tips",description:"Keep 100% of customer tips",amount:"100%",color:"text-purple-600",bgColor:"bg-purple-50"},{icon:He,title:"Weekend Bonus",description:"Extra 20 per delivery on weekends",amount:"+20",color:"text-indigo-600",bgColor:"bg-indigo-50"},{icon:fh,title:"Monthly Target",description:"500 bonus for 100+ deliveries per month",amount:"+500",color:"text-red-600",bgColor:"bg-red-50"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Ways to Earn"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Maximize your delivery earnings"})]})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[s.jsx("div",{className:"space-y-4",children:t.map((r,n)=>s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${r.bgColor}`,children:s.jsx(r.icon,{className:`h-6 w-6 ${r.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.title}),s.jsx("span",{className:`text-lg font-bold ${r.color}`,children:r.amount})]}),s.jsx("p",{className:"text-gray-600",children:r.description})]})]})},n))}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(fh,{className:"h-5 w-5 mr-2 text-blue-600"}),"Pro Tips to Maximize Earnings"]}),s.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Stay online during peak hours (6-9 PM) for bonus pay"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Maintain high customer ratings to get priority orders"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Work weekends for additional bonus opportunities"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Complete deliveries quickly to increase daily volume"})]})]})]})]})]})},ZL=()=>{const e=ce(),[t,r]=w.useState(!1),n="DELIVER2024",a=`https://csstore.com/refer/${n}`,i=()=>{navigator.clipboard.writeText(n),r(!0),setTimeout(()=>r(!1),2e3)},o=()=>{navigator.clipboard.writeText(a),r(!0),setTimeout(()=>r(!1),2e3)},l=()=>{navigator.share?navigator.share({title:"Join CS Store as a Delivery Partner",text:"Earn money by delivering orders! Use my referral code: DELIVER2024",url:a}):o()},d=[{icon:mo,title:"Referral Bonus",description:"Get 200 when your referral completes their first 10 deliveries",amount:"200",color:"text-green-600",bgColor:"bg-green-50"},{icon:ct,title:"Performance Bonus",description:"Earn 50 for each active referral who maintains 90%+ rating",amount:"50/month",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:ns,title:"Team Leader",description:"Become a team leader with 5+ active referrals",amount:"500/month",color:"text-purple-600",bgColor:"bg-purple-50"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Refer and Earn"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Invite friends and earn together"})]})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-lg p-6 mb-6 text-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Your Referral Code"}),s.jsx("p",{className:"text-blue-100 mb-4",children:"Share this code with friends to earn rewards"}),s.jsx("div",{className:"bg-white/20 rounded-xl p-4 mb-4",children:s.jsx("div",{className:"text-3xl font-bold tracking-wider",children:n})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center space-x-2 bg-white/20 hover:bg-white/30 rounded-xl py-3 transition-colors",children:[s.jsx(Zj,{className:"h-5 w-5"}),s.jsx("span",{children:t?"Copied!":"Copy Code"})]}),s.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center space-x-2 bg-white/20 hover:bg-white/30 rounded-xl py-3 transition-colors",children:[s.jsx(rw,{className:"h-5 w-5"}),s.jsx("span",{children:"Share"})]})]})]})}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(mo,{className:"h-5 w-5 mr-2 text-green-600"}),"How You Earn"]}),s.jsx("div",{className:"space-y-4",children:d.map((c,u)=>s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${c.bgColor}`,children:s.jsx(c.icon,{className:`h-6 w-6 ${c.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:c.title}),s.jsx("span",{className:`font-bold ${c.color}`,children:c.amount})]}),s.jsx("p",{className:"text-sm text-gray-600",children:c.description})]})]},u))})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Ee,{className:"h-5 w-5 mr-2 text-blue-600"}),"How It Works"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-bold text-blue-600",children:"1"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Share Your Code"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Share your referral code or link with friends"})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-bold text-blue-600",children:"2"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Friend Joins"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Your friend signs up using your code"})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-bold text-blue-600",children:"3"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Earn Rewards"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get paid when they complete deliveries"})]})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Referral Stats"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Referrals"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"0"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Earned"})]})]})]})]})]})},e_=()=>{const e=ce(),[t,r]=w.useState(null),n=[{question:"How do I get started as a delivery partner?",answer:"Simply sign up with your details, complete the verification process, and start accepting delivery requests. Make sure to keep your profile updated and maintain a good rating."},{question:"What are the payment terms?",answer:"Payments are processed weekly every Monday. You can track your earnings in the Earnings tab and withdraw to your bank account."},{question:"How do I handle customer complaints?",answer:"Always be polite and professional. If you encounter any issues, contact our support team immediately. We're here to help resolve any problems."},{question:"What if I can't find the delivery address?",answer:"Use the in-app navigation or call the customer directly. If you're still unable to locate the address, contact our support team for assistance."},{question:"How do I update my availability?",answer:"Use the online/offline toggle in the app to update your availability status. You can also set your working hours in the Settings section."},{question:"What safety measures should I follow?",answer:"Always wear a helmet, follow traffic rules, keep your phone charged, and inform someone about your delivery routes. In case of emergency, use the emergency contacts in the app."}],a=[{icon:mt,title:"Call Support",description:"Speak directly with our support team",action:"Call +91-800-123-4567",color:"text-green-600",bgColor:"bg-green-50"},{icon:Ft,title:"Email Support",description:"Send us an email and we'll respond within 24 hours",action:"support@csstore.com",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:cp,title:"Live Chat",description:"Chat with our support team in real-time",action:"Start Chat",color:"text-purple-600",bgColor:"bg-purple-50"}],i=o=>{o.startsWith("Call")?window.location.href="tel:+918001234567":o.startsWith("support@")?window.location.href="mailto:support@csstore.com":alert("Live chat feature coming soon!")};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Help & Support"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get help and contact our support team"})]})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(yr,{className:"h-5 w-5 mr-2 text-blue-600"}),"Contact Support"]}),s.jsx("div",{className:"space-y-4",children:a.map((o,l)=>s.jsx(B.button,{onClick:()=>i(o.action),className:"w-full p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors text-left group",whileHover:{x:4},children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${o.bgColor} group-hover:scale-110 transition-transform`,children:s.jsx(o.icon,{className:`h-6 w-6 ${o.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:o.title}),s.jsx("p",{className:"text-sm text-gray-600",children:o.description}),s.jsx("p",{className:"text-sm font-medium text-blue-600 mt-1",children:o.action})]})]})},l))})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Frequently Asked Questions"}),s.jsx("div",{className:"space-y-4",children:n.map((o,l)=>s.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>r(t===l?null:l),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-900 pr-4",children:o.question}),t===l?s.jsx(Xj,{className:"h-5 w-5 text-gray-500 flex-shrink-0"}):s.jsx(Sa,{className:"h-5 w-5 text-gray-500 flex-shrink-0"})]}),t===l&&s.jsx(B.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-4 pb-4",children:s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:o.answer})})]},l))})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Tips"}),s.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Keep your phone charged and have a power bank handy"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Always confirm the order details with the customer"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Take photos of delivered orders for your records"})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsx("p",{children:"Report any issues immediately to our support team"})]})]})]})]})]})},t_=()=>{const e=ce(),[t,r]=w.useState("all"),n=[{id:1,type:"update",title:"New Feature: Real-time Navigation",content:"We've added real-time navigation to help you find delivery addresses more easily. Update your app to access this feature.",timestamp:"2 hours ago",read:!1,icon:Dt,color:"text-blue-600",bgColor:"bg-blue-50"},{id:2,type:"alert",title:"Peak Hours Bonus Active",content:"Earn extra 15 per delivery during peak hours (6-9 PM) today. Make sure to stay online!",timestamp:"4 hours ago",read:!1,icon:Da,color:"text-orange-600",bgColor:"bg-orange-50"},{id:3,type:"update",title:"Weekly Performance Report",content:"Great job this week! You completed 25 deliveries with a 98% on-time rate. Keep up the excellent work!",timestamp:"1 day ago",read:!0,icon:ct,color:"text-green-600",bgColor:"bg-green-50"},{id:4,type:"alert",title:"Weather Alert",content:"Heavy rain expected in your area. Please drive safely and consider taking breaks if needed.",timestamp:"2 days ago",read:!0,icon:Da,color:"text-red-600",bgColor:"bg-red-50"},{id:5,type:"update",title:"Payment Processed",content:"Your weekly earnings of 1,250 have been processed and will reflect in your account within 24 hours.",timestamp:"3 days ago",read:!0,icon:Ee,color:"text-green-600",bgColor:"bg-green-50"}],a=n.filter(l=>t==="all"?!0:l.type===t),i=n.filter(l=>!l.read).length,o=[{id:"all",label:"All Messages",count:n.length},{id:"updates",label:"Updates",count:n.filter(l=>l.type==="update").length},{id:"alerts",label:"Alerts",count:n.filter(l=>l.type==="alert").length}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Message Center"}),s.jsx("p",{className:"text-sm text-gray-600",children:i>0?`${i} unread messages`:"All caught up!"})]}),i>0&&s.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:i})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-2 mb-6",children:s.jsx("div",{className:"flex space-x-1",children:o.map(l=>s.jsxs("button",{onClick:()=>r(l.id),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl transition-all duration-200 ${t===l.id?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{className:"font-medium",children:l.label}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t===l.id?"bg-white/20 text-white":"bg-gray-200 text-gray-600"}`,children:l.count})]},l.id))})}),s.jsx("div",{className:"space-y-4",children:a.length===0?s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8 text-center",children:[s.jsx(Ec,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Messages"}),s.jsx("p",{className:"text-gray-600",children:"You're all caught up! Check back later for updates."})]}):a.map((l,d)=>s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:`bg-white rounded-2xl shadow-lg border border-gray-100 p-6 ${l.read?"":"ring-2 ring-blue-100"}`,children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${l.bgColor} flex-shrink-0`,children:s.jsx(l.icon,{className:`h-6 w-6 ${l.color}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:`font-semibold text-gray-900 ${l.read?"":"font-bold"}`,children:l.title}),!l.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 leading-relaxed",children:l.content}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(He,{className:"h-3 w-3"}),s.jsx("span",{children:l.timestamp})]}),s.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.type==="update"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:l.type==="update"?"Update":"Alert"})]})]})]})},l.id))}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{className:"flex flex-col items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors",children:[s.jsx(Dt,{className:"h-6 w-6 text-gray-600 mb-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Mark All Read"})]}),s.jsxs("button",{className:"flex flex-col items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors",children:[s.jsx(Ec,{className:"h-6 w-6 text-gray-600 mb-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Contact Support"})]})]})]})]})]})},s_=()=>{const e=ce(),[t,r]=w.useState(!1),[n,a]=w.useState({newOrders:!0,earnings:!0,updates:!0,alerts:!0}),i=[{title:"Notifications",icon:Dt,items:[{label:"New Orders",description:"Get notified about new delivery requests",type:"toggle",value:n.newOrders,onChange:l=>a(d=>({...d,newOrders:l}))},{label:"Earnings Updates",description:"Receive updates about your earnings",type:"toggle",value:n.earnings,onChange:l=>a(d=>({...d,earnings:l}))},{label:"App Updates",description:"Get notified about app updates and new features",type:"toggle",value:n.updates,onChange:l=>a(d=>({...d,updates:l}))},{label:"Emergency Alerts",description:"Important safety and weather alerts",type:"toggle",value:n.alerts,onChange:l=>a(d=>({...d,alerts:l}))}]},{title:"Appearance",icon:t?N3:X3,items:[{label:"Dark Mode",description:"Switch between light and dark themes",type:"toggle",value:t,onChange:r}]},{title:"Location & Safety",icon:Xt,items:[{label:"Location Services",description:"Allow app to access your location for deliveries",type:"navigation",action:()=>alert("Location settings coming soon")},{label:"Emergency Contacts",description:"Manage your emergency contact information",type:"navigation",action:()=>alert("Emergency contacts coming soon")},{label:"Safety Tips",description:"View safety guidelines and tips",type:"navigation",action:()=>alert("Safety tips coming soon")}]},{title:"Working Hours",icon:He,items:[{label:"Set Availability",description:"Configure your working hours and availability",type:"navigation",action:()=>alert("Working hours coming soon")},{label:"Auto-Offline",description:"Automatically go offline after work hours",type:"navigation",action:()=>alert("Auto-offline coming soon")}]}],o=(l,d)=>{l(!d)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-4 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customize your app experience"})]})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[i.map((l,d)=>s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-white rounded-2xl shadow-lg border border-gray-100 mb-6 overflow-hidden",children:[s.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-100",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(l.icon,{className:"h-5 w-5 mr-2 text-blue-600"}),l.title]})}),s.jsx("div",{className:"divide-y divide-gray-100",children:l.items.map((c,u)=>s.jsx("div",{className:"p-4",children:c.type==="toggle"?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:c.label}),s.jsx("p",{className:"text-sm text-gray-600",children:c.description})]}),s.jsx("button",{onClick:()=>c.type==="toggle"&&"onChange"in c&&"value"in c?o(c.onChange,c.value):null,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${c.type==="toggle"&&"value"in c&&c.value?"bg-blue-500":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c.type==="toggle"&&"value"in c&&c.value?"translate-x-6":"translate-x-1"}`})})]}):s.jsxs("button",{onClick:c.type==="navigation"&&"action"in c?c.action:void 0,className:"w-full flex items-center justify-between group hover:bg-gray-50 p-2 -m-2 rounded-lg transition-colors",children:[s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:c.label}),s.jsx("p",{className:"text-sm text-gray-600",children:c.description})]}),s.jsx(Lr,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600 transition-colors"})]})},u))})]},d)),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Ao,{className:"h-5 w-5 mr-2 text-gray-600"}),"App Information"]}),s.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"font-medium",children:"Version"}),s.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded-full text-xs",children:"1.0.0"})]}),s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"font-medium",children:"Last Updated"}),s.jsx("span",{className:"text-gray-500",children:new Date().toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"font-medium",children:"Platform"}),s.jsx("span",{className:"text-gray-500",children:"Web App"})]}),s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"font-medium",children:"Storage Used"}),s.jsx("span",{className:"text-gray-500",children:"12.5 MB"})]})]})]})]})]})},r_=()=>{const e=ce(),{t}=Ya(),r=[{id:"chocolates",name:t("categories.chocolates"),image:"https://dummyimage.com/300x200/8B4513/FFFFFF&text=Chocolates",color:"bg-gradient-to-br from-amber-400 to-orange-600",description:t("categories.chocolates_desc")},{id:"ladoos",name:t("categories.ladoos"),image:"https://dummyimage.com/300x200/FFD700/000000&text=Laddus",color:"bg-gradient-to-br from-yellow-400 to-yellow-600",description:t("categories.ladoos_desc")},{id:"biscuits",name:t("categories.biscuits"),image:"https://dummyimage.com/300x200/DEB887/000000&text=Biscuits",color:"bg-gradient-to-br from-amber-300 to-amber-500",description:t("categories.biscuits_desc")},{id:"cakes",name:t("categories.cakes"),image:"https://dummyimage.com/300x200/FF69B4/FFFFFF&text=Cakes",color:"bg-gradient-to-br from-pink-400 to-pink-600",description:t("categories.cakes_desc")},{id:"hot_snacks",name:t("categories.hot_snacks"),image:"https://dummyimage.com/300x200/FF4500/FFFFFF&text=Hot+Snacks",color:"bg-gradient-to-br from-red-400 to-orange-600",description:t("categories.hot_snacks_desc")},{id:"beverages",name:t("categories.beverages"),image:"https://dummyimage.com/300x200/87CEEB/FFFFFF&text=Beverages",color:"bg-gradient-to-br from-blue-400 to-cyan-600",description:t("categories.beverages_desc")}],n=a=>{e(`/?category=${a}`)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white py-6 px-4 shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("categories.title")}),s.jsx("p",{className:"text-gray-600 mt-1",children:t("categories.subtitle")})]})})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"py-6 px-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:r.map((a,i)=>s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*i},whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer overflow-hidden group",onClick:()=>n(a.id),role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),n(a.id))},children:[s.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),s.jsx("div",{className:`absolute inset-0 ${a.color} opacity-20`}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-30 transition-opacity duration-300"})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:a.name}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:a.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-blue-600 font-semibold text-sm group-hover:text-blue-700",children:"Shop Now"}),s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]},a.id))})})})]})},Iy=()=>{const e=ce(),t=_p(),{user:r,isAuthenticated:n}=de(u=>u.auth),{data:a}=qn(void 0,{skip:!n}),{t:i}=Ya(),[o,l]=w.useState(null),d=u=>{switch(l(u),u){case i("account.profile"):e("/account/profile/edit");break;case i("account.orders"):e("/orders");break;case i("account.settings"):e("/account/settings");break;case i("account.notifications"):e("/account/notifications");break;case i("account.language"):e("/account/settings");break;case i("account.help"):e("/help-support");break;case i("account.logout"):t();break;default:console.log(`Unknown option: ${u}`)}},c=[{icon:De,label:i("account.profile"),description:i("account.profile.description"),action:"edit"},{icon:ys,label:i("account.orders"),description:i("account.orders.description"),action:"navigate"},{icon:Ao,label:i("account.settings"),description:i("account.settings.description"),action:"settings"},{icon:Dt,label:i("account.notifications"),description:i("account.notifications.description"),action:"notifications"},{icon:ip,label:i("account.language"),description:i("account.language.description"),action:"language"},{icon:yr,label:i("account.help"),description:i("account.help.description"),action:"help"},...n?[{icon:lp,label:i("account.logout"),description:i("account.logout.description"),action:"logout",className:"text-red-600 hover:text-red-700"}]:[]];return n?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white py-6 px-4 shadow-sm",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i("account.title")}),s.jsx("p",{className:"text-gray-600 mt-2",children:n&&a?`Welcome back, ${a.name}!`:i("account.welcome")})]})}),n&&r&&s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-r from-blue-50 to-indigo-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[s.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome, ",(a==null?void 0:a.name)||(r==null?void 0:r.email)||"User","!"]}),s.jsx("p",{className:"text-lg text-gray-600",children:"Manage your account settings and preferences"})]})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"py-6 px-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"space-y-4",children:c.map((u,m)=>s.jsx(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*m},className:`bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer ${o===u.label?"ring-2 ring-blue-500 bg-blue-50":""} ${u.className||""}`,onClick:()=>d(u.label),role:"button",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),d(u.label))},children:s.jsxs("div",{className:"flex items-center space-x-4",children:[u.label!=="Logout"&&s.jsx("div",{className:`p-2 rounded-lg ${o===u.label?"bg-blue-200":"bg-blue-100"}`,children:s.jsx(u.icon,{className:`h-6 w-6 ${o===u.label?"text-blue-700":"text-blue-600"}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:`text-lg font-semibold ${u.label==="Logout"?"text-red-600":"text-gray-900"}`,children:u.label}),s.jsx("p",{className:"text-gray-600 text-sm",children:u.description})]})]})},u.label))})})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Authentication Required"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"You need to be logged in to access this page. The OTP login modal should appear automatically."}),s.jsx("p",{className:"text-sm text-gray-500",children:"If the modal doesn't appear, please refresh the page or check the console for errors."})]})})},n_=()=>{const e=tt(),t=ce(),{isAuthenticated:r}=de(y=>y.auth),{data:n,refetch:a}=qn(void 0,{skip:!r}),[i,{isLoading:o}]=G5(),{t:l}=Ya(),[d,c]=w.useState({name:"",email:"",phone:""}),[u,m]=w.useState("");w.useEffect(()=>{n&&c({name:n.name||"",email:n.email||"",phone:n.phone||""})},[n]),w.useEffect(()=>{r||t("/account")},[r,t]);const h=(y,j)=>{c(N=>({...N,[y]:j})),y==="phone"&&m("")},f=async()=>{var y;if(!d.name.trim()){ae.error("Name is required");return}if(!d.email.trim()){ae.error("Email is required");return}if(d.phone){if(!/^\+?[1-9]\d{1,14}$|^[6-9]\d{9}$/.test(d.phone.replace(/\s/g,""))){m("Invalid phone number format");return}}else m("");try{const j=await i(d).unwrap();j.user&&e(Ks(j.user)),await a(),ae.success("Profile updated successfully!"),t("/account")}catch(j){console.error("Failed to update profile:",j),ae.error(((y=j==null?void 0:j.data)==null?void 0:y.error)||"Failed to update profile. Please try again.")}},p=()=>{t("/account")};return r?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white py-4 px-4 shadow-sm sticky top-0 z-10",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Go back",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Edit Personal Information"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Update your profile details"})]})]})})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"py-6 px-4",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(De,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:l("profile.name")})]})}),s.jsx("input",{type:"text",value:d.name,onChange:y=>h("name",y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your full name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ft,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:l("profile.email")})]})}),s.jsx("input",{type:"email",value:d.email,onChange:y=>h("email",y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your email address",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mt,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:l("profile.phone")})]})}),s.jsx("input",{type:"tel",value:d.phone,onChange:y=>h("phone",y.target.value),className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:border-transparent transition-all ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"Enter your phone number"}),u&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 mt-8",children:[s.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,disabled:o,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:o?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Saving..."})]}):l("profile.save")}),s.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,disabled:o,className:"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:l("profile.cancel")})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," Your profile information helps us provide better service. Make sure your email and phone number are accurate for order updates and delivery notifications."]})})]})})})]}):null},a_=({onClose:e})=>{const{data:t,isLoading:r}=l6(void 0),[n]=c6(),[a]=u6(),[i]=d6(),o=(t==null?void 0:t.notifications)||[],l=o.some(f=>!f.isRead),d=async f=>{try{await n(f).unwrap()}catch(p){console.error("Failed to mark as read:",p)}},c=async f=>{try{await a(f).unwrap()}catch(p){console.error("Failed to delete notification:",p)}},u=async()=>{try{await i(void 0).unwrap()}catch(f){console.error("Failed to mark all as read:",f)}},m=f=>{const p=new Date(f),j=new Date().getTime()-p.getTime(),N=Math.floor(j/6e4),v=Math.floor(N/60),b=Math.floor(v/24);return N<1?"Just now":N<60?`${N}m ago`:v<24?`${v}h ago`:b<7?`${b}d ago`:p.toLocaleDateString()},h=f=>{switch(f){case"delivery_otp":return"";case"order_update":return"";default:return""}};return s.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e,children:s.jsxs(B.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Dt,{className:"h-6 w-6 text-blue-600"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),o.length>0&&s.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-0.5 rounded-full",children:o.length})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors text-gray-600",children:s.jsx(pt,{className:"h-5 w-5"})})]}),l&&s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:u,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:[s.jsx(Es,{className:"h-4 w-4"}),s.jsx("span",{children:"Mark all as read"})]})}),s.jsx("div",{className:"space-y-3",children:r?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Loading notifications..."})]}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Dt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 text-lg",children:"No notifications yet"}),s.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"We'll notify you when there's something new"})]}):o.map(f=>s.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg border transition-all ${f.isRead?"bg-white border-gray-200":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"text-2xl flex-shrink-0",children:h(f.type)}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:f.title}),s.jsx("p",{className:"text-sm text-gray-700 mt-1",children:f.message}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:m(f.createdAt)})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[!f.isRead&&s.jsx("button",{onClick:()=>d(f._id),className:"p-1.5 hover:bg-blue-100 rounded-lg transition-colors text-blue-600",title:"Mark as read",children:s.jsx(Es,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>c(f._id),className:"p-1.5 hover:bg-red-100 rounded-lg transition-colors text-red-600",title:"Delete",children:s.jsx(mp,{className:"h-4 w-4"})})]})]})})]})},f._id))}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:s.jsx("button",{onClick:e,className:"w-full bg-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:"Close"})})]})})},i_=()=>{const e=ce(),{isAuthenticated:t}=de(i=>i.auth),[r,n]=w.useState(!0);if(!t)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Login Required"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access your notifications."})]}),s.jsx("a",{href:"/login",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-block",children:"Go to Login"})]})});const a=()=>{n(!1),e("/account")};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white py-4 px-4 shadow-sm sticky top-0 z-10",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/account"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Go back to account",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your notifications and preferences"})]})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Notification Center"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Stay updated with the latest information about your orders, offers, and account activities."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Recent Notifications"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Your recent notifications will appear here. Click anywhere to view and manage all notifications."})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Notification Preferences"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Customize how you receive notifications for orders, promotions, and account updates."})]})]})]})}),r&&s.jsx(a_,{onClose:a})]})},o_=()=>{const e=Jt(),t=ce(),r=tt(),{success:n,error:a}=Ns(),i=HR();return w.useEffect(()=>{const o=new URLSearchParams(e.search),l=o.get("token"),d=o.get("refreshToken"),c=o.get("userId"),u=o.get("email"),m=o.get("role"),h=o.get("isAdmin")==="true",f=o.get("isProfileComplete")==="true",p=o.get("error");if(p){a("Authentication Failed",`Error: ${p}`),t("/login");return}l&&d&&c?(console.log(" OAUTH CALLBACK: Aggressive cleanup BEFORE new login..."),i(),setTimeout(()=>{console.log(" OAUTH CALLBACK: Setting new user auth after cleanup..."),r(Ks({id:c,email:u||"",role:m||"customer",isAdmin:h,isProfileComplete:f})),r(Vn({accessToken:l,refreshToken:d})),n("Login Successful","You have been logged in via Google."),setTimeout(()=>{if(h||m==="admin"){window.location.href="/admin";return}if(!f){window.location.href="/onboarding/complete-profile";return}window.location.href="/dashboard"},150)},100)):(a("Authentication Failed","Missing authentication tokens or user data."),t("/login"))},[e.search,t,r]),s.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center min-h-screen bg-gray-50",children:s.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Processing Login..."}),s.jsx("p",{className:"text-gray-600",children:"Please wait while we log you in."})]})})},l_=()=>{const e=ce(),t=tt(),{user:r,tokens:n}=de(L=>L.auth),{success:a,error:i}=Ns(),o=_p(),[l,d]=w.useState({name:"",phone:""}),[c,u]=w.useState(!1),[m,h]=w.useState({}),[f,p]=w.useState(!1),[y,j]=w.useState(""),[N,v]=w.useState(!1),[b,x]=w.useState(!1),[g,k]=w.useState(!1),[C,S]=w.useState(""),[A,E]=w.useState(0),T=()=>{const L={};return l.name.trim()?l.name.trim().length<2&&(L.name="Name must be at least 2 characters long"):L.name="Full name is required",l.phone.trim()?/^[6-9]\d{9}$/.test(l.phone.trim())||(L.phone="Please enter a valid 10-digit mobile number starting with 6-9"):L.phone="Phone number is required",h(L),Object.keys(L).length===0},M=L=>{const{name:U,value:D}=L.target;d(_=>({..._,[U]:D})),m[U]&&h(_=>({..._,[U]:""})),U==="phone"&&(S(""),f&&(p(!1),k(!1),j("")))};w.useEffect(()=>{if(A>0){const L=setTimeout(()=>E(A-1),1e3);return()=>clearTimeout(L)}},[A]);const P=async()=>{if(!l.phone.trim()){h(L=>({...L,phone:"Phone number is required"}));return}if(!/^[6-9]\d{9}$/.test(l.phone.trim())){h(L=>({...L,phone:"Please enter a valid 10-digit mobile number starting with 6-9"}));return}v(!0),S("");try{console.log(" Checking if phone exists:",l.phone.trim());const L=await fetch("http://localhost:5001/api/auth/check-phone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:l.phone.trim()})}),U=await L.json();if(console.log(" Phone check result:",U),L.ok&&U.exists){const I="This phone number is already registered with another account. Please use a different number or sign in.";S(I),h(q=>({...q,phone:I})),i("Phone Number Exists",I),v(!1);return}console.log(" Sending OTP for phone:",l.phone.trim());const D=await fetch("http://localhost:5001/api/otp/verification/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(n==null?void 0:n.accessToken)||""}`},body:JSON.stringify({phone:l.phone.trim()})}),_=await D.json();if(console.log(" OTP response:",{status:D.status,data:_}),!D.ok){const I=_.message||_.error||"Failed to send OTP. Please try again.";console.error(" OTP send failed:",I),S(I);return}console.log(" OTP sent successfully"),p(!0),E(60),a("OTP Sent","A 6-digit OTP has been sent to your mobile number.")}catch(L){console.error(" OTP send error:",L),S(L instanceof Error?L.message:"Failed to send OTP. Please try again.")}finally{v(!1)}},O=async()=>{if(!y||y.length!==6){S("Please enter the 6-digit OTP");return}x(!0),S("");try{const L=await fetch("http://localhost:5001/api/users/verify-mobile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(n==null?void 0:n.accessToken)||""}`},body:JSON.stringify({otp:y.trim(),phone:l.phone.trim()})}),U=await L.json();if(!L.ok){const D=U.error||U.message||"Invalid OTP. Please try again.";D.includes("not found")||D.includes("expired")?S("OTP not found or expired. Please request a new OTP."):D.includes("Invalid OTP")?S(`Invalid OTP. ${U.attemptsRemaining?`${U.attemptsRemaining} attempts remaining.`:"Please try again."}`):D.includes("Maximum OTP attempts exceeded")?S("Maximum OTP attempts exceeded. Please request a new OTP."):S(D);return}k(!0),S(""),U.accessToken&&U.refreshToken&&(t(Ks({...r,...U.user,mobileVerified:!0})),t(Vn({accessToken:U.accessToken,refreshToken:U.refreshToken}))),a("Mobile Verified","Your mobile number has been verified successfully!")}catch(L){S(L instanceof Error?L.message:"Failed to verify OTP. Please try again.")}finally{x(!1)}},R=async L=>{var U,D,_;if(L.preventDefault(),!!T()){if(!g){h(I=>({...I,phone:"Please verify your mobile number with OTP first"})),f?i("OTP Not Verified","Please verify the OTP sent to your mobile number."):i("OTP Required","Please send and verify OTP for your mobile number.");return}if(!(n!=null&&n.accessToken)){console.error("No access token available"),i("Authentication Error","You are not logged in. Please log in again to continue."),e("/login");return}console.log("Access token exists:",!!n.accessToken),console.log("Token preview:",((U=n.accessToken)==null?void 0:U.substring(0,20))+"..."),u(!0);try{const I=await fetch("http://localhost:5001/api/auth/complete-profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.accessToken}`},body:JSON.stringify({fullName:l.name.trim(),phone:l.phone.trim()})}),q=await I.json();if(!I.ok){if(I.status===401){console.error("401 Unauthorized - Token may be expired or invalid"),i("Session Expired","Your session has expired. Please log in again."),o();return}if(I.status===400&&((D=q.error)!=null&&D.includes("phone number is already registered"))){console.error("Phone number already registered:",l.phone),h(W=>({...W,phone:"This phone number is already associated with another account."}));return}if(I.status===400&&((_=q.error)!=null&&_.toLowerCase().includes("phone"))){console.error("Phone number error:",q.error),h(W=>({...W,phone:"This phone number is already associated with another account."}));return}if(I.status===409){console.error("Conflict error - likely duplicate phone number:",q.error),h(W=>({...W,phone:"This phone number is already associated with another account."}));return}throw new Error(q.error||"Failed to complete profile")}q.success?(console.log(" Profile completed. Redirecting..."),t(Ks(q.user)),a("Profile Completed","Welcome to CS Store! Your profile has been completed successfully."),e("/dashboard")):(console.log(" Profile not completed:",q),i("Profile Completion Failed","Unable to complete profile. Please try again."))}catch(I){console.error("Profile completion error:",I),i("Profile Completion Failed",I instanceof Error?I.message:"Please try again.")}finally{u(!1)}}};return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(B.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(De,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"We need a few more details to get you started"})]}),s.jsxs("form",{onSubmit:R,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ft,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"email",value:r.email,readOnly:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cannot be changed"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(De,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",name:"name",value:l.name,onChange:M,placeholder:"Enter your full name",className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${m.name?"border-red-300 bg-red-50":"border-gray-300"}`})]}),m.name&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(mt,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:M,placeholder:"Enter 10-digit mobile number",disabled:g,className:`block w-full pl-10 pr-3 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${m.phone?"border-red-300 bg-red-50":g?"border-green-300 bg-green-50":"border-gray-300"} ${g?"cursor-not-allowed":""}`}),g&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(fo,{className:"h-5 w-5 text-green-600"})})]}),m.phone&&s.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium",children:m.phone}),C&&!f&&s.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium bg-red-50 p-2 rounded",children:C}),!f&&!g&&s.jsx("div",{className:"mt-2",children:s.jsx("button",{type:"button",onClick:P,disabled:N||!l.phone.trim()||!/^[6-9]\d{9}$/.test(l.phone.trim()),className:"text-sm text-blue-600 hover:text-blue-700 font-medium disabled:text-gray-400 disabled:cursor-not-allowed px-3 py-1.5 rounded hover:bg-blue-50 transition-colors",children:N?s.jsxs("span",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-2"}),"Sending OTP..."]}):"Send OTP"})}),f&&!g&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:L=>j(L.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit OTP",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center tracking-widest text-lg",maxLength:6}),s.jsx("button",{type:"button",onClick:O,disabled:b||y.length!==6,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:b?"Verifying...":"Verify"})]}),C&&s.jsx("p",{className:"text-red-500 text-xs",children:C}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("button",{type:"button",onClick:P,disabled:A>0||N,className:"text-xs text-blue-600 hover:text-blue-700 disabled:text-gray-400 disabled:cursor-not-allowed",children:A>0?`Resend OTP in ${A}s`:"Resend OTP"})})]}),g&&s.jsxs("p",{className:"text-green-600 text-xs mt-1 flex items-center",children:[s.jsx(fo,{className:"h-3 w-3 mr-1"}),"Mobile number verified successfully"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll use this to send order updates and OTP verification. Each phone number can only be used once."})]}),s.jsx(B.button,{type:"submit",disabled:c,whileHover:{scale:c?1:1.02},whileTap:{scale:.98},className:`w-full flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all ${c?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-200"} text-white`,children:c?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Profile..."]}):s.jsxs("div",{className:"flex items-center",children:["Complete Profile and Continue",s.jsx(mh,{className:"h-4 w-4 ml-2"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",s.jsxs("button",{type:"button",onClick:L=>{L.preventDefault(),console.log("Sign In button clicked, navigating to /login"),e("/login",{replace:!0})},className:"text-blue-600 hover:text-blue-700 font-medium inline-flex items-center cursor-pointer",children:[s.jsx(h3,{className:"h-4 w-4 mr-1"}),"Sign In"]})]})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["By completing your profile, you agree to our"," ",s.jsx("a",{href:"/terms",className:"text-blue-600 hover:text-blue-700 underline",children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"/privacy",className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})]})})]})})}):(e("/",{replace:!0}),null)},c_=()=>s.jsx(l_,{}),d_=()=>{const{showOtpModal:e,isOtpModalOpen:t}=Id(),[r,n]=w.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:[s.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test OTP Modal"}),s.jsx("p",{className:"mb-4",children:"Test the OTP modal in different ways:"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("button",{onClick:()=>e("/account/profile"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 block",children:"Show OTP Modal (via Context)"}),s.jsx("button",{onClick:()=>n(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 block",children:"Show OTP Modal (Direct)"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Modal state: ",t?"Open":"Closed"]})]})]}),s.jsx(nw,{isOpen:r,onClose:()=>n(!1),redirectTo:"/account/profile"})]})},u_=()=>{const e=de(d=>d.auth),{isOtpModalOpen:t,showOtpModal:r}=Id(),[n,a]=w.useState([]),i=d=>{a(c=>[...c,`${new Date().toLocaleTimeString()}: ${d}`])};w.useEffect(()=>{i("DebugPage mounted"),i(`Auth state: isAuthenticated=${e.isAuthenticated}`),i(`User: ${e.user?JSON.stringify(e.user):"null"}`),i(`OTP Modal Open: ${t}`)},[e.isAuthenticated,e.user,t]);const o=()=>{i("Testing OTP modal..."),r("/account/profile")},l=()=>{i("Clearing auth..."),localStorage.removeItem("auth"),window.location.reload()};return s.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Debug Page"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Authentication State"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"isAuthenticated:"})," ",e.isAuthenticated?"true":"false"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"User:"})," ",e.user?JSON.stringify(e.user,null,2):"null"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Tokens:"})," ",e.tokens?"present":"null"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"OTP Modal Open:"})," ",t?"true":"false"]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:o,className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Test OTP Modal"}),s.jsx("button",{onClick:l,className:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Clear Auth & Reload"}),s.jsx("button",{onClick:()=>window.location.href="/account/profile",className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Go to Account Profile"})]})]})]}),s.jsxs("div",{className:"mt-8 bg-white p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Logs"}),s.jsx("div",{className:"bg-gray-100 p-4 rounded max-h-64 overflow-y-auto",children:n.map((d,c)=>s.jsx("div",{className:"text-sm font-mono text-gray-700",children:d},c))})]})]})})},m_=()=>{const[e,t]=w.useState(""),[r,n]=w.useState(!1),[a,i]=w.useState(!1),[o,l]=w.useState(""),d=async c=>{if(c.preventDefault(),l(""),n(!0),!e||!/\S+@\S+\.\S+/.test(e)){l("Please enter a valid email address."),n(!1);return}try{await new Promise(u=>setTimeout(u,1500)),console.log(`Subscribed email: ${e}`),i(!0),t("")}catch(u){l("Failed to subscribe. Please try again."),console.error("Subscription error:",u)}finally{n(!1)}};return s.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 text-white flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full"}),s.jsx("div",{className:"absolute top-32 right-16 w-24 h-24 bg-white rounded-full"}),s.jsx("div",{className:"absolute bottom-20 left-20 w-16 h-16 bg-white rounded-full"}),s.jsx("div",{className:"absolute bottom-32 right-10 w-20 h-20 bg-white rounded-full"})]}),s.jsxs("div",{className:"relative z-10 w-full",children:[s.jsxs(B.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"flex justify-between items-center mb-12 px-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"CS Store"}),s.jsxs(fe,{to:"/",className:"flex items-center text-white hover:text-blue-200 transition-colors",children:[s.jsx(op,{className:"h-5 w-5 mr-2"}),"Back to Home"]})]}),s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"text-center",children:[s.jsxs(B.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[s.jsx("h2",{className:"text-5xl md:text-6xl font-extrabold mb-4 leading-tight",children:"Become a Seller"}),s.jsx("p",{className:"text-xl md:text-2xl text-blue-100 mb-8",children:"Launch your store with us. Get ready for a seamless selling experience!"}),s.jsxs(B.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.6,type:"spring",stiffness:100},className:"inline-flex items-center bg-yellow-400 text-blue-900 px-6 py-2 rounded-full text-lg font-semibold shadow-lg animate-pulse",children:[s.jsx(eg,{className:"h-6 w-6 mr-2"}),"Coming Soon!"]}),s.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs(B.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.8},className:"bg-white bg-opacity-10 p-6 rounded-lg shadow-md backdrop-blur-sm",children:[s.jsx(fo,{className:"h-10 w-10 text-yellow-400 mb-4 mx-auto"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Easy Setup"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Quickly set up your store with our intuitive onboarding process."})]}),s.jsxs(B.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},className:"bg-white bg-opacity-10 p-6 rounded-lg shadow-md backdrop-blur-sm",children:[s.jsx(AP,{className:"h-10 w-10 text-yellow-400 mb-4 mx-auto"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Manage Products"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Effortlessly add, update, and track your product listings."})]}),s.jsxs(B.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:1.2},className:"bg-white bg-opacity-10 p-6 rounded-lg shadow-md backdrop-blur-sm",children:[s.jsx(eg,{className:"h-10 w-10 text-yellow-400 mb-4 mx-auto"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Real-time Updates"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Stay informed with live sales data and inventory alerts."})]})]}),s.jsxs(B.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.4},className:"mt-16 bg-white bg-opacity-10 p-8 rounded-lg shadow-xl max-w-md mx-auto",children:[s.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Join Our Waitlist"}),s.jsx("p",{className:"text-blue-100 mb-6",children:"Be the first to know when we launch!"}),a?s.jsxs(B.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center text-green-300 font-semibold",children:[s.jsx("p",{children:" Thanks for your interest!"}),s.jsx("p",{children:"We'll notify you when we launch."})]}):s.jsxs("form",{onSubmit:d,className:"flex flex-col space-y-4",children:[s.jsx("input",{type:"email",placeholder:"Enter your email",value:e,onChange:c=>t(c.target.value),className:"w-full p-3 rounded-lg bg-white bg-opacity-20 border border-blue-300 placeholder-blue-100 text-white focus:outline-none focus:ring-2 focus:ring-blue-300",disabled:r}),o&&s.jsx("p",{className:"text-red-300 text-sm",children:o}),s.jsx("button",{type:"submit",className:"w-full bg-yellow-400 text-blue-900 font-bold py-3 rounded-lg hover:bg-yellow-300 transition-colors flex items-center justify-center",disabled:r,children:r?s.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-900 mr-3",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Notify Me!"})]})]})]}),s.jsxs(B.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.6},className:"mt-20 text-sm text-blue-200",children:[s.jsxs("p",{children:[" ",new Date().getFullYear()," CS Store. All rights reserved."]}),s.jsxs("p",{className:"mt-2",children:["For seller inquiries, please contact"," ",s.jsx("a",{href:"mailto:sellers@csstore.com",className:"underline hover:text-white",children:"sellers@csstore.com"})]})]})]})})]})]})},h_=()=>s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[s.jsx("div",{className:"bg-white shadow-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(fe,{to:"/",className:"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors",children:[s.jsx(Ce,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Back to Home"})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CS Store"}),s.jsx("div",{className:"w-24"})," "]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-16",children:s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[s.jsxs(B.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center space-x-2 bg-orange-100 text-orange-800 px-4 py-2 rounded-full text-sm font-semibold mb-8",children:[s.jsx(He,{className:"h-4 w-4"}),s.jsx("span",{children:"Coming Soon"})]}),s.jsxs(B.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:["Download Our",s.jsx("span",{className:"block bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Mobile App"})]}),s.jsx(B.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},className:"text-xl text-gray-600 mb-12 max-w-2xl mx-auto leading-relaxed",children:"Get ready for an amazing mobile shopping experience! Our app is currently in development and will be available soon with exclusive features."}),s.jsxs(B.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z"})})})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Android App"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Download from Google Play Store with exclusive Android features and optimizations."}),s.jsx("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"Available Soon"})})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-shadow duration-300",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z"})})})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"iOS App"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Download from App Store with seamless iOS integration and native performance."}),s.jsx("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"Available Soon"})})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6},className:"bg-white rounded-2xl p-8 shadow-lg mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"App Features Preview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx(dp,{className:"h-6 w-6 text-blue-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Mobile Optimized"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Designed specifically for mobile devices with touch-friendly interface"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx(ap,{className:"h-6 w-6 text-green-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Offline Access"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Browse products and manage cart even without internet connection"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx(He,{className:"h-6 w-6 text-purple-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Push Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get instant updates on orders, deals, and new products"})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.6},className:"space-y-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Be the First to Know!"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Get notified when our mobile app is ready for download."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-md mx-auto",children:[s.jsx("input",{type:"email",placeholder:"Enter your email address",className:"flex-1 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"}),s.jsx("button",{className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Notify Me"})]})]}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},className:"mt-12",children:s.jsxs(fe,{to:"/",className:"inline-flex items-center space-x-2 bg-white text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors duration-200 shadow-lg hover:shadow-xl",children:[s.jsx(Ce,{className:"h-5 w-5"}),s.jsx("span",{children:"Continue Shopping on Web"})]})})]})})]}),f_=()=>{const e=No(),t=Jt(),r=ce(),[n,a]=w.useState("relevance"),[i,o]=w.useState("desc"),[l,d]=w.useState(1),c=de(S=>S.auth),m=new URLSearchParams(t.search).get("q")||"",h=e.q||m,{data:f,isLoading:p,error:y}=e6({q:h,page:l,limit:12}),j=(f==null?void 0:f.products)||[],N=(f==null?void 0:f.total)||0,v=f?Math.ceil(N/12):0,b=S=>{r(`/product/${S._id||S.id}`)},x=(S,A)=>{if(A.stopPropagation(),!((S.stock||0)<=0)){if(!c.isAuthenticated){r("/login");return}console.log("Add to cart:",S.name)}},g=S=>{a(S),d(1)},k=S=>{o(S),d(1)},C=S=>{d(S),window.scrollTo(0,0)};return p?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Searching products..."})]})}):y?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600",children:"Error loading search results. Please try again."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>r(-1),className:"p-2 rounded-lg bg-white shadow hover:shadow-md transition-shadow",children:s.jsx(Ce,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:['Search Results for "',h,'"']}),s.jsxs("p",{className:"text-gray-600",children:[N," products found"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("select",{value:n,onChange:S=>g(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"relevance",children:"Relevance"}),s.jsx("option",{value:"price",children:"Price"}),s.jsx("option",{value:"newest",children:"Newest"}),s.jsx("option",{value:"sales",children:"Sales"})]}),s.jsxs("select",{value:i,onChange:S=>k(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"desc",children:"Descending"}),s.jsx("option",{value:"asc",children:"Ascending"})]})]})]}),j.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsxs("p",{className:"text-gray-600 text-lg",children:['No products found for "',h,'"']}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Try searching with different keywords"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:j.map((S,A)=>{var E;return s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:A*.1},className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>b(S),children:[s.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-t-lg",children:s.jsx(an,{image:((E=S.images)==null?void 0:E[0])||{variants:{micro:"/placeholder-product.svg",thumb:"/placeholder-product.svg",small:"/placeholder-product.svg",medium:"/placeholder-product.svg",large:"/placeholder-product.svg",original:"/placeholder-product.svg"}},size:"small",alt:S.name,className:"w-full h-48",productId:S._id||S.id,debug:!1})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:S.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:S.category}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["",S.price]}),S.mrp&&S.mrp>S.price&&s.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["",S.mrp]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ct,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx("span",{className:"text-sm text-gray-600",children:S.rating||"4.0"})]})]}),s.jsx("button",{onClick:T=>x(S,T),disabled:(S.stock||0)<=0,className:"mt-3 w-full py-2 rounded-lg transition-colors text-white disabled:bg-gray-400 disabled:cursor-not-allowed bg-blue-600 hover:bg-blue-700",children:(S.stock||0)<=0?"Out of Stock":"Add to Cart"})]})]},S._id||S.id)})}),v>1&&s.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[s.jsx("button",{onClick:()=>C(l-1),disabled:l===1,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,v)},(S,A)=>{const E=A+1,T=E===l;return s.jsx("button",{onClick:()=>C(E),className:`px-3 py-2 rounded-lg ${T?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:E},E)}),s.jsx("button",{onClick:()=>C(l+1),disabled:l===v,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})})},p_=()=>{const e=ce();return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Ce,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Home"})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contact Us"}),s.jsx("div",{})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Get in Touch with CS Store"}),s.jsx("p",{className:"text-lg text-gray-600",children:"We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Contact Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ft,{className:"w-6 h-6 text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Email"}),s.jsx("p",{className:"text-gray-600",children:"support@csstore.com"}),s.jsx("p",{className:"text-gray-600",children:"info@csstore.com"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mt,{className:"w-6 h-6 text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Phone"}),s.jsx("p",{className:"text-gray-600",children:"+91 98765 43210"}),s.jsx("p",{className:"text-gray-600",children:"+91 98765 43211"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"w-6 h-6 text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Address"}),s.jsxs("p",{className:"text-gray-600",children:["CS Store Headquarters",s.jsx("br",{}),"123 Business Park, Sector 5",s.jsx("br",{}),"New Delhi, 110001, India"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(He,{className:"w-6 h-6 text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Business Hours"}),s.jsx("p",{className:"text-gray-600",children:"Monday - Friday: 9:00 AM - 6:00 PM"}),s.jsx("p",{className:"text-gray-600",children:"Saturday: 10:00 AM - 4:00 PM"}),s.jsx("p",{className:"text-gray-600",children:"Sunday: Closed"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Send us a Message"}),s.jsxs("form",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),s.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter subject"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),s.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter your message"})]}),s.jsx("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Send Message"})]})]})]}),s.jsxs("div",{className:"mt-12 bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Customer Support"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3",children:s.jsx(Ft,{className:"w-8 h-8 text-orange-500"})}),s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Email Support"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get help via email within 24 hours"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3",children:s.jsx(mt,{className:"w-8 h-8 text-orange-500"})}),s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Phone Support"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Call us during business hours"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3",children:s.jsx(He,{className:"w-8 h-8 text-orange-500"})}),s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Live Chat"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Chat with us in real-time"})]})]})]})]})})]})},x_=()=>{const e=ce();return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Ce,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Home"})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"About Us"}),s.jsx("div",{})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"About CS Store"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"We are India's leading e-commerce platform, dedicated to bringing you the best products at unbeatable prices with exceptional customer service."})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Our Story"}),s.jsxs("div",{className:"prose prose-lg max-w-none",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Founded in 2020, CS Store began as a small startup with a big dream: to make quality products accessible to everyone across India. What started as a simple online marketplace has grown into one of the country's most trusted e-commerce platforms."}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Our journey has been marked by innovation, customer-centricity, and an unwavering commitment to excellence. We believe that shopping should be simple, enjoyable, and accessible to everyone, regardless of their location or budget."}),s.jsx("p",{className:"text-gray-600",children:"Today, we serve millions of customers across India, offering everything from electronics and fashion to home goods and groceries, all delivered with the same care and attention that has defined us from day one."})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[s.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(fh,{className:"w-8 h-8 text-orange-500 mr-3"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Our Mission"})]}),s.jsx("p",{className:"text-gray-600",children:"To democratize commerce by making quality products accessible to every Indian, while fostering a sustainable and inclusive marketplace that benefits customers, sellers, and communities alike."})]}),s.jsxs(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ac,{className:"w-8 h-8 text-orange-500 mr-3"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Our Vision"})]}),s.jsx("p",{className:"text-gray-600",children:"To become India's most trusted and innovative e-commerce platform, setting new standards for customer experience, technological advancement, and social impact in the digital commerce space."})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Our Values"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(sw,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Customer First"}),s.jsx("p",{className:"text-gray-600",children:"Every decision we make is guided by what's best for our customers. Their satisfaction is our greatest reward."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(ns,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Inclusivity"}),s.jsx("p",{className:"text-gray-600",children:"We believe in creating an inclusive platform where everyone feels welcome and valued, regardless of background or circumstances."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(ip,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Innovation"}),s.jsx("p",{className:"text-gray-600",children:"We continuously innovate to improve our platform, making shopping more convenient, efficient, and enjoyable for everyone."})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg shadow-lg p-8 text-white",children:[s.jsx("h3",{className:"text-3xl font-bold mb-8 text-center",children:"CS Store by the Numbers"}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"10M+"}),s.jsx("div",{className:"text-orange-100",children:"Happy Customers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"50K+"}),s.jsx("div",{className:"text-orange-100",children:"Products"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"500+"}),s.jsx("div",{className:"text-orange-100",children:"Cities Served"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:"99.9%"}),s.jsx("div",{className:"text-orange-100",children:"Uptime"})]})]})]})]})]})},g_=()=>{const e=ce(),[t,r]=w.useState("all"),n=[{id:"all",name:"All Departments"},{id:"engineering",name:"Engineering"},{id:"marketing",name:"Marketing"},{id:"sales",name:"Sales"},{id:"operations",name:"Operations"},{id:"design",name:"Design"}],a=[{id:1,title:"Senior Software Engineer",department:"engineering",location:"New Delhi",type:"Full-time",experience:"3-5 years",description:"We're looking for a passionate Senior Software Engineer to join our team and help build scalable e-commerce solutions.",requirements:["Bachelor's degree in Computer Science or related field","3+ years of experience with React, Node.js, and TypeScript","Experience with cloud platforms (AWS, Azure, or GCP)","Strong problem-solving and communication skills"]},{id:2,title:"Product Manager",department:"engineering",location:"Mumbai",type:"Full-time",experience:"4-6 years",description:"Lead product strategy and execution for our core e-commerce platform features.",requirements:["MBA or Bachelor's degree in related field","4+ years of product management experience","Experience in e-commerce or consumer tech","Strong analytical and leadership skills"]},{id:3,title:"Digital Marketing Specialist",department:"marketing",location:"Bangalore",type:"Full-time",experience:"2-4 years",description:"Drive our digital marketing initiatives and help grow our customer base.",requirements:["Bachelor's degree in Marketing or related field","2+ years of digital marketing experience","Proficiency in Google Ads, Facebook Ads, and SEO","Strong analytical and creative thinking skills"]},{id:4,title:"UX/UI Designer",department:"design",location:"Hyderabad",type:"Full-time",experience:"2-4 years",description:"Create intuitive and beautiful user experiences for our e-commerce platform.",requirements:["Bachelor's degree in Design or related field","2+ years of UX/UI design experience","Proficiency in Figma, Sketch, or Adobe Creative Suite","Portfolio demonstrating strong design skills"]},{id:5,title:"Customer Success Manager",department:"operations",location:"Chennai",type:"Full-time",experience:"3-5 years",description:"Ensure our customers have the best possible experience with our platform.",requirements:["Bachelor's degree in Business or related field","3+ years of customer success experience","Excellent communication and problem-solving skills","Experience with CRM tools"]},{id:6,title:"Sales Executive",department:"sales",location:"Pune",type:"Full-time",experience:"1-3 years",description:"Drive sales growth by building relationships with merchants and partners.",requirements:["Bachelor's degree in Business or related field","1+ years of sales experience","Strong communication and negotiation skills","Self-motivated and results-oriented"]}],i=t==="all"?a:a.filter(o=>o.department===t);return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Ce,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Home"})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Careers"}),s.jsx("div",{})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Join Our Team"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Be part of India's fastest-growing e-commerce platform. We're looking for talented, passionate individuals to help us build the future of online shopping."})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Why Work With Us?"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(ns,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Great Culture"}),s.jsx("p",{className:"text-gray-600",children:"Work in a collaborative, inclusive environment where your ideas matter and your voice is heard."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(t3,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Learning & Growth"}),s.jsx("p",{className:"text-gray-600",children:"Continuous learning opportunities, mentorship programs, and career development support."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(Jx,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Impact"}),s.jsx("p",{className:"text-gray-600",children:"Make a real difference in millions of lives by building products that matter."})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg shadow-lg p-8 mb-8 text-white",children:[s.jsx("h3",{className:"text-3xl font-bold mb-8 text-center",children:"Benefits & Perks"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Compensation & Benefits"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Competitive salary and equity"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Health insurance for you and your family"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Flexible work arrangements"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Generous paid time off"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Work Environment"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Modern office spaces"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Free meals and snacks"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Team building activities"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-white rounded-full mr-3"}),"Professional development budget"]})]})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4 md:mb-0",children:"Open Positions"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(o=>s.jsx("button",{onClick:()=>r(o.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${t===o.id?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:o.name},o.id))})]}),s.jsx("div",{className:"space-y-6",children:i.map(o=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:o.title}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(ut,{className:"w-4 h-4 mr-1"}),o.location]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(He,{className:"w-4 h-4 mr-1"}),o.type]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Jx,{className:"w-4 h-4 mr-1"}),o.experience]})]})]}),s.jsx("button",{className:"mt-4 md:mt-0 bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Apply Now"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:o.description}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Requirements:"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:o.requirements.map((l,d)=>s.jsx("li",{children:l},d))})]})]},o.id))}),i.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:"No positions found in this department."})})]})]})]})},y_=()=>{const e=ce(),t=[{id:1,title:"How CS Store Revolutionized E-commerce in Rural India",excerpt:"Discover how we brought online shopping to remote villages, empowering local businesses and connecting communities.",author:"Priya Sharma",date:"2024-01-15",category:"Impact",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=400&fit=crop",readTime:"5 min read"},{id:2,title:"The Journey of a Small Business Owner on CS Store",excerpt:"Meet Rajesh Kumar, who grew his handicraft business from 0 to 10,000 orders using our platform.",author:"Amit Patel",date:"2024-01-10",category:"Success Stories",image:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop",readTime:"7 min read"},{id:3,title:"Building Sustainable E-commerce: Our Green Initiative",excerpt:"Learn about our commitment to environmental responsibility and how we're making e-commerce more sustainable.",author:"Sarah Johnson",date:"2024-01-05",category:"Sustainability",image:"https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?w=800&h=400&fit=crop",readTime:"6 min read"},{id:4,title:"Technology Behind CS Store: Innovation at Scale",excerpt:"An inside look at the cutting-edge technology that powers our platform and handles millions of transactions.",author:"Dr. Vikram Singh",date:"2023-12-28",category:"Technology",image:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=800&h=400&fit=crop",readTime:"8 min read"},{id:5,title:"Customer First: Stories of Exceptional Service",excerpt:"Heartwarming stories of how our customer service team goes above and beyond to help our customers.",author:"Meera Reddy",date:"2023-12-20",category:"Customer Service",image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=400&fit=crop",readTime:"4 min read"},{id:6,title:"The Future of E-commerce: Our Vision for 2024",excerpt:"A look ahead at the exciting innovations and features we're planning to launch this year.",author:"CEO Team",date:"2023-12-15",category:"Company News",image:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=400&fit=crop",readTime:"9 min read"}],r=["All","Impact","Success Stories","Sustainability","Technology","Customer Service","Company News"];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Ce,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Home"})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CS Store Stories"}),s.jsx("div",{})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"CS Store Stories"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Discover the inspiring stories behind CS Store - from our journey to the impact we're making in communities across India."})]}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"flex flex-wrap justify-center gap-4 mb-12",children:r.map(n=>s.jsx("button",{className:"px-6 py-3 bg-white border border-gray-300 rounded-full hover:bg-orange-500 hover:text-white hover:border-orange-500 transition-colors duration-200",children:n},n))}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-white rounded-lg shadow-lg overflow-hidden mb-12",children:s.jsxs("div",{className:"md:flex",children:[s.jsx("div",{className:"md:w-1/2",children:s.jsx("img",{src:t[0].image,alt:t[0].title,className:"w-full h-64 md:h-full object-cover"})}),s.jsxs("div",{className:"md:w-1/2 p-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Zx,{className:"w-4 h-4 text-orange-500 mr-2"}),s.jsx("span",{className:"text-orange-500 font-medium",children:t[0].category})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:t[0].title}),s.jsx("p",{className:"text-gray-600 mb-6",children:t[0].excerpt}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(De,{className:"w-4 h-4 mr-1"}),t[0].author]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Dn,{className:"w-4 h-4 mr-1"}),new Date(t[0].date).toLocaleDateString()]}),s.jsx("span",{children:t[0].readTime})]}),s.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Read More"})]})]})]})}),s.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.slice(1).map((n,a)=>s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5+a*.1},className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[s.jsx("img",{src:n.image,alt:n.title,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Zx,{className:"w-4 h-4 text-orange-500 mr-2"}),s.jsx("span",{className:"text-orange-500 font-medium text-sm",children:n.category})]}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2",children:n.title}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:n.excerpt}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(De,{className:"w-4 h-4 mr-1"}),n.author]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Dn,{className:"w-4 h-4 mr-1"}),new Date(n.date).toLocaleDateString()]})]}),s.jsx("span",{className:"text-sm text-gray-500",children:n.readTime})]}),s.jsx("button",{className:"w-full mt-4 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg transition-colors",children:"Read Story"})]})]},n.id))}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg shadow-lg p-8 mt-12 text-white text-center",children:[s.jsx("h3",{className:"text-3xl font-bold mb-4",children:"Stay Updated with Our Stories"}),s.jsx("p",{className:"text-xl mb-6 text-orange-100",children:"Get the latest CS Store stories delivered to your inbox"}),s.jsxs("div",{className:"max-w-md mx-auto flex gap-4",children:[s.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"}),s.jsx("button",{className:"bg-white text-orange-500 px-6 py-3 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Subscribe"})]})]})]})]})},v_=()=>{const e=ce(),t=[{name:"Rajesh Kumar",position:"Chief Executive Officer",bio:"15+ years of experience in e-commerce and technology leadership.",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop&crop=face"},{name:"Priya Sharma",position:"Chief Technology Officer",bio:"Expert in scalable systems and digital transformation.",image:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=300&h=300&fit=crop&crop=face"},{name:"Amit Patel",position:"Chief Operating Officer",bio:"Operations specialist with focus on customer experience.",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=300&h=300&fit=crop&crop=face"},{name:"Sarah Johnson",position:"Chief Financial Officer",bio:"Financial strategy and growth management expert.",image:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=300&h=300&fit=crop&crop=face"}],r=[{title:"Annual Report 2023",description:"Complete financial and operational overview for fiscal year 2023",type:"PDF",size:"2.4 MB",date:"2024-01-15"},{title:"Sustainability Report",description:"Our environmental and social impact initiatives",type:"PDF",size:"1.8 MB",date:"2023-12-20"},{title:"Corporate Governance Guidelines",description:"Framework for ethical business practices and transparency",type:"PDF",size:"1.2 MB",date:"2023-11-10"},{title:"Privacy Policy",description:"How we collect, use, and protect customer data",type:"PDF",size:"0.8 MB",date:"2023-10-05"}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Ce,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Home"})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Corporate Information"}),s.jsx("div",{})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Corporate Information"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Learn about CS Store's corporate structure, leadership team, and commitment to transparency and ethical business practices."})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Company Overview"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About CS Store"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"CS Store is India's leading e-commerce platform, founded in 2020 with a mission to democratize commerce and make quality products accessible to every Indian. We operate as a technology-driven marketplace connecting millions of customers with thousands of sellers across the country."}),s.jsx("p",{className:"text-gray-600",children:"Our platform offers a wide range of products including electronics, fashion, home goods, groceries, and more, all delivered with exceptional customer service and competitive pricing."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Key Facts"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(NP,{className:"w-5 h-5 text-orange-500 mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Founded: 2020"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ns,{className:"w-5 h-5 text-orange-500 mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Employees: 5,000+"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ip,{className:"w-5 h-5 text-orange-500 mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Cities Served: 500+"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ac,{className:"w-5 h-5 text-orange-500 mr-3"}),s.jsx("span",{className:"text-gray-600",children:"Customers: 10M+"})]})]})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Leadership Team"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,a)=>s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:n.image,alt:n.name,className:"w-32 h-32 rounded-full mx-auto mb-4 object-cover"}),s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:n.name}),s.jsx("p",{className:"text-orange-500 font-medium mb-2",children:n.position}),s.jsx("p",{className:"text-sm text-gray-600",children:n.bio})]},a))})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Our Values"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(Xt,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Integrity"}),s.jsx("p",{className:"text-gray-600",children:"We conduct business with the highest ethical standards and transparency in all our operations."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(ns,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Customer Focus"}),s.jsx("p",{className:"text-gray-600",children:"Every decision we make is guided by what's best for our customers and their experience."})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-orange-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:s.jsx(Ac,{className:"w-10 h-10 text-orange-500"})}),s.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Excellence"}),s.jsx("p",{className:"text-gray-600",children:"We strive for excellence in everything we do, continuously improving and innovating."})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Corporate Documents"}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:r.map((n,a)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ew,{className:"w-8 h-8 text-orange-500 mr-3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:n.title}),s.jsx("p",{className:"text-gray-600 text-sm",children:n.description})]})]}),s.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs font-medium",children:n.type})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsx("span",{children:n.size}),s.jsx("span",{children:new Date(n.date).toLocaleDateString()})]}),s.jsx("button",{className:"w-full mt-4 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg transition-colors",children:"Download"})]},a))})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg shadow-lg p-8 text-white",children:[s.jsx("h3",{className:"text-3xl font-bold mb-6",children:"Corporate Contact"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Headquarters"}),s.jsx("p",{className:"mb-2",children:"CS Store Private Limited"}),s.jsx("p",{className:"mb-2",children:"123 Business Park, Sector 5"}),s.jsx("p",{className:"mb-2",children:"New Delhi, 110001, India"}),s.jsx("p",{className:"mb-4",children:"Phone: +91 11 1234 5678"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Investor Relations"}),s.jsx("p",{className:"mb-2",children:"Email: investors@csstore.com"}),s.jsx("p",{className:"mb-2",children:"Phone: +91 11 1234 5679"}),s.jsx("p",{className:"mb-4",children:"Website: investors.csstore.com"})]})]})]})]})]})},b_=()=>{const[e,t]=w.useState("contact"),[r,n]=w.useState({name:"",email:"",phone:"",subject:"",message:"",category:"general"}),a=c=>{n({...r,[c.target.name]:c.target.value})},i=c=>{c.preventDefault(),console.log("Form submitted:",r),alert("Thank you for contacting us! We'll get back to you within 24 hours.")},o=[{icon:mt,title:"Phone Support",description:"Speak directly with our support team",contact:"+1 (555) 123-4567",availability:"24/7 Available",color:"bg-blue-500"},{icon:Ft,title:"Email Support",description:"Send us your queries via email",contact:"support@csstore.com",availability:"Response within 2 hours",color:"bg-green-500"},{icon:cp,title:"Live Chat",description:"Chat with us in real-time",contact:"Start Chat",availability:"9 AM - 9 PM (Mon-Sat)",color:"bg-purple-500"}],l=[{question:"How can I track my order?",answer:"You can track your order by logging into your account and going to 'My Orders' section. You'll receive tracking updates via SMS and email."},{question:"What is your return policy?",answer:"We offer a 30-day return policy for most items. Items must be in original condition with tags attached. Some items like food products have different return policies."},{question:"How long does delivery take?",answer:"Standard delivery takes 2-5 business days. Express delivery is available for 1-2 business days. Delivery times may vary based on location and product availability."},{question:"Do you offer international shipping?",answer:"Currently, we only ship within India. We're working on expanding our international shipping options in the near future."},{question:"How can I cancel my order?",answer:"You can cancel your order within 1 hour of placing it through your account or by contacting our customer support team."},{question:"What payment methods do you accept?",answer:"We accept all major credit/debit cards, UPI, net banking, and cash on delivery for eligible orders."}],d=[{icon:dr,title:"Order & Delivery",description:"Track orders, delivery issues, returns",color:"text-blue-600"},{icon:ys,title:"Payment & Billing",description:"Payment issues, refunds, billing",color:"text-green-600"},{icon:Dd,title:"Returns & Exchanges",description:"Return products, exchange items",color:"text-orange-600"},{icon:mo,title:"Account & Rewards",description:"Account issues, loyalty points",color:"text-purple-600"}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Customer Care"}),s.jsx("p",{className:"text-xl md:text-2xl text-orange-100 mb-8",children:"We're here to help you 24/7"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{className:"h-5 w-5"}),s.jsx("span",{children:"24/7 Support"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{className:"h-5 w-5"}),s.jsx("span",{children:"Quick Response"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{className:"h-5 w-5"}),s.jsx("span",{children:"Expert Help"})]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-16",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-12",children:"Get in Touch"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:o.map((c,u)=>s.jsxs(B.div,{whileHover:{scale:1.05,y:-5},transition:{duration:.3},className:"bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow duration-300",children:[s.jsx("div",{className:`w-16 h-16 ${c.color} rounded-full flex items-center justify-center mx-auto mb-6`,children:s.jsx(c.icon,{className:"h-8 w-8 text-white"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:c.title}),s.jsx("p",{className:"text-gray-600 mb-4",children:c.description}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:c.contact}),s.jsx("p",{className:"text-sm text-gray-500",children:c.availability})]},u))})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-12",children:[s.jsxs("div",{className:"flex flex-wrap justify-center mb-8",children:[s.jsx("button",{onClick:()=>t("contact"),className:`px-6 py-3 rounded-lg font-medium transition-colors duration-300 ${e==="contact"?"bg-orange-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Contact Form"}),s.jsx("button",{onClick:()=>t("faq"),className:`px-6 py-3 rounded-lg font-medium transition-colors duration-300 ${e==="faq"?"bg-orange-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"FAQ"}),s.jsx("button",{onClick:()=>t("support"),className:`px-6 py-3 rounded-lg font-medium transition-colors duration-300 ${e==="support"?"bg-orange-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Support Categories"})]}),e==="contact"&&s.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"bg-white rounded-xl shadow-lg p-8",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Send us a Message"}),s.jsxs("form",{onSubmit:i,className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),s.jsx("input",{type:"text",name:"name",value:r.name,onChange:a,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s.jsx("input",{type:"email",name:"email",value:r.email,onChange:a,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your email"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:a,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{name:"category",value:r.category,onChange:a,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"general",children:"General Inquiry"}),s.jsx("option",{value:"order",children:"Order Support"}),s.jsx("option",{value:"technical",children:"Technical Support"}),s.jsx("option",{value:"billing",children:"Billing Issue"}),s.jsx("option",{value:"return",children:"Return/Exchange"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),s.jsx("input",{type:"text",name:"subject",value:r.subject,onChange:a,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Brief description of your issue"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),s.jsx("textarea",{name:"message",value:r.message,onChange:a,required:!0,rows:5,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Please describe your issue in detail..."})]}),s.jsxs("button",{type:"submit",className:"w-full bg-orange-500 text-white py-3 px-6 rounded-lg font-medium hover:bg-orange-600 transition-colors duration-300 flex items-center justify-center gap-2",children:["Send Message",s.jsx(mh,{className:"h-5 w-5"})]})]})]}),e==="faq"&&s.jsx(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"space-y-4",children:l.map((c,u)=>s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:u*.1},className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx(yr,{className:"h-5 w-5 text-orange-500"}),c.question]}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:c.answer})]},u))}),e==="support"&&s.jsx(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"grid md:grid-cols-2 gap-6",children:d.map((c,u)=>s.jsx(B.div,{whileHover:{scale:1.02,y:-2},transition:{duration:.3},className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(c.icon,{className:`h-8 w-8 ${c.color} flex-shrink-0`}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:c.title}),s.jsx("p",{className:"text-gray-600 mb-4",children:c.description}),s.jsxs("button",{className:"text-orange-500 font-medium hover:text-orange-600 transition-colors duration-300 flex items-center gap-1",children:["Get Help",s.jsx(mh,{className:"h-4 w-4"})]})]})]})},u))})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[s.jsx(He,{className:"h-8 w-8 text-orange-500"}),"Business Hours"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Monday - Friday"}),s.jsx("span",{className:"font-medium",children:"9:00 AM - 9:00 PM"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Saturday"}),s.jsx("span",{className:"font-medium",children:"10:00 AM - 8:00 PM"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Sunday"}),s.jsx("span",{className:"font-medium",children:"10:00 AM - 6:00 PM"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Emergency Support"}),s.jsx("span",{className:"font-medium text-green-600",children:"24/7 Available"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[s.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[s.jsx(ut,{className:"h-8 w-8 text-orange-500"}),"Our Location"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Head Office"}),s.jsxs("p",{className:"text-gray-600",children:["123 Business District",s.jsx("br",{}),"Mumbai, Maharashtra 400001",s.jsx("br",{}),"India"]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Customer Service Center"}),s.jsxs("p",{className:"text-gray-600",children:["CS Store Customer Care",s.jsx("br",{}),"Ground Floor, Tech Park",s.jsx("br",{}),"Bangalore, Karnataka 560001"]})]})]})]})]}),s.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"bg-gradient-to-r from-orange-500 to-red-600 rounded-xl p-8 text-white",children:[s.jsx("h3",{className:"text-2xl font-bold text-center mb-8",children:"What Our Customers Say"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{name:"Priya Sharma",rating:5,comment:"Excellent customer service! They resolved my order issue within minutes."},{name:"Rajesh Kumar",rating:5,comment:"Very helpful and friendly support team. Highly recommended!"},{name:"Anita Patel",rating:5,comment:"Quick response and professional assistance. Great experience!"}].map((c,u)=>s.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-3",children:[...Array(c.rating)].map((m,h)=>s.jsx(ct,{className:"h-5 w-5 text-yellow-400 fill-current"},h))}),s.jsxs("p",{className:"text-orange-100 mb-4 italic",children:['"',c.comment,'"']}),s.jsxs("p",{className:"font-semibold",children:["- ",c.name]})]},u))})]})]})]})},j_=()=>{const[e,t]=w.useState("whatsapp"),[r,n]=w.useState(new Set),[a,i]=w.useState(new Set(["reminders"])),{success:o,error:l}=Ns(),{data:d,isLoading:c}=Hj(void 0,{skip:!1}),[u]=Wj(),[m,h]=w.useState({whatsapp:{enabled:!0,categories:{myOrders:!0,reminders:{enabled:!0,subcategories:{reminders_cart:!0,reminders_payment:!0,reminders_restock:!0}},silentPay:!0,recommendations:!0,newOffers:!0,community:!1,feedback:!0,newProductAlerts:!0}},email:{enabled:!0,categories:{myOrders:!0,reminders:{enabled:!0,subcategories:{reminders_cart:!0,reminders_payment:!0,reminders_restock:!0}},silentPay:!0,recommendations:!0,newOffers:!0,community:!0,feedback:!0,newProductAlerts:!0}},sms:{enabled:!0,categories:{myOrders:!0,reminders:{enabled:!1,subcategories:{reminders_cart:!1,reminders_payment:!1,reminders_restock:!1}},silentPay:!1,recommendations:!1,newOffers:!1,community:!1,feedback:!1,newProductAlerts:!1}},push:{enabled:!0,categories:{myOrders:!0,reminders:{enabled:!0,subcategories:{reminders_cart:!0,reminders_payment:!0,reminders_restock:!0}},silentPay:!0,recommendations:!0,newOffers:!0,community:!1,feedback:!0,newProductAlerts:!0}},desktop:{enabled:!0,categories:{myOrders:!0,reminders:{enabled:!0,subcategories:{reminders_cart:!0,reminders_payment:!0,reminders_restock:!0}},silentPay:!0,recommendations:!0,newOffers:!0,community:!1,feedback:!0,newProductAlerts:!0}},inapp:{enabled:!0,categories:{myOrders:!0,reminders:{enabled:!0,subcategories:{reminders_cart:!0,reminders_payment:!0,reminders_restock:!0}},silentPay:!0,recommendations:!0,newOffers:!0,community:!0,feedback:!0,newProductAlerts:!0}}}),f=[{id:"whatsapp",name:"WhatsApp",icon:Ec,description:"Get instant messages on WhatsApp",color:"text-green-600",bgColor:"bg-green-50"},{id:"email",name:"Email",icon:Ft,description:"Receive notifications via email",color:"text-blue-600",bgColor:"bg-blue-50"},{id:"sms",name:"SMS",icon:dp,description:"Get text messages on your phone",color:"text-orange-600",bgColor:"bg-orange-50"},{id:"push",name:"Push Notifications",icon:Dt,description:"Browser and app notifications",color:"text-purple-600",bgColor:"bg-purple-50"},{id:"desktop",name:"Desktop Notifications",icon:j3,description:"Desktop browser notifications",color:"text-indigo-600",bgColor:"bg-indigo-50"},{id:"inapp",name:"In-App Notifications",icon:Dt,description:"Notifications within the app",color:"text-red-600",bgColor:"bg-red-50"}],p=[{id:"myOrders",title:"My Orders & Deliveries",description:"Order status, shipping updates, real-time delivery status",icon:z3},{id:"reminders",title:"Reminders & Alerts",description:"Alerts for items, payments, and low stock",icon:Dt,expandable:!0,subcategories:[{id:"reminders_cart",title:"Reminders for Items in Cart",description:"Items left in your cart"},{id:"reminders_payment",title:"Reminders for Pending Payments",description:"Payment due reminders"},{id:"reminders_restock",title:"Notify Me When Item Restocks",description:"Out of stock item notifications"}]},{id:"silentPay",title:"Silent Payment Monitoring",description:"Confirmation and status of silent payment tracking (Razorpay)",icon:Xt},{id:"recommendations",title:"Recommendations from CS Store",description:"Product suggestions based on viewing and purchase history",icon:ct},{id:"newProductAlerts",title:"New Product Alerts",description:"Be the first to know when new products are added to CS Store",icon:Tc},{id:"newOffers",title:"New Offers & Promotions",description:"Exclusive deals, discounts, and upcoming sales",icon:mo},{id:"community",title:"CS Store Community",description:"Reviews, Q&A, and community interaction updates",icon:ct},{id:"feedback",title:"Feedback & Review Requests",description:"Reminders to rate products and delivery experience",icon:Xt}];w.useEffect(()=>{d&&h(d)},[d]);const y=async(b,x,g,k)=>{const C=g?`${b}-${x}-${g}`:`${b}-${x}`;n(S=>new Set([...S,C]));try{const S=m[b]||{enabled:!0,categories:{}},A=S.categories||{};let E={...A};if(g){if(x==="reminders"){const P=A.reminders||{enabled:!0,subcategories:{}},O={...P.subcategories||{},[g]:k};E={...E,reminders:{...P,subcategories:O}}}}else if(x==="reminders"){const P=A.reminders||{enabled:!1,subcategories:{reminders_cart:!1,reminders_payment:!1,reminders_restock:!1}},O=k??!1,R={...P.subcategories||{},reminders_cart:O,reminders_payment:O,reminders_restock:O};E={...E,reminders:{...P,enabled:O,subcategories:R}}}else E={...E,[x]:k};const T={...S,categories:E},M={...m,[b]:T};h(M),await u({preferences:M}).unwrap(),o("Preferences updated")}catch(S){l("Failed to save preferences"),console.error("Save error:",S)}finally{setTimeout(()=>{n(S=>{const A=new Set(S);return A.delete(C),A})},1e3)}},j=b=>{i(x=>{const g=new Set(x);return g.has(b)?g.delete(b):g.add(b),g})},N=f.find(b=>b.id===e),v=m[e];return c?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading preferences..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"flex items-center gap-3 justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ao,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notification Preferences"}),s.jsx("p",{className:"text-gray-600",children:"Manage how you receive notifications"})]})]})})})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"flex gap-8",children:[s.jsx("div",{className:"w-80 flex-shrink-0",children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Channels"}),s.jsx("div",{className:"space-y-2",children:f.map(b=>{const x=b.icon,g=e===b.id;return s.jsx(B.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:s.jsx("button",{onClick:()=>t(b.id),className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 ${g?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${b.bgColor}`,children:s.jsx(x,{className:`h-5 w-5 ${b.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:b.name}),s.jsx("p",{className:"text-sm text-gray-500",children:b.description})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:g&&s.jsx(Lr,{className:"h-4 w-4 text-gray-400"})})]})})},b.id)})})]})})}),s.jsx("div",{className:"flex-1",children:s.jsx(Ua,{mode:"wait",children:s.jsxs(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("div",{className:"flex items-center gap-4",children:N&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`p-3 rounded-lg ${N.bgColor}`,children:s.jsx(N.icon,{className:`h-6 w-6 ${N.color}`})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:N.name}),s.jsx("p",{className:"text-gray-600",children:e==="whatsapp"?"Get instant messages on your CS Store registered WhatsApp number":`Receive notifications via ${N.name.toLowerCase()}`})]})]})})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-4",children:p.map(b=>{var C,S,A,E;const x=a.has(b.id),g=b.icon;let k=!1;return b.id==="reminders"?k=((S=(C=v==null?void 0:v.categories)==null?void 0:C.reminders)==null?void 0:S.enabled)||!1:k=((A=v==null?void 0:v.categories)==null?void 0:A[b.id])||!1,s.jsx("div",{className:"border border-gray-200 rounded-lg",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx("div",{className:"p-2 bg-gray-50 rounded-lg",children:s.jsx(g,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:b.title}),s.jsx("p",{className:"text-sm text-gray-600",children:b.description})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[r.has(`${e}-${b.id}`)&&s.jsx("div",{className:"flex items-center gap-2 text-sm text-green-600",children:s.jsx(Es,{className:"h-4 w-4"})}),s.jsx("label",{className:"flex items-center cursor-pointer",children:s.jsx("input",{type:"checkbox",checked:k,onChange:T=>y(e,b.id,void 0,T.target.checked),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),b.expandable&&s.jsx("button",{onClick:()=>j(b.id),className:"p-1 hover:bg-gray-100 rounded",children:x?s.jsx(Xj,{className:"h-4 w-4 text-gray-400"}):s.jsx(Sa,{className:"h-4 w-4 text-gray-400"})})]})]}),s.jsx(Ua,{children:b.expandable&&x&&s.jsx(B.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-4 ml-12 space-y-3 border-l-2 border-gray-100 pl-4",children:(E=b.subcategories)==null?void 0:E.map(T=>{var O,R,L;const M=((L=(R=(O=v==null?void 0:v.categories)==null?void 0:O.reminders)==null?void 0:R.subcategories)==null?void 0:L[T.id])||!1,P=`${e}-${b.id}-${T.id}`;return s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-800",children:T.title}),s.jsx("p",{className:"text-sm text-gray-600",children:T.description})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[r.has(P)&&s.jsx("div",{className:"flex items-center gap-2 text-sm text-green-600",children:s.jsx(Es,{className:"h-4 w-4"})}),s.jsx("label",{className:"flex items-center cursor-pointer",children:s.jsx("input",{type:"checkbox",checked:M,onChange:U=>y(e,b.id,T.id,U.target.checked),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})})]})]},T.id)})})})]})},b.id)})})})]},e)})})]})})]})},$y=()=>{const e=tt(),t=ce(),{isAuthenticated:r}=de(P=>P.auth),[n,a]=w.useState(!1),[i,o]=w.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[l,d]=w.useState({old:!1,new:!1,confirm:!1}),{data:c}=qn(void 0,{skip:!r}),{data:u,isLoading:m,refetch:h}=Hj(void 0,{skip:!r}),[f]=Wj(),[p,{isLoading:y}]=K5(),[j,{isLoading:N}]=Y5(),{currency:v,setCurrency:b}=jA(),{language:x,setLanguage:g}=Ya(),[k,C]=w.useState({orderUpdates:!0,promotions:!1,newsletter:!0,sms:!0});w.useEffect(()=>{u&&C({orderUpdates:u.orderUpdates??!0,promotions:u.promotions??!1,newsletter:u.newsletter??!0,sms:u.sms??!0})},[u]);const S=async P=>{var R;const O={...k,[P]:!k[P]};C(O);try{await f(O).unwrap(),ae.success("Notification preferences updated")}catch(L){ae.error(((R=L==null?void 0:L.data)==null?void 0:R.message)||"Failed to update preferences"),C(k)}},A=P=>{d(O=>({...O,[P]:!O[P]}))},E=async()=>{var L;const{oldPassword:P,newPassword:O,confirmPassword:R}=i;if(!P||!O){ae.error("All fields are required");return}if(O!==R){ae.error("New passwords do not match");return}if(O.length<6){ae.error("New password must be at least 6 characters");return}try{await p({currentPassword:P,newPassword:O}).unwrap(),ae.success("Password changed successfully"),a(!1),o({oldPassword:"",newPassword:"",confirmPassword:""})}catch(U){ae.error(((L=U==null?void 0:U.data)==null?void 0:L.message)||"Failed to change password")}},T=()=>{window.confirm("Are you sure you want to logout?")&&(localStorage.clear(),sessionStorage.clear(),e(en()),t("/"),ae.success("Logged out successfully"))},M=async()=>{var O;if(window.confirm("Are you sure you want to delete your account? This action cannot be undone and will permanently remove all your data."))try{await j(void 0).unwrap(),ae.success("Account deleted successfully"),localStorage.clear(),sessionStorage.clear(),e(en()),t("/")}catch(R){ae.error(((O=R==null?void 0:R.data)==null?void 0:O.message)||"Failed to delete account")}};return m?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[s.jsx(ms,{variant:"text",width:"40%"}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsx(ms,{variant:"rectangular",height:60}),s.jsx(ms,{variant:"rectangular",height:60}),s.jsx(ms,{variant:"rectangular",height:60})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[s.jsx(ms,{variant:"text",width:"40%"}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsx(ms,{variant:"rectangular",height:50}),s.jsx(ms,{variant:"rectangular",height:50})]})]})]})]})}):r?s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-10",children:[s.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white py-4 px-4 shadow-sm sticky top-0 z-10",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("/account"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Ce,{className:"h-5 w-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your account preferences"})]})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Dt,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Notification Preferences"})]}),m?s.jsx("p",{className:"text-sm text-gray-500",children:"Loading preferences"}):s.jsx("div",{className:"space-y-4",children:[{key:"orderUpdates",label:"Order Updates",desc:"Order status changes"},{key:"promotions",label:"Promotions",desc:"Special offers & deals"},{key:"newsletter",label:"Newsletter",desc:"Weekly updates"},{key:"sms",label:"SMS Notifications",desc:"Delivery updates via SMS"}].map(P=>s.jsxs("div",{className:"flex items-center justify-between py-3 border-b last:border-b-0",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:P.label}),s.jsx("p",{className:"text-sm text-gray-500",children:P.desc})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:k[P.key],onChange:()=>S(P.key),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:h-5 after:w-5 after:rounded-full after:transition-all peer-checked:after:translate-x-full"})]})]},P.key))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(or,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Appearance"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Language"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Select your preferred language"})]}),s.jsxs("select",{value:x,onChange:P=>g(P.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"language-select",children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"hi",children:""}),s.jsx("option",{value:"te",children:""})]})]}),s.jsxs("div",{className:"flex items-center justify-between py-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Currency"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Display prices in your currency"})]}),s.jsxs("select",{value:v,onChange:P=>b(P.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"currency-select",children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"INR",children:"INR ()"}),s.jsx("option",{value:"EUR",children:"EUR ()"}),s.jsx("option",{value:"GBP",children:"GBP ()"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Xt,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Privacy & Security"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("button",{onClick:()=>a(!0),className:"w-full flex items-center justify-between px-4 py-3 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ia,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{children:"Change Password"})]}),s.jsx("span",{className:"text-gray-400",children:""})]}),s.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ap,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{children:"Download My Data"})]}),s.jsx("span",{className:"text-gray-400",children:""})]}),s.jsxs("button",{onClick:T,className:"w-full flex items-center justify-between px-4 py-3 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ce,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{children:"Logout"})]}),s.jsx("span",{className:"text-gray-400",children:""})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(mp,{className:"h-5 w-5 text-red-600"}),s.jsx("h2",{className:"text-lg font-semibold text-red-800",children:"Danger Zone"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Permanently delete your account and all associated data."}),s.jsxs("button",{onClick:M,disabled:N,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2","data-testid":"delete-account-button",children:[N&&s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:N?"Deleting...":"Delete Account"})]})]}),s.jsx("div",{className:"text-center mt-8",children:s.jsxs("div",{className:"inline-flex items-center text-gray-600 space-x-2",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsxs("span",{children:["Need help? Visit our"," ",s.jsx("a",{href:"/help-support",className:"text-blue-600 font-medium",children:"Help Center"})]})]})})]}),n&&s.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 p-4",children:s.jsxs(B.div,{initial:{scale:.95},animate:{scale:1},className:"bg-white p-6 rounded-xl w-full max-w-md shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Change Password"}),s.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",onClick:()=>a(!1),children:s.jsx(pt,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Current Password"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:l.old?"text":"password",value:i.oldPassword,onChange:P=>o(O=>({...O,oldPassword:P.target.value})),className:"w-full border px-3 py-2 rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>A("old"),className:"absolute right-3 top-1/2 -translate-y-1/2",children:l.old?s.jsx(ka,{className:"h-4 w-4 text-gray-500"}):s.jsx(or,{className:"h-4 w-4 text-gray-500"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"New Password"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:l.new?"text":"password",value:i.newPassword,onChange:P=>o(O=>({...O,newPassword:P.target.value})),className:"w-full border px-3 py-2 rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>A("new"),className:"absolute right-3 top-1/2 -translate-y-1/2",children:l.new?s.jsx(ka,{className:"h-4 w-4 text-gray-500"}):s.jsx(or,{className:"h-4 w-4 text-gray-500"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Confirm New Password"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:l.confirm?"text":"password",value:i.confirmPassword,onChange:P=>o(O=>({...O,confirmPassword:P.target.value})),className:"w-full border px-3 py-2 rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>A("confirm"),className:"absolute right-3 top-1/2 -translate-y-1/2",children:l.confirm?s.jsx(ka,{className:"h-4 w-4 text-gray-500"}):s.jsx(or,{className:"h-4 w-4 text-gray-500"})})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsxs("button",{onClick:E,disabled:y,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2","data-testid":"change-password-submit",children:[y&&s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:y?"Changing...":"Change Password"})]}),s.jsx("button",{onClick:()=>a(!1),className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center text-center p-6",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold mb-2",children:"Login Required"}),s.jsx("p",{className:"mb-4 text-gray-600",children:"Please log in to access your settings."}),s.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg",onClick:()=>t("/login"),children:"Go to Login"})]})})},w_=()=>{const e=tt(),{isAuthenticated:t}=de(i=>i.auth),{data:r,isLoading:n,error:a}=t6(void 0,{skip:!t});return w.useEffect(()=>{if(t&&r&&!n){console.log(" Loading cart from MongoDB backend:",r);const i=r.cart||r;e(Co({items:(i.items||[]).map(o=>({id:o.productId._id||o.productId,name:o.name,price:o.price,quantity:o.quantity,image:o.image})),total:i.totalAmount||0,itemCount:i.itemCount||0}))}},[t,r,n,e]),{isLoadingCart:n,cartError:a}},N_=()=>(w_(),null);function S_({children:e}){const{user:t,isAuthenticated:r}=de(y=>y.auth),n=Jt(),{data:a,isLoading:i,isFetching:o,isUninitialized:l}=qn(void 0,{skip:!r});if(t!=null&&t.isAdmin||(t==null?void 0:t.role)==="admin")return s.jsx(s.Fragment,{children:e});if(r&&(i||o||l))return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});const c=typeof(a==null?void 0:a.name)=="string"&&a.name.trim().length>0||typeof(a==null?void 0:a.fullName)=="string"&&a.fullName.trim().length>0,u=typeof(a==null?void 0:a.phone)=="string"&&a.phone.trim().length>0,m=c&&u,h=n.pathname.startsWith("/onboarding"),f=n.pathname.startsWith("/auth/callback"),p=n.pathname==="/"||n.pathname==="/signup"||n.pathname==="/login"||n.pathname==="/download-app"||n.pathname==="/contact-us"||n.pathname==="/about-us"||n.pathname==="/careers"||n.pathname==="/cs-store-stories"||n.pathname==="/corporate-information"||n.pathname.startsWith("/auth/callback");return r&&!m&&!h&&!p&&!f?s.jsx(ir,{to:"/onboarding/complete-profile",replace:!0}):s.jsx(s.Fragment,{children:e})}function k_(){const{isAuthenticated:e,user:t}=de(a=>a.auth),r=Jt(),n=typeof window<"u"&&localStorage.getItem("isLoggingOut")==="true";if(e&&(t!=null&&t.isAdmin||(t==null?void 0:t.role)==="admin")&&!n){if(r.pathname==="/onboarding/complete-profile")return s.jsx(ir,{to:"/admin",replace:!0});if(!r.pathname.startsWith("/admin")&&!r.pathname.startsWith("/auth/callback")&&r.pathname!=="/dashboard")return s.jsx(ir,{to:"/admin",replace:!0})}return s.jsxs(qf,{children:[s.jsx(ne,{path:"/",element:s.jsx(_l,{children:s.jsx(wy,{})})}),s.jsx(ne,{path:"/login",element:s.jsx(_l,{children:s.jsx(wy,{})})}),s.jsx(ne,{path:"/dashboard",element:e?t!=null&&t.isAdmin||(t==null?void 0:t.role)==="admin"?s.jsx(ir,{to:"/admin",replace:!0}):s.jsx(S_,{children:s.jsx(_l,{hideBottomNav:!0,children:s.jsx(OM,{})})}):s.jsx(ir,{to:"/",replace:!0})}),s.jsx(ne,{path:"/*",element:s.jsx(C_,{})})]})}function C_(){return s.jsx(_l,{children:s.jsxs(qf,{children:[s.jsx(ne,{path:"/products",element:s.jsx(IM,{})}),s.jsx(ne,{path:"/search",element:s.jsx(f_,{})}),s.jsx(ne,{path:"/product/:id",element:s.jsx(FM,{})}),s.jsx(ne,{path:"/cart",element:s.jsx(kt,{children:s.jsx(QM,{})})}),s.jsx(ne,{path:"/payment",element:s.jsx(kt,{children:s.jsx(XM,{})})}),s.jsx(ne,{path:"/checkout",element:s.jsx(kt,{children:s.jsx(rL,{})})}),s.jsx(ne,{path:"/orders",element:s.jsx(kt,{children:s.jsx(nL,{})})}),s.jsx(ne,{path:"/orders/:orderId",element:s.jsx(kt,{children:s.jsx(aL,{})})}),s.jsx(ne,{path:"/order/:id",element:s.jsx(kt,{children:s.jsx(mL,{})})}),s.jsx(ne,{path:"/profile",element:s.jsx(kt,{children:s.jsx(hL,{})})}),s.jsx(ne,{path:"/onboarding/complete-profile",element:s.jsx(kt,{children:s.jsx(c_,{})})}),s.jsx(ne,{path:"/signup",element:s.jsx(gL,{})}),s.jsx(ne,{path:"/become-seller",element:s.jsx(m_,{})}),s.jsx(ne,{path:"/download-app",element:s.jsx(h_,{})}),s.jsx(ne,{path:"/contact-us",element:s.jsx(p_,{})}),s.jsx(ne,{path:"/customer-care",element:s.jsx(b_,{})}),s.jsx(ne,{path:"/notification-preferences",element:s.jsx(kt,{redirectTo:"/login",children:s.jsx(j_,{})})}),s.jsx(ne,{path:"/settings",element:s.jsx(kt,{children:s.jsx($y,{})})}),s.jsx(ne,{path:"/about-us",element:s.jsx(x_,{})}),s.jsx(ne,{path:"/careers",element:s.jsx(g_,{})}),s.jsx(ne,{path:"/cs-store-stories",element:s.jsx(y_,{})}),s.jsx(ne,{path:"/corporate-information",element:s.jsx(v_,{})}),s.jsx(ne,{path:"/menu",element:s.jsx(yL,{})}),s.jsx(ne,{path:"/admin",element:s.jsx(Fs,{children:s.jsx(vL,{})})}),s.jsx(ne,{path:"/admin/products",element:s.jsx(Fs,{children:s.jsx(jL,{})})}),s.jsx(ne,{path:"/admin/products/new",element:s.jsx(Fs,{children:s.jsx(NL,{})})}),s.jsx(ne,{path:"/admin/users",element:s.jsx(Fs,{children:s.jsx(SL,{})})}),s.jsx(ne,{path:"/admin/orders",element:s.jsx(Fs,{children:s.jsx(kL,{})})}),s.jsx(ne,{path:"/admin/orders/:orderId",element:s.jsx(Fs,{children:s.jsx(CL,{})})}),s.jsx(ne,{path:"/admin/delivery-boys",element:s.jsx(Fs,{children:s.jsx(PL,{})})}),s.jsx(ne,{path:"/admin/analytics",element:s.jsx(Fs,{children:s.jsx(AL,{})})}),s.jsx(ne,{path:"/admin/payments",element:s.jsx(Fs,{children:s.jsx(TL,{})})}),s.jsx(ne,{path:"/admin-profile",element:s.jsx(Fs,{children:s.jsx(EL,{})})}),s.jsx(ne,{path:"/delivery/signup",element:s.jsx(WL,{})}),s.jsx(ne,{path:"/delivery/login",element:s.jsx(QL,{})}),s.jsx(ne,{path:"/delivery",element:s.jsx(Dy,{})}),s.jsx(ne,{path:"/delivery/dashboard",element:s.jsx(Dy,{})}),s.jsx(ne,{path:"/delivery-selfie",element:s.jsx(GL,{})}),s.jsx(ne,{path:"/delivery-profile",element:s.jsx(KL,{})}),s.jsx(ne,{path:"/delivery/emergency",element:s.jsx(YL,{})}),s.jsx(ne,{path:"/delivery/help-center",element:s.jsx(JL,{})}),s.jsx(ne,{path:"/ways-to-earn",element:s.jsx(XL,{})}),s.jsx(ne,{path:"/refer-and-earn",element:s.jsx(ZL,{})}),s.jsx(ne,{path:"/help-support",element:s.jsx(e_,{})}),s.jsx(ne,{path:"/message-center",element:s.jsx(t_,{})}),s.jsx(ne,{path:"/delivery-settings",element:s.jsx(s_,{})}),s.jsx(ne,{path:"/admin-login",element:s.jsx(ir,{to:"/login",replace:!0})}),s.jsx(ne,{path:"/admin/login",element:s.jsx(ir,{to:"/login",replace:!0})}),s.jsx(ne,{path:"/categories",element:s.jsx(r_,{})}),s.jsx(ne,{path:"/account",element:s.jsx(kt,{children:s.jsx(Iy,{})})}),s.jsx(ne,{path:"/account/profile",element:s.jsx(kt,{children:s.jsx(Iy,{})})}),s.jsx(ne,{path:"/account/profile/edit",element:s.jsx(kt,{children:s.jsx(n_,{})})}),s.jsx(ne,{path:"/account/settings",element:s.jsx(kt,{children:s.jsx($y,{})})}),s.jsx(ne,{path:"/account/notifications",element:s.jsx(kt,{children:s.jsx(i_,{})})}),s.jsx(ne,{path:"/addresses",element:s.jsx(kt,{children:s.jsx(fL,{})})}),s.jsx(ne,{path:"/auth/callback",element:s.jsx(o_,{})}),s.jsx(ne,{path:"/test-otp",element:s.jsx(d_,{})}),s.jsx(ne,{path:"/debug",element:s.jsx(u_,{})}),s.jsx(ne,{path:"*",element:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Page not found"}),s.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-700 underline",children:"Go to Home"})]})})})]})})}function P_(){return s.jsx(Z4,{store:Cc,children:s.jsx(ZR,{children:s.jsx(NA,{children:s.jsx(oP,{children:s.jsx(bA,{children:s.jsxs(Uk,{children:[s.jsx(aP,{position:"top-center",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}}}}),s.jsx(N_,{}),s.jsx(qf,{children:s.jsx(ne,{path:"/*",element:s.jsx(k_,{})})})]})})})})})})}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>e.forEach(t=>t.unregister()));sm.createRoot(document.getElementById("root")).render(s.jsx(P_,{}));
